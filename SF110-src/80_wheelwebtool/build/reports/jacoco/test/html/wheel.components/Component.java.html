<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Component.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">80_wheelwebtool</a> &gt; <a href="index.source.html" class="el_package">wheel.components</a> &gt; <span class="el_source">Component.java</span></div><h1>Component.java</h1><pre class="source lang-java linenums">/*
Copyright (c) 2007-2008, Henri Frilund

All rights reserved.

Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
    * Neither the name of the &lt;ORGANIZATION&gt; nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
&quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
package wheel.components;

import wheel.AbstractEngine;
import wheel.IEngine;
import wheel.WheelException;
import wheel.util.DynamicSelectModel;
import wheel.util.InitialFieldValue;
import wheel.util.AbstractDateConversionHandler;

import java.io.UnsupportedEncodingException;
import java.net.URLEncoder;
import java.util.*;
import java.text.SimpleDateFormat;

/**
 * The main API for Wheel. Contains most of the methods to manipulate the component tree for the page/component.
 * @author Henri Frilund
 */
public abstract class Component {
<span class="fc" id="L43">    private static final XmlEntityRef NBSP = new XmlEntityRef(&quot;nbsp&quot;);</span>
    private Component parent;
    private LinkedList&lt;Component&gt; children;
    private String componentId;
    private List&lt;CharSequence&gt; renderHints;
    List&lt;String&gt; internalRenderHints;
    private List&lt;ActionExpression&gt; actions;
    private Map&lt;String,Component&gt; components;
    private Map&lt;String,String&gt; xhtmlAttributes;
    private boolean generatedId;
    private ComponentCreator componentCreator;


    /**
     * Minimum constructor for components that have given id's instead of generated ones.
     * @param componentId The identifier for this component.
     */
<span class="fc" id="L60">    public Component(String componentId) {</span>
<span class="pc bpc" id="L61" title="1 of 4 branches missed.">        if (componentId == null || componentId.length() == 0)</span>
<span class="fc" id="L62">            this.componentId = this.getClass().getName().replace('.', '_');</span>
        else
<span class="fc" id="L64">            this.componentId = componentId;</span>
<span class="fc" id="L65">    }</span>

    /**
     * Minimum constructor for components that have a generated component id.
     * @param parent The component to which this new component will be added to.
     */
<span class="nc" id="L71">    public Component(Component parent) {</span>
<span class="nc" id="L72">        this.parent = parent;</span>
<span class="nc" id="L73">        this.componentId = parent.getPage()._generateComponentId(this);</span>
<span class="nc" id="L74">    }</span>

    /**
     * Creates a new component with the given parent component and the given component id.
     * @param parent The component to which this new component will be added to.The component to which this new component will be added to.
     * @param componentId The identifier for this component.
     */
<span class="nc" id="L81">    public Component(Component parent, String componentId) {</span>
<span class="nc" id="L82">        this.parent = parent;</span>

<span class="nc bnc" id="L84" title="All 4 branches missed.">        if (componentId != null &amp;&amp; componentId.length() &gt; 0)</span>
<span class="nc" id="L85">            this.componentId = componentId;</span>
        else
<span class="nc" id="L87">            this.componentId = parent.getPage()._generateComponentId(this);</span>

<span class="nc bnc" id="L89" title="All 4 branches missed.">        if (!generatedId &amp;&amp; !(this instanceof FormElement))</span>
<span class="nc" id="L90">            this.componentId = _wrapComponentId(componentId);</span>
<span class="nc" id="L91">    }</span>

    /**
     * Creates a new component with the given parent component, given component id and given render hint.
     * @param parent The component to which this new component will be added to.The component to which this new component will be added to.
     * @param componentId The identifier for this component.
     * @param renderHint Instruction on how to render this component.
     */
<span class="nc" id="L99">    public Component(Component parent, String componentId, CharSequence renderHint) {</span>
<span class="nc" id="L100">        this.parent = parent;</span>

<span class="nc bnc" id="L102" title="All 4 branches missed.">        if (componentId != null &amp;&amp; componentId.length() &gt; 0)</span>
<span class="nc" id="L103">            this.componentId = componentId;</span>
        else
<span class="nc" id="L105">            this.componentId = parent.getPage()._generateComponentId(this);</span>

<span class="nc bnc" id="L107" title="All 4 branches missed.">        if (!generatedId &amp;&amp; !(this instanceof FormElement))</span>
<span class="nc" id="L108">            this.componentId = _wrapComponentId(componentId);</span>

<span class="nc" id="L110">        renderHint(renderHint);</span>
<span class="nc" id="L111">    }</span>

    /**
     * Returns the identitfier for this component. Every component must have a component id, either a given one or a generated one.
     * @return
     */
    public String getComponentId() {
<span class="fc" id="L118">        return componentId;</span>
    }

    /**
     * Returns the short classname of the component class. Example: for com.foo.bar.Component2 will return Component2.
     * @return
     */
    public String getComponentName() {
<span class="nc" id="L126">        String className = getClass().getName();</span>
<span class="nc" id="L127">        return className.substring(className.lastIndexOf(&quot;.&quot;) + 1, className.length());</span>
    }


    /**
     * Adds a rendering hint to this component. A rendering hint can be either a css class reference or a xhtml specification tag name.
     * Many rendering hints can be given in one input string. Example: &quot;h1 error&quot; will cause the component to render as &amp;lt;h1 class=&quot;error&quot;&amp;gt;.
     * Note that the html tag name doesn't have to be first.
     * @param renderHint
     * @return Will return the component itself to enable method chaining.
     */
    public Component renderHint(CharSequence renderHint) {
<span class="nc bnc" id="L139" title="All 2 branches missed.">        if (renderHints == null)</span>
<span class="nc" id="L140">            renderHints = new LinkedList&lt;CharSequence&gt;();</span>

<span class="nc bnc" id="L142" title="All 4 branches missed.">        if (internalRenderHints != null &amp;&amp; !internalRenderHints.isEmpty())</span>
<span class="nc" id="L143">            internalRenderHints.clear();</span>

<span class="nc bnc" id="L145" title="All 4 branches missed.">        if (renderHint instanceof String &amp;&amp; renderHint.toString().indexOf(&quot; &quot;) != -1) {</span>
<span class="nc" id="L146">            String[] renderHintSplit = renderHint.toString().split(&quot; &quot;);</span>
<span class="nc bnc" id="L147" title="All 2 branches missed.">            for (int i = 0; i &lt; renderHintSplit.length; i++) {</span>
<span class="nc" id="L148">                String s = renderHintSplit[i];</span>

<span class="nc bnc" id="L150" title="All 2 branches missed.">                if (!renderHints.contains(s))</span>
<span class="nc" id="L151">                    renderHints.add(s);</span>
            }
<span class="nc" id="L153">        }</span>
        else {
<span class="nc" id="L155">            String hint = eval(renderHint);</span>

<span class="nc bnc" id="L157" title="All 2 branches missed.">            if (!renderHints.contains(hint))</span>
<span class="nc" id="L158">                renderHints.add(eval(renderHint));</span>
        }

<span class="nc" id="L161">        return this;</span>
    }

    Map&lt;String,String&gt; getAttributes() {
<span class="nc" id="L165">        return xhtmlAttributes;</span>
    }

    /**
     * Adds an xhtml-attribute to the component. No checks are made to ensure the attributes are valid.
     * @param name Name of the attribute
     * @param value Value of the attribute. Can be an el-expression or a message.
     * @return Will return the component itself to enable method chaining.
     */
    public Component attribute(String name, CharSequence value) {
<span class="nc bnc" id="L175" title="All 2 branches missed.">        if (xhtmlAttributes == null)</span>
<span class="nc" id="L176">            xhtmlAttributes = new HashMap&lt;String,String&gt;();</span>

<span class="nc" id="L178">        xhtmlAttributes.put(name, eval(value));</span>

<span class="nc" id="L180">        return this;</span>
    }

    /**
     * Has the same functionality as addAsset(String fileUri) but uses varargs to enable adding multitple attributes at once.
     * @param attributes name/value pairs.
     * @return Will return the component itself to enable method chaining.
     */
    public Component attributes(String... attributes) {
<span class="nc bnc" id="L189" title="All 4 branches missed.">        if (attributes == null || attributes.length == 0)</span>
<span class="nc" id="L190">            return this;</span>

<span class="nc bnc" id="L192" title="All 2 branches missed.">        if (attributes.length % 2 &gt; 0)</span>
<span class="nc" id="L193">            throw new IllegalArgumentException(&quot;Attributes must be given in name, value pairs.&quot;);</span>

<span class="nc bnc" id="L195" title="All 4 branches missed.">        if (attributes.length &gt; 1 &amp;&amp; xhtmlAttributes == null)</span>
<span class="nc" id="L196">            xhtmlAttributes = new HashMap&lt;String,String&gt;();</span>

<span class="nc bnc" id="L198" title="All 2 branches missed.">        for (int i = 0; i &lt; attributes.length; i += 2) {</span>
<span class="nc" id="L199">            String name = attributes[i];</span>
<span class="nc" id="L200">            String value = attributes[i+1];</span>

<span class="nc" id="L202">            xhtmlAttributes.put(name, value);</span>
        }

<span class="nc" id="L205">        return this;</span>
    }


    /**
     * Intended for internal use. Returns all attributes added to this component with calls to attribute() methods.
     * @return
     */
    public Map&lt;String, String&gt; _getXhtmlAttributes() {
<span class="nc" id="L214">        return xhtmlAttributes;</span>
    }

    public Component actionBinding(String actionExpression) {
<span class="nc" id="L218">        ActionExpression action = new ActionExpression(actionExpression);</span>
<span class="nc" id="L219">        action.setOwner(this);</span>
<span class="nc" id="L220">        addAction(action);</span>

<span class="nc" id="L222">        return this;</span>
    }

    public Component actionBinding(ActionExpression actionExpression) {
<span class="nc" id="L226">        actionExpression.setOwner(this);</span>
<span class="nc" id="L227">        addAction(actionExpression);</span>

<span class="nc" id="L229">        return this;</span>
    }


    public ActionExpression action(String expression) {
<span class="nc" id="L234">        return new ActionExpression(expression);</span>
    }


    private void addAction(ActionExpression action) {
<span class="nc bnc" id="L239" title="All 2 branches missed.">        if (actions == null)</span>
<span class="nc" id="L240">            actions = new LinkedList&lt;ActionExpression&gt;();</span>

<span class="nc" id="L242">        ActionExpression existing = _getAction();</span>

<span class="nc bnc" id="L244" title="All 6 branches missed.">        if (existing != null &amp;&amp; existing.isSubmissible() &amp;&amp; !action.isSubmissible()) {</span>
<span class="nc" id="L245">            actions.clear();</span>
        }

<span class="nc" id="L248">        actions.add(action);</span>
<span class="nc" id="L249">    }</span>

    /**
     * Intetnded for internal use. Will return all actions added to this component with addAction() method.
     * @return
     */
    public List&lt;ActionExpression&gt; _getActions() {
<span class="nc" id="L256">        return actions;</span>
    }

    /**
     * Intetnded for internal use. Will the first action added to this component with addAction() method.
     * @return
     */
    public ActionExpression _getAction() {
<span class="nc bnc" id="L264" title="All 4 branches missed.">        if (actions != null &amp;&amp; !actions.isEmpty())</span>
<span class="nc" id="L265">            return actions.get(0);</span>

<span class="nc" id="L267">        return null;</span>
    }

    /**
     * Intended for internal use. Will return all child components.
     * @return
     */
    public List&lt;Component&gt; _getChildren() {
<span class="nc bnc" id="L275" title="All 2 branches missed.">        if (children == null)</span>
<span class="nc" id="L276">            return Collections.EMPTY_LIST;</span>

<span class="nc" id="L278">        return children;</span>
    }

    /**
     * Intended for internal use. Will return all children of this component that implement the Renderable interface.
     * @return
     */
    public List&lt;RenderableComponent&gt; _getRenderableChildren() {
<span class="nc" id="L286">        List&lt;RenderableComponent&gt; result = new LinkedList&lt;RenderableComponent&gt;();</span>

<span class="nc bnc" id="L288" title="All 2 branches missed.">        if (children != null) {</span>
<span class="nc bnc" id="L289" title="All 2 branches missed.">            for (Component component : children) {</span>
<span class="nc bnc" id="L290" title="All 2 branches missed.">                if (component instanceof RenderableComponent)</span>
<span class="nc" id="L291">                    result.add((RenderableComponent)component);</span>
<span class="nc" id="L292">            }</span>
        }

<span class="nc" id="L295">        return result;</span>
    }

    public ComponentCreator create() {
<span class="nc bnc" id="L299" title="All 2 branches missed.">        if (componentCreator == null)</span>
<span class="nc" id="L300">            componentCreator = new ComponentCreator(this);</span>

<span class="nc" id="L302">        return componentCreator;</span>
    }

    /**
     * Intended for internal use. Will return all rendering hints added to this component.
     * @return
     */
    public List&lt;CharSequence&gt; _getRenderHints() {
<span class="nc bnc" id="L310" title="All 2 branches missed.">        if (renderHints == null)</span>
<span class="nc" id="L311">            return Collections.EMPTY_LIST;</span>

<span class="nc" id="L313">        return renderHints;</span>
    }

    /**
     * Adds a non-breaking-space to the component tree.
     * @return Will return the component itself to enable method chaining.
     */
    public Component nbsp() {
<span class="nc" id="L321">        add(NBSP);</span>
<span class="nc" id="L322">        return this;</span>
    }


    /**
     * Removes a component from the list of children for this componnent.
     * @param component The component to remove.
     * @return Will return the component itself to enable method chaining.
     */
    public Component remove(Component component) {
<span class="nc" id="L332">        children.remove(component);</span>
<span class="nc" id="L333">        return this;</span>
    }

    /**
     * Removes a component with the given component id from the list of children for this component.
     * @param componentId
     * @return Will return the component itself to enable method chaining.
     */
    public Component remove(String componentId) {
<span class="nc bnc" id="L342" title="All 2 branches missed.">        if (!components.containsKey(componentId))</span>
<span class="nc" id="L343">            throw new WheelException(&quot;Component with id &quot; + componentId + &quot; does not exist.&quot;, null, this);</span>

<span class="nc" id="L345">        children.remove(components.get(componentId));</span>
<span class="nc" id="L346">        return this;</span>
    }

    /**
     * Adds a Table-component to the component tree and returns it.
     * @return
     */
    public Component table() {
<span class="nc" id="L354">        Table table = new Table(this, null);</span>
<span class="nc" id="L355">        add(table);</span>
<span class="nc" id="L356">        return table;</span>
    }

    public Component caption() {
<span class="nc" id="L360">        throw new WheelException(&quot;Thead component can be added only to a Table.&quot;, this);</span>
    }

    /**
     * Adds a thead-element to a surrounding Table-component. If the surrounding element is not a Table, thorws an exception.
     * @return
     */
    public Component thead() {
<span class="nc" id="L368">        throw new WheelException(&quot;Thead component can be added only to a Table.&quot;, this);</span>
    }

    /**
     * Adds a colgroup-element to a surrounding Table-component. If the surrounding element is not a Table, thorws an exception.
     * @return
     */
    public Component colgroup() {
<span class="nc" id="L376">        throw new WheelException(&quot;Colgroup component can be added only to a Table.&quot;, this);</span>
    }

    /**
     * Adds a col-element to a surrounding TableBlock-component. If the surrounding element is not a TableBlock, thorws an exception.
     * @return
     */
    public Component col() {
<span class="nc" id="L384">        throw new WheelException(&quot;Col component can be added only to a TableBlock.&quot;, this);</span>
    }

    /**
     * Adds a tbody-element to a surrounding Table-component. If the surrounding element is not a Table, thorws an exception.
     * @return
     */
    public Component tbody() {
<span class="nc" id="L392">        throw new WheelException(&quot;Tbody component can be added only to a Table.&quot;, this);</span>
    }

    /**
     * Adds a tfoot-element to a surrounding Table-component. If the surrounding element is not a Table, thorws an exception.
     * @return
     */
    public Component tfoot() {
<span class="nc" id="L400">        throw new WheelException(&quot;Tfoot component can be added only to a Table.&quot;, this);</span>
    }

    /**
     * Adds a tr-element (a row) the a surrounding TableBlock-element. If the surrounding elemenent is not a TableBlock, throws an exception.
     * @return
     */
    public Component tr() {
<span class="nc" id="L408">        throw new WheelException(&quot;Tr component can be added only to a TableBlock.&quot;, this);</span>
    }

    /**
     * Adds a td-element (a column) the a surrounding TableBlock-element. If the surrounding elemenent is not a TableBlock, throws an exception.
     * @return
     */
    public Component td() {
<span class="nc" id="L416">        throw new WheelException(&quot;Td component can be added only to a TableRow.&quot;, this);</span>
    }

    /**
     * Adds a th-element (a header) the a surrounding TableBlock-element. If the surrounding elemenent is not a TableBlock, throws an exception.
     * @return
     */
    public Component th() {
<span class="nc" id="L424">        throw new WheelException(&quot;Th component can be added only to a TableRow.&quot;, this);</span>
    }


    //TODO
    public Component link() {
<span class="nc" id="L430">        Block link = new Block(this);</span>
<span class="nc" id="L431">        link.renderHint(&quot;link&quot;);</span>
<span class="nc" id="L432">        add(link);</span>
<span class="nc" id="L433">        return link;</span>
    }

    public Component meta() {
<span class="nc" id="L437">        Any meta = new Any(this, &quot;meta&quot;);</span>
<span class="nc" id="L438">        add(meta);</span>
<span class="nc" id="L439">        return meta;</span>
    }

    /**
     * Adds an Image-component to the component tree and returns it.
     * @param url Either a full http-url or a filepath inside the web application.
     * @param alt Alt text for the image if it can't be loaded or displayed.
     * @return
     */
    public Component img(String url, String alt) {
<span class="nc" id="L449">        Image image = new Image(this, url, alt);</span>
<span class="nc" id="L450">        add(image);</span>
<span class="nc" id="L451">        return image;</span>
    }

    /**
     * Adds a Block-component to the component tree and returns it.
     * @param renderHint
     * @return
     */
    public Component wBlock(CharSequence renderHint) {
<span class="nc" id="L460">        Block block = new Block(this, &quot;&quot;);</span>
<span class="nc" id="L461">        block.renderHint(renderHint);</span>
<span class="nc" id="L462">        add(block);</span>
<span class="nc" id="L463">        return block;</span>
    }

    //TODO
    public Component label() {
<span class="nc" id="L468">        Block label = new Block(this);</span>
<span class="nc" id="L469">        label.renderHint(&quot;label&quot;);</span>
<span class="nc" id="L470">        add(label);</span>
<span class="nc" id="L471">        return label;</span>
    }

    //TODO
    public Component label(Object text) {
<span class="nc" id="L476">        Label label = new Label(this, text);</span>
<span class="nc" id="L477">        label.renderHint(&quot;label&quot;);</span>
<span class="nc" id="L478">        add(label);</span>
<span class="nc" id="L479">        return label;</span>
    }


    //TODO
    public Component legend() {
<span class="nc" id="L485">        Block legend = new Block(this);</span>
<span class="nc" id="L486">        legend.renderHint(&quot;legend&quot;);</span>
<span class="nc" id="L487">        add(legend);</span>
<span class="nc" id="L488">        return legend;</span>
    }

    //TODO
    public Component legend(Object text) {
<span class="nc" id="L493">        Label legend = new Label(this, text);</span>
<span class="nc" id="L494">        legend.renderHint(&quot;legend&quot;);</span>
<span class="nc" id="L495">        add(legend);</span>
<span class="nc" id="L496">        return legend;</span>
    }

    public Component map(String id) {
<span class="nc" id="L500">        Block map = new Block(this, id);</span>
<span class="nc" id="L501">        map.renderHint(&quot;map&quot;);</span>
<span class="nc" id="L502">        add(map);</span>
<span class="nc" id="L503">        return map;</span>
    }

    public Component noframes() {
<span class="nc" id="L507">        Block noframes = new Block(this);</span>
<span class="nc" id="L508">        noframes.renderHint(&quot;noframes&quot;);</span>
<span class="nc" id="L509">        Block body = new Block(noframes);</span>
<span class="nc" id="L510">        body.renderHint(&quot;body&quot;);</span>
<span class="nc" id="L511">        noframes.add(body);</span>
<span class="nc" id="L512">        add(noframes);</span>

<span class="nc" id="L514">        return body;</span>
    }

    public Component noscript() {
<span class="nc" id="L518">        Block noscript = new Block(this);</span>
<span class="nc" id="L519">        noscript.renderHint(&quot;noscript&quot;);</span>
<span class="nc" id="L520">        add(noscript);</span>
<span class="nc" id="L521">        return noscript;</span>
    }

    public Component object() {
<span class="nc" id="L525">        Block object = new Block(this);</span>
<span class="nc" id="L526">        object.renderHint(&quot;object&quot;);</span>
<span class="nc" id="L527">        add(object);</span>
<span class="nc" id="L528">        return object;</span>
    }

    public Component param(CharSequence name, CharSequence value) {
<span class="nc" id="L532">        Any param = new Any(this, &quot;param&quot;);</span>
<span class="nc" id="L533">        param.attribute(&quot;name&quot;, name);</span>
<span class="nc" id="L534">        param.attribute(&quot;value&quot;, value);</span>
<span class="nc" id="L535">        add(param);</span>
<span class="nc" id="L536">        return param;</span>
    }

    //TODO
    public Component pre() {
<span class="nc" id="L541">        Block pre = new Block(this);</span>
<span class="nc" id="L542">        pre.renderHint(&quot;pre&quot;);</span>
<span class="nc" id="L543">        add(pre);</span>
<span class="nc" id="L544">        return pre;</span>
    }

    //TODO
    public Component pre(Object text) {
<span class="nc" id="L549">        Label pre = new Label(this, text);</span>
<span class="nc" id="L550">        pre.renderHint(&quot;pre&quot;);</span>
<span class="nc" id="L551">        add(pre);</span>
<span class="nc" id="L552">        return pre;</span>
    }

    //TODO
    public Component q() {
<span class="nc" id="L557">        Block q = new Block(this);</span>
<span class="nc" id="L558">        q.renderHint(&quot;q&quot;);</span>
<span class="nc" id="L559">        add(q);</span>
<span class="nc" id="L560">        return q;</span>
    }

    //TODO
    public Component q(Object text) {
<span class="nc" id="L565">        Label q = new Label(this, text);</span>
<span class="nc" id="L566">        q.renderHint(&quot;q&quot;);</span>
<span class="nc" id="L567">        add(q);</span>
<span class="nc" id="L568">        return q;</span>
    }

    //TODO
    public Component s() {
<span class="nc" id="L573">        Block s = new Block(this);</span>
<span class="nc" id="L574">        s.renderHint(&quot;s&quot;);</span>
<span class="nc" id="L575">        add(s);</span>
<span class="nc" id="L576">        return s;</span>
    }

    //TODO
    public Component s(Object text) {
<span class="nc" id="L581">        Label s = new Label(this, text);</span>
<span class="nc" id="L582">        s.renderHint(&quot;s&quot;);</span>
<span class="nc" id="L583">        add(s);</span>
<span class="nc" id="L584">        return s;</span>
    }

    //TODO
    public Component samp() {
<span class="nc" id="L589">        Block samp = new Block(this);</span>
<span class="nc" id="L590">        samp.renderHint(&quot;samp&quot;);</span>
<span class="nc" id="L591">        add(samp);</span>
<span class="nc" id="L592">        return samp;</span>
    }

    //TODO
    public Component samp(Object text) {
<span class="nc" id="L597">        Label samp = new Label(this, text);</span>
<span class="nc" id="L598">        samp.renderHint(&quot;samp&quot;);</span>
<span class="nc" id="L599">        add(samp);</span>
<span class="nc" id="L600">        return samp;</span>
    }

    //TODO
    public Component small() {
<span class="nc" id="L605">        Block small = new Block(this);</span>
<span class="nc" id="L606">        small.renderHint(&quot;small&quot;);</span>
<span class="nc" id="L607">        add(small);</span>
<span class="nc" id="L608">        return small;</span>
    }

    //TODO
    public Component small(Object text) {
<span class="nc" id="L613">        Label small = new Label(this, text);</span>
<span class="nc" id="L614">        small.renderHint(&quot;small&quot;);</span>
<span class="nc" id="L615">        add(small);</span>
<span class="nc" id="L616">        return small;</span>
    }

    //TODO
    public Component strike() {
<span class="nc" id="L621">        Block strike = new Block(this);</span>
<span class="nc" id="L622">        strike.renderHint(&quot;strike&quot;);</span>
<span class="nc" id="L623">        add(strike);</span>
<span class="nc" id="L624">        return strike;</span>
    }

    //TODO
    public Component strike(Object text) {
<span class="nc" id="L629">        Label strike = new Label(this, text);</span>
<span class="nc" id="L630">        strike.renderHint(&quot;strike&quot;);</span>
<span class="nc" id="L631">        add(strike);</span>
<span class="nc" id="L632">        return strike;</span>
    }

    //TODO
    public Component style() {
<span class="nc" id="L637">        Block style = new Block(this);</span>
<span class="nc" id="L638">        style.renderHint(&quot;style&quot;);</span>
<span class="nc" id="L639">        add(style);</span>
<span class="nc" id="L640">        return style;</span>
    }

    //TODO
    public Component sub() {
<span class="nc" id="L645">        Block sub = new Block(this);</span>
<span class="nc" id="L646">        sub.renderHint(&quot;sub&quot;);</span>
<span class="nc" id="L647">        add(sub);</span>
<span class="nc" id="L648">        return sub;</span>
    }

    //TODO
    public Component sub(Object text) {
<span class="nc" id="L653">        Label sub = new Label(this, text);</span>
<span class="nc" id="L654">        sub.renderHint(&quot;sub&quot;);</span>
<span class="nc" id="L655">        add(sub);</span>
<span class="nc" id="L656">        return sub;</span>
    }

    //TODO
    public Component sup() {
<span class="nc" id="L661">        Block sup = new Block(this);</span>
<span class="nc" id="L662">        sup.renderHint(&quot;sup&quot;);</span>
<span class="nc" id="L663">        add(sup);</span>
<span class="nc" id="L664">        return sup;</span>
    }

    //TODO
    public Component sup(Object text) {
<span class="nc" id="L669">        Label sup = new Label(this, text);</span>
<span class="nc" id="L670">        sup.renderHint(&quot;sup&quot;);</span>
<span class="nc" id="L671">        add(sup);</span>
<span class="nc" id="L672">        return sup;</span>
    }

    //TODO
    public Component tt() {
<span class="nc" id="L677">        Block tt = new Block(this);</span>
<span class="nc" id="L678">        tt.renderHint(&quot;tt&quot;);</span>
<span class="nc" id="L679">        add(tt);</span>
<span class="nc" id="L680">        return tt;</span>
    }

    //TODO
    public Component tt(Object text) {
<span class="nc" id="L685">        Label tt = new Label(this, text);</span>
<span class="nc" id="L686">        tt.renderHint(&quot;tt&quot;);</span>
<span class="nc" id="L687">        add(tt);</span>
<span class="nc" id="L688">        return tt;</span>
    }

    //TODO
    public Component u() {
<span class="nc" id="L693">        Block u = new Block(this);</span>
<span class="nc" id="L694">        u.renderHint(&quot;u&quot;);</span>
<span class="nc" id="L695">        add(u);</span>
<span class="nc" id="L696">        return u;</span>
    }

    //TODO
    public Component u(Object text) {
<span class="nc" id="L701">        Label u = new Label(this, text);</span>
<span class="nc" id="L702">        u.renderHint(&quot;u&quot;);</span>
<span class="nc" id="L703">        add(u);</span>
<span class="nc" id="L704">        return u;</span>
    }

    //TODO
    public Component var() {
<span class="nc" id="L709">        Block var = new Block(this);</span>
<span class="nc" id="L710">        var.renderHint(&quot;var&quot;);</span>
<span class="nc" id="L711">        add(var);</span>
<span class="nc" id="L712">        return var;</span>
    }

    //TODO
    public Component var(Object text) {
<span class="nc" id="L717">        Label var = new Label(this, text);</span>
<span class="nc" id="L718">        var.renderHint(&quot;var&quot;);</span>
<span class="nc" id="L719">        add(var);</span>
<span class="nc" id="L720">        return var;</span>
    }



    /**
     * Adds a Text-component to the component tree and returns it. Use this method to add text that might contain entity references like &amp;lt;copy&amp;gt; etc.
     * @param textS
     * @return
     */
    public Component text(Object textS) {
<span class="nc" id="L731">        Text text = new Text(this, textS);</span>
<span class="nc" id="L732">        add(text);</span>
<span class="nc" id="L733">        return text;</span>
    }


    /**
     * Adds an XmlEntityRef-component to the component tree and returns it.
     * @param name Name of the entity without &amp; or ;. Example: entity(&quot;copy&quot;) will produce &amp;amp;copy; when rendered.
     * @return
     */
    public Component entity(String name) {
<span class="nc" id="L743">        XmlEntityRef entity = new XmlEntityRef(name);</span>
<span class="nc" id="L744">        add(entity);</span>
<span class="nc" id="L745">        return entity;</span>
    }



    /**
     * Adds a DateInput component to the component tree and returns it.
     * @param elementName
     * @param datePattern Use the same pattern as in @see java.text.SimpleDateFormat
     * @return
     */
    public FormElement dateInput(String elementName, String datePattern) {
<span class="nc" id="L757">        DateInput dateInput = create().dateInput(elementName, datePattern);</span>
<span class="nc" id="L758">        add(dateInput);</span>
<span class="nc" id="L759">        return dateInput;</span>
    }



    /**
     * Adds a NumberInput-component to the component tree and returns it.
     * This method uses the default number format pattern for the default locale.
     * @param elementName
     * @return
     */
    public FormElement numberInput(String elementName) {
<span class="nc" id="L771">        NumberInput numberInput = create().numberInput(elementName, null);</span>
<span class="nc" id="L772">        add(numberInput);</span>
<span class="nc" id="L773">        return numberInput;</span>
    }

    /**
     * Adds a NumberInput-component to the component tree and returns it.
     * @param elementName
     * @param numberFormat Use the same pattern as in
     * @see java.text.DecimalFormat
     * @return
     */
    public FormElement numberInput(String elementName, CharSequence numberFormat) {
<span class="nc" id="L784">        NumberInput numberInput = create().numberInput(elementName, numberFormat);</span>
<span class="nc" id="L785">        add(numberInput);</span>
<span class="nc" id="L786">        return numberInput;</span>
    }



    /**
     * Adds a Select-component to the component tree and returns it.
     * @param elementName
     * @param model @see ISelectModel
     * @return
     */
    public FormElement select(String elementName, ISelectModel model, CharSequence binding) {
<span class="nc" id="L798">        Select select = create().select(elementName, model, binding);</span>
<span class="nc" id="L799">        add(select);</span>
<span class="nc" id="L800">        return select;</span>
    }


    /**
     * Adds a Select-component in multiselect mode to the component tree and returns it.
     * @param elementName
     * @param model
     * @param binding
     * @return
     */
    public FormElement multiSelect(String elementName, ISelectModel model, CharSequence binding) {
<span class="nc" id="L812">        Select select = create().multiSelect(elementName, model, binding);</span>
<span class="nc" id="L813">        add(select);</span>
<span class="nc" id="L814">        return select;</span>
    }


    //TODO
    public Component head() {
<span class="nc" id="L820">        return getPage().getHead();</span>
    }

    //TODO
    public Component title(String text) {
<span class="nc" id="L825">        Label title = new Label(this, text);</span>
<span class="nc" id="L826">        title._setComponentId(&quot;title&quot;);</span>
<span class="nc" id="L827">        title.renderHint(&quot;title&quot;);</span>

<span class="nc bnc" id="L829" title="All 2 branches missed.">        if (head()._getChildren().contains(title))</span>
<span class="nc" id="L830">            head().remove(title);</span>

<span class="nc" id="L832">        head().add(title);</span>
<span class="nc" id="L833">        return title;</span>
    }

    /**
     * Adds a Hidden-component to the component tree and returns it.
     * @param elementName
     * @return
     */
    public FormElement hidden(String elementName) {
<span class="nc" id="L842">        Hidden hidden = create().hidden(elementName);</span>
<span class="nc" id="L843">        add(hidden);</span>
<span class="nc" id="L844">        return hidden;</span>
    }



    /**
     * Adds a Checkbox-component to the component tree and returns it.
     * @param elementName
     * @return
     */
    public FormElement checkbox(String elementName) {
<span class="nc" id="L855">        Checkbox checkbox = create().checkbox(elementName);</span>
<span class="nc" id="L856">        add(checkbox);</span>
<span class="nc" id="L857">        return checkbox;</span>
    }



    /**
     * Adds a CheckboxGroup-component to the component tree and returns it.
     * @param elementName
     * @param model
     * @return
     */
    public FormElement checkboxGroup(String elementName, ISelectModel model, ElExpression binding) {
<span class="nc" id="L869">        CheckboxGroup checkboxGroup = create().checkboxGroup(elementName, model, binding);</span>
<span class="nc" id="L870">        add(checkboxGroup);</span>
<span class="nc" id="L871">        return checkboxGroup;</span>
    }


    /**
     * Adds a Submit-component to the component tree and returns it.
     * @param elementName
     * @return
     */
    public FormElement submit(String elementName) {
<span class="nc" id="L881">        Submit submit = create().submit(elementName);</span>
<span class="nc" id="L882">        add(submit);</span>
<span class="nc" id="L883">        return submit;</span>
    }

    /**
     * Adds a Submit-component to the component tree and returns it.
     * @param elementName
     * @return
     */
    public FormElement imageSubmit(String elementName, String src) {
<span class="nc" id="L892">        Submit submit = create().imageSubmit(elementName, src);</span>
<span class="nc" id="L893">        add(submit);</span>
<span class="nc" id="L894">        return submit;</span>
    }

    /**
     * Adds a Submit-component to the component tree and returns it.
     * @param elementName
     * @return
     */
    public FormElement reset(String elementName) {
<span class="nc" id="L903">        Submit submit = create().reset(elementName);</span>
<span class="nc" id="L904">        add(submit);</span>
<span class="nc" id="L905">        return submit;</span>
    }



    /**
     * Adds a Radio-component to the component tree and returns it.
     * @param elementName
     * @return
     */
    public FormElement radio(String elementName) {
<span class="nc" id="L916">        Radio radio = create().radio(elementName);</span>
<span class="nc" id="L917">        add(radio);</span>
<span class="nc" id="L918">        return radio;</span>
    }


    /**
     * Adds a RadioGroup-component to the component tree and returns it.
     * @param elementName
     * @param model
     * @param binding
     * @return
     */
    public FormElement radioGroup(String elementName, ISelectModel model, ElExpression binding) {
<span class="nc" id="L930">        RadioGroup radioGroup = create().radioGroup(elementName, model, binding);</span>
<span class="nc" id="L931">        add(radioGroup);</span>
<span class="nc" id="L932">        return radioGroup;</span>
    }

    /**
     * Adds a TextInput-component to the component tree and returns it.
     * @param elementName
     * @return
     */
    public FormElement textInput(String elementName) {
<span class="nc" id="L941">        TextInput textInput = create().textInput(elementName);</span>
<span class="nc" id="L942">        add(textInput);</span>
<span class="nc" id="L943">        return textInput;</span>
    }

    /**
     * Adds a TextInput-component to the component tree and returns it.
     * @param elementName
     * @return
     */
    public FormElement buttonInput(String elementName) {
<span class="nc" id="L952">        TextInput textInput = create().buttonInput(elementName);</span>
<span class="nc" id="L953">        add(textInput);</span>
<span class="nc" id="L954">        return textInput;</span>
    }

    /**
     * Adds a TextInput-component to the component tree and returns it.
     * @param elementName
     * @return
     */
    public FormElement passwordInput(String elementName) {
<span class="nc" id="L963">        TextInput textInput = create().passwordInput(elementName);</span>
<span class="nc" id="L964">        add(textInput);</span>
<span class="nc" id="L965">        return textInput;</span>
    }


    /**
     * Adds a FileInput-component to the component tree and returns it.
     * @param elementName
     * @return
     */
    public FormElement fileInput(String elementName) {
<span class="nc" id="L975">        FileInput fileInput = create().fileInput(elementName);</span>
<span class="nc" id="L976">        add(fileInput);</span>
<span class="nc" id="L977">        return fileInput;</span>
    }

    /**
     * Adds a FileInput-component to the component tree and returns it. Also sets metadata from uploaded file to the given metadataBinding. The bound field must be of type wheel.util.FileUploadMetadata.
     * @param elementName
     * @param metadataBinding
     * @return
     */
    public FormElement fileInput(String elementName, ElExpression metadataBinding) {
<span class="nc" id="L987">        FileInput fileInput = create().fileInput(elementName);</span>
<span class="nc" id="L988">        fileInput.setMetadataBind(metadataBinding);</span>
<span class="nc" id="L989">        add(fileInput);</span>
<span class="nc" id="L990">        return fileInput;</span>
    }


    /**
     * Adds a TextArea-component to the component tree and returns it.
     * @return
     */
    public FormElement textarea(String name) {
<span class="nc" id="L999">        TextArea textArea = create().textarea(name);</span>
<span class="nc" id="L1000">        add(textArea);</span>
<span class="nc" id="L1001">        return textArea;</span>
    }



    /**
     * Adds a Form-component to the component tree and returns it.
     * @param formId
     * @param action What action-method to call on form submit. Use Whee's URL action format here.
     * @return
     */
    public Component form(String formId, ActionExpression action) {
<span class="nc" id="L1013">        Form form = create().form(formId, action);</span>
<span class="nc" id="L1014">        add(form);</span>
<span class="nc" id="L1015">        return form;</span>
    }

    public Component form(String formId) {
<span class="nc" id="L1019">        Form form = create().form(formId);</span>
<span class="nc" id="L1020">        add(form);</span>
<span class="nc" id="L1021">        return form;</span>
    }

    /**
     * Adds a Label-component to the component tree, sets redering hint to &quot;h1&quot; and returns it.
     * @param text
     * @return
     */
    public Component h1(Object text) {
<span class="nc" id="L1030">        Label h1 = new Label(this, text);</span>
<span class="nc" id="L1031">        h1.renderHint(&quot;h1&quot;);</span>
<span class="nc" id="L1032">        add(h1);</span>
<span class="nc" id="L1033">        return h1;</span>
    }


    /**
     * Adds a Block-component to the component tree, sets rendering hint to &quot;h1&quot; and returns it. Use when you need to add some other tags
     * inside a &amp;lt;h*&amp;gt; tag.
     * @return
     */
    public Component h1() {
<span class="nc" id="L1043">        Block h1 = new Block(this);</span>
<span class="nc" id="L1044">        h1.renderHint(&quot;h1&quot;);</span>
<span class="nc" id="L1045">        add(h1);</span>
<span class="nc" id="L1046">        return h1;</span>
    }

    /**
     * Adds a Label-component to the component tree, sets redering hint to &quot;h2&quot; and returns it.
     * @param text
     * @return
     */
    public Component h2(Object text) {
<span class="nc" id="L1055">        Label h2 = new Label(this, text);</span>
<span class="nc" id="L1056">        h2.renderHint(&quot;h2&quot;);</span>
<span class="nc" id="L1057">        add(h2);</span>
<span class="nc" id="L1058">        return h2;</span>
    }

    /**
     * Adds a Block-component to the component tree, sets rendering hint to &quot;h2&quot; and returns it. Use when you need to add some other tags
     * inside a &amp;lt;h*&amp;gt; tag.
     * @return
     */
    public Component h2() {
<span class="nc" id="L1067">        Block h2 = new Block(this);</span>
<span class="nc" id="L1068">        h2.renderHint(&quot;h2&quot;);</span>
<span class="nc" id="L1069">        add(h2);</span>
<span class="nc" id="L1070">        return h2;</span>
    }

    /**
     * Adds a Label-component to the component tree, sets redering hint to &quot;h3&quot; and returns it.
     * @param text
     * @return
     */
    public Component h3(Object text) {
<span class="nc" id="L1079">        Label h3 = new Label(this, text);</span>
<span class="nc" id="L1080">        h3.renderHint(&quot;h3&quot;);</span>
<span class="nc" id="L1081">        add(h3);</span>
<span class="nc" id="L1082">        return h3;</span>
    }

    /**
     * Adds a Block-component to the component tree, sets rendering hint to &quot;h3&quot; and returns it. Use when you need to add some other tags
     * inside a &amp;lt;h*&amp;gt; tag.
     * @return
     */
    public Component h3() {
<span class="nc" id="L1091">        Block h3 = new Block(this);</span>
<span class="nc" id="L1092">        h3.renderHint(&quot;h3&quot;);</span>
<span class="nc" id="L1093">        add(h3);</span>
<span class="nc" id="L1094">        return h3;</span>
    }

    /**
     * Adds a Label-component to the component tree, sets redering hint to &quot;h4&quot; and returns it.
     * @param text
     * @return
     */
    public Component h4(Object text) {
<span class="nc" id="L1103">        Label h4 = new Label(this, text);</span>
<span class="nc" id="L1104">        h4.renderHint(&quot;h4&quot;);</span>
<span class="nc" id="L1105">        add(h4);</span>
<span class="nc" id="L1106">        return h4;</span>
    }

    /**
     * Adds a Block-component to the component tree, sets rendering hint to &quot;h4&quot; and returns it. Use when you need to add some other tags
     * inside a &amp;lt;h*&amp;gt; tag.
     * @return
     */
    public Component h4() {
<span class="nc" id="L1115">        Block h4 = new Block(this);</span>
<span class="nc" id="L1116">        h4.renderHint(&quot;h4&quot;);</span>
<span class="nc" id="L1117">        add(h4);</span>
<span class="nc" id="L1118">        return h4;</span>
    }

    /**
     * Adds a Label-component to the component tree, sets redering hint to &quot;h5&quot; and returns it.
     * @param text
     * @return
     */
    public Component h5(Object text) {
<span class="nc" id="L1127">        Label h5 = new Label(this, text);</span>
<span class="nc" id="L1128">        h5.renderHint(&quot;h5&quot;);</span>
<span class="nc" id="L1129">        add(h5);</span>
<span class="nc" id="L1130">        return h5;</span>
    }

    /**
     * Adds a Block-component to the component tree, sets rendering hint to &quot;h5&quot; and returns it. Use when you need to add some other tags
     * inside a &amp;lt;h*&amp;gt; tag.
     * @return
     */
    public Component h5() {
<span class="nc" id="L1139">        Block h5 = new Block(this);</span>
<span class="nc" id="L1140">        h5.renderHint(&quot;h5&quot;);</span>
<span class="nc" id="L1141">        add(h5);</span>
<span class="nc" id="L1142">        return h5;</span>
    }

    /**
     * Adds a Label-component to the component tree, sets redering hint to &quot;h6&quot; and returns it.
     * @param text
     * @return
     */
    public Component h6(Object text) {
<span class="nc" id="L1151">        Label h6 = new Label(this, text);</span>
<span class="nc" id="L1152">        h6.renderHint(&quot;h6&quot;);</span>
<span class="nc" id="L1153">        add(h6);</span>
<span class="nc" id="L1154">        return h6;</span>
    }

    /**
     * Adds a Block-component to the component tree, sets rendering hint to &quot;h6&quot; and returns it. Use when you need to add some other tags
     * inside a &amp;lt;h*&amp;gt; tag.
     * @return
     */
    public Component h6() {
<span class="nc" id="L1163">        Block h6 = new Block(this);</span>
<span class="nc" id="L1164">        h6.renderHint(&quot;h6&quot;);</span>
<span class="nc" id="L1165">        add(h6);</span>
<span class="nc" id="L1166">        return h6;</span>
    }

    /**
     * Adds a Label-component to the component tree, sets rendering hint to &quot;b&quot; and returns it.
     * @param text
     * @return
     */
    public Component b(Object text) {
<span class="nc" id="L1175">        Label b = new Label(this, text);</span>
<span class="nc" id="L1176">        b.renderHint(&quot;b&quot;);</span>
<span class="nc" id="L1177">        add(b);</span>
<span class="nc" id="L1178">        return b;</span>
    }

    //TODO
    public Component b() {
<span class="nc" id="L1183">        Block b = new Block(this);</span>
<span class="nc" id="L1184">        b.renderHint(&quot;b&quot;);</span>
<span class="nc" id="L1185">        add(b);</span>
<span class="nc" id="L1186">        return b;</span>
    }

    /**
     * Adds a Label-component to the component tree, sets rendering hint to &quot;i&quot; and returns it.
     * @param text
     * @return
     */
    public Component i(Object text) {
<span class="nc" id="L1195">        Label i = new Label(this, text);</span>
<span class="nc" id="L1196">        i.renderHint(&quot;i&quot;);</span>
<span class="nc" id="L1197">        add(i);</span>
<span class="nc" id="L1198">        return i;</span>
    }

    //TODO
    public Component i() {
<span class="nc" id="L1203">        Block i = new Block(this);</span>
<span class="nc" id="L1204">        i.renderHint(&quot;i&quot;);</span>
<span class="nc" id="L1205">        add(i);</span>
<span class="nc" id="L1206">        return i;</span>
    }

    //TODO
    public Component script() {
<span class="nc" id="L1211">        Block script = new Block(this);</span>
<span class="nc" id="L1212">        script.renderHint(&quot;script&quot;);</span>
<span class="nc" id="L1213">        add(script);</span>
<span class="nc" id="L1214">        return script;</span>
    }

    //TODO
    public Component abbr() {
<span class="nc" id="L1219">        Block abbr = new Block(this);</span>
<span class="nc" id="L1220">        abbr.renderHint(&quot;abbr&quot;);</span>
<span class="nc" id="L1221">        add(abbr);</span>
<span class="nc" id="L1222">        return abbr;</span>
    }

    //TODO
    public Component abbr(Object text) {
<span class="nc" id="L1227">        Label abbr = new Label(this, text);</span>
<span class="nc" id="L1228">        abbr.renderHint(&quot;abbr&quot;);</span>
<span class="nc" id="L1229">        add(abbr);</span>
<span class="nc" id="L1230">        return abbr;</span>
    }

    //TODO
    public Component acronym() {
<span class="nc" id="L1235">        Block acronym = new Block(this);</span>
<span class="nc" id="L1236">        acronym.renderHint(&quot;acronym&quot;);</span>
<span class="nc" id="L1237">        add(acronym);</span>
<span class="nc" id="L1238">        return acronym;</span>
    }

    //TODO
    public Component acronym(Object text) {
<span class="nc" id="L1243">        Label acronym = new Label(this, text);</span>
<span class="nc" id="L1244">        acronym.renderHint(&quot;acronym&quot;);</span>
<span class="nc" id="L1245">        add(acronym);</span>
<span class="nc" id="L1246">        return acronym;</span>
    }

    //TODO
    public Component address() {
<span class="nc" id="L1251">        Block address = new Block(this);</span>
<span class="nc" id="L1252">        address.renderHint(&quot;address&quot;);</span>
<span class="nc" id="L1253">        add(address);</span>
<span class="nc" id="L1254">        return address;</span>
    }

    //TODO
    public Component address(Object text) {
<span class="nc" id="L1259">        Label address = new Label(this, text);</span>
<span class="nc" id="L1260">        address.renderHint(&quot;address&quot;);</span>
<span class="nc" id="L1261">        add(address);</span>
<span class="nc" id="L1262">        return address;</span>
    }

    public Component area(String... attributes) {
<span class="nc" id="L1266">        Any area = new Any(this, &quot;area&quot;);</span>
<span class="nc" id="L1267">        area.attributes(attributes);</span>
<span class="nc" id="L1268">        add(area);</span>
<span class="nc" id="L1269">        return area;</span>
    }

    public Component base(CharSequence href) {
<span class="nc" id="L1273">        Any base = new Any(this, &quot;base&quot;);</span>
<span class="nc" id="L1274">        base.attribute(&quot;href&quot;, href);</span>
<span class="nc" id="L1275">        add(base);</span>
<span class="nc" id="L1276">        return base;</span>
    }

    public Component bdo(CharSequence dir) {
<span class="nc" id="L1280">        Block bdo = new Block(this);</span>
<span class="nc" id="L1281">        bdo.renderHint(&quot;bdo&quot;);</span>
<span class="nc" id="L1282">        bdo.attribute(&quot;dir&quot;, dir);</span>
<span class="nc" id="L1283">        add(bdo);</span>
<span class="nc" id="L1284">        return bdo;</span>
    }

    //TODO
    public Component big() {
<span class="nc" id="L1289">        Block big = new Block(this);</span>
<span class="nc" id="L1290">        big.renderHint(&quot;big&quot;);</span>
<span class="nc" id="L1291">        add(big);</span>
<span class="nc" id="L1292">        return big;</span>
    }

    //TODO
    public Component big(Object text) {
<span class="nc" id="L1297">        Label big = new Label(this, text);</span>
<span class="nc" id="L1298">        big.renderHint(&quot;big&quot;);</span>
<span class="nc" id="L1299">        add(big);</span>
<span class="nc" id="L1300">        return big;</span>
    }

    public Component blockquote() {
<span class="nc" id="L1304">        Block blockquote = new Block(this);</span>
<span class="nc" id="L1305">        blockquote.renderHint(&quot;blockquote&quot;);</span>
<span class="nc" id="L1306">        add(blockquote);</span>
<span class="nc" id="L1307">        return blockquote;</span>
    }

    public Component button() {
<span class="nc" id="L1311">        Block button = new Block(this);</span>
<span class="nc" id="L1312">        button.renderHint(&quot;button&quot;);</span>
<span class="nc" id="L1313">        add(button);</span>
<span class="nc" id="L1314">        return button;</span>
    }

    //TODO
    public Component cite() {
<span class="nc" id="L1319">        Block cite = new Block(this);</span>
<span class="nc" id="L1320">        cite.renderHint(&quot;cite&quot;);</span>
<span class="nc" id="L1321">        add(cite);</span>
<span class="nc" id="L1322">        return cite;</span>
    }

    //TODO
    public Component cite(Object text) {
<span class="nc" id="L1327">        Label cite = new Label(this, text);</span>
<span class="nc" id="L1328">        cite.renderHint(&quot;cite&quot;);</span>
<span class="nc" id="L1329">        add(cite);</span>
<span class="nc" id="L1330">        return cite;</span>
    }


    //TODO
    public Component code() {
<span class="nc" id="L1336">        Block code = new Block(this);</span>
<span class="nc" id="L1337">        code.renderHint(&quot;code&quot;);</span>
<span class="nc" id="L1338">        add(code);</span>
<span class="nc" id="L1339">        return code;</span>
    }

    //TODO
    public Component code(Object text) {
<span class="nc" id="L1344">        Label code = new Label(this, text);</span>
<span class="nc" id="L1345">        code.renderHint(&quot;code&quot;);</span>
<span class="nc" id="L1346">        add(code);</span>
<span class="nc" id="L1347">        return code;</span>
    }

    //TODO
    public Component del() {
<span class="nc" id="L1352">        Block del = new Block(this);</span>
<span class="nc" id="L1353">        del.renderHint(&quot;del&quot;);</span>
<span class="nc" id="L1354">        add(del);</span>
<span class="nc" id="L1355">        return del;</span>
    }

    //TODO
    public Component del(Object text) {
<span class="nc" id="L1360">        Label del = new Label(this, text);</span>
<span class="nc" id="L1361">        del.renderHint(&quot;del&quot;);</span>
<span class="nc" id="L1362">        add(del);</span>
<span class="nc" id="L1363">        return del;</span>
    }

    //TODO
    public Component dfn() {
<span class="nc" id="L1368">        Block dfn = new Block(this);</span>
<span class="nc" id="L1369">        dfn.renderHint(&quot;dfn&quot;);</span>
<span class="nc" id="L1370">        add(dfn);</span>
<span class="nc" id="L1371">        return dfn;</span>
    }

    //TODO
    public Component dfn(Object text) {
<span class="nc" id="L1376">        Label dfn = new Label(this, text);</span>
<span class="nc" id="L1377">        dfn.renderHint(&quot;dfn&quot;);</span>
<span class="nc" id="L1378">        add(dfn);</span>
<span class="nc" id="L1379">        return dfn;</span>
    }

    public Component frame(CharSequence src) {
<span class="nc" id="L1383">        getPage().getBody()._getRenderHints().clear();</span>
<span class="nc" id="L1384">        getPage().getBody().renderHint(&quot;frameset&quot;);</span>
<span class="nc" id="L1385">        Any frame = new Any(this, &quot;frame&quot;);</span>
<span class="nc" id="L1386">        frame.attribute(&quot;src&quot;, src);</span>
<span class="nc" id="L1387">        add(frame);</span>
<span class="nc" id="L1388">        return frame;</span>
    }

    public Component body() {
<span class="nc" id="L1392">        return getPage().getBody();</span>
    }

    public Component iframe() {
<span class="nc" id="L1396">        Any iframe = new Any(this, &quot;iframe&quot;);</span>
<span class="nc" id="L1397">        add(iframe);</span>
<span class="nc" id="L1398">        return iframe;</span>
    }

    //TODO
    public Component ins() {
<span class="nc" id="L1403">        Block ins = new Block(this);</span>
<span class="nc" id="L1404">        ins.renderHint(&quot;ins&quot;);</span>
<span class="nc" id="L1405">        add(ins);</span>
<span class="nc" id="L1406">        return ins;</span>
    }

    //TODO
    public Component ins(Object text) {
<span class="nc" id="L1411">        Label ins = new Label(this, text);</span>
<span class="nc" id="L1412">        ins.renderHint(&quot;ins&quot;);</span>
<span class="nc" id="L1413">        add(ins);</span>
<span class="nc" id="L1414">        return ins;</span>
    }

    //TODO
    public Component kbd() {
<span class="nc" id="L1419">        Block kbd = new Block(this);</span>
<span class="nc" id="L1420">        kbd.renderHint(&quot;kdb&quot;);</span>
<span class="nc" id="L1421">        add(kbd);</span>
<span class="nc" id="L1422">        return kbd;</span>
    }

    //TODO
    public Component kbd(Object text) {
<span class="nc" id="L1427">        Label kbd = new Label(this, text);</span>
<span class="nc" id="L1428">        kbd.renderHint(&quot;kbd&quot;);</span>
<span class="nc" id="L1429">        add(kbd);</span>
<span class="nc" id="L1430">        return kbd;</span>
    }



    /**
     * Adds an Any-component to the component tree, sets rendering hint to &quot;hr&quot; and returns it.
     * @return
     */
    public Component hr() {
<span class="nc" id="L1440">        Any hr = new Any(this, &quot;hr&quot;);</span>
<span class="nc" id="L1441">        add(hr);</span>
<span class="nc" id="L1442">        return hr;</span>
    }

    /**
     * Adds a Block-component to the component tree, sets rendering hint to &quot;div&quot; and returns it.
     * @return
     */
    public Component div() {
<span class="nc" id="L1450">        Block div = new Block(this, null);</span>
<span class="nc" id="L1451">        add(div);</span>
<span class="nc" id="L1452">        return div;</span>
    }

    /**
     * Adds a Block-component to the component tree, sets rendering hint to &quot;ul&quot; and returns it.
     * @return
     */
    public Component ul() {
<span class="nc" id="L1460">        Block ul = new Block(this, null);</span>
<span class="nc" id="L1461">        ul.renderHint(&quot;ul&quot;);</span>
<span class="nc" id="L1462">        add(ul);</span>
<span class="nc" id="L1463">        return ul;</span>
    }

    /**
     * Adds a Block-component to the component tree, sets rendering hint to &quot;li&quot; and returns it.
     * @return
     */
    public Component li() {
<span class="nc" id="L1471">        Block li = new Block(this, null);</span>
<span class="nc" id="L1472">        li.renderHint(&quot;li&quot;);</span>
<span class="nc" id="L1473">        add(li);</span>
<span class="nc" id="L1474">        return li;</span>
    }

    //TODO
    public Component li(Object text) {
<span class="nc" id="L1479">        Label li = new Label(this, text);</span>
<span class="nc" id="L1480">        li.renderHint(&quot;li&quot;);</span>
<span class="nc" id="L1481">        add(li);</span>
<span class="nc" id="L1482">        return li;</span>
    }

    /**
     * Adds a Block-component to the component tree, sets rendering hint to &quot;dl&quot; and returns it.
     * @return
     */
    public Component dl() {
<span class="nc" id="L1490">        Block dl = new Block(this, null);</span>
<span class="nc" id="L1491">        dl.renderHint(&quot;dl&quot;);</span>
<span class="nc" id="L1492">        add(dl);</span>
<span class="nc" id="L1493">        return dl;</span>
    }


    /**
     * Adds a Block-component to the component tree, sets rendering hint to &quot;dd&quot; and returns it.
     * @return
     */
    public Component dd() {
<span class="nc" id="L1502">        Block dd = new Block(this, null);</span>
<span class="nc" id="L1503">        dd.renderHint(&quot;dd&quot;);</span>
<span class="nc" id="L1504">        add(dd);</span>
<span class="nc" id="L1505">        return dd;</span>
    }

    //TODO
    public Component dd(Object text) {
<span class="nc" id="L1510">        Label dd = new Label(this, text);</span>
<span class="nc" id="L1511">        dd.renderHint(&quot;dd&quot;);</span>
<span class="nc" id="L1512">        add(dd);</span>
<span class="nc" id="L1513">        return dd;</span>
    }

    /**
     * Adds a Block-component to the component tree, sets rendering hint to &quot;dt&quot; and returns it.
     * @return
     */
    public Component dt() {
<span class="nc" id="L1521">        Block dt = new Block(this, null);</span>
<span class="nc" id="L1522">        dt.renderHint(&quot;dt&quot;);</span>
<span class="nc" id="L1523">        add(dt);</span>
<span class="nc" id="L1524">        return dt;</span>
    }

    //TODO
    public Component dt(Object text) {
<span class="nc" id="L1529">        Label dt = new Label(this, text);</span>
<span class="nc" id="L1530">        dt.renderHint(&quot;dt&quot;);</span>
<span class="nc" id="L1531">        add(dt);</span>
<span class="nc" id="L1532">        return dt;</span>
    }


    /**
     * Adds a Block-component to the component tree, sets rendering hint to &quot;ol&quot; and returns it.
     * @return
     */
    public Component ol() {
<span class="nc" id="L1541">        Block ol = new Block(this, null);</span>
<span class="nc" id="L1542">        ol.renderHint(&quot;ol&quot;);</span>
<span class="nc" id="L1543">        add(ol);</span>
<span class="nc" id="L1544">        return ol;</span>
    }


    /**
     * Adds a Block-component to the component tree, sets rendering hint to &quot;p&quot; and returns it.
     * @return
     */
    public Component p() {
<span class="nc" id="L1553">        Block p = new Block(this, null);</span>
<span class="nc" id="L1554">        p.renderHint(&quot;p&quot;);</span>
<span class="nc" id="L1555">        add(p);</span>
<span class="nc" id="L1556">        return p;</span>
    }

    /**
     * Adds a Label-component to the component tree, sets rendering hint to &quot;p&quot; and returns it.
     * @return
     */
    public Component p(Object text) {
<span class="nc" id="L1564">        Label p = new Label(this, text);</span>
<span class="nc" id="L1565">        p.renderHint(&quot;p&quot;);</span>
<span class="nc" id="L1566">        add(p);</span>
<span class="nc" id="L1567">        return p;</span>
    }

    /**
     * Adds a Block-component to the component tree, sets rendering hint to &quot;span&quot; and returns it.
     * @return
     */
    public Component span() {
<span class="nc" id="L1575">        Block span = new Block(this, null);</span>
<span class="nc" id="L1576">        span.renderHint(&quot;span&quot;);</span>
<span class="nc" id="L1577">        add(span);</span>
<span class="nc" id="L1578">        return span;</span>
    }

    /**
     * Adds a Label-component to the component tree, sets rendering hint to &quot;p&quot; and returns it.
     * @return
     */
    public Component span(Object text) {
<span class="nc" id="L1586">        Label span = new Label(this, text);</span>
<span class="nc" id="L1587">        add(span);</span>
<span class="nc" id="L1588">        return span;</span>
    }

    /**
     * Adds a Block-component to the component tree, sets rendering hint to &quot;fieldset&quot; and returns it.
     * @return
     */
    public Component fieldset() {
<span class="nc" id="L1596">        Block fieldset = new Block(this, null);</span>
<span class="nc" id="L1597">        fieldset.renderHint(&quot;fieldset&quot;);</span>
<span class="nc" id="L1598">        add(fieldset);</span>
<span class="nc" id="L1599">        return fieldset;</span>
    }

    /**
     * Adds a Text-component to the component tree and sets it in cdata-mode causing all the text to be rendered inside a CDATA-section.
     * Useful if you need to output for example javascript-code.
     * @param rawText
     * @return
     */
    public Component rawText(Object rawText) {
<span class="nc" id="L1609">        Text text = new Text(this, rawText);</span>
<span class="nc" id="L1610">        text.renderSelf = false;</span>
<span class="nc" id="L1611">        text.setCdata(true);</span>
<span class="nc" id="L1612">        add(text);</span>
<span class="nc" id="L1613">        return text;</span>
    }

    /**
     * Adds a Text-component to the component tree and sets it in html-mode. In html-mode the Text-component will treat the text as html-code and retain
     * all the html-tags.
     * @param htmlText
     * @return
     */
    public Component htmlText(Object htmlText) {
<span class="nc" id="L1623">        Text text = new Text(this, htmlText);</span>
<span class="nc" id="L1624">        text.renderSelf = false;</span>
<span class="nc" id="L1625">        text.setHtml(true);</span>
<span class="nc" id="L1626">        add(text);</span>
<span class="nc" id="L1627">        return text;</span>
    }



    /**
     * Changes the componentId.
     * @param componentId New component id.
     * @return
     */
    public Component id(String componentId) {
<span class="nc" id="L1638">        Map&lt;String,Component&gt; components = ((Component) _getTopLevelComponent(true)).getComponents();</span>

<span class="nc" id="L1640">        components.remove(getComponentId());</span>

<span class="nc bnc" id="L1642" title="All 4 branches missed.">        if (this instanceof FormElement || this instanceof Form)</span>
<span class="nc" id="L1643">            this.componentId = _wrapComponentId(componentId);</span>
        else
<span class="nc" id="L1645">            this.componentId = _wrapComponentId(componentId);</span>

<span class="nc" id="L1647">        components.put(componentId, this);</span>

<span class="nc bnc" id="L1649" title="All 2 branches missed.">        if (generatedId)</span>
<span class="nc" id="L1650">            generatedId = false;</span>

<span class="nc bnc" id="L1652" title="All 2 branches missed.">        if (this instanceof RenderableComponent) {</span>
<span class="nc" id="L1653">            RenderableComponent renderableComponent = (RenderableComponent)this;</span>
<span class="nc bnc" id="L1654" title="All 4 branches missed.">            if (!getPage().renderGeneratedComponentIds &amp;&amp; !renderableComponent.renderId)</span>
<span class="nc" id="L1655">                renderableComponent.renderId = true;</span>
        }

<span class="nc" id="L1658">        return this;</span>
    }


    /**
     * Intended for internal use. Sets the component id directly bypassing all checks and wrappings.
     * @param componentId
     */
    public void _setComponentId(String componentId) {
<span class="nc" id="L1667">        this.componentId = componentId;</span>
<span class="nc" id="L1668">    }</span>

    /**
     * Returns the parent for this component. If the component is an instance of Page, will return null.
     * @return
     */
    public Component getParent() {
<span class="nc" id="L1675">        return parent;</span>
    }

    /**
     * Intended for internal use. Returns the Form-component (if any) surrounding this component.
     * @param returnSelf If true, will return this component if this instanceof Form.
     * @return
     */
    public Form _getForm(boolean returnSelf) {
<span class="nc bnc" id="L1684" title="All 4 branches missed.">        if (returnSelf &amp;&amp; this instanceof Form)</span>
<span class="nc" id="L1685">            return (Form)this;</span>

<span class="nc" id="L1687">        Component parent = getParent();</span>

<span class="nc bnc" id="L1689" title="All 2 branches missed.">        while (parent != null) {</span>
<span class="nc bnc" id="L1690" title="All 2 branches missed.">            if (parent instanceof Form)</span>
<span class="nc" id="L1691">                return (Form)parent;</span>

<span class="nc" id="L1693">            parent = parent.getParent();</span>
        }

<span class="nc" id="L1696">        return null;</span>
    }

    //TODO
    public Form _getVisibleForm(boolean returnSelf) {
<span class="nc bnc" id="L1701" title="All 4 branches missed.">        if (returnSelf &amp;&amp; this instanceof Form) {</span>
<span class="nc" id="L1702">            Form form = (Form)this;</span>

<span class="nc bnc" id="L1704" title="All 2 branches missed.">            if (form.renderSelf)</span>
<span class="nc" id="L1705">                return form;</span>
        }

<span class="nc" id="L1708">        Component parent = getParent();</span>

<span class="nc bnc" id="L1710" title="All 2 branches missed.">        while (parent != null) {</span>
<span class="nc bnc" id="L1711" title="All 2 branches missed.">            if (parent instanceof Form) {</span>
<span class="nc" id="L1712">                Form form = (Form)parent;</span>

<span class="nc bnc" id="L1714" title="All 2 branches missed.">                if (form.renderSelf)</span>
<span class="nc" id="L1715">                    return form;</span>
            }

<span class="nc" id="L1718">            parent = parent.getParent();</span>
        }

<span class="nc" id="L1721">        return null;</span>
    }

    /**
     * Returns the containing StandaloneComponent. Usually this will return the same objext as getPage(),
     * but for components living inside complex components, this will not return the page.
     * @param returnSelf If true, will return self if this component is the top level component itself, otherwise will return the surrounding complex component.
     * @return
     */
    public StandaloneComponent _getTopLevelComponent(boolean returnSelf) {
<span class="nc bnc" id="L1731" title="All 4 branches missed.">        if ((this instanceof StandaloneComponent) &amp;&amp; returnSelf)</span>
<span class="nc" id="L1732">            return (StandaloneComponent)this;</span>

<span class="nc" id="L1734">        Component parent = getParent();</span>

<span class="nc bnc" id="L1736" title="All 2 branches missed.">        while (parent != null) {</span>
<span class="nc bnc" id="L1737" title="All 2 branches missed.">            if (parent instanceof StandaloneComponent)</span>
<span class="nc" id="L1738">                return (StandaloneComponent)parent;</span>

<span class="nc" id="L1740">            parent = parent.getParent();</span>
        }

<span class="nc" id="L1743">        throw new WheelException(&quot;No top level component found.&quot;, this);</span>
    }

    /**
     * Returns the surrounding page where this component lives.
     * @return
     */
    public StandaloneComponent getPage() {
<span class="nc" id="L1751">        Component parent = getParent();</span>

<span class="nc bnc" id="L1753" title="All 2 branches missed.">        if (parent == null) {</span>
<span class="nc bnc" id="L1754" title="All 2 branches missed.">            if (!(this instanceof StandaloneComponent))</span>
<span class="nc" id="L1755">                return AbstractEngine.getCurrentServer().getpage();</span>

<span class="nc" id="L1757">            return (StandaloneComponent)this;</span>
        }

<span class="nc bnc" id="L1760" title="All 2 branches missed.">        while (parent.getParent() != null) {</span>
<span class="nc" id="L1761">            parent = parent.getParent();</span>
        }

<span class="nc" id="L1764">        return (StandaloneComponent) parent;</span>
    }

    /**
     *
     * @return
     */
    public Map&lt;String, Component&gt; getComponents() {
<span class="nc" id="L1772">        Map&lt;String,Component&gt; componentMap = components;</span>

<span class="nc bnc" id="L1774" title="All 2 branches missed.">        if (!(this instanceof StandaloneComponent))</span>
<span class="nc" id="L1775">            componentMap = _getTopLevelComponent(true).getComponents();</span>

<span class="nc bnc" id="L1777" title="All 2 branches missed.">        if (componentMap == null)</span>
<span class="nc" id="L1778">            return Collections.EMPTY_MAP;</span>

<span class="nc" id="L1780">        return componentMap;</span>
    }

    public Component addFirst(Component component) {
<span class="nc" id="L1784">        return addChild(component, true);</span>
    }


    /**
     * Adds the given component to the component tree.
     * @param component
     * @return Will return the component itself to enable method chaining.
     */
    public Component add(Component component) {
<span class="nc" id="L1794">        return addChild(component, false);</span>
    }

    private Component addChild(Component component, boolean addFirst) {
<span class="nc bnc" id="L1798" title="All 2 branches missed.">        if (!(this instanceof IContainer))</span>
<span class="nc" id="L1799">            throw new WheelException(&quot;Can't add components to a component that is not an instance of IContainer.&quot;, this);</span>

<span class="nc" id="L1801">        component.parent = this;</span>

<span class="nc bnc" id="L1803" title="All 2 branches missed.">        if (component instanceof StandaloneComponent) {</span>
<span class="nc" id="L1804">            StandaloneComponent standaloneComponent = (StandaloneComponent)component;</span>

<span class="nc bnc" id="L1806" title="All 2 branches missed.">            if (standaloneComponent.ajaxComponent)</span>
<span class="nc" id="L1807">                getPage().loadJQuery();</span>

<span class="nc" id="L1809">            standaloneComponent.renderHint(standaloneComponent.getComponentName());</span>

<span class="nc" id="L1811">            getPage().addUsedStandaloneComponent(standaloneComponent);</span>
<span class="nc" id="L1812">            standaloneComponent._injectExposedFields();</span>

<span class="nc" id="L1814">            getEngine()._addComponentType(getPage().getPagePath() + &quot;/&quot; + component.getComponentId(), component.getClass().getName());</span>
            

        }

<span class="nc bnc" id="L1819" title="All 2 branches missed.">        if (children == null)</span>
<span class="nc" id="L1820">            children = new LinkedList&lt;Component&gt;();</span>

<span class="nc bnc" id="L1822" title="All 6 branches missed.">        if ((component instanceof RenderableComponent) &amp;&amp; !getPage().renderGeneratedComponentIds &amp;&amp; component._isGeneratedId())</span>
<span class="nc" id="L1823">            ((RenderableComponent)component).renderId = false;</span>

<span class="nc bnc" id="L1825" title="All 2 branches missed.">        if (component instanceof IBuildableComponent) {</span>
<span class="nc" id="L1826">            IBuildableComponent buildableComponent = (IBuildableComponent) component;</span>

<span class="nc bnc" id="L1828" title="All 2 branches missed.">            if (!buildableComponent._isBuilt()) {</span>
<span class="nc" id="L1829">                buildableComponent.preBuild();</span>
<span class="nc" id="L1830">                getPage()._addPostBuildCallback(buildableComponent);</span>
            }

<span class="nc" id="L1833">            buildableComponent.buildComponent();</span>
<span class="nc" id="L1834">            buildableComponent._setBuilt(true);</span>
        }

<span class="nc bnc" id="L1837" title="All 2 branches missed.">        if (addFirst)</span>
<span class="nc" id="L1838">            children.addFirst(component);</span>
        else
<span class="nc" id="L1840">            children.add(component);</span>

<span class="nc bnc" id="L1842" title="All 2 branches missed.">        if (component instanceof FormElement) {</span>
<span class="nc" id="L1843">            Form form = _getForm(true);</span>

<span class="nc bnc" id="L1845" title="All 2 branches missed.">            if (form == null)</span>
<span class="nc" id="L1846">                throw new WheelException(&quot;Cannot add a form element. No surrounding form found.&quot;, component);</span>

<span class="nc bnc" id="L1848" title="All 2 branches missed.">            if (component instanceof Submit) {</span>
<span class="nc bnc" id="L1849" title="All 2 branches missed.">                if (form._getForm(false) != null) {</span>
<span class="nc" id="L1850">                    ActionExpression action = form.getAction();</span>
<span class="nc" id="L1851">                    action.event(null);</span>
<span class="nc" id="L1852">                    action.submissible(true);</span>
<span class="nc" id="L1853">                    component.actionBinding(action);</span>
                }
            }

<span class="nc" id="L1857">            form.addFormElement((FormElement)component);</span>
<span class="nc" id="L1858">        }</span>
<span class="nc bnc" id="L1859" title="All 2 branches missed.">        else if (component instanceof StandaloneComponent) {</span>
<span class="nc" id="L1860">            StandaloneComponent topLevelComponent = component._getTopLevelComponent(false);</span>

<span class="nc bnc" id="L1862" title="All 4 branches missed.">            if (topLevelComponent != null &amp;&amp; !topLevelComponent.isPage())</span>
<span class="nc" id="L1863">                component._setComponentId(_wrapComponentId(component.getComponentId()));</span>
        }

<span class="nc" id="L1866">        Component topLevelComponent = _getTopLevelComponent(true);</span>

<span class="nc bnc" id="L1868" title="All 2 branches missed.">        if (topLevelComponent.components == null)</span>
<span class="nc" id="L1869">            topLevelComponent.components = new HashMap&lt;String,Component&gt;();</span>

<span class="nc" id="L1871">        topLevelComponent.components.put(component.getComponentId(), component);</span>

<span class="nc" id="L1873">        component.afterAdd();</span>

<span class="nc" id="L1875">        return component;</span>

    }

    Component addInternalRenderHint(String hint) {
<span class="nc bnc" id="L1880" title="All 2 branches missed.">        if (internalRenderHints == null)</span>
<span class="nc" id="L1881">            internalRenderHints = new LinkedList&lt;String&gt;();</span>

<span class="nc" id="L1883">        internalRenderHints.add(hint);</span>

<span class="nc" id="L1885">        return this;</span>
    }

    /**
     * Inteded for internal use. Clears all attributes and child components.
     */
    public synchronized void _clear() {
<span class="nc bnc" id="L1892" title="All 2 branches missed.">        if (children != null)</span>
<span class="nc" id="L1893">            children.clear();</span>

<span class="nc bnc" id="L1895" title="All 2 branches missed.">        if (renderHints != null)</span>
<span class="nc" id="L1896">            renderHints.clear();</span>

<span class="nc bnc" id="L1898" title="All 2 branches missed.">        if (xhtmlAttributes != null)</span>
<span class="nc" id="L1899">            xhtmlAttributes.clear();</span>

<span class="nc bnc" id="L1901" title="All 2 branches missed.">        if (components != null)</span>
<span class="nc" id="L1902">            components.clear();</span>

<span class="nc bnc" id="L1904" title="All 2 branches missed.">        if (internalRenderHints != null)</span>
<span class="nc" id="L1905">            internalRenderHints.clear();</span>

<span class="nc bnc" id="L1907" title="All 2 branches missed.">        if (xhtmlAttributes != null)</span>
<span class="nc" id="L1908">            xhtmlAttributes.clear();</span>

<span class="nc bnc" id="L1910" title="All 2 branches missed.">        if (actions != null)</span>
<span class="nc" id="L1911">            actions.clear();</span>
<span class="nc" id="L1912">    }</span>

    /**
     * Component equality is based on component id.
     * @param o
     * @return
     */
    public boolean equals(Object o) {
<span class="nc bnc" id="L1920" title="All 2 branches missed.">        if (this == o) return true;</span>
<span class="nc bnc" id="L1921" title="All 4 branches missed.">        if (o == null || getClass() != o.getClass()) return false;</span>

<span class="nc" id="L1923">        Component component = (Component) o;</span>

<span class="nc bnc" id="L1925" title="All 6 branches missed.">        if (componentId != null ? !componentId.equals(component.componentId) : component.componentId != null)</span>
<span class="nc" id="L1926">            return false;</span>

<span class="nc" id="L1928">        return true;</span>
    }

    public int hashCode() {
<span class="nc bnc" id="L1932" title="All 2 branches missed.">        return (componentId != null ? componentId.hashCode() : 0);</span>
    }

    /**
     * Adds an Any-component to the component tree, sets rendring hint to &quot;br&quot; and returns it.
     * @return
     */
    public Component br() {
<span class="nc" id="L1940">        Any br = new Any(this, &quot;br&quot;);</span>
<span class="nc" id="L1941">        add(br);</span>
<span class="nc" id="L1942">        return br;</span>
    }


    /**
     * Same as up(), but makes it possible to move more then one level upwards at a time.
     * @param levels How many levels to move upwards.
     * @return
     */
    public Component up(int levels) {
<span class="nc" id="L1952">        Component result = this;</span>

<span class="nc bnc" id="L1954" title="All 2 branches missed.">        for (int i=0; i &lt; levels; i++)</span>
<span class="nc" id="L1955">            result = result.getParent();</span>

<span class="nc" id="L1957">        return result;</span>
    }

    /**
     * Returns the component with the given component id. Note that this only works inside a StandaloneComponent so that you can access only components that
     * are created in same buildComponent() / buildComponent() method. Useful for example for recalling previously created placeholders.
     * @param componentId
     * @return
     */
    public Component get(String componentId) {
<span class="nc" id="L1967">        StandaloneComponent topLevelComponent = _getTopLevelComponent(true);</span>

<span class="nc" id="L1969">        Component component = null;</span>

<span class="nc bnc" id="L1971" title="All 4 branches missed.">        if (!topLevelComponent.isPage() &amp;&amp; topLevelComponent.wrapIds)</span>
<span class="nc" id="L1972">            component = topLevelComponent.getComponents().get(_wrapComponentId(componentId));</span>
        else
<span class="nc" id="L1974">            component = topLevelComponent.getComponents().get(componentId);</span>

<span class="nc bnc" id="L1976" title="All 4 branches missed.">        if (component == null &amp;&amp; !topLevelComponent.isPage()) {</span>
<span class="nc" id="L1977">            topLevelComponent = topLevelComponent._getTopLevelComponent(false);</span>
<span class="nc" id="L1978">            component = topLevelComponent.getComponents().get(componentId);</span>
        }

<span class="nc bnc" id="L1981" title="All 2 branches missed.">        if (component == null)</span>
<span class="nc" id="L1982">            throw new WheelException(&quot;Could not find component with id '&quot; + componentId + &quot;'.&quot;, this);</span>

<span class="nc" id="L1984">        return component;</span>
    }

    /**
     * Finds a component with the given component id.
     * @param componentId
     * @return
     * @throws WheelException if no component was found.
     */
    public Component find(String componentId) {
<span class="nc" id="L1994">        componentId = _wrapComponentId(componentId);</span>

<span class="nc" id="L1996">        Iterator&lt;Component&gt; openLevel = _getChildren().iterator();</span>
<span class="nc" id="L1997">        Stack&lt;Iterator&gt; openLevels = new Stack&lt;Iterator&gt;();</span>

<span class="nc bnc" id="L1999" title="All 2 branches missed.">        while (openLevel.hasNext()) {</span>
<span class="nc" id="L2000">            Component component = openLevel.next();</span>

<span class="nc bnc" id="L2002" title="All 2 branches missed.">            if (component.getComponentId().equals(componentId))</span>
<span class="nc" id="L2003">                return component;</span>

<span class="nc bnc" id="L2005" title="All 2 branches missed.">            if (component._getChildren().size() &gt; 0) {</span>
<span class="nc" id="L2006">                openLevels.push(openLevel);</span>
<span class="nc" id="L2007">                openLevel = component._getChildren().iterator();</span>
            }

<span class="nc bnc" id="L2010" title="All 4 branches missed.">            while (!openLevel.hasNext() &amp;&amp; !openLevels.empty())</span>
<span class="nc" id="L2011">                openLevel = openLevels.pop();</span>

<span class="nc" id="L2013">        }</span>

<span class="nc" id="L2015">        throw new WheelException(&quot;Could not find component with id &quot; + componentId + &quot; on the page.&quot;, this);</span>
    }

    /**
     * TODO
     * @param expression
     * @return
     */
    public List&lt;Component&gt; findAll(ElExpression expression) {
<span class="nc" id="L2024">        List&lt;Component&gt; result = new LinkedList&lt;Component&gt;();</span>

<span class="nc" id="L2026">        Iterator&lt;Component&gt; openLevel = _getChildren().iterator();</span>
<span class="nc" id="L2027">        Stack&lt;Iterator&gt; openLevels = new Stack&lt;Iterator&gt;();</span>

<span class="nc bnc" id="L2029" title="All 2 branches missed.">        while (openLevel.hasNext()) {</span>
<span class="nc" id="L2030">            Component component = openLevel.next();</span>

<span class="nc" id="L2032">            expression.errorMessage(&quot;Could not evaluate finder expression ' &quot; + expression + &quot;'&quot;);</span>

<span class="nc" id="L2034">            Object val = expression.eval(component, this);</span>

<span class="nc bnc" id="L2036" title="All 4 branches missed.">            if (val == null || !(val instanceof Boolean))</span>
<span class="nc" id="L2037">                throw new WheelException(&quot;Finder expression didn't evaluate to a boolean value.&quot;, this);</span>

<span class="nc bnc" id="L2039" title="All 2 branches missed.">            if (((Boolean)val).booleanValue())</span>
<span class="nc" id="L2040">                result.add(component);</span>

<span class="nc bnc" id="L2042" title="All 2 branches missed.">            if (component._getChildren().size() &gt; 0) {</span>
<span class="nc" id="L2043">                openLevels.push(openLevel);</span>
<span class="nc" id="L2044">                openLevel = component._getChildren().iterator();</span>
            }

<span class="nc bnc" id="L2047" title="All 4 branches missed.">            while (!openLevel.hasNext() &amp;&amp; !openLevels.empty())</span>
<span class="nc" id="L2048">                openLevel = openLevels.pop();</span>

<span class="nc" id="L2050">        }</span>

<span class="nc" id="L2052">        return result;</span>
    }


    /**
     * Inteded for internal use. Sets the status of the component id. When true, means that the id for this component
     * was generated.
     * @param generatedId
     */
    public void _setGeneratedId(boolean generatedId) {
<span class="nc" id="L2062">        this.generatedId = generatedId;</span>
<span class="nc" id="L2063">    }</span>

    /**
     * Returns true if the id for this component was generated.
     * @return
     */
    public boolean _isGeneratedId() {
<span class="nc" id="L2070">        return generatedId;</span>
    }


    public String _wrapComponentId(String componentId) {
<span class="nc" id="L2075">        StandaloneComponent topLevelComponent = _getTopLevelComponent(true);</span>

<span class="nc" id="L2077">        StringBuilder sb = new StringBuilder();</span>

<span class="nc bnc" id="L2079" title="All 2 branches missed.">        while (topLevelComponent.wrapIds) {</span>
<span class="nc" id="L2080">            sb.append(topLevelComponent.getComponentId()).append(&quot;_&quot;);</span>
<span class="nc" id="L2081">            topLevelComponent = topLevelComponent._getTopLevelComponent(false);</span>
        }

<span class="nc bnc" id="L2084" title="All 4 branches missed.">        if (this instanceof FormElement &amp;&amp; getPage().wrapFormIds) {</span>
<span class="nc" id="L2085">            sb.setLength(0);</span>
<span class="nc" id="L2086">            sb.append(_getForm(true).getComponentId()).append(&quot;_&quot;);</span>
        }

<span class="nc" id="L2089">        sb.append(componentId);</span>

<span class="nc" id="L2091">        return sb.toString();</span>
    }

    /**
     * Evaluates a String expression. Three different types are supported:
     * @param expression
     * @return Result of the evaluation.
     */
    public String eval(Object expression) {
<span class="nc bnc" id="L2100" title="All 2 branches missed.">        if (expression == null)</span>
<span class="nc" id="L2101">            return &quot;null&quot;;</span>

<span class="nc bnc" id="L2103" title="All 2 branches missed.">        if (expression instanceof ElExpression) {</span>
<span class="nc" id="L2104">            ElExpression el = (ElExpression) expression;</span>
<span class="nc" id="L2105">            el.errorMessage(&quot;Could not evaluate expression &quot; + expression + &quot; in class &quot; + _getTopLevelComponent(true).getClass().getName());</span>
<span class="nc" id="L2106">            Object o = el.eval(_getTopLevelComponent(true), this);</span>

<span class="nc" id="L2108">            InitialFieldValue initialFieldValue = null;</span>

<span class="nc bnc" id="L2110" title="All 2 branches missed.">            if (_getTopLevelComponent(true).initialFieldValues != null)</span>
<span class="nc" id="L2111">                initialFieldValue = _getTopLevelComponent(true).initialFieldValues.get(el.getExpression());</span>

<span class="nc bnc" id="L2113" title="All 2 branches missed.">            if (initialFieldValue != null) {</span>
<span class="nc bnc" id="L2114" title="All 2 branches missed.">                if (o instanceof Number) {</span>
<span class="nc" id="L2115">                    Number number = (Number)o;</span>

<span class="nc bnc" id="L2117" title="All 4 branches missed.">                    if (initialFieldValue.getEmptyValue() != null &amp;&amp; number.toString().equals(initialFieldValue.getEmptyValue()))</span>
<span class="nc" id="L2118">                        return eval(initialFieldValue.getStringReplacement());</span>
<span class="nc bnc" id="L2119" title="All 2 branches missed.">                    else if (number.doubleValue() == 0)</span>
<span class="nc" id="L2120">                        return eval(initialFieldValue.getStringReplacement());</span>
<span class="nc" id="L2121">                }</span>
                else {
<span class="nc bnc" id="L2123" title="All 6 branches missed.">                    if (initialFieldValue.getEmptyValue() != null &amp;&amp; o != null &amp;&amp; o.equals(initialFieldValue.getEmptyValue()))</span>
<span class="nc" id="L2124">                        return eval(initialFieldValue.getStringReplacement());</span>
<span class="nc bnc" id="L2125" title="All 2 branches missed.">                    else if (o == null)</span>
<span class="nc" id="L2126">                        return eval(initialFieldValue.getStringReplacement());</span>
                }
            }
            else {
<span class="nc bnc" id="L2130" title="All 2 branches missed.">                if (o instanceof Number) {</span>
<span class="nc" id="L2131">                    Number number = (Number)o;</span>

<span class="nc bnc" id="L2133" title="All 2 branches missed.">                    if (number.doubleValue() == 0)</span>
<span class="nc" id="L2134">                        return &quot;&quot;;</span>
                }
<span class="nc bnc" id="L2136" title="All 2 branches missed.">                if (o == null)</span>
<span class="nc" id="L2137">                    return &quot;&quot;;</span>
            }

<span class="nc" id="L2140">            return _applyFormat(o);</span>
        }
        else {
<span class="nc" id="L2143">            return expression.toString();</span>
        }
    }



    /**
     * By overriding this method, its possible to apply some formatting to MVEL-evaluations in the eval() method.
     * @param value The result of an MVEL-evaluation.
     * @return A formattetd String based on the input Object.
     */
    public String _applyFormat(Object value) {
<span class="nc" id="L2155">        return value.toString();</span>
    }

    /**
     * Returns the IEngine instance that is serving this request-cycle.
     * @return
     */
    public IEngine getEngine() {
<span class="nc" id="L2163">        return AbstractEngine.getCurrentServer();</span>
    }


    /**
     * Request focus for this component on the browser. Note that only one component on a html page can have focus and
     * it will be the last component to call this method before the page is rendered.
     * @return
     */
    public Component requestFocus() {
<span class="nc" id="L2173">        getPage().setFocus(this);</span>
<span class="nc" id="L2174">        return this;</span>
    }

    /**
     * URL-encodes the given string and returns it.
     * @param string
     * @return
     */
    public String encode(String string) {
        try {
<span class="nc" id="L2184">            return URLEncoder.encode(string, getEngine().getEncoding());</span>
<span class="nc" id="L2185">        } catch (UnsupportedEncodingException e) {</span>
<span class="nc" id="L2186">            throw new WheelException(&quot;Could not encode string '&quot; + string + &quot;'.&quot;, e, this);</span>
        }
    }

    public Component wrapSelf() {
<span class="nc" id="L2191">        Block block = new Block(parent, componentId + &quot;_wrapper&quot;);</span>
<span class="nc" id="L2192">        block._setComponentId(componentId + &quot;_wrapper&quot;);</span>

<span class="nc" id="L2194">        Component originalParent = parent;</span>

<span class="nc" id="L2196">        this.parent.remove(this);</span>
<span class="nc" id="L2197">        block.add(this);</span>

<span class="nc" id="L2199">        parent = block;</span>

<span class="nc" id="L2201">        originalParent.add(block);</span>

<span class="nc" id="L2203">        return this;</span>
    }



    /**
     * Returns a locaiized message with the given key.
     * @param key
     * @return
     * @see wheel.Messages
     */
    public String message(String key) {
<span class="nc" id="L2215">        return _getTopLevelComponent(true).getMessages().getMessage(key);</span>
    }

    /**
     * Returns a localized and parametrized message with all {0...n} escapes replaced with values from the given Object array.
     * @param key
     * @param params
     * @return
     * @see wheel.Messages
     */
    public String message(String key, Object... params) {
<span class="nc" id="L2226">        String message = message(key);</span>

<span class="nc bnc" id="L2228" title="All 2 branches missed.">        for (int i = 0; i &lt; params.length; i++) {</span>
<span class="nc" id="L2229">            Object param = params[i];</span>
<span class="nc" id="L2230">            message = message.replace(&quot;{&quot; + i + &quot;}&quot;, eval(param));</span>
        }

<span class="nc" id="L2233">        return message;</span>
    }

    public Component clasS(CharSequence Class) {
<span class="nc" id="L2237">        return renderHint(Class);</span>
    }

    public Component a(Object text) {
<span class="nc" id="L2241">        Link link = new Link(this, eval(text));</span>
<span class="nc" id="L2242">        add(link);</span>
<span class="nc" id="L2243">        return link;</span>
    }

    public Component a() {
<span class="nc" id="L2247">        Link link = new Link(this, null);</span>
<span class="nc" id="L2248">        add(link);</span>
<span class="nc" id="L2249">        return link;</span>
    }

    public Component em() {
<span class="nc" id="L2253">        Block em = new Block(this);</span>
<span class="nc" id="L2254">        em.renderHint(&quot;em&quot;);</span>
<span class="nc" id="L2255">        add(em);</span>
<span class="nc" id="L2256">        return em;</span>
    }

    public Component em(Object text) {
<span class="nc" id="L2260">        Label em = new Label(this, eval(text));</span>
<span class="nc" id="L2261">        em.renderHint(&quot;em&quot;);</span>
<span class="nc" id="L2262">        add(em);</span>
<span class="nc" id="L2263">        return em;</span>
    }

    public Component strong() {
<span class="nc" id="L2267">        Block strong = new Block(this);</span>
<span class="nc" id="L2268">        strong.renderHint(&quot;strong&quot;);</span>
<span class="nc" id="L2269">        add(strong);</span>
<span class="nc" id="L2270">        return strong;</span>
    }

    public Component strong(Object text) {
<span class="nc" id="L2274">        Label strong = new Label(this, eval(text));</span>
<span class="nc" id="L2275">        strong.renderHint(&quot;strong&quot;);</span>
<span class="nc" id="L2276">        add(strong);</span>
<span class="nc" id="L2277">        return strong;</span>
    }

    /**
     * A lifecycle method that is called after the component has been added to the component tree.
     * When overriding this method, always call super.afterAdd();!!
     */
    public void afterAdd() {

<span class="nc" id="L2286">    }</span>

    /**
     * Creates a placeholder. A placeholder is a Block-component that will not render itself.
     * This makes it possible to leave behind placeholders in the component tree. These placeholders
     * can be passed around for later use. Placeholders can also be accessed with the get() method.
     * @param placeholderId Identifier for the placeholder.
     * @return
     */
    public Block placeholder(String placeholderId) {
<span class="nc" id="L2296">        Block block = new Block(this, placeholderId);</span>
<span class="nc" id="L2297">        block.renderSelf = false;</span>
<span class="nc" id="L2298">        add(block);</span>
<span class="nc" id="L2299">        return block;</span>
    }

    //TODO
    public ElExpression el(String expression) {
<span class="nc" id="L2304">        return new ElExpression(expression);</span>
    }

    //TODO
    public DynamicSelectModel selectModel() {
<span class="nc" id="L2309">        return new DynamicSelectModel();</span>
    }

    public Calendar date() {
<span class="nc" id="L2313">        return AbstractEngine.getCalendar();</span>
    }

    public String dateFormat(String pattern, Object date) {
<span class="nc" id="L2317">        SimpleDateFormat df = AbstractDateConversionHandler.getDateFormat();</span>
<span class="nc" id="L2318">        df.setCalendar(date());</span>

        try {
<span class="nc" id="L2321">            df.applyPattern(pattern);</span>
<span class="nc" id="L2322">        } catch (Exception e) {</span>
<span class="nc" id="L2323">            throw new WheelException(&quot;Failed to initialize SimpleDateFormat with pattern '&quot; + pattern + &quot;'.&quot;, e, this);</span>
<span class="nc" id="L2324">        }</span>

<span class="nc bnc" id="L2326" title="All 2 branches missed.">        if (date instanceof Calendar)</span>
<span class="nc" id="L2327">            return df.format(((Calendar)date).getTime());</span>
<span class="nc bnc" id="L2328" title="All 2 branches missed.">        else if (date instanceof Date)</span>
<span class="nc" id="L2329">            return df.format(date);</span>
<span class="nc bnc" id="L2330" title="All 2 branches missed.">        else if (date instanceof Long) {</span>
<span class="nc" id="L2331">            Calendar c = date();</span>
<span class="nc" id="L2332">            c.setTimeInMillis(((Long)date).longValue());</span>
<span class="nc" id="L2333">            return df.format(c.getTime());</span>
        }
        else {
<span class="nc" id="L2336">            throw new WheelException(&quot;Unsupported type given for dateFormat. Supported types are: Date, Calendar, Long/long .&quot;, this);</span>
        }

    }

    public Component end(String expression) {
<span class="nc" id="L2342">        Component parent = getParent();</span>

<span class="nc bnc" id="L2344" title="All 2 branches missed.">        while(parent != null) {</span>
<span class="nc bnc" id="L2345" title="All 2 branches missed.">            if (!(parent instanceof RenderableComponent)) {</span>
<span class="nc" id="L2346">                parent = parent.getParent();</span>
<span class="nc" id="L2347">                continue;</span>
            }

<span class="nc bnc" id="L2350" title="All 2 branches missed.">            if (parent.getComponentId().equals(expression))</span>
<span class="nc" id="L2351">                return parent.getParent();</span>
                                
<span class="nc bnc" id="L2353" title="All 2 branches missed.">            if (((RenderableComponent)parent).getTagName().equals(expression))</span>
<span class="nc" id="L2354">                return parent.getParent();</span>

<span class="nc bnc" id="L2356" title="All 2 branches missed.">            if (expression.indexOf(&quot; &quot;) != -1) {</span>
<span class="nc" id="L2357">                String[] split = expression.split(&quot; &quot;);</span>
<span class="nc" id="L2358">                int matched = 0;</span>

<span class="nc bnc" id="L2360" title="All 2 branches missed.">                for (int i = 0; i &lt; split.length; i++) {</span>
<span class="nc" id="L2361">                    String s = split[i];</span>

<span class="nc bnc" id="L2363" title="All 2 branches missed.">                    if (parent._getRenderHints().contains(s))</span>
<span class="nc" id="L2364">                        matched++;</span>
                    else
                        break;
                }

<span class="nc bnc" id="L2369" title="All 2 branches missed.">                if (matched == split.length)</span>
<span class="nc" id="L2370">                    return parent.getParent();</span>
<span class="nc" id="L2371">            }</span>
            else {
<span class="nc bnc" id="L2373" title="All 2 branches missed.">                if (parent._getRenderHints().contains(expression))</span>
<span class="nc" id="L2374">                    return parent.getParent();</span>
            }

<span class="nc" id="L2377">            parent = parent.getParent();</span>
        }

<span class="nc" id="L2380">        throw new WheelException(&quot;No corresponding component found for end expression '&quot; + expression + &quot;'.&quot;, this);</span>
    }

    public Component end() {
<span class="nc bnc" id="L2384" title="All 2 branches missed.">        if (getParent() == null)</span>
<span class="nc" id="L2385">            throw new WheelException(&quot;Could not end compoennt, already at root.&quot;, this);</span>

<span class="nc" id="L2387">        return getParent();</span>
    }

    public void _setParent(Component parent) {
<span class="nc" id="L2391">        this.parent = parent;</span>
<span class="nc" id="L2392">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>