<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ColorModel.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">56_jhandballmoves</a> &gt; <a href="index.source.html" class="el_package">visu.handball.moves.model</a> &gt; <span class="el_source">ColorModel.java</span></div><h1>ColorModel.java</h1><pre class="source lang-java linenums">/*
 * Created on 26.01.2007
 * Created by Thomas Halm
 * Copyright (C) 2007  Richard Doerfler, Thomas Halm
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License
 * as published by the Free Software Foundation; either version 2
 * of the License, or (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
 */
package visu.handball.moves.model;

import java.awt.Color;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.security.AccessControlException;
import java.util.ArrayList;
import java.util.List;
import java.util.Properties;

public class ColorModel implements Cloneable {

	private Color fieldColor;

	private Color lineColor;

	private Color selectedPlayerColor;

	private Color attackersColor;

	private Color defendersColor;

	private Color hightlightColor;

	private Color moveColor;

	private Color passColor;

	private Color outlineBallColor;

	private Color fillBallColor;

	private Color eventPointOutlineColor;

	private Color eventPointFillColor;

	private Properties properties;

	public final static String FIELD_COLOR_KEY = &quot;fieldDrawer.field&quot;;

	public final static String LINE_COLOR_KEY = &quot;fieldDrawer.line&quot;;

	public final static String SELECTED_PLAYER_COLOR_KEY = &quot;playerDrawer.selected&quot;;

	public final static String ATTACKERS_COLOR_KEY = &quot;playerDrawer.attackers&quot;;

	public final static String DEFENDERS_COLOR_KEY = &quot;playerDrawer.defenders&quot;;

	public final static String HIGHLIGHT_COLOR_KEY = &quot;drawer.highlight&quot;;

	public final static String MOVE_COLOR_KEY = &quot;eventDrawer.move&quot;;

	public final static String PASS_COLOR_KEY = &quot;eventDrawer.pass&quot;;

	public final static String BALL_OUTLINE_COLOR_KEY = &quot;ballDrawer.outline&quot;;

	public final static String BALL_FILL_COLOR_KEY = &quot;ballDrawer.fill&quot;;

	public final static String EVENT_POINT_OUTLINE_COLOR_KEY = &quot;eventPointDrawer.outline&quot;;

	public final static String EVENT_POINT_FILL_COLOR_KEY = &quot;eventPointDrawer.fill&quot;;

	public final static String PROPERTIES_FILENAME = &quot;jHandballMoves.properties&quot;;

	private List&lt;ColorModelListener&gt; listeners;

<span class="nc" id="L87">	public ColorModel() {</span>
<span class="nc" id="L88">		properties = new Properties();</span>
<span class="nc" id="L89">		loadProperties();</span>
<span class="nc" id="L90">		initColors();</span>
<span class="nc" id="L91">		listeners = new ArrayList&lt;ColorModelListener&gt;();</span>
<span class="nc" id="L92">	}</span>

	public void addColorModelListener(ColorModelListener listener) {
<span class="nc" id="L95">		listeners.add(listener);</span>
<span class="nc" id="L96">	}</span>

	private void fireModelChanged() {
<span class="nc bnc" id="L99" title="All 2 branches missed.">		for (ColorModelListener listener : listeners) {</span>
<span class="nc" id="L100">			listener.colorModelChanged(this);</span>
<span class="nc" id="L101">		}</span>
<span class="nc" id="L102">	}</span>

	private void initColors() {
<span class="nc" id="L105">		fieldColor = new Color(Integer.valueOf(properties</span>
<span class="nc" id="L106">				.getProperty(FIELD_COLOR_KEY)));</span>
<span class="nc" id="L107">		lineColor = new Color(Integer.valueOf(properties</span>
<span class="nc" id="L108">				.getProperty(LINE_COLOR_KEY)));</span>
<span class="nc" id="L109">		selectedPlayerColor = new Color(Integer.valueOf(properties</span>
<span class="nc" id="L110">				.getProperty(SELECTED_PLAYER_COLOR_KEY)));</span>
<span class="nc" id="L111">		attackersColor = new Color(Integer.valueOf(properties</span>
<span class="nc" id="L112">				.getProperty(ATTACKERS_COLOR_KEY)));</span>
<span class="nc" id="L113">		defendersColor = new Color(Integer.valueOf(properties</span>
<span class="nc" id="L114">				.getProperty(DEFENDERS_COLOR_KEY)));</span>
<span class="nc" id="L115">		hightlightColor = new Color(Integer.valueOf(properties.getProperty(</span>
<span class="nc" id="L116">				HIGHLIGHT_COLOR_KEY, String.valueOf(Color.YELLOW.getRGB()))));</span>
<span class="nc" id="L117">		moveColor = new Color(Integer.valueOf(properties.getProperty(</span>
<span class="nc" id="L118">				MOVE_COLOR_KEY, String.valueOf(Color.BLACK.getRGB()))));</span>
<span class="nc" id="L119">		passColor = new Color(Integer.valueOf(properties.getProperty(</span>
<span class="nc" id="L120">				PASS_COLOR_KEY, String.valueOf(Color.LIGHT_GRAY.getRGB()))));</span>
<span class="nc" id="L121">		fillBallColor = new Color(Integer.valueOf(properties.getProperty(</span>
<span class="nc" id="L122">				BALL_FILL_COLOR_KEY, String.valueOf(Color.BLACK.getRGB()))));</span>
<span class="nc" id="L123">		outlineBallColor = new Color(Integer.valueOf(properties.getProperty(</span>
<span class="nc" id="L124">				BALL_OUTLINE_COLOR_KEY, String.valueOf(Color.WHITE.getRGB()))));</span>
<span class="nc" id="L125">		eventPointFillColor = new Color(Integer.valueOf(properties.getProperty(</span>
<span class="nc" id="L126">				EVENT_POINT_FILL_COLOR_KEY, String.valueOf(Color.MAGENTA</span>
<span class="nc" id="L127">						.getRGB()))));</span>
<span class="nc" id="L128">		eventPointOutlineColor = new Color(Integer.valueOf(properties</span>
<span class="nc" id="L129">				.getProperty(EVENT_POINT_OUTLINE_COLOR_KEY, String</span>
<span class="nc" id="L130">						.valueOf(Color.BLACK.getRGB()))));</span>
<span class="nc" id="L131">	}</span>

	public void saveProperties() {
<span class="nc" id="L134">		syncColorWithProperties();</span>
		
		try {
<span class="nc" id="L137">			properties.store(new FileOutputStream(PROPERTIES_FILENAME),</span>
					&quot;jHandballMoves Settings&quot;);
<span class="nc" id="L139">		} catch (Exception e) {</span>
<span class="nc" id="L140">			e.printStackTrace();</span>
<span class="nc" id="L141">		}</span>
<span class="nc" id="L142">	}</span>

	private void syncColorWithProperties() {
<span class="nc" id="L145">		properties.put(FIELD_COLOR_KEY, String.valueOf(fieldColor.getRGB()));</span>
<span class="nc" id="L146">		properties.put(LINE_COLOR_KEY, String.valueOf(lineColor.getRGB()));</span>
<span class="nc" id="L147">		properties.put(SELECTED_PLAYER_COLOR_KEY, String</span>
<span class="nc" id="L148">				.valueOf(selectedPlayerColor.getRGB()));</span>
<span class="nc" id="L149">		properties.put(ATTACKERS_COLOR_KEY, String.valueOf(attackersColor</span>
<span class="nc" id="L150">				.getRGB()));</span>
<span class="nc" id="L151">		properties.put(DEFENDERS_COLOR_KEY, String.valueOf(defendersColor</span>
<span class="nc" id="L152">				.getRGB()));</span>
<span class="nc" id="L153">		properties.put(HIGHLIGHT_COLOR_KEY, String.valueOf(hightlightColor</span>
<span class="nc" id="L154">				.getRGB()));</span>
<span class="nc" id="L155">		properties.put(MOVE_COLOR_KEY, String.valueOf(moveColor.getRGB()));</span>
<span class="nc" id="L156">		properties.put(PASS_COLOR_KEY, String.valueOf(passColor.getRGB()));</span>
<span class="nc" id="L157">		properties.put(BALL_FILL_COLOR_KEY, String.valueOf(fillBallColor</span>
<span class="nc" id="L158">				.getRGB()));</span>
<span class="nc" id="L159">		properties.put(BALL_OUTLINE_COLOR_KEY, String.valueOf(outlineBallColor</span>
<span class="nc" id="L160">				.getRGB()));</span>
<span class="nc" id="L161">		properties.put(EVENT_POINT_FILL_COLOR_KEY, String.valueOf(eventPointFillColor</span>
<span class="nc" id="L162">				.getRGB()));</span>
<span class="nc" id="L163">		properties.put(EVENT_POINT_OUTLINE_COLOR_KEY, String.valueOf(eventPointOutlineColor</span>
<span class="nc" id="L164">				.getRGB()));</span>
<span class="nc" id="L165">	}</span>

	private void loadProperties() {
		try {
<span class="nc" id="L169">		File propertiesFile = new File(PROPERTIES_FILENAME);</span>
<span class="nc bnc" id="L170" title="All 2 branches missed.">		if (!propertiesFile.exists()) {</span>
<span class="nc" id="L171">			getDefaultColors();</span>
		} else {
			try {
<span class="nc" id="L174">				FileInputStream input = new FileInputStream(propertiesFile);</span>
<span class="nc" id="L175">				properties.load(input);</span>
<span class="nc" id="L176">				input.close();</span>
<span class="nc" id="L177">			} catch (Exception e) {</span>
<span class="nc" id="L178">				e.printStackTrace();</span>
<span class="nc" id="L179">			}</span>
		}
<span class="nc" id="L181">		} catch (AccessControlException e) {</span>
			//im Applet brauchen keine Datein geladen werden
<span class="nc" id="L183">			getDefaultColors();</span>
<span class="nc" id="L184">		}</span>

<span class="nc" id="L186">	}</span>

	private void getDefaultColors() {
<span class="nc" id="L189">		properties.setProperty(ColorModel.FIELD_COLOR_KEY, String</span>
<span class="nc" id="L190">				.valueOf(Color.BLUE.getRGB()));</span>
<span class="nc" id="L191">		properties.setProperty(ColorModel.LINE_COLOR_KEY, String</span>
<span class="nc" id="L192">				.valueOf(Color.WHITE.getRGB()));</span>
<span class="nc" id="L193">		properties.setProperty(ColorModel.SELECTED_PLAYER_COLOR_KEY, String</span>
<span class="nc" id="L194">				.valueOf(Color.CYAN.getRGB()));</span>
<span class="nc" id="L195">		properties.setProperty(ColorModel.ATTACKERS_COLOR_KEY, String</span>
<span class="nc" id="L196">				.valueOf(Color.GREEN.getRGB()));</span>
<span class="nc" id="L197">		properties.setProperty(ColorModel.DEFENDERS_COLOR_KEY, String</span>
<span class="nc" id="L198">				.valueOf(Color.RED.getRGB()));</span>
<span class="nc" id="L199">		properties.setProperty(ColorModel.HIGHLIGHT_COLOR_KEY, String</span>
<span class="nc" id="L200">				.valueOf(Color.YELLOW.getRGB()));</span>
<span class="nc" id="L201">		properties.setProperty(ColorModel.MOVE_COLOR_KEY, String</span>
<span class="nc" id="L202">				.valueOf(Color.BLACK.getRGB()));</span>
<span class="nc" id="L203">		properties.setProperty(ColorModel.PASS_COLOR_KEY, String</span>
<span class="nc" id="L204">				.valueOf(Color.LIGHT_GRAY.getRGB()));</span>
<span class="nc" id="L205">		properties.setProperty(ColorModel.BALL_FILL_COLOR_KEY, String</span>
<span class="nc" id="L206">				.valueOf(Color.BLACK.getRGB()));</span>
<span class="nc" id="L207">		properties.setProperty(ColorModel.BALL_OUTLINE_COLOR_KEY, String</span>
<span class="nc" id="L208">				.valueOf(Color.WHITE.getRGB()));</span>
<span class="nc" id="L209">		properties.setProperty(ColorModel.EVENT_POINT_FILL_COLOR_KEY, String</span>
<span class="nc" id="L210">				.valueOf(Color.MAGENTA.getRGB()));</span>
<span class="nc" id="L211">		properties.setProperty(ColorModel.EVENT_POINT_OUTLINE_COLOR_KEY, String</span>
<span class="nc" id="L212">				.valueOf(Color.BLACK.getRGB()));</span>
<span class="nc" id="L213">	}</span>

	public Color getFieldColor() {
<span class="nc" id="L216">		return fieldColor;</span>
	}

	public void setFieldColor(Color fieldColor) {
<span class="nc" id="L220">		this.fieldColor = fieldColor;</span>
<span class="nc" id="L221">		fireModelChanged();</span>
<span class="nc" id="L222">	}</span>

	public Color getLineColor() {
<span class="nc" id="L225">		return lineColor;</span>
	}

	public void setLineColor(Color lineColor) {
<span class="nc" id="L229">		this.lineColor = lineColor;</span>
<span class="nc" id="L230">		fireModelChanged();</span>
<span class="nc" id="L231">	}</span>

	public void resetColors() {
<span class="nc" id="L234">		getDefaultColors();</span>
<span class="nc" id="L235">		initColors();</span>
<span class="nc" id="L236">		fireModelChanged();</span>
<span class="nc" id="L237">	}</span>

	public Color getSelectedPlayerColor() {
<span class="nc" id="L240">		return selectedPlayerColor;</span>
	}

	public void setSelectedPlayerColor(Color selectedPlayerColor) {
<span class="nc" id="L244">		this.selectedPlayerColor = selectedPlayerColor;</span>
<span class="nc" id="L245">		fireModelChanged();</span>
<span class="nc" id="L246">	}</span>

	public Color getAttackersColor() {
<span class="nc" id="L249">		return attackersColor;</span>
	}

	public void setAttackersColor(Color attackersColor) {
<span class="nc" id="L253">		this.attackersColor = attackersColor;</span>
<span class="nc" id="L254">		fireModelChanged();</span>
<span class="nc" id="L255">	}</span>

	public Color getDefendersColor() {
<span class="nc" id="L258">		return defendersColor;</span>
	}

	public void setDefendersColor(Color defendersColor) {
<span class="nc" id="L262">		this.defendersColor = defendersColor;</span>
<span class="nc" id="L263">		fireModelChanged();</span>
<span class="nc" id="L264">	}</span>

	public Color getHightlightColor() {
<span class="nc" id="L267">		return hightlightColor;</span>
	}

	public void setHightlightColor(Color hightlightColor) {
<span class="nc" id="L271">		this.hightlightColor = hightlightColor;</span>
<span class="nc" id="L272">		fireModelChanged();</span>
<span class="nc" id="L273">	}</span>

	public Color getMoveColor() {
<span class="nc" id="L276">		return moveColor;</span>
	}

	public void setMoveColor(Color moveColor) {
<span class="nc" id="L280">		this.moveColor = moveColor;</span>
<span class="nc" id="L281">		fireModelChanged();</span>
<span class="nc" id="L282">	}</span>

	public Color getPassColor() {
<span class="nc" id="L285">		return passColor;</span>
	}

	public void setPassColor(Color passColor) {
<span class="nc" id="L289">		this.passColor = passColor;</span>
<span class="nc" id="L290">		fireModelChanged();</span>
<span class="nc" id="L291">	}</span>

	public Color getFillBallColor() {
<span class="nc" id="L294">		return fillBallColor;</span>
	}

	public void setFillBallColor(Color fillBallColor) {
<span class="nc" id="L298">		this.fillBallColor = fillBallColor;</span>
<span class="nc" id="L299">		fireModelChanged();</span>
<span class="nc" id="L300">	}</span>

	public Color getOutlineBallColor() {
<span class="nc" id="L303">		return outlineBallColor;</span>
	}

	public void setOutlineBallColor(Color outlineBallColor) {
<span class="nc" id="L307">		this.outlineBallColor = outlineBallColor;</span>
<span class="nc" id="L308">		fireModelChanged();</span>
<span class="nc" id="L309">	}</span>

	public Color getEventPointFillColor() {
<span class="nc" id="L312">		return eventPointFillColor;</span>
	}

	public void setEventPointFillColor(Color eventPointFillColor) {
<span class="nc" id="L316">		this.eventPointFillColor = eventPointFillColor;</span>
<span class="nc" id="L317">		fireModelChanged();</span>
<span class="nc" id="L318">	}</span>

	public Color getEventPointOutlineColor() {
<span class="nc" id="L321">		return eventPointOutlineColor;</span>
	}

	public void setEventPointOutlineColor(Color eventPointOutlineColor) {
<span class="nc" id="L325">		this.eventPointOutlineColor = eventPointOutlineColor;</span>
<span class="nc" id="L326">		fireModelChanged();</span>
<span class="nc" id="L327">	}</span>

	public Properties getProperties() {
<span class="nc" id="L330">		syncColorWithProperties();</span>
<span class="nc" id="L331">		return properties;</span>
	}

	public void setProperties(Properties properties) {
<span class="nc" id="L335">		this.properties = properties;</span>
<span class="nc" id="L336">		initColors();</span>
<span class="nc" id="L337">		fireModelChanged();</span>
<span class="nc" id="L338">	}</span>
	
	

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>