<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>MoveEvent.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">56_jhandballmoves</a> &gt; <a href="index.source.html" class="el_package">visu.handball.moves.model</a> &gt; <span class="el_source">MoveEvent.java</span></div><h1>MoveEvent.java</h1><pre class="source lang-java linenums">/*
 * Created on 31.08.2006
 * Created by Richard Doerfler, Thomas Halm
 * Copyright (C) 2006  Richard Doerfler, Thomas Halm
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License
 * as published by the Free Software Foundation; either version 2
 * of the License, or (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
 */

package visu.handball.moves.model;

import java.io.Serializable;

import visu.handball.moves.model.player.Defender;
import visu.handball.moves.model.player.MovePoint;
import visu.handball.moves.model.player.Offender;
import visu.handball.moves.model.player.Player;

/**
 * @author tommy
 * 
 */
public class MoveEvent implements Comparable&lt;MoveEvent&gt;, Serializable {

	private static final long serialVersionUID = -5372891552466311536L;

	/**
	 * Ereignis ist einem Spieler zugeordnet
	 */
	protected Player player;

	/**
	 * Ereignis besitzt eine Sequenz-Nummer (1. Ereignis hat die Sequenz-Nummer
	 * 0)
	 */
	protected int sequenceNr;

	/**
	 * Ereignis kann Verzögerung besitzen, d.h. gleiche Sequenz-Nummer aber
	 * Verzögerung. Erst nach Ablauf der Verzögerung innerhalb einer
	 * Sequenz-Animation wird dieses Ereignis animiert
	 */
	protected int delay;

	protected MovePoint destinationPoint;

	protected MovePoint controlPoint;

	protected int oldPlayerX;

	protected int oldPlayerY;

<span class="nc" id="L64">	protected boolean destinationPointTemporary = true;</span>

<span class="nc" id="L66">	protected boolean controlPointTemporary = true;</span>

<span class="nc" id="L68">	protected boolean marked = false;</span>

	public MoveEvent(Player player, int nr) {
<span class="nc" id="L71">		this(player, nr, 0);</span>
<span class="nc" id="L72">	}</span>

<span class="nc" id="L74">	public MoveEvent(Player player, int nr, int delay) {</span>
<span class="nc" id="L75">		this.player = player;</span>
<span class="nc" id="L76">		this.sequenceNr = nr;</span>
<span class="nc" id="L77">		this.delay = delay;</span>
<span class="nc" id="L78">		destinationPoint = null;</span>
<span class="nc" id="L79">		controlPoint = null;</span>
<span class="nc" id="L80">		oldPlayerX = player.getCurrent_x();</span>
<span class="nc" id="L81">		oldPlayerY = player.getCurrent_y();</span>
<span class="nc" id="L82">	}</span>

	/**
	 * Liefert die Verzögerung des Ereignisses
	 * 
	 * @return delay
	 */
	public int getDelay() {
<span class="nc" id="L90">		return delay;</span>
	}

	/**
	 * Setzt die Verzögerung des Ereignisses
	 * 
	 * @param delay
	 */
	public void setDelay(int delay) {
<span class="nc" id="L99">		this.delay = delay;</span>
<span class="nc" id="L100">	}</span>

	/**
	 * Liefert den zugeordneten Spieler
	 * 
	 * @return player
	 */
	public Player getPlayer() {
<span class="nc" id="L108">		return player;</span>
	}

	/**
	 * Ordnet den uebergebenen Spieler dem Ereignis zu (Es ist fraglich ob, dies
	 * nachträglich noch möglich sein muss)
	 * 
	 * @param player
	 */
	public void setPlayer(Player player) {
<span class="nc" id="L118">		this.player = player;</span>
<span class="nc" id="L119">	}</span>

	/**
	 * Liefert die Sequenz-Nummer, des Ereignisses
	 * 
	 * @return sequence
	 */
	public int getSequenceNr() {
<span class="nc" id="L127">		return sequenceNr;</span>
	}

	/**
	 * Setzt die Sequenz-Nummer auf den übergebenen Wert
	 * 
	 * @param sequenceNr
	 */
	public void setSequenceNr(int sequenceNr) {
<span class="nc" id="L136">		this.sequenceNr = sequenceNr;</span>
<span class="nc" id="L137">	}</span>

	public int compareTo(MoveEvent o) {
<span class="nc bnc" id="L140" title="All 2 branches missed.">		if (sequenceNr &lt; o.sequenceNr)</span>
<span class="nc" id="L141">			return -1;</span>
<span class="nc bnc" id="L142" title="All 2 branches missed.">		else if (sequenceNr &gt; o.sequenceNr)</span>
<span class="nc" id="L143">			return 1;</span>
		else {
<span class="nc bnc" id="L145" title="All 2 branches missed.">			if (delay &lt; o.getDelay()) {</span>
<span class="nc" id="L146">				return -1;</span>
<span class="nc bnc" id="L147" title="All 2 branches missed.">			} else if (delay &gt; o.getDelay()) {</span>
<span class="nc" id="L148">				return 1;</span>
			} else {
<span class="nc bnc" id="L150" title="All 2 branches missed.">				if (player.getPlayerNumber() &lt; o.getPlayer().getPlayerNumber()) {</span>
<span class="nc" id="L151">					return -1;</span>
<span class="nc" id="L152">				} else if (player.getPlayerNumber() &gt; o.getPlayer()</span>
<span class="nc bnc" id="L153" title="All 2 branches missed.">						.getPlayerNumber()) {</span>
<span class="nc" id="L154">					return 1;</span>
<span class="nc bnc" id="L155" title="All 2 branches missed.">				} else if ((player instanceof Offender)</span>
<span class="nc bnc" id="L156" title="All 2 branches missed.">						&amp;&amp; (o.getPlayer() instanceof Defender)) {</span>
<span class="nc" id="L157">					return -1;</span>
<span class="nc bnc" id="L158" title="All 2 branches missed.">				} else if ((player instanceof Defender)</span>
<span class="nc bnc" id="L159" title="All 2 branches missed.">						&amp;&amp; (o.getPlayer() instanceof Offender)) {</span>
<span class="nc" id="L160">					return 1;</span>
				} else {
<span class="nc bnc" id="L162" title="All 4 branches missed.">					if (this instanceof PassEvent &amp;&amp; !(o instanceof PassEvent)) {</span>
<span class="nc" id="L163">						return -1;</span>
<span class="nc bnc" id="L164" title="All 4 branches missed.">					} else if (o instanceof PassEvent &amp;&amp; !(this instanceof PassEvent)) {</span>
<span class="nc" id="L165">						return 1;</span>
					}
					// gleich, kann dann nicht dem sorted-Set hinzugefügt werden
<span class="nc" id="L168">					return 0;</span>
				}
			}
		}
	}

	public void setPoint(MovePoint point, int x, int y) {
<span class="nc bnc" id="L175" title="All 2 branches missed.">		if (point.equals(controlPoint)) {</span>
<span class="nc" id="L176">			setControlPoint(x, y, false);</span>
<span class="nc bnc" id="L177" title="All 2 branches missed.">		} else if (point.equals(destinationPoint)) {</span>
<span class="nc" id="L178">			setDestinationPoint(x, y, false);</span>
		}
<span class="nc" id="L180">	}</span>

	public void setControlPoint(int x, int y, boolean temp) {
<span class="nc" id="L183">		controlPointTemporary = temp;</span>
<span class="nc bnc" id="L184" title="All 2 branches missed.">		if (controlPoint == null) {</span>
<span class="nc" id="L185">			controlPoint = new MovePoint(x, y);</span>
		} else {
<span class="nc" id="L187">			controlPoint.setCurrent_x(x);</span>
<span class="nc" id="L188">			controlPoint.setCurrent_y(y);</span>
		}
<span class="nc" id="L190">	}</span>

	public void setDestinationPoint(int x, int y, boolean temp) {
<span class="nc" id="L193">		destinationPointTemporary = temp;</span>
<span class="nc bnc" id="L194" title="All 2 branches missed.">		if (destinationPoint == null) {</span>
<span class="nc" id="L195">			destinationPoint = new MovePoint(x, y);</span>
		} else {
<span class="nc" id="L197">			destinationPoint.setCurrent_x(x);</span>
<span class="nc" id="L198">			destinationPoint.setCurrent_y(y);</span>
		}
<span class="nc" id="L200">	}</span>

	@Override
	public String toString() {
<span class="nc" id="L204">		String str = &quot;&quot;;</span>
<span class="nc bnc" id="L205" title="All 2 branches missed.">		if (destinationPoint == null) {</span>
<span class="nc" id="L206">			str = &quot;Laufweg nicht definiert&quot;;</span>
		} else {
<span class="nc" id="L208">			str = &quot;Laufweg zu Position (&quot; + destinationPoint.getCurrent_x()</span>
<span class="nc" id="L209">					+ &quot;,&quot; + destinationPoint.getCurrent_y() + &quot;)&quot;;</span>
		}
<span class="nc" id="L211">		return str;</span>
	}

	public int getDestinationX() {
<span class="nc" id="L215">		return destinationPoint.getCurrent_x();</span>
	}

	public int getDestinationY() {
<span class="nc" id="L219">		return destinationPoint.getCurrent_y();</span>
	}

	public MovePoint getControlPoint() {
<span class="nc" id="L223">		return controlPoint;</span>
	}

	public MovePoint getDestinationPoint() {
<span class="nc" id="L227">		return destinationPoint;</span>
	}

	public int getControlPointX() {
<span class="nc" id="L231">		return controlPoint.getCurrent_x();</span>
	}

	public int getControlPointY() {
<span class="nc" id="L235">		return controlPoint.getCurrent_y();</span>
	}

	public boolean isControlPointSet() {
<span class="nc bnc" id="L239" title="All 2 branches missed.">		return !controlPointTemporary;</span>
	}

	public boolean isDestinationPointSet() {
<span class="nc bnc" id="L243" title="All 2 branches missed.">		return !destinationPointTemporary;</span>
	}

	public boolean isMarked() {
<span class="nc" id="L247">		return marked;</span>
	}

	public void setMarked(boolean marked) {
<span class="nc" id="L251">		this.marked = marked;</span>
<span class="nc" id="L252">	}</span>

	@Override
	public boolean equals(Object obj) {
<span class="nc bnc" id="L256" title="All 2 branches missed.">		if (this == obj) {</span>
<span class="nc" id="L257">			return true;</span>
		}

<span class="nc bnc" id="L260" title="All 2 branches missed.">		if (obj == null) {</span>
<span class="nc" id="L261">			return false;</span>
		}

<span class="nc bnc" id="L264" title="All 2 branches missed.">		if (obj.getClass() != getClass())</span>
<span class="nc" id="L265">			return false;</span>

<span class="nc" id="L267">		MoveEvent other = (MoveEvent) obj;</span>
<span class="nc bnc" id="L268" title="All 6 branches missed.">		if (other.getControlPoint() == null ^ this.getControlPoint() == null) {</span>
<span class="nc" id="L269">			return false;</span>
		}

<span class="nc bnc" id="L272" title="All 2 branches missed.">		if (other.getControlPoint() == null) {</span>
			// hier ist dann auch this.getControllPoint == null
<span class="nc bnc" id="L274" title="All 2 branches missed.">			if (other.getDestinationX() != this.getDestinationX()</span>
<span class="nc bnc" id="L275" title="All 2 branches missed.">					|| other.getDestinationY() != this.getDestinationY()</span>
<span class="nc bnc" id="L276" title="All 2 branches missed.">					|| other.getDelay() != this.getDelay()</span>
<span class="nc bnc" id="L277" title="All 2 branches missed.">					|| !other.getPlayer().equals(this.getPlayer())</span>
<span class="nc bnc" id="L278" title="All 2 branches missed.">					|| other.getSequenceNr() != this.getSequenceNr()) {</span>
<span class="nc" id="L279">				return false;</span>
			}
<span class="nc bnc" id="L281" title="All 2 branches missed.">		} else if (other.getControlPointX() != this.getControlPointX()</span>
<span class="nc bnc" id="L282" title="All 2 branches missed.">				|| other.getControlPointY() != this.getControlPointY()</span>
<span class="nc bnc" id="L283" title="All 2 branches missed.">				|| other.getDestinationX() != this.getDestinationX()</span>
<span class="nc bnc" id="L284" title="All 2 branches missed.">				|| other.getDestinationY() != this.getDestinationY()</span>
<span class="nc bnc" id="L285" title="All 2 branches missed.">				|| other.getDelay() != this.getDelay()</span>
<span class="nc bnc" id="L286" title="All 2 branches missed.">				|| !other.getPlayer().equals(this.getPlayer())</span>
<span class="nc bnc" id="L287" title="All 2 branches missed.">				|| other.getSequenceNr() != this.getSequenceNr()) {</span>
<span class="nc" id="L288">			return false;</span>
		}

<span class="nc" id="L291">		return true;</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>