<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>User.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">69_lhamacaw</a> &gt; <a href="index.source.html" class="el_package">macaw.businessLayer</a> &gt; <span class="el_source">User.java</span></div><h1>User.java</h1><pre class="source lang-java linenums">package macaw.businessLayer;

import macaw.system.*;
import macaw.util.ValidationUtility;
import macaw.util.Displayable;

import java.util.ArrayList;

/**
 * 
 * &lt;hr&gt;
 * Copyright 2010 Medical Research Council Unit for Lifelong Health and Ageing
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *      http://www.apache.org/licenses/LICENSE-2.0
 * Unless required by applicable law or agreed to in writing, software 
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.  
 * &lt;hr&gt;
 * @author Kevin Garwood (kgarwood@users.sourceforge.net)
 * @version 1.0	
 */

/*
 * Code Road Map:
 * --------------
 * Code is organised into the following sections.  Wherever possible, 
 * methods are classified based on an order of precedence described in 
 * parentheses (..).  For example, if you're trying to find a method 
 * 'getName(...)' that is both an interface method and an accessor 
 * method, the order tells you it should appear under interface.
 * 
 * Order of 
 * Precedence     Section
 * ==========     ======
 * (1)            Section Constants
 * (2)            Section Properties
 * (3)            Section Construction
 * (7)            Section Accessors and Mutators
 * (6)            Section Errors and Validation
 * (5)            Section Interfaces
 * (4)            Section Overload
 *
 */

public class User implements Displayable {

	// ==========================================
	// Section Constants
	// ==========================================

	// ==========================================
	// Section Properties
	// ==========================================
	private int identifier;
	private String userID;
	private String firstName;
	private String lastName;
	private String affiliation;
	private String addressLine1;
	private String addressLine2;
	private String city;
	private String postCode;
	private String county;
	private String phone;	
	private String email;
	private String status;
	private String password;
		
	// ==========================================
	// Section Construction
	// ==========================================
<span class="fc" id="L76">	public User() {</span>
<span class="fc" id="L77">		init();</span>
<span class="fc" id="L78">	}</span>
	
<span class="fc" id="L80">	public User(String userID, String password) {</span>
<span class="fc" id="L81">		init();</span>
<span class="fc" id="L82">		identifier = 0;</span>
<span class="fc" id="L83">		this.userID = userID;</span>
<span class="fc" id="L84">		this.password = password;</span>
<span class="fc" id="L85">	}</span>
	
	private void init() {
<span class="fc" id="L88">		userID = &quot;&quot;;</span>
<span class="fc" id="L89">		identifier = 0;</span>
<span class="fc" id="L90">		firstName = &quot;&quot;;</span>
<span class="fc" id="L91">		lastName = &quot;&quot;;</span>
<span class="fc" id="L92">		affiliation = &quot;&quot;;</span>
<span class="fc" id="L93">		addressLine1 = &quot;&quot;;</span>
<span class="fc" id="L94">		addressLine2 = &quot;&quot;;</span>
<span class="fc" id="L95">		city = &quot;&quot;;</span>
<span class="fc" id="L96">		postCode = &quot;&quot;;</span>
<span class="fc" id="L97">		county = &quot;&quot;;</span>
<span class="fc" id="L98">		phone = &quot;&quot;;</span>
<span class="fc" id="L99">		email = &quot;&quot;;</span>
			
<span class="fc" id="L101">		status = MacawMessages.getMessage(&quot;user.status.unverified&quot;);</span>
<span class="fc" id="L102">		password = &quot;&quot;;		</span>
		
<span class="fc" id="L104">	}</span>
	
	// ==========================================
	// Section Accessors and Mutators
	// ==========================================

	
	
	/**
	 * @return the identifier
	 */
	public int getIdentifier() {
<span class="nc" id="L116">		return identifier;</span>
	}

	/**
	 * @param identifier the identifier to set
	 */
	public void setIdentifier(int identifier) {
<span class="nc" id="L123">		this.identifier = identifier;</span>
<span class="nc" id="L124">	}</span>

	/**
	 * @return the userID
	 */
	public String getUserID() {
<span class="fc" id="L130">		return userID;</span>
	}

	/**
	 * @param userID the userID to set
	 */
	public void setUserID(String userID) {
<span class="nc" id="L137">		this.userID = userID;</span>
<span class="nc" id="L138">	}</span>

	/**
	 * @return the firstName
	 */
	public String getFirstName() {
<span class="nc" id="L144">		return firstName;</span>
	}

	/**
	 * @param firstName the firstName to set
	 */
	public void setFirstName(String firstName) {
<span class="nc" id="L151">		this.firstName = firstName;</span>
<span class="nc" id="L152">	}</span>

	/**
	 * @return the lastName
	 */
	public String getLastName() {
<span class="nc" id="L158">		return lastName;</span>
	}

	/**
	 * @param lastName the lastName to set
	 */
	public void setLastName(String lastName) {
<span class="nc" id="L165">		this.lastName = lastName;</span>
<span class="nc" id="L166">	}</span>

	/**
	 * @return the affiliation
	 */
	public String getAffiliation() {
<span class="nc" id="L172">		return affiliation;</span>
	}

	/**
	 * @param affiliation the affiliation to set
	 */
	public void setAffiliation(String affiliation) {
<span class="nc" id="L179">		this.affiliation = affiliation;</span>
<span class="nc" id="L180">	}</span>

	/**
	 * @return the addressLine1
	 */
	public String getAddressLine1() {
<span class="nc" id="L186">		return addressLine1;</span>
	}

	/**
	 * @param addressLine1 the addressLine1 to set
	 */
	public void setAddressLine1(String addressLine1) {
<span class="nc" id="L193">		this.addressLine1 = addressLine1;</span>
<span class="nc" id="L194">	}</span>

	/**
	 * @return the addressLine2
	 */
	public String getAddressLine2() {
<span class="nc" id="L200">		return addressLine2;</span>
	}

	/**
	 * @param addressLine2 the addressLine2 to set
	 */
	public void setAddressLine2(String addressLine2) {
<span class="nc" id="L207">		this.addressLine2 = addressLine2;</span>
<span class="nc" id="L208">	}</span>

	/**
	 * @return the city
	 */
	public String getCity() {
<span class="nc" id="L214">		return city;</span>
	}

	/**
	 * @param city the city to set
	 */
	public void setCity(String city) {
<span class="nc" id="L221">		this.city = city;</span>
<span class="nc" id="L222">	}</span>

	/**
	 * @return the postCode
	 */
	public String getPostCode() {
<span class="nc" id="L228">		return postCode;</span>
	}

	/**
	 * @param postCode the postCode to set
	 */
	public void setPostCode(String postCode) {
<span class="nc" id="L235">		this.postCode = postCode;</span>
<span class="nc" id="L236">	}</span>

	/**
	 * @return the county
	 */
	public String getCounty() {
<span class="nc" id="L242">		return county;</span>
	}

	/**
	 * @param county the county to set
	 */
	public void setCounty(String county) {
<span class="nc" id="L249">		this.county = county;</span>
<span class="nc" id="L250">	}</span>

	/**
	 * @return the phone
	 */
	public String getPhone() {
<span class="nc" id="L256">		return phone;</span>
	}

	/**
	 * @param phone the phone to set
	 */
	public void setPhone(String phone) {
<span class="nc" id="L263">		this.phone = phone;</span>
<span class="nc" id="L264">	}</span>

	/**
	 * @return the email
	 */
	public String getEmail() {
<span class="nc" id="L270">		return email;</span>
	}

	/**
	 * @param email the email to set
	 */
	public void setEmail(String email) {
<span class="nc" id="L277">		this.email = email;</span>
<span class="nc" id="L278">	}</span>

	/**
	 * @return the status
	 */
	public String getStatus() {
<span class="nc" id="L284">		return status;</span>
	}

	/**
	 * @param status the status to set
	 */
	public void setStatus(String status) {
<span class="nc" id="L291">		this.status = status;</span>
<span class="nc" id="L292">	}</span>

	/**
	 * @return the password
	 */
	public String getPassword() {
<span class="fc" id="L298">		return password;</span>
	}

	/**
	 * @param password the password to set
	 */
	public void setPassword(String password) {
<span class="nc" id="L305">		this.password = password;</span>
<span class="nc" id="L306">	}	</span>
	
	static public ArrayList&lt;MacawChangeEvent&gt; detectFieldChanges(User admin,
																 User originalUser,
																 User revisedUser) {

<span class="nc" id="L312">		ArrayList&lt;MacawChangeEvent&gt; changeEvents </span>
			= new ArrayList&lt;MacawChangeEvent&gt;();
		
<span class="nc" id="L315">		String oldUserID = originalUser.getUserID();</span>
<span class="nc" id="L316">		String newUserID = revisedUser.getUserID();</span>
<span class="nc bnc" id="L317" title="All 2 branches missed.">		if (oldUserID.equals(newUserID) == false) {</span>
<span class="nc" id="L318">			String changedTitleMessage</span>
<span class="nc" id="L319">				= MacawMessages.getMessage(&quot;user.userID.saveChanges&quot;,</span>
<span class="nc" id="L320">											originalUser.getDisplayName(),</span>
											oldUserID,
											newUserID);
<span class="nc" id="L323">			MacawChangeEvent changeEvent</span>
				= new MacawChangeEvent(ChangeEventType.USER,
									   changedTitleMessage,
<span class="nc" id="L326">									   admin.getUserID());</span>

<span class="nc" id="L328">			changeEvent.setChangedObjectIdentifier(originalUser.getIdentifier());</span>
<span class="nc" id="L329">			changeEvents.add(changeEvent);			</span>
		}

<span class="nc" id="L332">		String oldPassword = originalUser.getPassword();</span>
<span class="nc" id="L333">		String newPassword = revisedUser.getPassword();</span>
<span class="nc bnc" id="L334" title="All 2 branches missed.">		if (oldPassword.equals(newPassword) == false) {</span>
<span class="nc" id="L335">			String changedTitleMessage</span>
<span class="nc" id="L336">				= MacawMessages.getMessage(&quot;user.password.saveChanges&quot;,</span>
<span class="nc" id="L337">											originalUser.getDisplayName(),</span>
											oldPassword,
											newPassword);
<span class="nc" id="L340">			MacawChangeEvent changeEvent</span>
				= new MacawChangeEvent(ChangeEventType.USER,
									   changedTitleMessage,
<span class="nc" id="L343">									   admin.getUserID());</span>

<span class="nc" id="L345">			changeEvent.setChangedObjectIdentifier(originalUser.getIdentifier());</span>
<span class="nc" id="L346">			changeEvents.add(changeEvent);			</span>
		}
	
<span class="nc" id="L349">		String oldFirstName = originalUser.getFirstName();</span>
<span class="nc" id="L350">		String newFirstName = revisedUser.getFirstName();</span>
<span class="nc bnc" id="L351" title="All 2 branches missed.">		if (oldFirstName.equals(newFirstName) == false) {</span>
<span class="nc" id="L352">			String changedTitleMessage</span>
<span class="nc" id="L353">				= MacawMessages.getMessage(&quot;user.firstName.saveChanges&quot;,</span>
<span class="nc" id="L354">											originalUser.getDisplayName(),</span>
										    oldFirstName,
										    newFirstName);
<span class="nc" id="L357">			MacawChangeEvent changeEvent</span>
				= new MacawChangeEvent(ChangeEventType.USER,
									   changedTitleMessage,
<span class="nc" id="L360">									   admin.getUserID());</span>

<span class="nc" id="L362">			changeEvent.setChangedObjectIdentifier(originalUser.getIdentifier());</span>
<span class="nc" id="L363">			changeEvents.add(changeEvent);			</span>
		}

<span class="nc" id="L366">		String oldLastName = originalUser.getLastName();</span>
<span class="nc" id="L367">		String newLastName = revisedUser.getLastName();</span>
<span class="nc bnc" id="L368" title="All 2 branches missed.">		if (oldLastName.equals(newLastName) == false) {</span>
<span class="nc" id="L369">			String changedTitleMessage</span>
<span class="nc" id="L370">				= MacawMessages.getMessage(&quot;user.lastName.saveChanges&quot;,</span>
<span class="nc" id="L371">											originalUser.getDisplayName(),</span>
											oldLastName,
											newLastName);
<span class="nc" id="L374">			MacawChangeEvent changeEvent</span>
				= new MacawChangeEvent(ChangeEventType.USER,
									   changedTitleMessage,
<span class="nc" id="L377">									   admin.getUserID());</span>

<span class="nc" id="L379">			changeEvent.setChangedObjectIdentifier(originalUser.getIdentifier());</span>
<span class="nc" id="L380">			changeEvents.add(changeEvent);			</span>
		}
	
		//Detecting changes in field &quot;Affiliation&quot;
<span class="nc" id="L384">		String oldAffiliation = originalUser.getAffiliation();</span>
<span class="nc" id="L385">		String newAffiliation = revisedUser.getAffiliation();</span>
<span class="nc bnc" id="L386" title="All 2 branches missed.">		if (oldAffiliation.equals(newAffiliation) == false) {</span>
<span class="nc" id="L387">			String changedTitleMessage</span>
<span class="nc" id="L388">				= MacawMessages.getMessage(&quot;user.affiliation.saveChanges&quot;,</span>
<span class="nc" id="L389">											originalUser.getDisplayName(),</span>
											oldAffiliation,
											newAffiliation);
<span class="nc" id="L392">			MacawChangeEvent changeEvent</span>
				= new MacawChangeEvent(ChangeEventType.USER,
									   changedTitleMessage,
<span class="nc" id="L395">									   admin.getUserID());</span>

<span class="nc" id="L397">			changeEvent.setChangedObjectIdentifier(originalUser.getIdentifier());</span>
<span class="nc" id="L398">			changeEvents.add(changeEvent);			</span>
		}
		
		//Detecting changes in field &quot;Address Line 1&quot;
<span class="nc" id="L402">		String oldAddressLine1 = originalUser.getAddressLine1();</span>
<span class="nc" id="L403">		String newAddressLine1 = revisedUser.getAddressLine1();</span>
<span class="nc bnc" id="L404" title="All 2 branches missed.">		if (oldAddressLine1.equals(newAddressLine1) == false) {</span>
<span class="nc" id="L405">			String changedTitleMessage</span>
<span class="nc" id="L406">				= MacawMessages.getMessage(&quot;user.addressLine1.saveChanges&quot;,</span>
<span class="nc" id="L407">											originalUser.getDisplayName(),</span>
											oldAddressLine1,
											newAddressLine1);
<span class="nc" id="L410">			MacawChangeEvent changeEvent</span>
				= new MacawChangeEvent(ChangeEventType.USER,
									   changedTitleMessage,
<span class="nc" id="L413">									   admin.getUserID());</span>

<span class="nc" id="L415">			changeEvent.setChangedObjectIdentifier(originalUser.getIdentifier());</span>
<span class="nc" id="L416">			changeEvents.add(changeEvent);			</span>
		}

		//Detecting changes in field &quot;Address Line 2&quot;
<span class="nc" id="L420">		String oldAddressLine2 = originalUser.getAddressLine2();</span>
<span class="nc" id="L421">		String newAddressLine2 = revisedUser.getAddressLine2();</span>
<span class="nc bnc" id="L422" title="All 2 branches missed.">		if (oldAddressLine2.equals(newAddressLine2) == false) {</span>
<span class="nc" id="L423">			String changedTitleMessage</span>
<span class="nc" id="L424">				= MacawMessages.getMessage(&quot;user.addressLine2.saveChanges&quot;,</span>
<span class="nc" id="L425">											originalUser.getDisplayName(),</span>
											oldAddressLine2,
											newAddressLine2);
<span class="nc" id="L428">			MacawChangeEvent changeEvent</span>
				= new MacawChangeEvent(ChangeEventType.USER,
									   changedTitleMessage,
<span class="nc" id="L431">									   admin.getUserID());</span>

<span class="nc" id="L433">			changeEvent.setChangedObjectIdentifier(originalUser.getIdentifier());</span>
<span class="nc" id="L434">			changeEvents.add(changeEvent);			</span>
		}

		//Detecting changes in field &quot;City&quot;
<span class="nc" id="L438">		String oldCity = originalUser.getCity();</span>
<span class="nc" id="L439">		String newCity = revisedUser.getCity();</span>
<span class="nc bnc" id="L440" title="All 2 branches missed.">		if (oldCity.equals(newCity) == false) {</span>
<span class="nc" id="L441">			String changedTitleMessage</span>
<span class="nc" id="L442">				= MacawMessages.getMessage(&quot;user.city.saveChanges&quot;,</span>
<span class="nc" id="L443">											originalUser.getDisplayName(),</span>
											oldCity,
											newCity);
<span class="nc" id="L446">			MacawChangeEvent changeEvent</span>
				= new MacawChangeEvent(ChangeEventType.USER,
									   changedTitleMessage,
<span class="nc" id="L449">									   admin.getUserID());</span>

<span class="nc" id="L451">			changeEvent.setChangedObjectIdentifier(originalUser.getIdentifier());</span>
<span class="nc" id="L452">			changeEvents.add(changeEvent);			</span>
		}

		//Detecting changes in field &quot;County&quot;
<span class="nc" id="L456">		String oldCounty = originalUser.getCounty();</span>
<span class="nc" id="L457">		String newCounty = revisedUser.getCounty();</span>
<span class="nc bnc" id="L458" title="All 2 branches missed.">		if (oldCounty.equals(newCounty) == false) {</span>
<span class="nc" id="L459">			String changedTitleMessage</span>
<span class="nc" id="L460">				= MacawMessages.getMessage(&quot;user.county.saveChanges&quot;,</span>
<span class="nc" id="L461">											originalUser.getDisplayName(),</span>
											oldCounty,
											newCounty);
<span class="nc" id="L464">			MacawChangeEvent changeEvent</span>
				= new MacawChangeEvent(ChangeEventType.USER,
									   changedTitleMessage,
<span class="nc" id="L467">									   admin.getUserID());</span>

<span class="nc" id="L469">			changeEvent.setChangedObjectIdentifier(originalUser.getIdentifier());</span>
<span class="nc" id="L470">			changeEvents.add(changeEvent);			</span>
		}

		//Detecting changes in field &quot;Post Code&quot;
<span class="nc" id="L474">		String oldPostCode = originalUser.getPostCode();</span>
<span class="nc" id="L475">		String newPostCode = revisedUser.getPostCode();</span>
<span class="nc bnc" id="L476" title="All 2 branches missed.">		if (oldPostCode.equals(newPostCode) == false) {</span>
<span class="nc" id="L477">			String changedTitleMessage</span>
<span class="nc" id="L478">				= MacawMessages.getMessage(&quot;user.postCode.saveChanges&quot;,</span>
<span class="nc" id="L479">											originalUser.getDisplayName(),</span>
											oldPostCode,
											newPostCode);
<span class="nc" id="L482">			MacawChangeEvent changeEvent</span>
				= new MacawChangeEvent(ChangeEventType.USER,
									   changedTitleMessage,
<span class="nc" id="L485">									   admin.getUserID());</span>

<span class="nc" id="L487">			changeEvent.setChangedObjectIdentifier(originalUser.getIdentifier());</span>
<span class="nc" id="L488">			changeEvents.add(changeEvent);			</span>
		}
		
		//Detecting changes in field &quot;Phone&quot;
<span class="nc" id="L492">		String oldPhone = originalUser.getPhone();</span>
<span class="nc" id="L493">		String newPhone = revisedUser.getPhone();</span>
<span class="nc bnc" id="L494" title="All 2 branches missed.">		if (oldPhone.equals(newPhone) == false) {</span>
<span class="nc" id="L495">			String changedTitleMessage</span>
<span class="nc" id="L496">				= MacawMessages.getMessage(&quot;user.phone.saveChanges&quot;,</span>
<span class="nc" id="L497">											originalUser.getDisplayName(),</span>
											oldPhone,
											newPhone);
<span class="nc" id="L500">			MacawChangeEvent changeEvent</span>
				= new MacawChangeEvent(ChangeEventType.USER,
									   changedTitleMessage,
<span class="nc" id="L503">									   admin.getUserID());</span>

<span class="nc" id="L505">			changeEvent.setChangedObjectIdentifier(originalUser.getIdentifier());</span>
<span class="nc" id="L506">			changeEvents.add(changeEvent);			</span>
		}

		//Detecting changes in field &quot;Email&quot;
<span class="nc" id="L510">		String oldEmail = originalUser.getEmail();</span>
<span class="nc" id="L511">		String newEmail = revisedUser.getEmail();</span>
<span class="nc bnc" id="L512" title="All 2 branches missed.">		if (oldEmail.equals(newEmail) == false) {</span>
<span class="nc" id="L513">			String changedTitleMessage</span>
<span class="nc" id="L514">				= MacawMessages.getMessage(&quot;user.email.saveChanges&quot;,</span>
<span class="nc" id="L515">											originalUser.getDisplayName(),</span>
											oldEmail,
											newEmail);
<span class="nc" id="L518">			MacawChangeEvent changeEvent</span>
				= new MacawChangeEvent(ChangeEventType.USER,
									   changedTitleMessage,
<span class="nc" id="L521">									   admin.getUserID());</span>

<span class="nc" id="L523">			changeEvent.setChangedObjectIdentifier(originalUser.getIdentifier());</span>
<span class="nc" id="L524">			changeEvents.add(changeEvent);			</span>
		}

		//Detecting changes in field &quot;Status&quot;
<span class="nc" id="L528">		String oldStatus = originalUser.getStatus();</span>
<span class="nc" id="L529">		String newStatus = revisedUser.getStatus();</span>
<span class="nc bnc" id="L530" title="All 2 branches missed.">		if (oldStatus.equals(newStatus) == false) {</span>
<span class="nc" id="L531">			String changedTitleMessage</span>
<span class="nc" id="L532">				= MacawMessages.getMessage(&quot;user.status.saveChanges&quot;,</span>
<span class="nc" id="L533">											originalUser.getDisplayName(),</span>
											oldStatus,
											newStatus);
<span class="nc" id="L536">			MacawChangeEvent changeEvent</span>
				= new MacawChangeEvent(ChangeEventType.USER,
									   changedTitleMessage,
<span class="nc" id="L539">									   admin.getUserID());</span>

<span class="nc" id="L541">			changeEvent.setChangedObjectIdentifier(originalUser.getIdentifier());</span>
<span class="nc" id="L542">			changeEvents.add(changeEvent);			</span>
		}

<span class="nc" id="L545">		return changeEvents;</span>
	}
	
	public boolean hasSameDisplayName(User user) {
<span class="nc bnc" id="L549" title="All 2 branches missed.">		if (getDisplayName().equals(user.getDisplayName()) == true) {</span>
<span class="nc" id="L550">			return true;</span>
		}
<span class="nc" id="L552">		return false;</span>
	}


	// ==========================================
	// Section Errors and Validation
	// ==========================================

	static public void checkValidEmail(String candidateEmail) throws MacawException {
<span class="nc bnc" id="L561" title="All 2 branches missed.">		if (ValidationUtility.isValidEmail(candidateEmail) == false) {</span>
			//ERROR
<span class="nc" id="L563">			String errorMessage</span>
<span class="nc" id="L564">				= MacawMessages.getMessage(&quot;general.error.invalidEmail&quot;,</span>
											candidateEmail);
<span class="nc" id="L566">			MacawException exception</span>
				= new MacawException(MacawErrorType.INVALID_USER,
									 errorMessage);
<span class="nc" id="L569">			throw exception;</span>
		}
<span class="nc" id="L571">	}</span>

	static public void checkValidUserIDField(String candidateUserID) throws MacawException {
<span class="nc bnc" id="L574" title="All 2 branches missed.">		if (ValidationUtility.promotesSecurityRisk(candidateUserID) == true) {</span>
<span class="nc" id="L575">			String userIDText </span>
<span class="nc" id="L576">				= MacawMessages.getMessage(&quot;user.userID.label&quot;);</span>
<span class="nc" id="L577">			String errorMessage</span>
<span class="nc" id="L578">				= MacawMessages.getMessage(&quot;general.error.promotesSecurityRisk&quot;,</span>
											userIDText,
											candidateUserID);
<span class="nc" id="L581">			MacawException exception</span>
				= new MacawException(MacawErrorType.INVALID_USER,
									errorMessage);
<span class="nc" id="L584">			throw exception;</span>
		}
<span class="nc" id="L586">	}</span>
	
	static public void validateFields(User user) throws MacawException {
		
<span class="nc" id="L590">		ArrayList&lt;String&gt; errorMessages = new ArrayList&lt;String&gt;();</span>
<span class="nc" id="L591">		String userID = user.getUserID();</span>
<span class="nc bnc" id="L592" title="All 2 branches missed.">		if (ValidationUtility.isBlank(userID) == true) {</span>
<span class="nc" id="L593">			String userIDText </span>
<span class="nc" id="L594">				= MacawMessages.getMessage(&quot;user.userID.label&quot;);</span>
<span class="nc" id="L595">			String errorMessage</span>
<span class="nc" id="L596">				= MacawMessages.getMessage(&quot;general.error.blankField&quot;,</span>
										   userIDText);
<span class="nc" id="L598">			errorMessages.add(errorMessage);</span>
<span class="nc" id="L599">		}</span>
<span class="nc bnc" id="L600" title="All 2 branches missed.">		else if (ValidationUtility.promotesSecurityRisk(userID) == true) {</span>
<span class="nc" id="L601">			String userIDText </span>
<span class="nc" id="L602">				= MacawMessages.getMessage(&quot;user.userID.label&quot;);</span>
<span class="nc" id="L603">			String errorMessage</span>
<span class="nc" id="L604">				= MacawMessages.getMessage(&quot;general.error.promotesSecurityRisk&quot;,</span>
										   userIDText,
										   userID);
<span class="nc" id="L607">			errorMessages.add(errorMessage);</span>
		}
		
<span class="nc" id="L610">		String firstName = user.getFirstName();</span>
<span class="nc bnc" id="L611" title="All 2 branches missed.">		if (ValidationUtility.isBlank(firstName) == true) {</span>
<span class="nc" id="L612">			String firstNameText </span>
<span class="nc" id="L613">				= MacawMessages.getMessage(&quot;user.firstName.label&quot;);</span>
<span class="nc" id="L614">			String errorMessage</span>
<span class="nc" id="L615">				= MacawMessages.getMessage(&quot;general.error.blankField&quot;,</span>
											firstNameText);
<span class="nc" id="L617">			errorMessages.add(errorMessage);</span>
<span class="nc" id="L618">		}</span>
<span class="nc bnc" id="L619" title="All 2 branches missed.">		else if (ValidationUtility.promotesSecurityRisk(firstName) == true) {</span>
<span class="nc" id="L620">			String firstNameText </span>
<span class="nc" id="L621">				= MacawMessages.getMessage(&quot;user.firstName.label&quot;);</span>
<span class="nc" id="L622">			String errorMessage</span>
<span class="nc" id="L623">				= MacawMessages.getMessage(&quot;general.error.promotesSecurityRisk&quot;,</span>
											firstNameText,
											firstName);
<span class="nc" id="L626">			errorMessages.add(errorMessage);</span>
		}
		
<span class="nc" id="L629">		String lastName = user.getLastName();</span>
<span class="nc bnc" id="L630" title="All 2 branches missed.">		if (ValidationUtility.isBlank(user.getLastName()) == true) {</span>
<span class="nc" id="L631">			String lastNameText </span>
<span class="nc" id="L632">				= MacawMessages.getMessage(&quot;user.lastName.label&quot;);</span>
<span class="nc" id="L633">			String errorMessage</span>
<span class="nc" id="L634">				= MacawMessages.getMessage(&quot;general.error.blankField&quot;,</span>
											lastNameText);
<span class="nc" id="L636">			errorMessages.add(errorMessage);</span>
<span class="nc" id="L637">		}</span>
<span class="nc bnc" id="L638" title="All 2 branches missed.">		else if (ValidationUtility.promotesSecurityRisk(lastName) == true) {</span>
<span class="nc" id="L639">			String lastNameText </span>
<span class="nc" id="L640">				= MacawMessages.getMessage(&quot;user.lastName.label&quot;);</span>
<span class="nc" id="L641">			String errorMessage</span>
<span class="nc" id="L642">				= MacawMessages.getMessage(&quot;general.error.promotesSecurityRisk&quot;,</span>
											lastNameText,
											lastName);
<span class="nc" id="L645">			errorMessages.add(errorMessage);</span>
		}

		//Validating Affiliation
<span class="nc" id="L649">		String affiliation = user.getAffiliation();</span>
<span class="nc bnc" id="L650" title="All 2 branches missed.">		if (ValidationUtility.isBlank(affiliation) == true) {</span>
<span class="nc" id="L651">			String affiliationText </span>
<span class="nc" id="L652">				= MacawMessages.getMessage(&quot;user.affiliation.label&quot;);</span>
<span class="nc" id="L653">			String errorMessage</span>
<span class="nc" id="L654">				= MacawMessages.getMessage(&quot;general.error.blankField&quot;,</span>
										   affiliationText);
<span class="nc" id="L656">			errorMessages.add(errorMessage);</span>
<span class="nc" id="L657">		}</span>
<span class="nc bnc" id="L658" title="All 2 branches missed.">		else if (ValidationUtility.promotesSecurityRisk(affiliation) == true) {</span>
<span class="nc" id="L659">			String affiliationText </span>
<span class="nc" id="L660">				= MacawMessages.getMessage(&quot;user.affiliation.label&quot;);</span>
<span class="nc" id="L661">			String errorMessage</span>
<span class="nc" id="L662">				= MacawMessages.getMessage(&quot;general.error.promotesSecurityRisk&quot;,</span>
											affiliationText,
											affiliation);
<span class="nc" id="L665">			errorMessages.add(errorMessage);</span>
		}

		//Validate field Address Line 1
<span class="nc" id="L669">		String addressLine1 = user.getAddressLine1();</span>
<span class="nc bnc" id="L670" title="All 2 branches missed.">		if (ValidationUtility.isBlank(addressLine1) == true) {</span>
<span class="nc" id="L671">			String addressLine1Text </span>
<span class="nc" id="L672">				= MacawMessages.getMessage(&quot;user.addressLine1.label&quot;);</span>
<span class="nc" id="L673">			String errorMessage</span>
<span class="nc" id="L674">				= MacawMessages.getMessage(&quot;general.error.blankField&quot;,</span>
										   addressLine1Text);
<span class="nc" id="L676">			errorMessages.add(errorMessage);</span>
<span class="nc" id="L677">		}</span>
<span class="nc bnc" id="L678" title="All 2 branches missed.">		else if (ValidationUtility.promotesSecurityRisk(addressLine1) == true) {</span>
<span class="nc" id="L679">			String addressLine1Text </span>
<span class="nc" id="L680">				= MacawMessages.getMessage(&quot;user.addressLine1.label&quot;);</span>
<span class="nc" id="L681">			String errorMessage</span>
<span class="nc" id="L682">				= MacawMessages.getMessage(&quot;general.error.promotesSecurityRisk&quot;,</span>
											addressLine1Text,
											addressLine1);
<span class="nc" id="L685">			errorMessages.add(errorMessage);</span>
		}

<span class="nc" id="L688">		String addressLine2 = user.getAddressLine2();</span>
		//Validate field Address Line 2
		/*
		String addressLine2 = user.getAddressLine2();
		if (ValidationUtility.isBlank(addressLine2) == true) {
			String addressLine2Text 
				= MacawMessages.getMessage(&quot;user.addressLine2.label&quot;);
			String errorMessage
				= MacawMessages.getMessage(&quot;general.error.blankField&quot;,
										   addressLine2Text);
			errorMessages.add(errorMessage);
		}
		*/


<span class="nc bnc" id="L703" title="All 2 branches missed.">		if (addressLine2.equals(&quot;&quot;) == false) {</span>
<span class="nc bnc" id="L704" title="All 2 branches missed.">			if (ValidationUtility.promotesSecurityRisk(addressLine2) == true) {</span>
<span class="nc" id="L705">				String addressLine2Text </span>
<span class="nc" id="L706">					= MacawMessages.getMessage(&quot;user.addressLine2.label&quot;);</span>
<span class="nc" id="L707">				String errorMessage</span>
<span class="nc" id="L708">					= MacawMessages.getMessage(&quot;general.error.promotesSecurityRisk&quot;,</span>
												addressLine2Text,
												addressLine2);
<span class="nc" id="L711">				errorMessages.add(errorMessage);</span>
			}
		}

		//Validate field City
<span class="nc" id="L716">		String city = user.getCity();</span>
<span class="nc bnc" id="L717" title="All 2 branches missed.">		if (ValidationUtility.isBlank(city) == true) {</span>
<span class="nc" id="L718">			String cityText </span>
<span class="nc" id="L719">				= MacawMessages.getMessage(&quot;user.city.label&quot;);</span>
<span class="nc" id="L720">			String errorMessage</span>
<span class="nc" id="L721">				= MacawMessages.getMessage(&quot;general.error.blankField&quot;,</span>
										   cityText);
<span class="nc" id="L723">			errorMessages.add(errorMessage);</span>
<span class="nc" id="L724">		}</span>
<span class="nc bnc" id="L725" title="All 2 branches missed.">		else if (ValidationUtility.promotesSecurityRisk(city) == true) {</span>
<span class="nc" id="L726">			String cityText </span>
<span class="nc" id="L727">				= MacawMessages.getMessage(&quot;user.city.label&quot;);</span>
<span class="nc" id="L728">			String errorMessage</span>
<span class="nc" id="L729">				= MacawMessages.getMessage(&quot;general.error.promotesSecurityRisk&quot;,</span>
											cityText,
											city);
<span class="nc" id="L732">			errorMessages.add(errorMessage);</span>
		}		
		
		//Validate field County
<span class="nc" id="L736">		String county = user.getCounty();</span>
<span class="nc bnc" id="L737" title="All 2 branches missed.">		if (ValidationUtility.isBlank(county) == true) {</span>
<span class="nc" id="L738">			String countyText </span>
<span class="nc" id="L739">				= MacawMessages.getMessage(&quot;user.county.label&quot;);</span>
<span class="nc" id="L740">			String errorMessage</span>
<span class="nc" id="L741">				= MacawMessages.getMessage(&quot;general.error.blankField&quot;,</span>
										   countyText);
<span class="nc" id="L743">			errorMessages.add(errorMessage);</span>
<span class="nc" id="L744">		}</span>
<span class="nc bnc" id="L745" title="All 2 branches missed.">		else if (ValidationUtility.promotesSecurityRisk(county) == true) {</span>
<span class="nc" id="L746">			String userIDText </span>
<span class="nc" id="L747">				= MacawMessages.getMessage(&quot;user.county.label&quot;);</span>
<span class="nc" id="L748">			String errorMessage</span>
<span class="nc" id="L749">				= MacawMessages.getMessage(&quot;general.error.promotesSecurityRisk&quot;,</span>
									   		userIDText,
									   		userID);
<span class="nc" id="L752">			errorMessages.add(errorMessage);</span>
		}
		
		//Validate field PostCode
<span class="nc" id="L756">		String postCode = user.getPostCode();</span>
<span class="nc bnc" id="L757" title="All 2 branches missed.">		if (ValidationUtility.isBlank(postCode) == true) {</span>
<span class="nc" id="L758">			String postCodeText </span>
<span class="nc" id="L759">				= MacawMessages.getMessage(&quot;user.postCode.label&quot;);</span>
<span class="nc" id="L760">			String errorMessage</span>
<span class="nc" id="L761">				= MacawMessages.getMessage(&quot;general.error.blankField&quot;,</span>
										   postCodeText);
<span class="nc" id="L763">			errorMessages.add(errorMessage);</span>
<span class="nc" id="L764">		}</span>
<span class="nc bnc" id="L765" title="All 2 branches missed.">		else if (ValidationUtility.promotesSecurityRisk(postCode) == true) {</span>
<span class="nc" id="L766">			String postCodeText </span>
<span class="nc" id="L767">				= MacawMessages.getMessage(&quot;user.postCode.label&quot;);</span>
<span class="nc" id="L768">			String errorMessage</span>
<span class="nc" id="L769">				= MacawMessages.getMessage(&quot;general.error.promotesSecurityRisk&quot;,</span>
											postCodeText,
											postCode);
<span class="nc" id="L772">			errorMessages.add(errorMessage);</span>
		}

		//Validate field Phone
<span class="nc" id="L776">		String phone = user.getPhone();</span>
<span class="nc bnc" id="L777" title="All 2 branches missed.">		if (ValidationUtility.isBlank(phone) == true) {</span>
<span class="nc" id="L778">			String phoneText </span>
<span class="nc" id="L779">				= MacawMessages.getMessage(&quot;user.phone.label&quot;);</span>
<span class="nc" id="L780">			String errorMessage</span>
<span class="nc" id="L781">				= MacawMessages.getMessage(&quot;general.error.blankField&quot;,</span>
										   phoneText);
<span class="nc" id="L783">			errorMessages.add(errorMessage);</span>
<span class="nc" id="L784">		}</span>
<span class="nc bnc" id="L785" title="All 2 branches missed.">		else if (ValidationUtility.promotesSecurityRisk(phone) == true) {</span>
<span class="nc" id="L786">			String phoneText </span>
<span class="nc" id="L787">				= MacawMessages.getMessage(&quot;user.phone.label&quot;);</span>
<span class="nc" id="L788">			String errorMessage</span>
<span class="nc" id="L789">				= MacawMessages.getMessage(&quot;general.error.promotesSecurityRisk&quot;,</span>
											phoneText,
											phone);
<span class="nc" id="L792">			errorMessages.add(errorMessage);</span>
		}
		
		//Validate field Email
<span class="nc" id="L796">		String email = user.getEmail();</span>
<span class="nc bnc" id="L797" title="All 2 branches missed.">		if (ValidationUtility.isBlank(email) == true) {</span>
<span class="nc" id="L798">			String emailText </span>
<span class="nc" id="L799">				= MacawMessages.getMessage(&quot;user.email.label&quot;);</span>
<span class="nc" id="L800">			String errorMessage</span>
<span class="nc" id="L801">				= MacawMessages.getMessage(&quot;general.error.blankField&quot;,</span>
										   emailText);
<span class="nc" id="L803">			errorMessages.add(errorMessage);</span>
<span class="nc" id="L804">		}</span>
<span class="nc bnc" id="L805" title="All 2 branches missed.">		else if (ValidationUtility.isValidEmail(email) == false) {</span>
<span class="nc" id="L806">			String errorMessage</span>
<span class="nc" id="L807">				= MacawMessages.getMessage(&quot;general.error.invalidEmail&quot;,</span>
											email);
<span class="nc" id="L809">			errorMessages.add(errorMessage);</span>
		}

		//Validate field Status
<span class="nc" id="L813">		String status = user.getStatus();</span>
<span class="nc bnc" id="L814" title="All 2 branches missed.">		if (ValidationUtility.isBlank(status) == true) {</span>
<span class="nc" id="L815">			String statusText </span>
<span class="nc" id="L816">				= MacawMessages.getMessage(&quot;user.status.label&quot;);</span>
<span class="nc" id="L817">			String errorMessage</span>
<span class="nc" id="L818">				= MacawMessages.getMessage(&quot;general.error.blankField&quot;,</span>
											statusText);
<span class="nc" id="L820">			errorMessages.add(errorMessage);</span>
<span class="nc" id="L821">		}</span>
<span class="nc bnc" id="L822" title="All 2 branches missed.">		else if (ValidationUtility.promotesSecurityRisk(status) == true) {</span>
<span class="nc" id="L823">			String statusText</span>
<span class="nc" id="L824">				= MacawMessages.getMessage(&quot;user.status.label&quot;);</span>
<span class="nc" id="L825">			String errorMessage</span>
<span class="nc" id="L826">				= MacawMessages.getMessage(&quot;general.error.promotesSecurityRisk&quot;,</span>
											statusText,
											status);
<span class="nc" id="L829">			errorMessages.add(errorMessage);</span>
		}

<span class="nc bnc" id="L832" title="All 2 branches missed.">		if(ValidationUtility.isBlank(user.getPassword()) == true) {</span>
<span class="nc" id="L833">			String passwordText</span>
<span class="nc" id="L834">				= MacawMessages.getMessage(&quot;user.password.label&quot;);</span>
<span class="nc" id="L835">			String errorMessage</span>
<span class="nc" id="L836">				= MacawMessages.getMessage(&quot;general.error.blankField&quot;,</span>
										   passwordText);
<span class="nc" id="L838">			errorMessages.add(errorMessage);</span>
		}
		
<span class="nc bnc" id="L841" title="All 2 branches missed.">		if (errorMessages.size() &gt; 0) {</span>
<span class="nc" id="L842">			MacawException exception = new MacawException();</span>
<span class="nc bnc" id="L843" title="All 2 branches missed.">			for (String errorMessage : errorMessages) {</span>
<span class="nc" id="L844">				exception.addErrorMessage(MacawErrorType.INVALID_USER,</span>
										  errorMessage);
<span class="nc" id="L846">			}</span>
<span class="nc" id="L847">			throw exception;</span>
		}
<span class="nc" id="L849">	}</span>
	
	// ==========================================
	// Section Interfaces
	// ==========================================
	
	//Interface: Displayable 
	public String getDisplayName() {
		/**
		StringBuilder buffer = new StringBuilder();
		buffer.append(firstName);
		buffer.append(&quot; &quot;);
		buffer.append(lastName);
		return buffer.toString();
		*/
<span class="nc" id="L864">		return userID;</span>
	}
	
	public String getDisplayItemIdentifier() {
<span class="nc" id="L868">		return String.valueOf(identifier);</span>
	}
	
	public Object clone() {
<span class="nc" id="L872">		User cloneUser = new User();</span>
<span class="nc" id="L873">		cloneUser.setIdentifier(identifier);</span>
<span class="nc" id="L874">		cloneUser.setUserID(userID);</span>
<span class="nc" id="L875">		cloneUser.setFirstName(firstName);</span>
<span class="nc" id="L876">		cloneUser.setLastName(lastName);</span>
<span class="nc" id="L877">		cloneUser.setAffiliation(affiliation);</span>
<span class="nc" id="L878">		cloneUser.setAddressLine1(addressLine1);</span>
<span class="nc" id="L879">		cloneUser.setAddressLine2(addressLine2);</span>
<span class="nc" id="L880">		cloneUser.setCity(city);</span>
<span class="nc" id="L881">		cloneUser.setPostCode(postCode);</span>
<span class="nc" id="L882">		cloneUser.setCounty(county);</span>
<span class="nc" id="L883">		cloneUser.setPhone(phone);</span>
<span class="nc" id="L884">		cloneUser.setEmail(email);</span>
<span class="nc" id="L885">		cloneUser.setStatus(status);</span>
<span class="nc" id="L886">		cloneUser.setPassword(password);</span>

<span class="nc" id="L888">		return cloneUser;</span>
	}
	
	// ==========================================
	// Section Overload
	// ==========================================

}

</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>