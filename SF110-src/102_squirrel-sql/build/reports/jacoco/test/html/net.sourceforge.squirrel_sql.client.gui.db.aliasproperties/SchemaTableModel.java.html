<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SchemaTableModel.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">102_squirrel-sql</a> &gt; <a href="index.source.html" class="el_package">net.sourceforge.squirrel_sql.client.gui.db.aliasproperties</a> &gt; <span class="el_source">SchemaTableModel.java</span></div><h1>SchemaTableModel.java</h1><pre class="source lang-java linenums">package net.sourceforge.squirrel_sql.client.gui.db.aliasproperties;

import net.sourceforge.squirrel_sql.client.gui.db.SQLAliasSchemaDetailProperties;

import javax.swing.table.DefaultTableModel;
import java.util.ArrayList;
import java.util.Arrays;

public class SchemaTableModel extends DefaultTableModel
{
   private static final long serialVersionUID = 1L;
    
   static final int IX_SCHEMA_NAME = 0;
   static final int IX_TABLE = 1;
	static final int IX_VIEW = 2;
   static final int IX_PROCEDURE = 3;
   private SQLAliasSchemaDetailProperties[] _schemaDetails;



   public SchemaTableModel(SQLAliasSchemaDetailProperties[] schemaDetails)
<span class="nc" id="L22">   {</span>
<span class="nc" id="L23">      _schemaDetails = schemaDetails;</span>
<span class="nc" id="L24">   }</span>



   public Object getValueAt(int row, int column)
   {
<span class="nc" id="L30">      SQLAliasSchemaDetailProperties buf = _schemaDetails[row];</span>
<span class="nc bnc" id="L31" title="All 5 branches missed.">      switch(column)</span>
      {
         case IX_SCHEMA_NAME:
<span class="nc" id="L34">            return buf.getSchemaName();</span>
         case IX_TABLE:
<span class="nc" id="L36">            return SchemaTableCboItem.getItemForID(buf.getTable());</span>
         case IX_VIEW:
<span class="nc" id="L38">            return SchemaTableCboItem.getItemForID(buf.getView());</span>
         case IX_PROCEDURE:
<span class="nc" id="L40">            return SchemaTableCboItem.getItemForID(buf.getProcedure());</span>
         default:
<span class="nc" id="L42">            throw new IllegalArgumentException(&quot;Unkown column index &quot; + column);</span>

      }
   }

   public void setValueAt(Object aValue, int row, int column)
   {
<span class="nc" id="L49">      SQLAliasSchemaDetailProperties buf = _schemaDetails[row];</span>

<span class="nc bnc" id="L51" title="All 4 branches missed.">      switch(column)</span>
      {
         case IX_TABLE:
<span class="nc" id="L54">            buf.setTable(((SchemaTableCboItem)aValue).getID());</span>
<span class="nc" id="L55">            break;</span>
         case IX_VIEW:
<span class="nc" id="L57">            buf.setView(((SchemaTableCboItem)aValue).getID());</span>
<span class="nc" id="L58">            break;</span>
         case IX_PROCEDURE:
<span class="nc" id="L60">            buf.setProcedure(((SchemaTableCboItem)aValue).getID());</span>
<span class="nc" id="L61">            break;</span>
         default:
<span class="nc" id="L63">            throw new IllegalArgumentException(&quot;Unkown column index &quot; + column);</span>

      }

<span class="nc" id="L67">      fireTableCellUpdated(row, column);</span>
<span class="nc" id="L68">   }</span>

   /**
	 * @see javax.swing.table.DefaultTableModel#getColumnCount()
	 */
	@Override
	public int getColumnCount()
	{
<span class="nc" id="L76">		return 4;</span>
	}


   public boolean isCellEditable(int row, int column)
   {
<span class="nc bnc" id="L82" title="All 4 branches missed.">      return IX_SCHEMA_NAME != column &amp;&amp; column &lt; getColumnCount();</span>
   }


   public int getRowCount()
   {
<span class="nc bnc" id="L88" title="All 2 branches missed.">      if(null == _schemaDetails)</span>
      {
<span class="nc" id="L90">         return 0;</span>
      }
      else
      {
<span class="nc" id="L94">         return _schemaDetails.length;</span>
      }
   }



   public SQLAliasSchemaDetailProperties[] getData()
   {
<span class="nc" id="L102">      return _schemaDetails;</span>
   }

   public void updateSchemas(String[] schemaNames)
   {
<span class="nc" id="L107">      ArrayList&lt;SQLAliasSchemaDetailProperties&gt; newDetails = </span>
          new ArrayList&lt;SQLAliasSchemaDetailProperties&gt;();

<span class="nc bnc" id="L110" title="All 2 branches missed.">      for (int i = 0; i &lt; schemaNames.length; i++)</span>
      {

<span class="nc" id="L113">         boolean found = false;</span>
<span class="nc bnc" id="L114" title="All 2 branches missed.">         for (int j = 0; j &lt; _schemaDetails.length; j++)</span>
         {
<span class="nc bnc" id="L116" title="All 2 branches missed.">            if(_schemaDetails[j].getSchemaName().equalsIgnoreCase(schemaNames[i]))</span>
            {
<span class="nc" id="L118">               newDetails.add(_schemaDetails[j]);</span>
<span class="nc" id="L119">               found = true;</span>
<span class="nc" id="L120">               break;</span>
            }
         }

<span class="nc bnc" id="L124" title="All 2 branches missed.">         if(false == found)</span>
         {
<span class="nc" id="L126">            SQLAliasSchemaDetailProperties buf = new SQLAliasSchemaDetailProperties();</span>
<span class="nc" id="L127">            buf.setSchemaName(schemaNames[i]);</span>
<span class="nc" id="L128">            newDetails.add(buf);</span>
         }

      }

<span class="nc" id="L133">      _schemaDetails = newDetails.toArray(new SQLAliasSchemaDetailProperties[newDetails.size()]);</span>
<span class="nc" id="L134">      Arrays.sort(_schemaDetails);</span>

<span class="nc" id="L136">      fireTableDataChanged();</span>
<span class="nc" id="L137">   }</span>

   public void setColumnTo(int modelIndex, SchemaTableCboItem toItem)
   {
<span class="nc bnc" id="L141" title="All 2 branches missed.">      for (int i = 0; i &lt; _schemaDetails.length; i++)</span>
      {
<span class="nc bnc" id="L143" title="All 2 branches missed.">         if(IX_TABLE == modelIndex)</span>
         {
<span class="nc" id="L145">            _schemaDetails[i].setTable(toItem.getID());</span>
         }
<span class="nc bnc" id="L147" title="All 2 branches missed.">         else if(IX_VIEW == modelIndex)</span>
         {
<span class="nc" id="L149">            _schemaDetails[i].setView(toItem.getID());</span>
         }
<span class="nc bnc" id="L151" title="All 2 branches missed.">         else if(IX_PROCEDURE == modelIndex)</span>
         {
<span class="nc" id="L153">            _schemaDetails[i].setProcedure(toItem.getID());</span>
         }
      }

<span class="nc" id="L157">      fireTableDataChanged();</span>
<span class="nc" id="L158">   }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>