<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>DriverPropertiesPanel.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">102_squirrel-sql</a> &gt; <a href="index.source.html" class="el_package">net.sourceforge.squirrel_sql.client.gui.db.aliasproperties</a> &gt; <span class="el_source">DriverPropertiesPanel.java</span></div><h1>DriverPropertiesPanel.java</h1><pre class="source lang-java linenums">package net.sourceforge.squirrel_sql.client.gui.db.aliasproperties;
/*
 * Copyright (C) 2003 Colin Bell
 * colbell@users.sourceforge.net
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 */
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;

import javax.swing.*;
import javax.swing.table.TableCellEditor;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;

import net.sourceforge.squirrel_sql.fw.gui.MultipleLineLabel;
import net.sourceforge.squirrel_sql.fw.sql.SQLDriverPropertyCollection;
import net.sourceforge.squirrel_sql.fw.util.StringManager;
import net.sourceforge.squirrel_sql.fw.util.StringManagerFactory;
/**
 * This panel allows the user to review and maintain
 * the properties for a JDBC driver.
 *
 * @author &lt;A HREF=&quot;mailto:colbell@users.sourceforge.net&quot;&gt;Colin Bell&lt;/A&gt;
 */
public class DriverPropertiesPanel extends JPanel 
{
	/** Internationalized strings for this class. */
<span class="nc" id="L42">	private static final StringManager s_stringMgr =</span>
<span class="nc" id="L43">		StringManagerFactory.getStringManager(DriverPropertiesPanel.class);</span>

   // i18n[DriverPropertiesPanel.useDriverProperties=Use driver properties]
<span class="nc" id="L46">   JCheckBox chkUseDriverProperties = new JCheckBox(s_stringMgr.getString(&quot;DriverPropertiesPanel.useDriverProperties&quot;));</span>

   private interface i18n
   {
<span class="nc" id="L50">      String INSTRUCTIONS = s_stringMgr.getString(&quot;DriverPropertiesPanel.instructions&quot;);</span>
   }

	/** JTable containing the properties. */
	DriverPropertiesTable tbl;

	/**
	 * Display the description for the currently selected property in this
	 * control.
	 */
<span class="nc" id="L60">	private final MultipleLineLabel _descriptionLbl = new MultipleLineLabel();</span>

	public DriverPropertiesPanel(SQLDriverPropertyCollection props)
	{
<span class="nc" id="L64">		super(new GridBagLayout());</span>
<span class="nc bnc" id="L65" title="All 2 branches missed.">		if (props == null)</span>
		{
<span class="nc" id="L67">			throw new IllegalArgumentException(&quot;SQLDriverPropertyCollection == null&quot;);</span>
		}

<span class="nc" id="L70">		createUserInterface(props);</span>
<span class="nc" id="L71">	}</span>

	/**
	 * Retrieve the database properties.
	 *
	 * @return		the database properties.
	 */
	public SQLDriverPropertyCollection getSQLDriverProperties()
	{
<span class="nc" id="L80">      TableCellEditor cellEditor = tbl.getCellEditor();</span>
<span class="nc bnc" id="L81" title="All 2 branches missed.">      if(null != cellEditor)</span>
      {
<span class="nc" id="L83">         cellEditor.stopCellEditing();</span>
      }
<span class="nc" id="L85">		return tbl.getTypedModel().getSQLDriverProperties();</span>
	}

	private void createUserInterface(SQLDriverPropertyCollection props)
	{
<span class="nc" id="L90">		tbl = new DriverPropertiesTable(props);</span>

<span class="nc" id="L92">		final GridBagConstraints gbc = new GridBagConstraints();</span>

<span class="nc" id="L94">		setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));</span>

<span class="nc" id="L96">		gbc.anchor = GridBagConstraints.WEST;</span>
<span class="nc" id="L97">		gbc.insets = new Insets(2, 2, 2, 2);</span>
<span class="nc" id="L98">		gbc.fill = GridBagConstraints.NONE;</span>
<span class="nc" id="L99">		gbc.anchor = GridBagConstraints.NORTHWEST;</span>
<span class="nc" id="L100">		gbc.gridx = 0;</span>
<span class="nc" id="L101">      gbc.gridy = 0;</span>
<span class="nc" id="L102">      gbc.weightx = 0;</span>
<span class="nc" id="L103">      gbc.weighty = 0;</span>
<span class="nc" id="L104">      add(chkUseDriverProperties, gbc);</span>



<span class="nc" id="L108">      gbc.fill = GridBagConstraints.BOTH;</span>
<span class="nc" id="L109">      gbc.weighty = 1.0;</span>
<span class="nc" id="L110">      gbc.weightx = 1.0;</span>
<span class="nc" id="L111">      ++gbc.gridy;</span>
<span class="nc" id="L112">		JScrollPane sp = new JScrollPane(tbl);</span>
<span class="nc" id="L113">		add(sp, gbc);</span>

<span class="nc" id="L115">		gbc.fill = GridBagConstraints.HORIZONTAL;</span>
<span class="nc" id="L116">		gbc.weighty = 0.0;</span>
<span class="nc" id="L117">		++gbc.gridy;</span>
<span class="nc" id="L118">		add(createInfoPanel(), gbc);</span>

<span class="nc" id="L120">		tbl.getSelectionModel().addListSelectionListener(new ListSelectionListener()</span>
<span class="nc" id="L121">		{</span>
			public void valueChanged(ListSelectionEvent evt)
			{
<span class="nc" id="L124">				updateDescription(tbl.getSelectedRow());</span>
<span class="nc" id="L125">			}</span>
		});

<span class="nc bnc" id="L128" title="All 2 branches missed.">		if (tbl.getRowCount() &gt; 0)</span>
		{
<span class="nc" id="L130">			tbl.setRowSelectionInterval(0, 0);</span>
		}
<span class="nc" id="L132">	}</span>

	private void updateDescription(int idx)
	{
<span class="nc bnc" id="L136" title="All 2 branches missed.">		if (idx != -1)</span>
		{
<span class="nc" id="L138">			String desc = (String)tbl.getValueAt(idx, DriverPropertiesTableModel.IColumnIndexes.IDX_DESCRIPTION);</span>
<span class="nc" id="L139">			_descriptionLbl.setText(desc);</span>
<span class="nc" id="L140">		}</span>
		else
		{
<span class="nc" id="L143">			_descriptionLbl.setText(&quot; &quot;);</span>
		}
<span class="nc" id="L145">	}</span>

	private Box createInfoPanel()
	{
<span class="nc" id="L149">		final Box pnl = Box.createVerticalBox();</span>
<span class="nc" id="L150">		pnl.add(new JSeparator());</span>
<span class="nc" id="L151">		pnl.add(_descriptionLbl);</span>
<span class="nc" id="L152">		pnl.add(new JSeparator());</span>
<span class="nc" id="L153">		pnl.add(new MultipleLineLabel(i18n.INSTRUCTIONS));</span>

<span class="nc" id="L155">		return pnl;</span>
	}
}

</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>