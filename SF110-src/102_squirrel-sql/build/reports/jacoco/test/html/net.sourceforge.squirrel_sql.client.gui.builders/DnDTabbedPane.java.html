<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>DnDTabbedPane.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">102_squirrel-sql</a> &gt; <a href="index.source.html" class="el_package">net.sourceforge.squirrel_sql.client.gui.builders</a> &gt; <span class="el_source">DnDTabbedPane.java</span></div><h1>DnDTabbedPane.java</h1><pre class="source lang-java linenums">package net.sourceforge.squirrel_sql.client.gui.builders;

import javax.swing.*;
import java.awt.*;
import java.awt.datatransfer.DataFlavor;
import java.awt.datatransfer.Transferable;
import java.awt.dnd.*;
import java.awt.event.ActionEvent;
import java.awt.image.BufferedImage;

public class DnDTabbedPane extends JTabbedPane
{
   private static final int LINEWIDTH = 3;
   private static final String NAME = &quot;test&quot;;
<span class="nc" id="L15">   private final GhostGlassPane glassPane = new GhostGlassPane();</span>
<span class="nc" id="L16">   private final Rectangle lineRect = new Rectangle();</span>
<span class="nc" id="L17">   private final Color lineColor = new Color(0, 100, 255);</span>
<span class="nc" id="L18">   private int dragTabIndex = -1;</span>

   private void clickArrowButton(String actionKey)
   {
<span class="nc" id="L22">      ActionMap map = getActionMap();</span>
<span class="nc bnc" id="L23" title="All 2 branches missed.">      if (map != null)</span>
      {
<span class="nc" id="L25">         Action action = map.get(actionKey);</span>
<span class="nc bnc" id="L26" title="All 4 branches missed.">         if (action != null &amp;&amp; action.isEnabled())</span>
         {
<span class="nc" id="L28">            action.actionPerformed(new ActionEvent(this, ActionEvent.ACTION_PERFORMED, null, 0, 0));</span>
         }
      }
<span class="nc" id="L31">   }</span>

<span class="nc" id="L33">   private static Rectangle rBackward = new Rectangle();</span>
<span class="nc" id="L34">   private static Rectangle rForward = new Rectangle();</span>
<span class="nc" id="L35">   private static int rwh = 20;</span>
<span class="nc" id="L36">   private static int buttonsize = 30; //xxx magic number of scroll button size</span>

   private void autoScrollTest(Point glassPt)
   {
<span class="nc" id="L40">      Rectangle r = getTabAreaBounds();</span>
<span class="nc" id="L41">      int tabPlacement = getTabPlacement();</span>
<span class="nc bnc" id="L42" title="All 4 branches missed.">      if (tabPlacement == TOP || tabPlacement == BOTTOM)</span>
      {
<span class="nc" id="L44">         rBackward.setBounds(r.x, r.y, rwh, r.height);</span>
<span class="nc" id="L45">         rForward.setBounds(r.x + r.width - rwh - buttonsize, r.y, rwh + buttonsize, r.height);</span>
      }
<span class="nc bnc" id="L47" title="All 4 branches missed.">      else if (tabPlacement == LEFT || tabPlacement == RIGHT)</span>
      {
<span class="nc" id="L49">         rBackward.setBounds(r.x, r.y, r.width, rwh);</span>
<span class="nc" id="L50">         rForward.setBounds(r.x, r.y + r.height - rwh - buttonsize, r.width, rwh + buttonsize);</span>
      }
<span class="nc" id="L52">      rBackward = SwingUtilities.convertRectangle(getParent(), rBackward, glassPane);</span>
<span class="nc" id="L53">      rForward = SwingUtilities.convertRectangle(getParent(), rForward, glassPane);</span>
<span class="nc bnc" id="L54" title="All 2 branches missed.">      if (rBackward.contains(glassPt))</span>
      {
         //System.out.println(new java.util.Date() + &quot;Backward&quot;);
<span class="nc" id="L57">         clickArrowButton(&quot;scrollTabsBackwardAction&quot;);</span>
      }
<span class="nc bnc" id="L59" title="All 2 branches missed.">      else if (rForward.contains(glassPt))</span>
      {
         //System.out.println(new java.util.Date() + &quot;Forward&quot;);
<span class="nc" id="L62">         clickArrowButton(&quot;scrollTabsForwardAction&quot;);</span>
      }
<span class="nc" id="L64">   }</span>

   public DnDTabbedPane()
   {
<span class="nc" id="L68">      super();</span>
<span class="nc" id="L69">      final DragSourceListener dsl = new DragSourceListener()</span>
<span class="nc" id="L70">      {</span>
         @Override
         public void dragEnter(DragSourceDragEvent e)
         {
<span class="nc" id="L74">            e.getDragSourceContext().setCursor(DragSource.DefaultMoveDrop);</span>
<span class="nc" id="L75">         }</span>

         @Override
         public void dragExit(DragSourceEvent e)
         {
<span class="nc" id="L80">            e.getDragSourceContext().setCursor(DragSource.DefaultMoveNoDrop);</span>
<span class="nc" id="L81">            lineRect.setRect(0, 0, 0, 0);</span>
<span class="nc" id="L82">            glassPane.setPoint(new Point(-1000, -1000));</span>
<span class="nc" id="L83">            glassPane.repaint();</span>
<span class="nc" id="L84">         }</span>

         @Override
         public void dragOver(DragSourceDragEvent e)
         {
<span class="nc" id="L89">            Point glassPt = e.getLocation();</span>
<span class="nc" id="L90">            SwingUtilities.convertPointFromScreen(glassPt, glassPane);</span>
<span class="nc" id="L91">            int targetIdx = getTargetTabIndex(glassPt);</span>
            //if(getTabAreaBounds().contains(tabPt) &amp;&amp; targetIdx&gt;=0 &amp;&amp;
<span class="nc bnc" id="L93" title="All 4 branches missed.">            if (getTabAreaBounds().contains(glassPt) &amp;&amp; targetIdx &gt;= 0 &amp;&amp;</span>
<span class="nc bnc" id="L94" title="All 4 branches missed.">                  targetIdx != dragTabIndex &amp;&amp; targetIdx != dragTabIndex + 1)</span>
            {
<span class="nc" id="L96">               e.getDragSourceContext().setCursor(DragSource.DefaultMoveDrop);</span>
<span class="nc" id="L97">               glassPane.setCursor(DragSource.DefaultMoveDrop);</span>
            }
            else
            {
<span class="nc" id="L101">               e.getDragSourceContext().setCursor(DragSource.DefaultMoveNoDrop);</span>
<span class="nc" id="L102">               glassPane.setCursor(DragSource.DefaultMoveNoDrop);</span>
            }
<span class="nc" id="L104">         }</span>

         @Override
         public void dragDropEnd(DragSourceDropEvent e)
         {
<span class="nc" id="L109">            lineRect.setRect(0, 0, 0, 0);</span>
<span class="nc" id="L110">            dragTabIndex = -1;</span>
<span class="nc" id="L111">            glassPane.setVisible(false);</span>
<span class="nc bnc" id="L112" title="All 2 branches missed.">            if (hasGhost())</span>
            {
<span class="nc" id="L114">               glassPane.setVisible(false);</span>
<span class="nc" id="L115">               glassPane.setImage(null);</span>
            }
<span class="nc" id="L117">         }</span>

         @Override
         public void dropActionChanged(DragSourceDragEvent e)
         {
<span class="nc" id="L122">         }</span>
      };
<span class="nc" id="L124">      final Transferable t = new Transferable()</span>
<span class="nc" id="L125">      {</span>
<span class="nc" id="L126">         private final DataFlavor FLAVOR = new DataFlavor(DataFlavor.javaJVMLocalObjectMimeType, NAME);</span>

         @Override
         public Object getTransferData(DataFlavor flavor)
         {
<span class="nc" id="L131">            return DnDTabbedPane.this;</span>
         }

         @Override
         public DataFlavor[] getTransferDataFlavors()
         {
<span class="nc" id="L137">            DataFlavor[] f = new DataFlavor[1];</span>
<span class="nc" id="L138">            f[0] = this.FLAVOR;</span>
<span class="nc" id="L139">            return f;</span>
         }

         @Override
         public boolean isDataFlavorSupported(DataFlavor flavor)
         {
<span class="nc" id="L145">            return flavor.getHumanPresentableName().equals(NAME);</span>
         }
      };
<span class="nc" id="L148">      final DragGestureListener dgl = new DragGestureListener()</span>
<span class="nc" id="L149">      {</span>
         @Override
         public void dragGestureRecognized(DragGestureEvent e)
         {
<span class="nc bnc" id="L153" title="All 2 branches missed.">            if (getTabCount() &lt;= 1) return;</span>
<span class="nc" id="L154">            Point tabPt = e.getDragOrigin();</span>
<span class="nc" id="L155">            dragTabIndex = indexAtLocation(tabPt.x, tabPt.y);</span>
            //&quot;disabled tab problem&quot;.
<span class="nc bnc" id="L157" title="All 4 branches missed.">            if (dragTabIndex &lt; 0 || !isEnabledAt(dragTabIndex)) return;</span>
<span class="nc" id="L158">            initGlassPane(e.getComponent(), e.getDragOrigin());</span>
            try
            {
<span class="nc" id="L161">               e.startDrag(DragSource.DefaultMoveDrop, t, dsl);</span>
            }
<span class="nc" id="L163">            catch (InvalidDnDOperationException idoe)</span>
            {
<span class="nc" id="L165">               idoe.printStackTrace();</span>
<span class="nc" id="L166">            }</span>
<span class="nc" id="L167">         }</span>
      };
<span class="nc" id="L169">      new DropTarget(glassPane, DnDConstants.ACTION_COPY_OR_MOVE, new CDropTargetListener(), true);</span>
<span class="nc" id="L170">      new DragSource().createDefaultDragGestureRecognizer(this, DnDConstants.ACTION_COPY_OR_MOVE, dgl);</span>
<span class="nc" id="L171">   }</span>

<span class="nc" id="L173">   class CDropTargetListener implements DropTargetListener</span>
   {
      @Override
      public void dragEnter(DropTargetDragEvent e)
      {
<span class="nc bnc" id="L178" title="All 2 branches missed.">         if (isDragAcceptable(e)) e.acceptDrag(e.getDropAction());</span>
<span class="nc" id="L179">         else e.rejectDrag();</span>
<span class="nc" id="L180">      }</span>

      @Override
      public void dragExit(DropTargetEvent e)
      {
<span class="nc" id="L185">      }</span>

      @Override
      public void dropActionChanged(DropTargetDragEvent e)
      {
<span class="nc" id="L190">      }</span>

<span class="nc" id="L192">      private Point _glassPt = new Point();</span>

      @Override
      public void dragOver(final DropTargetDragEvent e)
      {
<span class="nc" id="L197">         Point glassPt = e.getLocation();</span>
<span class="nc bnc" id="L198" title="All 4 branches missed.">         if (getTabPlacement() == JTabbedPane.TOP || getTabPlacement() == JTabbedPane.BOTTOM)</span>
         {
<span class="nc" id="L200">            initTargetLeftRightLine(getTargetTabIndex(glassPt));</span>
         }
         else
         {
<span class="nc" id="L204">            initTargetTopBottomLine(getTargetTabIndex(glassPt));</span>
         }
<span class="nc bnc" id="L206" title="All 2 branches missed.">         if (hasGhost())</span>
         {
<span class="nc" id="L208">            glassPane.setPoint(glassPt);</span>
         }
<span class="nc bnc" id="L210" title="All 2 branches missed.">         if (!_glassPt.equals(glassPt)) glassPane.repaint();</span>
<span class="nc" id="L211">         _glassPt = glassPt;</span>
<span class="nc" id="L212">         autoScrollTest(glassPt);</span>
<span class="nc" id="L213">      }</span>

      @Override
      public void drop(DropTargetDropEvent e)
      {
<span class="nc bnc" id="L218" title="All 2 branches missed.">         if (isDropAcceptable(e))</span>
         {
<span class="nc" id="L220">            convertTab(dragTabIndex, getTargetTabIndex(e.getLocation()));</span>
<span class="nc" id="L221">            e.dropComplete(true);</span>
         }
         else
         {
<span class="nc" id="L225">            e.dropComplete(false);</span>
         }
<span class="nc" id="L227">         repaint();</span>
<span class="nc" id="L228">      }</span>

      private boolean isDragAcceptable(DropTargetDragEvent e)
      {
<span class="nc" id="L232">         Transferable t = e.getTransferable();</span>
<span class="nc bnc" id="L233" title="All 2 branches missed.">         if (t == null) return false;</span>
<span class="nc" id="L234">         DataFlavor[] f = e.getCurrentDataFlavors();</span>
<span class="nc bnc" id="L235" title="All 4 branches missed.">         if (t.isDataFlavorSupported(f[0]) &amp;&amp; dragTabIndex &gt;= 0)</span>
         {
<span class="nc" id="L237">            return true;</span>
         }
<span class="nc" id="L239">         return false;</span>
      }

      private boolean isDropAcceptable(DropTargetDropEvent e)
      {
<span class="nc" id="L244">         Transferable t = e.getTransferable();</span>
<span class="nc bnc" id="L245" title="All 2 branches missed.">         if (t == null) return false;</span>
<span class="nc" id="L246">         DataFlavor[] f = t.getTransferDataFlavors();</span>
<span class="nc bnc" id="L247" title="All 4 branches missed.">         if (t.isDataFlavorSupported(f[0]) &amp;&amp; dragTabIndex &gt;= 0)</span>
         {
<span class="nc" id="L249">            return true;</span>
         }
<span class="nc" id="L251">         return false;</span>
      }
   }

<span class="nc" id="L255">   private boolean hasGhost = true;</span>

   public void setPaintGhost(boolean flag)
   {
<span class="nc" id="L259">      hasGhost = flag;</span>
<span class="nc" id="L260">   }</span>

   public boolean hasGhost()
   {
<span class="nc" id="L264">      return hasGhost;</span>
   }

<span class="nc" id="L267">   private boolean isPaintScrollArea = true;</span>

   public void setPaintScrollArea(boolean flag)
   {
<span class="nc" id="L271">      isPaintScrollArea = flag;</span>
<span class="nc" id="L272">   }</span>

   public boolean isPaintScrollArea()
   {
<span class="nc" id="L276">      return isPaintScrollArea;</span>
   }

   private int getTargetTabIndex(Point glassPt)
   {
<span class="nc" id="L281">      Point tabPt = SwingUtilities.convertPoint(glassPane, glassPt, DnDTabbedPane.this);</span>
<span class="nc bnc" id="L282" title="All 4 branches missed.">      boolean isTB = getTabPlacement() == JTabbedPane.TOP || getTabPlacement() == JTabbedPane.BOTTOM;</span>
<span class="nc bnc" id="L283" title="All 2 branches missed.">      for (int i = 0; i &lt; getTabCount(); i++)</span>
      {
<span class="nc" id="L285">         Rectangle r = getBoundsAt(i);</span>
<span class="nc bnc" id="L286" title="All 2 branches missed.">         if (isTB) r.setRect(r.x - r.width / 2, r.y, r.width, r.height);</span>
<span class="nc" id="L287">         else r.setRect(r.x, r.y - r.height / 2, r.width, r.height);</span>
<span class="nc bnc" id="L288" title="All 2 branches missed.">         if (r.contains(tabPt)) return i;</span>
      }
<span class="nc" id="L290">      Rectangle r = getBoundsAt(getTabCount() - 1);</span>
<span class="nc bnc" id="L291" title="All 2 branches missed.">      if (isTB) r.setRect(r.x + r.width / 2, r.y, r.width, r.height);</span>
<span class="nc" id="L292">      else r.setRect(r.x, r.y + r.height / 2, r.width, r.height);</span>
<span class="nc bnc" id="L293" title="All 2 branches missed.">      return r.contains(tabPt) ? getTabCount() : -1;</span>
   }

   private void convertTab(int prev, int next)
   {
<span class="nc bnc" id="L298" title="All 4 branches missed.">      if (next &lt; 0 || prev == next)</span>
      {
<span class="nc" id="L300">         return;</span>
      }
<span class="nc" id="L302">      Component cmp = getComponentAt(prev);</span>
<span class="nc" id="L303">      Component tab = getTabComponentAt(prev);</span>
<span class="nc" id="L304">      String str = getTitleAt(prev);</span>
<span class="nc" id="L305">      Icon icon = getIconAt(prev);</span>
<span class="nc" id="L306">      String tip = getToolTipTextAt(prev);</span>
<span class="nc" id="L307">      boolean flg = isEnabledAt(prev);</span>
<span class="nc bnc" id="L308" title="All 2 branches missed.">      int tgtindex = prev &gt; next ? next : next - 1;</span>
<span class="nc" id="L309">      remove(prev);</span>
<span class="nc" id="L310">      insertTab(str, icon, cmp, tip, tgtindex);</span>
<span class="nc" id="L311">      setEnabledAt(tgtindex, flg);</span>
      //When you drag'n'drop a disabled tab, it finishes enabled and selected.
      //pointed out by dlorde
<span class="nc bnc" id="L314" title="All 2 branches missed.">      if (flg) setSelectedIndex(tgtindex);</span>

      //I have a component in all tabs (jlabel with an X to close the tab) and when i move a tab the component disappear.
      //pointed out by Daniel Dario Morales Salas
<span class="nc" id="L318">      setTabComponentAt(tgtindex, tab);</span>
<span class="nc" id="L319">   }</span>

   private void initTargetLeftRightLine(int next)
   {
<span class="nc bnc" id="L323" title="All 6 branches missed.">      if (next &lt; 0 || dragTabIndex == next || next - dragTabIndex == 1)</span>
      {
<span class="nc" id="L325">         lineRect.setRect(0, 0, 0, 0);</span>
      }
<span class="nc bnc" id="L327" title="All 2 branches missed.">      else if (next == 0)</span>
      {
<span class="nc" id="L329">         Rectangle r = SwingUtilities.convertRectangle(this, getBoundsAt(0), glassPane);</span>
<span class="nc" id="L330">         lineRect.setRect(r.x - LINEWIDTH / 2, r.y, LINEWIDTH, r.height);</span>
<span class="nc" id="L331">      }</span>
      else
      {
<span class="nc" id="L334">         Rectangle r = SwingUtilities.convertRectangle(this, getBoundsAt(next - 1), glassPane);</span>
<span class="nc" id="L335">         lineRect.setRect(r.x + r.width - LINEWIDTH / 2, r.y, LINEWIDTH, r.height);</span>
      }
<span class="nc" id="L337">   }</span>

   private void initTargetTopBottomLine(int next)
   {
<span class="nc bnc" id="L341" title="All 6 branches missed.">      if (next &lt; 0 || dragTabIndex == next || next - dragTabIndex == 1)</span>
      {
<span class="nc" id="L343">         lineRect.setRect(0, 0, 0, 0);</span>
      }
<span class="nc bnc" id="L345" title="All 2 branches missed.">      else if (next == 0)</span>
      {
<span class="nc" id="L347">         Rectangle r = SwingUtilities.convertRectangle(this, getBoundsAt(0), glassPane);</span>
<span class="nc" id="L348">         lineRect.setRect(r.x, r.y - LINEWIDTH / 2, r.width, LINEWIDTH);</span>
<span class="nc" id="L349">      }</span>
      else
      {
<span class="nc" id="L352">         Rectangle r = SwingUtilities.convertRectangle(this, getBoundsAt(next - 1), glassPane);</span>
<span class="nc" id="L353">         lineRect.setRect(r.x, r.y + r.height - LINEWIDTH / 2, r.width, LINEWIDTH);</span>
      }
<span class="nc" id="L355">   }</span>

   private void initGlassPane(Component c, Point tabPt)
   {
<span class="nc" id="L359">      getRootPane().setGlassPane(glassPane);</span>
<span class="nc bnc" id="L360" title="All 2 branches missed.">      if (hasGhost())</span>
      {
<span class="nc" id="L362">         Rectangle rect = getBoundsAt(dragTabIndex);</span>
<span class="nc" id="L363">         BufferedImage image = new BufferedImage(c.getWidth(), c.getHeight(), BufferedImage.TYPE_INT_ARGB);</span>
<span class="nc" id="L364">         Graphics g = image.getGraphics();</span>
<span class="nc" id="L365">         c.paint(g);</span>
<span class="nc bnc" id="L366" title="All 2 branches missed.">         rect.x = rect.x &lt; 0 ? 0 : rect.x;</span>
<span class="nc bnc" id="L367" title="All 2 branches missed.">         rect.y = rect.y &lt; 0 ? 0 : rect.y;</span>
<span class="nc" id="L368">         image = image.getSubimage(rect.x, rect.y, rect.width, rect.height);</span>
<span class="nc" id="L369">         glassPane.setImage(image);</span>
      }
<span class="nc" id="L371">      Point glassPt = SwingUtilities.convertPoint(c, tabPt, glassPane);</span>
<span class="nc" id="L372">      glassPane.setPoint(glassPt);</span>
<span class="nc" id="L373">      glassPane.setVisible(true);</span>
<span class="nc" id="L374">   }</span>

   private Rectangle getTabAreaBounds()
   {
<span class="nc" id="L378">      Rectangle tabbedRect = getBounds();</span>
      //pointed out by daryl. NullPointerException: i.e. addTab(&quot;Tab&quot;,null)
      //Rectangle compRect   = getSelectedComponent().getBounds();
<span class="nc" id="L381">      Component comp = getSelectedComponent();</span>
<span class="nc" id="L382">      int idx = 0;</span>
<span class="nc bnc" id="L383" title="All 4 branches missed.">      while (comp == null &amp;&amp; idx &lt; getTabCount())</span>
      {
<span class="nc" id="L385">         comp = getComponentAt(idx++);</span>
      }
<span class="nc bnc" id="L387" title="All 2 branches missed.">      Rectangle compRect = (comp == null) ? new Rectangle() : comp.getBounds();</span>
<span class="nc" id="L388">      int tabPlacement = getTabPlacement();</span>
<span class="nc bnc" id="L389" title="All 2 branches missed.">      if (tabPlacement == TOP)</span>
      {
<span class="nc" id="L391">         tabbedRect.height = tabbedRect.height - compRect.height;</span>
      }
<span class="nc bnc" id="L393" title="All 2 branches missed.">      else if (tabPlacement == BOTTOM)</span>
      {
<span class="nc" id="L395">         tabbedRect.y = tabbedRect.y + compRect.y + compRect.height;</span>
<span class="nc" id="L396">         tabbedRect.height = tabbedRect.height - compRect.height;</span>
      }
<span class="nc bnc" id="L398" title="All 2 branches missed.">      else if (tabPlacement == LEFT)</span>
      {
<span class="nc" id="L400">         tabbedRect.width = tabbedRect.width - compRect.width;</span>
      }
<span class="nc bnc" id="L402" title="All 2 branches missed.">      else if (tabPlacement == RIGHT)</span>
      {
<span class="nc" id="L404">         tabbedRect.x = tabbedRect.x + compRect.x + compRect.width;</span>
<span class="nc" id="L405">         tabbedRect.width = tabbedRect.width - compRect.width;</span>
      }
<span class="nc" id="L407">      tabbedRect.grow(2, 2);</span>
<span class="nc" id="L408">      return tabbedRect;</span>
   }

   class GhostGlassPane extends JPanel
   {
      private final AlphaComposite composite;
<span class="nc" id="L414">      private Point location = new Point(0, 0);</span>
<span class="nc" id="L415">      private BufferedImage draggingGhost = null;</span>

      public GhostGlassPane()
<span class="nc" id="L418">      {</span>
<span class="nc" id="L419">         setOpaque(false);</span>
<span class="nc" id="L420">         composite = AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.5f);</span>
         //http://bugs.sun.com/view_bug.do?bug_id=6700748
         //setCursor(null);
<span class="nc" id="L423">      }</span>

      public void setImage(BufferedImage draggingGhost)
      {
<span class="nc" id="L427">         this.draggingGhost = draggingGhost;</span>
<span class="nc" id="L428">      }</span>

      public void setPoint(Point location)
      {
<span class="nc" id="L432">         this.location = location;</span>
<span class="nc" id="L433">      }</span>

      @Override
      public void paintComponent(Graphics g)
      {
<span class="nc" id="L438">         Graphics2D g2 = (Graphics2D) g;</span>
<span class="nc" id="L439">         g2.setComposite(composite);</span>
<span class="nc bnc" id="L440" title="All 4 branches missed.">         if (isPaintScrollArea() &amp;&amp; getTabLayoutPolicy() == SCROLL_TAB_LAYOUT)</span>
         {
<span class="nc" id="L442">            g2.setPaint(Color.RED);</span>
<span class="nc" id="L443">            g2.fill(rBackward);</span>
<span class="nc" id="L444">            g2.fill(rForward);</span>
         }
<span class="nc bnc" id="L446" title="All 2 branches missed.">         if (draggingGhost != null)</span>
         {
<span class="nc" id="L448">            double xx = location.getX() - (draggingGhost.getWidth(this) / 2d);</span>
<span class="nc" id="L449">            double yy = location.getY() - (draggingGhost.getHeight(this) / 2d);</span>
<span class="nc" id="L450">            g2.drawImage(draggingGhost, (int) xx, (int) yy, null);</span>
         }
<span class="nc bnc" id="L452" title="All 2 branches missed.">         if (dragTabIndex &gt;= 0)</span>
         {
<span class="nc" id="L454">            g2.setPaint(lineColor);</span>
<span class="nc" id="L455">            g2.fill(lineRect);</span>
         }
<span class="nc" id="L457">      }</span>
   }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>