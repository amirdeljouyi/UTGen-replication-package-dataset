<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SessionSQLPropertiesPanel.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">102_squirrel-sql</a> &gt; <a href="index.source.html" class="el_package">net.sourceforge.squirrel_sql.client.session.properties</a> &gt; <span class="el_source">SessionSQLPropertiesPanel.java</span></div><h1>SessionSQLPropertiesPanel.java</h1><pre class="source lang-java linenums">package net.sourceforge.squirrel_sql.client.session.properties;
/*
 * Copyright (C) 2001-2003 Colin Bell
 * colbell@users.sourceforge.net
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 */
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.*;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

import net.sourceforge.squirrel_sql.fw.gui.FontChooser;
import net.sourceforge.squirrel_sql.fw.gui.FontInfo;
import net.sourceforge.squirrel_sql.fw.gui.IntegerField;
import net.sourceforge.squirrel_sql.fw.gui.MultipleLineLabel;
import net.sourceforge.squirrel_sql.fw.util.StringManager;
import net.sourceforge.squirrel_sql.fw.util.StringManagerFactory;
import net.sourceforge.squirrel_sql.fw.sql.TokenizerSessPropsInteractions;
import net.sourceforge.squirrel_sql.fw.sql.IQueryTokenizer;

import net.sourceforge.squirrel_sql.client.IApplication;
import net.sourceforge.squirrel_sql.client.preferences.INewSessionPropertiesPanel;
import net.sourceforge.squirrel_sql.client.session.ISession;
/**
 * This panel allows the user to tailor SQL settings for a session.
 *
 * @author &lt;A HREF=&quot;mailto:colbell@users.sourceforge.net&quot;&gt;Colin Bell&lt;/A&gt;
 */
public class SessionSQLPropertiesPanel
	implements INewSessionPropertiesPanel, ISessionPropertiesPanel
{
	/** Internationalized strings for this class. */
<span class="nc" id="L49">	private static final StringManager s_stringMgr =</span>
<span class="nc" id="L50">		StringManagerFactory.getStringManager(SessionSQLPropertiesPanel.class);</span>

	/** Application API. */
	private final IApplication _app;

	/** The actual GUI panel that allows user to do the maintenance. */
	private final SQLPropertiesPanel _myPanel;

   private final JScrollPane _scrolledMyPanel;

	/** Session properties object being maintained. */
	private SessionProperties _props;

   /**
	 * ctor specifying the Application API.
	 *
	 * @param	app		Application API.
	 *
	 * @param session
    * @throws	IllegalArgumentException
	 * 			Thrown if &lt;tt&gt;null&lt;/tt&gt; &lt;tt&gt;IApplication&lt;/tt&gt;
	 * 			passed.
	 */
	public SessionSQLPropertiesPanel(IApplication app, ISession session) throws IllegalArgumentException
	{
<span class="nc" id="L75">		super();</span>
<span class="nc bnc" id="L76" title="All 2 branches missed.">      if (app == null)</span>
		{
<span class="nc" id="L78">			throw new IllegalArgumentException(&quot;Null IApplication passed&quot;);</span>
		}
<span class="nc" id="L80">		_app = app;</span>
<span class="nc" id="L81">		_myPanel = new SQLPropertiesPanel(app, session);</span>
<span class="nc" id="L82">      _scrolledMyPanel = new JScrollPane(_myPanel);</span>
<span class="nc" id="L83">   }</span>


	public void initialize(IApplication app)
	{
<span class="nc" id="L88">		_props = _app.getSquirrelPreferences().getSessionProperties();</span>
<span class="nc" id="L89">		_myPanel.loadData(_props);</span>
<span class="nc" id="L90">	}</span>

	public void initialize(IApplication app, ISession session)
		throws IllegalArgumentException
	{
<span class="nc bnc" id="L95" title="All 2 branches missed.">		if (session == null)</span>
		{
<span class="nc" id="L97">			throw new IllegalArgumentException(&quot;Null ISession passed&quot;);</span>
		}
<span class="nc" id="L99">		_props = session.getProperties();</span>
<span class="nc" id="L100">		_myPanel.loadData(_props);</span>
<span class="nc" id="L101">	}</span>

	public Component getPanelComponent()
	{
<span class="nc" id="L105">		return _scrolledMyPanel;</span>
	}

	public String getTitle()
	{
<span class="nc" id="L110">		return s_stringMgr.getString(&quot;SessionSQLPropertiesPanel.sql&quot;);</span>
	}

	public String getHint()
	{
<span class="nc" id="L115">		return getTitle();</span>
	}

	public void applyChanges()
	{
<span class="nc" id="L120">		_myPanel.applyChanges(_props);</span>
<span class="nc" id="L121">	}</span>

	private static final class SQLPropertiesPanel extends JPanel
	{
<span class="nc" id="L125">		private JCheckBox _abortOnErrorChk = new JCheckBox(s_stringMgr.getString(&quot;SessionSQLPropertiesPanel.abortonerror&quot;));</span>
<span class="nc" id="L126">		private JCheckBox _showSQLErrorsInTabChk = new JCheckBox(s_stringMgr.getString(&quot;SessionSQLPropertiesPanel.showSQLErrorsInTab&quot;));</span>
<span class="nc" id="L127">		private JCheckBox _writeSQLErrorsToLogChk = new JCheckBox(s_stringMgr.getString(&quot;SessionSQLPropertiesPanel.writesqlerrorstolog&quot;));</span>
<span class="nc" id="L128">		private JCheckBox _loadColumsInBackgroundChk = new JCheckBox(s_stringMgr.getString(&quot;SessionSQLPropertiesPanel.loadColumsInBackground&quot;));</span>
<span class="nc" id="L129">		private JCheckBox _autoCommitChk = new JCheckBox(s_stringMgr.getString(&quot;SessionSQLPropertiesPanel.autocommit&quot;));</span>
<span class="nc" id="L130">		private JCheckBox _commitOnClose = new JCheckBox(s_stringMgr.getString(&quot;SessionSQLPropertiesPanel.commitonclose&quot;));</span>
<span class="nc" id="L131">		private IntegerField _sqlNbrRowsToShowField = new IntegerField(5);</span>
<span class="nc" id="L132">		private JCheckBox _sqlLimitRowsChk = new JCheckBox(s_stringMgr.getString(&quot;SessionSQLPropertiesPanel.limitrows&quot;));</span>
<span class="nc" id="L133">		private JCheckBox _sqlFetchSizeChk = new JCheckBox(s_stringMgr.getString(&quot;SessionSQLPropertiesPanel.fetchSize&quot;));</span>
<span class="nc" id="L134">		private IntegerField _sqlFetchSizeField = new IntegerField(5);</span>
<span class="nc" id="L135">		private JTextField _stmtSepField = new JTextField(5);</span>
<span class="nc" id="L136">		private JTextField _solCommentField = new JTextField(2);</span>
      // i18n[SessionSQLPropertiesPanel.removeMultiLineComment=Remove multi line comment (/*...*/) from SQL before sending to database]
<span class="nc" id="L138">      private JCheckBox _removeMultiLineComment = new JCheckBox(s_stringMgr.getString(&quot;SessionSQLPropertiesPanel.removeMultiLineComment&quot;));</span>

<span class="nc" id="L140">      private JCheckBox _limitSQLResultTabsChk = new JCheckBox(s_stringMgr.getString(&quot;SessionSQLPropertiesPanel.limitsqlresulttabs&quot;));</span>
<span class="nc" id="L141">      private IntegerField _limitSQLResultTabsField = new IntegerField(5);</span>

		/** Label displaying the selected font. */
<span class="nc" id="L144">		private JLabel _fontLbl = new JLabel();</span>

		/** Button to select font. */
<span class="nc" id="L147">		private FontButton _fontBtn = new FontButton(s_stringMgr.getString(&quot;SessionSQLPropertiesPanel.font&quot;), _fontLbl);</span>

<span class="nc" id="L149">		private JCheckBox _shareSQLHistoryChk = new JCheckBox(s_stringMgr.getString(&quot;SessionSQLPropertiesPanel.sharesqlhistory&quot;));</span>
<span class="nc" id="L150">		private JCheckBox _limitSQLHistoryComboSizeChk = new JCheckBox(s_stringMgr.getString(&quot;SessionSQLPropertiesPanel.limitsqlhistorysize&quot;));</span>
<span class="nc" id="L151">		private IntegerField _limitSQLHistoryComboSizeField = new IntegerField(5);</span>
<span class="nc" id="L152">		private JCheckBox _showResultsMetaChk = new JCheckBox(s_stringMgr.getString(&quot;SessionSQLPropertiesPanel.showresultsmd&quot;));</span>

		/**
		 * This object will update the status of the GUI controls as the user
		 * makes changes.
		 */
<span class="nc" id="L158">		private final ControlMediator _controlMediator = new ControlMediator();</span>
      private ISession _session;

      SQLPropertiesPanel(IApplication app, ISession session)
		{
<span class="nc" id="L163">			super();</span>
<span class="nc" id="L164">         _session = session;</span>
<span class="nc" id="L165">         createGUI();</span>
<span class="nc" id="L166">		}</span>

		void loadData(SessionProperties props)
		{
<span class="nc" id="L170">			_abortOnErrorChk.setSelected(props.getAbortOnError());</span>
<span class="nc" id="L171">         _showSQLErrorsInTabChk.setSelected(props.getShowSQLErrorsInTab());</span>
<span class="nc" id="L172">			_writeSQLErrorsToLogChk.setSelected(props.getWriteSQLErrorsToLog());</span>
<span class="nc" id="L173">			_loadColumsInBackgroundChk.setSelected(props.getLoadColumnsInBackground());</span>

<span class="nc" id="L175">			_autoCommitChk.setSelected(props.getAutoCommit());</span>
<span class="nc" id="L176">			_commitOnClose.setSelected(props.getCommitOnClosingConnection());</span>
<span class="nc" id="L177">			_sqlNbrRowsToShowField.setInt(props.getSQLNbrRowsToShow());</span>
<span class="nc" id="L178">			_sqlLimitRowsChk.setSelected(props.getSQLLimitRows());</span>
<span class="nc" id="L179">			_sqlFetchSizeChk.setSelected(props.getSQLUseFetchSize());</span>
<span class="nc" id="L180">			_sqlFetchSizeField.setInt(props.getSQLFetchSize());</span>

<span class="nc bnc" id="L182" title="All 2 branches missed.">         if(null != _session)</span>
         {
<span class="nc" id="L184">            IQueryTokenizer queryTokenizer = _session.getQueryTokenizer();</span>
<span class="nc" id="L185">            TokenizerSessPropsInteractions qtp = queryTokenizer.getTokenizerSessPropsInteractions();</span>
<span class="nc bnc" id="L186" title="All 2 branches missed.">            if(qtp.isTokenizerDefinesStatementSeparator())</span>
            {
<span class="nc" id="L188">               _stmtSepField.setText(queryTokenizer.getSQLStatementSeparator());</span>
<span class="nc" id="L189">               _stmtSepField.setEditable(false);</span>
            }
            else
            {
<span class="nc" id="L193">               _stmtSepField.setText(props.getSQLStatementSeparator());</span>
<span class="nc" id="L194">               _stmtSepField.setEditable(true);</span>
            }

<span class="nc bnc" id="L197" title="All 2 branches missed.">            if (qtp.isTokenizerDefinesStartOfLineComment())</span>
            {
<span class="nc" id="L199">               _solCommentField.setText(queryTokenizer.getLineCommentBegin());</span>
<span class="nc" id="L200">               _solCommentField.setEditable(false);</span>
            }
            else
            {
<span class="nc" id="L204">               _solCommentField.setText(props.getStartOfLineComment());</span>
<span class="nc" id="L205">               _solCommentField.setEditable(true);</span>
            }

<span class="nc bnc" id="L208" title="All 2 branches missed.">            if (qtp.isTokenizerDefinesStatementSeparator())</span>
            {
<span class="nc" id="L210">               _removeMultiLineComment.setSelected(queryTokenizer.isRemoveMultiLineComment());</span>
<span class="nc" id="L211">               _removeMultiLineComment.setEnabled(false);</span>
            }
            else
            {
<span class="nc" id="L215">               _removeMultiLineComment.setSelected(props.getRemoveMultiLineComment());</span>
<span class="nc" id="L216">               _removeMultiLineComment.setEnabled(true);</span>
            }
<span class="nc" id="L218">         }</span>
         else
         {
<span class="nc" id="L221">            _stmtSepField.setText(props.getSQLStatementSeparator());</span>
<span class="nc" id="L222">            _solCommentField.setText(props.getStartOfLineComment());</span>
<span class="nc" id="L223">            _removeMultiLineComment.setSelected(props.getRemoveMultiLineComment());</span>
         }

<span class="nc" id="L226">         _shareSQLHistoryChk.setSelected(props.getSQLShareHistory());</span>
<span class="nc" id="L227">			_limitSQLHistoryComboSizeChk.setSelected(props.getLimitSQLEntryHistorySize());</span>
<span class="nc" id="L228">			_limitSQLHistoryComboSizeField.setInt(props.getSQLEntryHistorySize());</span>

<span class="nc" id="L230">			_limitSQLResultTabsChk.setSelected(props.getLimitSQLResultTabs());</span>
<span class="nc" id="L231">			_limitSQLResultTabsField.setInt(props.getSqlResultTabLimit());</span>

<span class="nc" id="L233">			_showResultsMetaChk.setSelected(props.getShowResultsMetaData());</span>

<span class="nc" id="L235">			FontInfo fi = props.getFontInfo();</span>
<span class="nc bnc" id="L236" title="All 2 branches missed.">			if (fi == null)</span>
			{
<span class="nc" id="L238">				fi = new FontInfo(UIManager.getFont(&quot;TextArea.font&quot;));</span>
			}
<span class="nc" id="L240">			_fontLbl.setText(fi.toString());</span>
<span class="nc" id="L241">			_fontBtn.setSelectedFont(fi.createFont());</span>

<span class="nc" id="L243">			updateControlStatus();</span>
<span class="nc" id="L244">		}</span>

		void applyChanges(SessionProperties props)
		{
<span class="nc" id="L248">			props.setAbortOnError(_abortOnErrorChk.isSelected());</span>
<span class="nc" id="L249">			props.setShowSQLErrorsInTab(_showSQLErrorsInTabChk.isSelected());</span>
<span class="nc" id="L250">			props.setWriteSQLErrorsToLog(_writeSQLErrorsToLogChk.isSelected());</span>
<span class="nc" id="L251">			props.setLoadColumnsInBackground(_loadColumsInBackgroundChk.isSelected());</span>
<span class="nc" id="L252">			props.setAutoCommit(_autoCommitChk.isSelected());</span>
<span class="nc" id="L253">			props.setCommitOnClosingConnection(_commitOnClose.isSelected());</span>
<span class="nc" id="L254">			props.setSQLNbrRowsToShow(_sqlNbrRowsToShowField.getInt());</span>
<span class="nc" id="L255">			props.setSQLLimitRows(_sqlLimitRowsChk.isSelected());</span>
<span class="nc" id="L256">			props.setSQLFetchSize(_sqlFetchSizeField.getInt());</span>
<span class="nc" id="L257">			props.setSQLUseFetchSize(_sqlFetchSizeChk.isSelected());</span>
			
<span class="nc" id="L259">			props.setSQLStatementSeparator(_stmtSepField.getText());</span>
<span class="nc" id="L260">			props.setStartOfLineComment(_solCommentField.getText());</span>
<span class="nc" id="L261">         props.setRemoveMultiLineComment(_removeMultiLineComment.isSelected());</span>

<span class="nc" id="L263">			props.setFontInfo(_fontBtn.getFontInfo());</span>

<span class="nc" id="L265">			props.setSQLShareHistory(_shareSQLHistoryChk.isSelected());</span>
<span class="nc" id="L266">			props.setLimitSQLEntryHistorySize(_limitSQLHistoryComboSizeChk.isSelected());</span>
<span class="nc" id="L267">			props.setSQLEntryHistorySize(_limitSQLHistoryComboSizeField.getInt());</span>

<span class="nc" id="L269">			props.setLimitSQLResultTabs(_limitSQLResultTabsChk.isSelected());</span>

<span class="nc bnc" id="L271" title="All 2 branches missed.">         if(0 &gt;= _limitSQLResultTabsField.getInt())</span>
         {
<span class="nc" id="L273">            props.setSqlResultTabLimit(15);</span>
         }
         else
         {
<span class="nc" id="L277">            props.setSqlResultTabLimit(_limitSQLResultTabsField.getInt());</span>
         }

<span class="nc" id="L280">			props.setShowResultsMetaData(_showResultsMetaChk.isSelected());</span>
<span class="nc" id="L281">		}</span>

		private void updateControlStatus()
		{
<span class="nc bnc" id="L285" title="All 2 branches missed.">			_commitOnClose.setEnabled(!_autoCommitChk.isSelected());</span>

<span class="nc" id="L287">			_sqlNbrRowsToShowField.setEnabled(_sqlLimitRowsChk.isSelected());</span>

<span class="nc" id="L289">         _sqlFetchSizeField.setEnabled(_sqlFetchSizeChk.isSelected());</span>

<span class="nc" id="L291">         _limitSQLResultTabsField.setEnabled(_limitSQLResultTabsChk.isSelected());</span>

			// If this session doesn't share SQL history with other sessions
			// then disable the controls that relate to SQL History.
<span class="nc" id="L295">			final boolean shareSQLHistory = _shareSQLHistoryChk.isSelected();</span>

<span class="nc" id="L297">		}</span>

		private void createGUI()
		{
<span class="nc" id="L301">			setLayout(new GridBagLayout());</span>
<span class="nc" id="L302">			final GridBagConstraints gbc = new GridBagConstraints();</span>
<span class="nc" id="L303">			gbc.anchor = GridBagConstraints.WEST;</span>
<span class="nc" id="L304">			gbc.fill = GridBagConstraints.HORIZONTAL;</span>
<span class="nc" id="L305">			gbc.insets = new Insets(4, 4, 4, 4);</span>

<span class="nc" id="L307">			gbc.gridx = 0;</span>
<span class="nc" id="L308">			gbc.gridy = 0;</span>
<span class="nc" id="L309">			add(createSQLPanel(), gbc);</span>

<span class="nc" id="L311">			++gbc.gridy;</span>
<span class="nc" id="L312">			add(createFontPanel(), gbc);</span>

<span class="nc" id="L314">			++gbc.gridy;</span>
<span class="nc" id="L315">			add(createSQLHistoryPanel(), gbc);</span>
<span class="nc" id="L316">		}</span>

		private JPanel createSQLPanel()
		{
<span class="nc" id="L320">			final JPanel pnl = new JPanel(new GridBagLayout());</span>
<span class="nc" id="L321">			pnl.setBorder(BorderFactory.createTitledBorder(s_stringMgr.getString(&quot;SessionSQLPropertiesPanel.sql&quot;)));</span>
<span class="nc" id="L322">			final GridBagConstraints gbc = new GridBagConstraints();</span>
<span class="nc" id="L323">			gbc.fill = GridBagConstraints.HORIZONTAL;</span>
<span class="nc" id="L324">			gbc.insets = new Insets(4, 4, 4, 4);</span>
<span class="nc" id="L325">			gbc.anchor = GridBagConstraints.CENTER;</span>

<span class="nc" id="L327">			_autoCommitChk.addChangeListener(_controlMediator);</span>
<span class="nc" id="L328">			_sqlLimitRowsChk.addChangeListener(_controlMediator);</span>
<span class="nc" id="L329">			_sqlFetchSizeChk.addChangeListener(_controlMediator);</span>
<span class="nc" id="L330">			_sqlNbrRowsToShowField.setColumns(5);</span>
<span class="nc" id="L331">			_stmtSepField.setColumns(5);</span>

<span class="nc" id="L333">         _limitSQLResultTabsChk.addChangeListener(_controlMediator);</span>
<span class="nc" id="L334">         _limitSQLResultTabsField.setColumns(5);</span>


<span class="nc" id="L337">			gbc.gridx = 0;</span>
<span class="nc" id="L338">			gbc.gridy = 0;</span>
<span class="nc" id="L339">			gbc.gridwidth = 2;</span>
<span class="nc" id="L340">			pnl.add(_autoCommitChk, gbc);</span>

<span class="nc" id="L342">			gbc.gridx+=2;</span>
<span class="nc" id="L343">			gbc.gridwidth = GridBagConstraints.REMAINDER;</span>
<span class="nc" id="L344">			pnl.add(_commitOnClose, gbc);</span>

<span class="nc" id="L346">			++gbc.gridy; // new line</span>
<span class="nc" id="L347">			gbc.gridx = 0;</span>
<span class="nc" id="L348">			gbc.gridwidth = 3;</span>
<span class="nc" id="L349">			pnl.add(_showResultsMetaChk, gbc);</span>

<span class="nc" id="L351">			++gbc.gridy; // new line</span>
<span class="nc" id="L352">			gbc.gridx = 0;</span>
<span class="nc" id="L353">			gbc.gridwidth = 2;</span>
<span class="nc" id="L354">			pnl.add(_sqlLimitRowsChk, gbc);</span>
<span class="nc" id="L355">			gbc.gridwidth = 1;</span>
<span class="nc" id="L356">			gbc.gridx+=2;</span>
<span class="nc" id="L357">			pnl.add(_sqlNbrRowsToShowField, gbc);</span>
<span class="nc" id="L358">			++gbc.gridx;</span>
<span class="nc" id="L359">			gbc.gridwidth = GridBagConstraints.REMAINDER;</span>
<span class="nc" id="L360">			pnl.add(new JLabel(s_stringMgr.getString(&quot;SessionSQLPropertiesPanel.rows&quot;)), gbc);</span>
			
			
			// Show fetchSize-Option
<span class="nc" id="L364">			++gbc.gridy; // new line</span>
<span class="nc" id="L365">			gbc.gridx = 0;</span>
<span class="nc" id="L366">			gbc.gridwidth = 2;</span>
<span class="nc" id="L367">			pnl.add(_sqlFetchSizeChk, gbc);</span>
<span class="nc" id="L368">			gbc.gridwidth = 1;</span>
<span class="nc" id="L369">			gbc.gridx+=2;</span>
<span class="nc" id="L370">			pnl.add(_sqlFetchSizeField, gbc);</span>
<span class="nc" id="L371">			++gbc.gridx;</span>
<span class="nc" id="L372">			gbc.gridwidth = GridBagConstraints.REMAINDER;</span>
<span class="nc" id="L373">			pnl.add(new JLabel(s_stringMgr.getString(&quot;SessionSQLPropertiesPanel.rows&quot;)), gbc);</span>
			
			
			
			
			
			
			
			

<span class="nc" id="L383">         ++gbc.gridy; // new line</span>
<span class="nc" id="L384">         gbc.gridx = 0;</span>
<span class="nc" id="L385">         gbc.gridwidth = 2;</span>
<span class="nc" id="L386">         pnl.add(_limitSQLResultTabsChk, gbc);</span>
<span class="nc" id="L387">         gbc.gridwidth = 1;</span>
<span class="nc" id="L388">         gbc.gridx+=2;</span>
<span class="nc" id="L389">         pnl.add(_limitSQLResultTabsField, gbc);</span>
<span class="nc" id="L390">         ++gbc.gridx;</span>
<span class="nc" id="L391">         gbc.gridwidth = GridBagConstraints.REMAINDER;</span>
<span class="nc" id="L392">         pnl.add(new JLabel(s_stringMgr.getString(&quot;SessionSQLPropertiesPanel.tabs&quot;)), gbc);</span>


<span class="nc" id="L395">			++gbc.gridy; // new line</span>
<span class="nc" id="L396">			gbc.gridx = 0;</span>
<span class="nc" id="L397">			gbc.gridwidth = GridBagConstraints.REMAINDER;</span>
<span class="nc" id="L398">			pnl.add(_abortOnErrorChk, gbc);</span>

<span class="nc" id="L400">			++gbc.gridy; // new line</span>
<span class="nc" id="L401">			gbc.gridx = 0;</span>
<span class="nc" id="L402">			gbc.gridwidth = GridBagConstraints.REMAINDER;</span>
<span class="nc" id="L403">			pnl.add(_showSQLErrorsInTabChk, gbc);</span>

<span class="nc" id="L405">         ++gbc.gridy; // new line</span>
<span class="nc" id="L406">         gbc.gridx = 0;</span>
<span class="nc" id="L407">         gbc.gridwidth = GridBagConstraints.REMAINDER;</span>
<span class="nc" id="L408">         pnl.add(_writeSQLErrorsToLogChk, gbc);</span>


<span class="nc" id="L411">         ++gbc.gridy; // new line</span>
<span class="nc" id="L412">         gbc.gridx = 0;</span>
<span class="nc" id="L413">         gbc.gridwidth = GridBagConstraints.REMAINDER;</span>
<span class="nc" id="L414">         pnl.add(createLoadColumnsInBackkgroundPanel(), gbc);</span>


<span class="nc bnc" id="L417" title="All 2 branches missed.">         if (null != _session)</span>
         {
<span class="nc" id="L419">            TokenizerSessPropsInteractions tep = _session.getQueryTokenizer().getTokenizerSessPropsInteractions();</span>

<span class="nc bnc" id="L421" title="All 2 branches missed.">            if(   tep.isTokenizerDefinesRemoveMultiLineComment() ||</span>
<span class="nc bnc" id="L422" title="All 2 branches missed.">                  tep.isTokenizerDefinesStartOfLineComment() ||</span>
<span class="nc bnc" id="L423" title="All 2 branches missed.">                  tep.isTokenizerDefinesStatementSeparator())</span>
            {
<span class="nc" id="L425">               ++gbc.gridy;</span>
<span class="nc" id="L426">               gbc.gridwidth = 4;</span>
<span class="nc" id="L427">               MultipleLineLabel lbl = new MultipleLineLabel(s_stringMgr.getString(&quot;SessionSQLPropertiesPanel.tokenizerNotEditableMsg&quot;));</span>
<span class="nc" id="L428">               lbl.setForeground(Color.red);</span>
<span class="nc" id="L429">               pnl.add(lbl, gbc);</span>

<span class="nc" id="L431">               gbc.gridwidth = 1;</span>
            }
         }
         

<span class="nc" id="L436">			++gbc.gridy; // new line</span>
<span class="nc" id="L437">			gbc.gridx = 0;</span>
<span class="nc" id="L438">			gbc.gridwidth = 1;</span>
<span class="nc" id="L439">			pnl.add(new JLabel(s_stringMgr.getString(&quot;SessionSQLPropertiesPanel.stmtsep&quot;)), gbc);</span>
<span class="nc" id="L440">			++gbc.gridx;</span>
<span class="nc" id="L441">			pnl.add(_stmtSepField, gbc);</span>
<span class="nc" id="L442">			++gbc.gridx;</span>
<span class="nc" id="L443">			pnl.add(new RightLabel(s_stringMgr.getString(&quot;SessionSQLPropertiesPanel.solcomment&quot;)), gbc);</span>
<span class="nc" id="L444">			++gbc.gridx;</span>
<span class="nc" id="L445">			pnl.add(_solCommentField, gbc);</span>

<span class="nc" id="L447">         ++gbc.gridy; // new line</span>
<span class="nc" id="L448">         gbc.gridx = 0;</span>
<span class="nc" id="L449">         gbc.gridwidth = 4;</span>
<span class="nc" id="L450">         pnl.add(_removeMultiLineComment, gbc);</span>


<span class="nc" id="L453">         return pnl;</span>
		}

      private JPanel createLoadColumnsInBackkgroundPanel()
      {
<span class="nc" id="L458">         JPanel ret = new JPanel(new GridBagLayout());</span>

         GridBagConstraints gbc;

<span class="nc" id="L462">         gbc = new GridBagConstraints(0,0,1,1,1,1, GridBagConstraints.NORTHWEST, GridBagConstraints.BOTH, new Insets(0,0,5,0), 0,0);</span>
<span class="nc" id="L463">         String loadColsInBackgroundDescription = s_stringMgr.getString(&quot;SessionSQLPropertiesPanel.loadColsInBackgroundDescription&quot;);</span>
<span class="nc" id="L464">         ret.add(new MultipleLineLabel(loadColsInBackgroundDescription), gbc);</span>

<span class="nc" id="L466">         gbc = new GridBagConstraints(0,1,1,1,0,0, GridBagConstraints.NORTHWEST, GridBagConstraints.NONE, new Insets(0,0,0,0), 0,0);</span>
<span class="nc" id="L467">         ret.add(_loadColumsInBackgroundChk, gbc);</span>

<span class="nc" id="L469">         ret.setBorder(BorderFactory.createTitledBorder(s_stringMgr.getString(&quot;SessionSQLPropertiesPanel.columnLoading&quot;)));</span>

<span class="nc" id="L471">         return ret;</span>
      }

      private JPanel createFontPanel()
		{
<span class="nc" id="L476">			JPanel pnl = new JPanel();</span>
<span class="nc" id="L477">			pnl.setBorder(BorderFactory.createTitledBorder(s_stringMgr.getString(&quot;SessionSQLPropertiesPanel.sqlentryarea&quot;)));</span>
<span class="nc" id="L478">			pnl.setLayout(new GridBagLayout());</span>
<span class="nc" id="L479">			final GridBagConstraints gbc = new GridBagConstraints();</span>
<span class="nc" id="L480">			gbc.fill = GridBagConstraints.HORIZONTAL;</span>
<span class="nc" id="L481">			gbc.insets = new Insets(4, 4, 4, 4);</span>

<span class="nc" id="L483">			_fontBtn.addActionListener(new FontButtonListener());</span>

<span class="nc" id="L485">			gbc.gridx = 0;</span>
<span class="nc" id="L486">			gbc.gridy = 0;</span>
<span class="nc" id="L487">			pnl.add(_fontBtn, gbc);</span>

<span class="nc" id="L489">			++gbc.gridx;</span>
<span class="nc" id="L490">			gbc.weightx = 1.0;</span>
<span class="nc" id="L491">			pnl.add(_fontLbl, gbc);</span>

<span class="nc" id="L493">			return pnl;</span>
		}

		private JPanel createSQLHistoryPanel()
		{
<span class="nc" id="L498">			_shareSQLHistoryChk.addChangeListener(_controlMediator);</span>
<span class="nc" id="L499">			_limitSQLHistoryComboSizeChk.addChangeListener(_controlMediator);</span>

<span class="nc" id="L501">			JPanel pnl = new JPanel(new GridBagLayout());</span>
<span class="nc" id="L502">			pnl.setBorder(BorderFactory.createTitledBorder(s_stringMgr.getString(&quot;SessionSQLPropertiesPanel.sqlhistory&quot;)));</span>
<span class="nc" id="L503">			final GridBagConstraints gbc = new GridBagConstraints();</span>
<span class="nc" id="L504">			gbc.fill = GridBagConstraints.HORIZONTAL;</span>
<span class="nc" id="L505">			gbc.insets = new Insets(4, 4, 4, 4);</span>
<span class="nc" id="L506">			gbc.anchor = GridBagConstraints.WEST;</span>

<span class="nc" id="L508">			gbc.gridx = 0;</span>
<span class="nc" id="L509">			gbc.gridy = 0;</span>
<span class="nc" id="L510">			pnl.add(_shareSQLHistoryChk, gbc);</span>

<span class="nc" id="L512">			++gbc.gridy;</span>
<span class="nc" id="L513">			pnl.add(_limitSQLHistoryComboSizeChk, gbc);</span>

<span class="nc" id="L515">			++gbc.gridx;</span>
<span class="nc" id="L516">			pnl.add(_limitSQLHistoryComboSizeField, gbc);</span>

<span class="nc" id="L518">			return pnl;</span>
		}

		private static final class RightLabel extends JLabel
		{
			RightLabel(String title)
			{
<span class="nc" id="L525">				super(title, SwingConstants.RIGHT);</span>
<span class="nc" id="L526">			}</span>
		}

		private static final class FontButton extends JButton
		{
			private FontInfo _fi;
			private JLabel _lbl;
			private Font _font;

			FontButton(String text, JLabel lbl)
			{
<span class="nc" id="L537">				super(text);</span>
<span class="nc" id="L538">				_lbl = lbl;</span>
<span class="nc" id="L539">			}</span>

			FontInfo getFontInfo()
			{
<span class="nc" id="L543">				return _fi;</span>
			}

			Font getSelectedFont()
			{
<span class="nc" id="L548">				return _font;</span>
			}

			void setSelectedFont(Font font)
			{
<span class="nc" id="L553">				_font = font;</span>
<span class="nc bnc" id="L554" title="All 2 branches missed.">				if (_fi == null)</span>
				{
<span class="nc" id="L556">					_fi = new FontInfo(font);</span>
				}
				else
				{
<span class="nc" id="L560">					_fi.setFont(font);</span>
				}
<span class="nc" id="L562">			}</span>
		}

		private static final class FontButtonListener implements ActionListener
		{
			public void actionPerformed(ActionEvent evt)
			{
<span class="nc bnc" id="L569" title="All 2 branches missed.">				if (evt.getSource() instanceof FontButton)</span>
				{
<span class="nc" id="L571">					FontButton btn = (FontButton) evt.getSource();</span>
<span class="nc" id="L572">					FontInfo fi = btn.getFontInfo();</span>
<span class="nc" id="L573">					Font font = null;</span>
<span class="nc bnc" id="L574" title="All 2 branches missed.">					if (fi != null)</span>
					{
<span class="nc" id="L576">						font = fi.createFont();</span>
					}
<span class="nc" id="L578">					font = new FontChooser().showDialog(font);</span>
<span class="nc bnc" id="L579" title="All 2 branches missed.">					if (font != null)</span>
					{
<span class="nc" id="L581">						btn.setSelectedFont(font);</span>
<span class="nc" id="L582">						btn._lbl.setText(new FontInfo(font).toString());</span>
					}
				}
<span class="nc" id="L585">			}</span>
		}

		/**
		 * This class will update the status of the GUI controls as the user
		 * makes changes.
		 */
<span class="nc" id="L592">		private final class ControlMediator implements ChangeListener,</span>
															ActionListener
		{
			public void stateChanged(ChangeEvent evt)
			{
<span class="nc" id="L597">				updateControlStatus();</span>
<span class="nc" id="L598">			}</span>

			public void actionPerformed(ActionEvent evt)
			{
<span class="nc" id="L602">				updateControlStatus();</span>
<span class="nc" id="L603">			}</span>
		}
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>