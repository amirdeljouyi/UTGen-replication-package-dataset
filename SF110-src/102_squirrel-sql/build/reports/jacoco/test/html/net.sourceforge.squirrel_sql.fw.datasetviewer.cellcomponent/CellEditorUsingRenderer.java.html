<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>CellEditorUsingRenderer.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">102_squirrel-sql</a> &gt; <a href="index.source.html" class="el_package">net.sourceforge.squirrel_sql.fw.datasetviewer.cellcomponent</a> &gt; <span class="el_source">CellEditorUsingRenderer.java</span></div><h1>CellEditorUsingRenderer.java</h1><pre class="source lang-java linenums">package net.sourceforge.squirrel_sql.fw.datasetviewer.cellcomponent;

import javax.swing.DefaultCellEditor;
import javax.swing.JTextField;

/**
 * @author gwg
 *
 * Class that extends DefaultCellEditor by replacing the
 * default approach to creating the editable text with
 * using the renderer from the appropriate DataType class.
 */
public class CellEditorUsingRenderer extends DefaultCellEditor {

	// place to save reference to DataType object needed
	// for calling the appropriate renderer on the object value
	private IDataTypeComponent _dataTypeObject;
	
    /**
     * Constructs a &lt;code&gt;DefaultCellEditor&lt;/code&gt; that uses a 
     * restorable text field and fills in the value using the same
     * renderer as is used to fill in the non-editable cell.
     *
     * @param x  a &lt;code&gt;JTextField&lt;/code&gt; object
     */
    public CellEditorUsingRenderer(final JTextField textField,
    	IDataTypeComponent dataTypeObject) {
    	
<span class="nc" id="L29">    	super(textField);</span>
    	
    	// save pointer to object needed to render value for use
    	// in the inner class delegate
<span class="nc" id="L33">    	_dataTypeObject = dataTypeObject;</span>
    	
<span class="nc" id="L35">        editorComponent = textField;</span>
<span class="nc" id="L36">		this.clickCountToStart = 2;</span>
<span class="nc" id="L37">        delegate = new EditorDelegate() {</span>
            public void setValue(Object value) {

				// If the cell is editable, we really must have a valid
				// DataType object, so the 'else' clause should never
				// be used.  It is just there as defensive programming.
<span class="nc bnc" id="L43" title="All 2 branches missed.">				if (CellEditorUsingRenderer.this._dataTypeObject != null)</span>
<span class="nc" id="L44">					textField.setText(_dataTypeObject.renderObject(value));</span>
<span class="nc bnc" id="L45" title="All 2 branches missed.">				else textField.setText((value != null) ? value.toString() : &quot;&lt;null&gt;&quot;);</span>
<span class="nc" id="L46">            }</span>

	    	public Object getCellEditorValue() {
<span class="nc" id="L49">			return textField.getText();</span>
			}
        };
<span class="nc" id="L52">		textField.addActionListener(delegate);</span>
<span class="nc" id="L53">    }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>