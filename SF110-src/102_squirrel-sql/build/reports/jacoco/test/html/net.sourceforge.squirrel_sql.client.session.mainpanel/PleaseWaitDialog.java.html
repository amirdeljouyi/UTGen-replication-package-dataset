<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>PleaseWaitDialog.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">102_squirrel-sql</a> &gt; <a href="index.source.html" class="el_package">net.sourceforge.squirrel_sql.client.session.mainpanel</a> &gt; <span class="el_source">PleaseWaitDialog.java</span></div><h1>PleaseWaitDialog.java</h1><pre class="source lang-java linenums">package net.sourceforge.squirrel_sql.client.session.mainpanel;
/*
 * Copyright (C) 2007 Thorsten Mürell
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License
 * as published by the Free Software Foundation; either version 2
 * of the License, or any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
 */

import com.jgoodies.forms.builder.PanelBuilder;
import com.jgoodies.forms.layout.CellConstraints;
import com.jgoodies.forms.layout.FormLayout;
import net.sourceforge.squirrel_sql.client.IApplication;
import net.sourceforge.squirrel_sql.client.gui.desktopcontainer.DialogWidget;
import net.sourceforge.squirrel_sql.client.session.CancelStatementThread;
import net.sourceforge.squirrel_sql.fw.util.IMessageHandler;
import net.sourceforge.squirrel_sql.fw.util.StringManager;
import net.sourceforge.squirrel_sql.fw.util.StringManagerFactory;

import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.sql.Statement;


/**
 * The dialog to ask the user to wait.
 * 
 * @author Thorsten Mürell
 */
public class PleaseWaitDialog extends DialogWidget implements ActionListener {
	private static final long serialVersionUID = 8870277695490954084L;

<span class="nc" id="L45">	private static final StringManager stringMgr =</span>
<span class="nc" id="L46">		StringManagerFactory.getStringManager(PleaseWaitDialog.class);</span>
	
	private JButton cancelButton;
	private IMessageHandler messageHandler;
	private Statement stmt;
	
	/**
	 * Creates the dialog.
	 * 
	 * @param stmt The statement that is currently executed
    * @param app The message handler to produce the log output to
    */
	public PleaseWaitDialog(Statement stmt, IApplication app) {
        //i18n[PleaseWaitDialog.queryExecuting=Query is executing]
<span class="nc" id="L60">		super(stringMgr.getString(&quot;PleaseWaitDialog.queryExecuting&quot;), true, app);</span>
<span class="nc" id="L61">		this.messageHandler = app.getMessageHandler();</span>
<span class="nc" id="L62">		this.stmt = stmt;</span>

<span class="nc" id="L64">		makeToolWindow(true);</span>

<span class="nc" id="L66">		final JPanel content = new JPanel(new BorderLayout());</span>
<span class="nc" id="L67">		content.add(createMainPanel(), BorderLayout.CENTER);</span>
<span class="nc" id="L68">        setContentPane(content);</span>
<span class="nc" id="L69">        pack();</span>
<span class="nc" id="L70">	}</span>
	
	private Component createMainPanel()
	{

<span class="nc" id="L75">		final FormLayout layout = new FormLayout(</span>
			// Columns
			&quot;center:pref&quot;,
			// Rows
			&quot;pref, 6dlu, pref, 6dlu, pref, 6dlu, pref&quot;);

<span class="nc" id="L81">		PanelBuilder builder = new PanelBuilder(layout);</span>
<span class="nc" id="L82">		CellConstraints cc = new CellConstraints();</span>
<span class="nc" id="L83">		builder.setDefaultDialogBorder();</span>

<span class="nc" id="L85">		int y = 1;</span>
<span class="nc" id="L86">		builder.addSeparator(getTitle(), cc.xywh(1, y, 1, 1));</span>

<span class="nc" id="L88">		y += 2;</span>
		//i18n[PleaseWaitDialog.pleaseWait=Please wait while the query is executed]
<span class="nc" id="L90">		builder.addLabel(stringMgr.getString(&quot;PleaseWaitDialog.pleaseWait&quot;), cc.xy(1, y));</span>

<span class="nc" id="L92">		y += 2;</span>
<span class="nc" id="L93">		builder.addSeparator(&quot;&quot;, cc.xywh(1, y, 1, 1));</span>

		//i18n[PleaseWaitDialog.cancel=Cancel]
<span class="nc" id="L96">		cancelButton = new JButton(stringMgr.getString(&quot;PleaseWaitDialog.cancel&quot;));</span>
<span class="nc" id="L97">		cancelButton.addActionListener(this);</span>
		
<span class="nc" id="L99">		y += 2;</span>
<span class="nc" id="L100">		builder.add(cancelButton, cc.xywh(1, y, 1, 1));</span>

<span class="nc" id="L102">		return builder.getPanel();</span>
	}
	
	public void actionPerformed(ActionEvent e) {
<span class="nc bnc" id="L106" title="All 2 branches missed.">	      if (stmt != null) {</span>
<span class="nc" id="L107">	         CancelStatementThread cst = new CancelStatementThread(stmt, messageHandler);</span>
<span class="nc" id="L108">	         cst.tryCancel();</span>
	      }
<span class="nc" id="L110">	}</span>
	
	/**
	 * Shows the dialog in front of all windows and centered.
	 *  
	 * @param app The application to show the window in
	 */
	public void showDialog(IApplication app) {
<span class="nc" id="L118">        app.getMainFrame().addWidget(this);</span>
<span class="nc" id="L119">        moveToFront();</span>
<span class="nc" id="L120">        setLayer(JLayeredPane.MODAL_LAYER);</span>
<span class="nc" id="L121">        DialogWidget.centerWithinDesktop(this);</span>
<span class="nc" id="L122">        this.setVisible(true);</span>
<span class="nc" id="L123">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>