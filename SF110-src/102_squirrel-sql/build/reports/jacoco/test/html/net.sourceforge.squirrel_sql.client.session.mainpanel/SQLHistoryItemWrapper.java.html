<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SQLHistoryItemWrapper.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">102_squirrel-sql</a> &gt; <a href="index.source.html" class="el_package">net.sourceforge.squirrel_sql.client.session.mainpanel</a> &gt; <span class="el_source">SQLHistoryItemWrapper.java</span></div><h1>SQLHistoryItemWrapper.java</h1><pre class="source lang-java linenums">package net.sourceforge.squirrel_sql.client.session.mainpanel;

import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Collections;

import net.sourceforge.squirrel_sql.fw.util.StringManager;
import net.sourceforge.squirrel_sql.fw.util.StringManagerFactory;

public class SQLHistoryItemWrapper
{
   /** Internationalized strings for this class. */
<span class="nc" id="L13">   private static final StringManager s_stringMgr =</span>
<span class="nc" id="L14">       StringManagerFactory.getStringManager(SQLHistoryItemWrapper.class);</span>


<span class="nc" id="L17">   private static final String[] COLUMNS = new String[]</span>
      {
         // i18n[SQLHistoryItemWrapper.index=Index]
<span class="nc" id="L20">         s_stringMgr.getString(&quot;SQLHistoryItemWrapper.index&quot;),</span>

         // i18n[SQLHistoryItemWrapper.lastUsed=Last used]
<span class="nc" id="L23">         s_stringMgr.getString(&quot;SQLHistoryItemWrapper.lastUsed&quot;),</span>

         // i18n[SQLHistoryItemWrapper.sql=SQL]
<span class="nc" id="L26">         s_stringMgr.getString(&quot;SQLHistoryItemWrapper.sql&quot;),</span>
      };
<span class="nc" id="L28">   private static final SimpleDateFormat LAST_USAGE_DATE_FORMAT = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss:SSS&quot;);</span>

   public static ArrayList&lt;SQLHistoryItemWrapper&gt; wrap(ArrayList&lt;SQLHistoryItem&gt; items)
   {
<span class="nc" id="L32">      ArrayList&lt;SQLHistoryItemWrapper&gt; ret = new ArrayList&lt;SQLHistoryItemWrapper&gt;(items.size());</span>

<span class="nc" id="L34">      int i=0;</span>
<span class="nc bnc" id="L35" title="All 2 branches missed.">      for (SQLHistoryItem item : items)</span>
      {
<span class="nc" id="L37">         ret.add(new SQLHistoryItemWrapper(item, ++i));</span>
<span class="nc" id="L38">      }</span>

<span class="nc" id="L40">      Collections.reverse(ret);</span>

<span class="nc" id="L42">      return ret;</span>
   }


   public static String[] getColumns()
   {
<span class="nc" id="L48">      return COLUMNS;</span>
   }

   public static int getSQLColIx()
   {
<span class="nc" id="L53">      return 2;</span>
   }


   private SQLHistoryItem _item;
   private int _index;
   private String _upperCaseSQL;
   private String _lastUsageTimeString;
   

   public SQLHistoryItemWrapper(SQLHistoryItem item, int index)
<span class="nc" id="L64">   {</span>
<span class="nc" id="L65">      _item = item;</span>
<span class="nc" id="L66">      _index = index;</span>
<span class="nc" id="L67">      _upperCaseSQL = item.getSQL().toUpperCase();</span>

<span class="nc bnc" id="L69" title="All 2 branches missed.">      if(null != _item.getLastUsageTime())</span>
      {
<span class="nc" id="L71">         _lastUsageTimeString = LAST_USAGE_DATE_FORMAT.format(_item.getLastUsageTime());</span>
      }
<span class="nc" id="L73">   }</span>

   public Object getColum(int column)
   {
      // corresponding to COLUMNS
<span class="nc bnc" id="L78" title="All 4 branches missed.">      switch(column)</span>
      {
<span class="nc" id="L80">         case 0: return _index;</span>
<span class="nc" id="L81">         case 1: return _lastUsageTimeString;</span>
<span class="nc" id="L82">         case 2: return _item.getSQL();</span>
<span class="nc" id="L83">         default: throw new IllegalArgumentException(&quot;Unknown colum index &quot; + column);</span>

      }
   }


   public String getUpperCaseSQL()
   {
<span class="nc" id="L91">      return _upperCaseSQL;</span>
   }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>