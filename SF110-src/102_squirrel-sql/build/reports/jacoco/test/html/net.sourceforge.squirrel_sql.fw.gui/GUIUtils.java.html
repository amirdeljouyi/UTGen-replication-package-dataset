<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>GUIUtils.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">102_squirrel-sql</a> &gt; <a href="index.source.html" class="el_package">net.sourceforge.squirrel_sql.fw.gui</a> &gt; <span class="el_source">GUIUtils.java</span></div><h1>GUIUtils.java</h1><pre class="source lang-java linenums">package net.sourceforge.squirrel_sql.fw.gui;
/*
 * Copyright (C) 2001-2004 Colin Bell
 * colbell@users.sourceforge.net
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 */

import net.sourceforge.squirrel_sql.fw.util.BaseRuntimeException;
import net.sourceforge.squirrel_sql.fw.util.log.ILogger;
import net.sourceforge.squirrel_sql.fw.util.log.LoggerController;

import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.awt.geom.Rectangle2D;
import java.beans.PropertyVetoException;
import java.lang.reflect.InvocationTargetException;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

/**
 * Common GUI utilities accessed via static methods.
 *
 * @author &lt;A HREF=&quot;mailto:colbell@users.sourceforge.net&quot;&gt;Colin Bell&lt;/A&gt;
 */
<span class="nc" id="L41">public class GUIUtils</span>
{
	/** Logger for this class. */
<span class="nc" id="L44">	private static final ILogger s_log =</span>
<span class="nc" id="L45">		LoggerController.createLogger(GUIUtils.class);</span>


   private static JFrame _mainFrame;

   /**
    * Centers &lt;CODE&gt;wind&lt;/CODE&gt; within its parent. If it has no parent then
    * center within the screen. If centering would cause the title bar to go
    * above the parent (I.E. cannot see the titlebar and so cannot move the
    * window) then move the window down.
    *
    * @param	 wind	The Window to be centered.
    *
    * @throws IllegalArgumentException	 If &lt;TT&gt;wind&lt;/TT&gt; is &lt;TT&gt;null&lt;/TT&gt;.
    */
   public static void centerWithinParent(Window wind)
   {
<span class="nc bnc" id="L62" title="All 2 branches missed.">      if (wind == null)</span>
      {
<span class="nc" id="L64">         throw new IllegalArgumentException(&quot;null Window passed&quot;);</span>
      }
<span class="nc" id="L66">      final Container parent = wind.getParent();</span>
<span class="nc bnc" id="L67" title="All 4 branches missed.">      if (parent != null &amp;&amp; parent.isVisible())</span>
      {
<span class="nc" id="L69">         center(wind, new Rectangle(parent.getLocationOnScreen(),</span>
<span class="nc" id="L70">               parent.getSize()));</span>
      }
      else
      {
<span class="nc" id="L74">         centerWithinScreen(wind);</span>
      }
<span class="nc" id="L76">   }</span>

	/**
	 * Centers passed internal frame within its desktop area. If centering
	 * would cause the title bar to go off the top of the screen then move the
	 * window down.
	 *
	 * @param	frame	The internal frame to be centered.
	 *
	 * @throws IllegalArgumentException	 If &lt;TT&gt;frame&lt;/TT&gt; is &lt;TT&gt;null&lt;/TT&gt;.
	 */
	public static void centerWithinDesktop(JInternalFrame frame)
	{
<span class="nc bnc" id="L89" title="All 2 branches missed.">		if (frame == null)</span>
		{
<span class="nc" id="L91">			throw new IllegalArgumentException(&quot;null JInternalFrame passed&quot;);</span>
		}
<span class="nc" id="L93">		final Container parent = frame.getDesktopPane();</span>
<span class="nc bnc" id="L94" title="All 4 branches missed.">		if (parent != null &amp;&amp; parent.isVisible())</span>
		{
<span class="nc" id="L96">			center(frame, new Rectangle(new Point(0, 0), parent.getSize()));</span>
		}
<span class="nc" id="L98">	}</span>

	/**
	 * Centers &lt;CODE&gt;wind&lt;/CODE&gt; within the screen. If centering would cause the
	 * title bar to go off the top of the screen then move the window down.
	 *
	 * @param	wind	The Window to be centered.
	 *
	 * @throws IllegalArgumentException	 If &lt;TT&gt;wind&lt;/TT&gt; is &lt;TT&gt;null&lt;/TT&gt;.
	 */
	public static void centerWithinScreen(Window wind)
	{
<span class="nc bnc" id="L110" title="All 2 branches missed.">		if (wind == null)</span>
		{
<span class="nc" id="L112">			throw new IllegalArgumentException(&quot;null Window passed&quot;);</span>
		}
<span class="nc" id="L114">		final Toolkit toolKit = Toolkit.getDefaultToolkit();</span>
<span class="nc" id="L115">		final Rectangle rcScreen = new Rectangle(toolKit.getScreenSize());</span>
<span class="nc" id="L116">		final Dimension windSize = wind.getSize();</span>
<span class="nc" id="L117">		final Dimension parentSize = new Dimension(rcScreen.width, rcScreen.height);</span>
<span class="nc bnc" id="L118" title="All 2 branches missed.">		if (windSize.height &gt; parentSize.height)</span>
		{
<span class="nc" id="L120">			windSize.height = parentSize.height;</span>
		}
<span class="nc bnc" id="L122" title="All 2 branches missed.">		if (windSize.width &gt; parentSize.width)</span>
		{
<span class="nc" id="L124">			windSize.width = parentSize.width;</span>
		}
<span class="nc" id="L126">		center(wind, rcScreen);</span>
<span class="nc" id="L127">	}</span>

	public static void moveToFront(final JInternalFrame fr)
	{
<span class="nc bnc" id="L131" title="All 2 branches missed.">		if (fr != null)</span>
		{
<span class="nc" id="L133">			processOnSwingEventThread(new Runnable()</span>
<span class="nc" id="L134">			{</span>
				public void run()
				{
<span class="nc" id="L137">					fr.moveToFront();</span>
<span class="nc" id="L138">					fr.setVisible(true);</span>
					try
					{
<span class="nc" id="L141">						fr.setSelected(true);</span>
<span class="nc bnc" id="L142" title="All 2 branches missed.">                  if(fr.isIcon())</span>
                  {
<span class="nc" id="L144">                     fr.setIcon(false);</span>
                  }
<span class="nc" id="L146">                  fr.setSelected(true);</span>
					}
<span class="nc" id="L148">					catch (PropertyVetoException ex)</span>
					{
<span class="nc" id="L150">						s_log.error(&quot;Error bringing internal frame to the front&quot;, ex);</span>
<span class="nc" id="L151">					}</span>
<span class="nc" id="L152">               fr.requestFocus();</span>
<span class="nc" id="L153">				}</span>
			});
		}
<span class="nc" id="L156">	}</span>

	/**
	 * Return the owning &lt;CODE&gt;Frame&lt;/CODE&gt; for the passed component
	 * of &lt;CODE&gt;null&lt;/CODE&gt; if it doesn't have one.
	 *
	 * @throws IllegalArgumentException	 If &lt;TT&gt;wind&lt;/TT&gt; is &lt;TT&gt;null&lt;/TT&gt;.
	 */
	public static Frame getOwningFrame(Component comp)
	{
<span class="nc bnc" id="L166" title="All 2 branches missed.">		if (comp == null)</span>
		{
<span class="nc" id="L168">			throw new IllegalArgumentException(&quot;null Component passed&quot;);</span>
		}

<span class="nc bnc" id="L171" title="All 2 branches missed.">		if (comp instanceof Frame)</span>
		{
<span class="nc" id="L173">			return (Frame) comp;</span>
		}
<span class="nc" id="L175">		return getOwningFrame(SwingUtilities.windowForComponent(comp));</span>
	}

	/**
	 * Return &lt;TT&gt;true&lt;/TT&gt; if &lt;TT&gt;frame&lt;/TT&gt; is a tool window. I.E. is the
	 * &lt;TT&gt;JInternalFrame.isPalette&lt;/TT&gt; set to &lt;TT&gt;Boolean.TRUE&lt;/TT&gt;?
	 *
	 * @param	frame	The &lt;TT&gt;JInternalFrame&lt;/TT&gt; to be checked.
	 *
	 * @throws IllegalArgumentException	 If &lt;TT&gt;frame&lt;/TT&gt; is &lt;TT&gt;null&lt;/TT&gt;.
	 */
	public static boolean isToolWindow(JInternalFrame frame)
	{
<span class="nc bnc" id="L188" title="All 2 branches missed.">		if (frame == null)</span>
		{
<span class="nc" id="L190">			throw new IllegalArgumentException(&quot;null JInternalFrame passed&quot;);</span>
		}

<span class="nc" id="L193">		final Object obj = frame.getClientProperty(&quot;JInternalFrame.isPalette&quot;);</span>
<span class="nc bnc" id="L194" title="All 4 branches missed.">		return obj != null &amp;&amp; obj == Boolean.TRUE;</span>
	}

	/**
	 * Make the passed internal frame a Tool Window.
	 */
	public static void makeToolWindow(JInternalFrame frame, boolean isToolWindow)
	{
<span class="nc bnc" id="L202" title="All 2 branches missed.">		if (frame == null)</span>
		{
<span class="nc" id="L204">			throw new IllegalArgumentException(&quot;null JInternalFrame passed&quot;);</span>
		}
<span class="nc bnc" id="L206" title="All 2 branches missed.">		frame.putClientProperty(&quot;JInternalFrame.isPalette&quot;,</span>
								isToolWindow ? Boolean.TRUE : Boolean.FALSE);
<span class="nc" id="L208">	}</span>

	/**
	 * Change the sizes of all the passed buttons to be the size of the
	 * largest one.
	 *
	 * @param	btns	Array of buttons to eb resized.
	 *
	 * @throws IllegalArgumentException	 If &lt;TT&gt;btns&lt;/TT&gt; is &lt;TT&gt;null&lt;/TT&gt;.
	 */
	public static void setJButtonSizesTheSame(JButton[] btns)
	{
<span class="nc bnc" id="L220" title="All 2 branches missed.">		if (btns == null)</span>
		{
<span class="nc" id="L222">			throw new IllegalArgumentException(&quot;null JButton[] passed&quot;);</span>
		}

		// Get the largest width and height
<span class="nc" id="L226">		final Dimension maxSize = new Dimension(0, 0);</span>
<span class="nc bnc" id="L227" title="All 2 branches missed.">		for (int i = 0; i &lt; btns.length; ++i)</span>
		{
<span class="nc" id="L229">			final JButton btn = btns[i];</span>
<span class="nc" id="L230">			final FontMetrics fm = btn.getFontMetrics(btn.getFont());</span>
<span class="nc" id="L231">			Rectangle2D bounds = fm.getStringBounds(btn.getText(), btn.getGraphics());</span>
<span class="nc" id="L232">			int boundsHeight = (int) bounds.getHeight();</span>
<span class="nc" id="L233">			int boundsWidth = (int) bounds.getWidth();</span>
<span class="nc bnc" id="L234" title="All 2 branches missed.">			maxSize.width = boundsWidth &gt; maxSize.width ? boundsWidth : maxSize.width;</span>
<span class="nc bnc" id="L235" title="All 2 branches missed.">			maxSize.height = boundsHeight &gt; maxSize.height ? boundsHeight : maxSize.height;</span>
		}

<span class="nc" id="L238">		Insets insets = btns[0].getInsets();</span>
<span class="nc" id="L239">		maxSize.width += insets.left + insets.right;</span>
<span class="nc" id="L240">		maxSize.height += insets.top + insets.bottom;</span>

<span class="nc bnc" id="L242" title="All 2 branches missed.">		for (int i = 0; i &lt; btns.length; ++i)</span>
		{
<span class="nc" id="L244">			JButton btn = btns[i];</span>
<span class="nc" id="L245">			btn.setPreferredSize(maxSize);</span>
		}
<span class="nc" id="L247">	}</span>

   public static boolean isWithinParent(Component wind)
	{
<span class="nc bnc" id="L251" title="All 2 branches missed.">		if (wind == null)</span>
		{
<span class="nc" id="L253">			throw new IllegalArgumentException(&quot;Null Component passed&quot;);</span>
		}

<span class="nc" id="L256">		Rectangle windowBounds = wind.getBounds();</span>
<span class="nc" id="L257">		Component parent = wind.getParent();</span>
<span class="nc" id="L258">		Rectangle parentRect = null;</span>
<span class="nc bnc" id="L259" title="All 2 branches missed.">		if (parent != null)</span>
		{
<span class="nc" id="L261">			parentRect = new Rectangle(parent.getSize());</span>
		}
		else
		{
			//parentRect = new Rectangle(Toolkit.getDefaultToolkit().getScreenSize());
<span class="nc" id="L266">			parentRect = getScreenBoundsFor(windowBounds);</span>
		}
		
		//if (windowBounds.x &gt; (parentRect.width - 20)
//			|| windowBounds.y &gt; (parentRect.height - 20)
			//|| (windowBounds.x + windowBounds.width) &lt; 20
			//|| (windowBounds.y + windowBounds.height) &lt; 20)
		//{
			//return false;
		//}
<span class="nc bnc" id="L276" title="All 4 branches missed.">		if (windowBounds.x &lt; (parentRect.x - 20)</span>
				|| windowBounds.y &lt; (parentRect.y - 20))
		{
<span class="nc" id="L279">			return false;</span>
		}
<span class="nc" id="L281">		return true;</span>
	}

	public static Rectangle getScreenBoundsFor(Rectangle rc)
	{
<span class="nc" id="L286">        final GraphicsDevice[] gds = GraphicsEnvironment.getLocalGraphicsEnvironment().getScreenDevices();</span>
<span class="nc" id="L287">        final List&lt;GraphicsConfiguration&gt; configs = </span>
            new ArrayList&lt;GraphicsConfiguration&gt;();

<span class="nc bnc" id="L290" title="All 2 branches missed.">        for (int i = 0; i &lt; gds.length; i++)</span>
        {
<span class="nc" id="L292">            GraphicsConfiguration gc = gds[i].getDefaultConfiguration();</span>
<span class="nc bnc" id="L293" title="All 2 branches missed.">            if (rc.intersects(gc.getBounds()))</span>
            {
<span class="nc" id="L295">            	configs.add(gc);</span>
            }
        }
        
<span class="nc" id="L299">        GraphicsConfiguration selected = null;</span>
<span class="nc bnc" id="L300" title="All 2 branches missed.">        if (configs.size() &gt; 0)</span>
        {
<span class="nc bnc" id="L302" title="All 2 branches missed.">            for (Iterator&lt;GraphicsConfiguration&gt; it = configs.iterator(); it.hasNext();)</span>
            {
<span class="nc" id="L304">            	GraphicsConfiguration gcc = it.next();</span>
<span class="nc bnc" id="L305" title="All 2 branches missed.">                if (selected == null)</span>
<span class="nc" id="L306">                    selected = gcc;</span>
                else
                {
<span class="nc bnc" id="L309" title="All 2 branches missed.">                    if (gcc.getBounds().contains(rc.x + 20, rc.y + 20))</span>
                    {
<span class="nc" id="L311">                    	selected = gcc;</span>
<span class="nc" id="L312">                    	break;</span>
                    }
                }
<span class="nc" id="L315">            }</span>
        }
        else
        {
<span class="nc" id="L319">            selected = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().getDefaultConfiguration();</span>
        }

<span class="nc" id="L322">        int x = selected.getBounds().x;</span>
<span class="nc" id="L323">        int y = selected.getBounds().y;</span>
<span class="nc" id="L324">        int w = selected.getBounds().width;</span>
<span class="nc" id="L325">        int h = selected.getBounds().height;</span>
        
<span class="nc" id="L327">        return new Rectangle(x,y,w,h); </span>
	}
	
	public static void processOnSwingEventThread(Runnable todo)
	{
<span class="nc" id="L332">		processOnSwingEventThread(todo, false);</span>
<span class="nc" id="L333">	}</span>

	public static void processOnSwingEventThread(Runnable todo, boolean wait)
	{
<span class="nc bnc" id="L337" title="All 2 branches missed.">		if (todo == null)</span>
		{
<span class="nc" id="L339">			throw new IllegalArgumentException(&quot;Runnable == null&quot;);</span>
		}

<span class="nc bnc" id="L342" title="All 2 branches missed.">		if (wait)</span>
		{
<span class="nc bnc" id="L344" title="All 2 branches missed.">			if (SwingUtilities.isEventDispatchThread())</span>
			{
<span class="nc" id="L346">				todo.run();</span>
			}
			else
			{
				try
				{
<span class="nc" id="L352">					SwingUtilities.invokeAndWait(todo);</span>
				}
<span class="nc" id="L354">				catch (InvocationTargetException ex)</span>
				{
<span class="nc" id="L356">					throw new BaseRuntimeException(ex);</span>
				}
<span class="nc" id="L358">				catch (InterruptedException ex)</span>
				{
<span class="nc" id="L360">					throw new BaseRuntimeException(ex);</span>
<span class="nc" id="L361">				}</span>
			}
		}
		else
		{
<span class="nc bnc" id="L366" title="All 2 branches missed.">            if (SwingUtilities.isEventDispatchThread()) {</span>
<span class="nc" id="L367">                todo.run();</span>
            } else {
<span class="nc" id="L369">                SwingUtilities.invokeLater(todo);</span>
            }
		}
<span class="nc" id="L372">	}</span>

	/**
	 * Centers &lt;CODE&gt;wind&lt;/CODE&gt; within the passed rectangle.
	 *
	 * @param	wind	The Window to be centered.
	 * @param	rect	The rectangle (in screen coords) to center
	 *					&lt;CODE&gt;wind&lt;/CODE&gt; within.
	 *
	 * @throws	IllegalArgumentException
	 *			If &lt;TT&gt;Window&lt;/TT&gt; or &lt;TT&gt;Rectangle&lt;/TT&gt; is &lt;TT&gt;null&lt;/TT&gt;.
	 */
	private static void center(Component wind, Rectangle rect)
	{
<span class="nc bnc" id="L386" title="All 4 branches missed.">		if (wind == null || rect == null)</span>
		{
<span class="nc" id="L388">			throw new IllegalArgumentException(&quot;null Window or Rectangle passed&quot;);</span>
		}
<span class="nc" id="L390">		Dimension windSize = wind.getSize();</span>
<span class="nc" id="L391">		int x = ((rect.width - windSize.width) / 2) + rect.x;</span>
<span class="nc" id="L392">		int y = ((rect.height - windSize.height) / 2) + rect.y;</span>
<span class="nc bnc" id="L393" title="All 2 branches missed.">		if (y &lt; rect.y)</span>
		{
<span class="nc" id="L395">			y = rect.y;</span>
		}
<span class="nc" id="L397">		wind.setLocation(x, y);</span>
<span class="nc" id="L398">	}</span>

   /**
    * To make the main window available to fw classes.
    *
    * This method is called during application start by WindowManager.
    */
   public static void setMainFrame(JFrame mainFrame)
   {
<span class="nc" id="L407">      _mainFrame = mainFrame;</span>
<span class="nc" id="L408">   }</span>

   public static JFrame  getMainFrame()
   {
<span class="nc" id="L412">      return _mainFrame;</span>
   }
   
   /**
    * Inserts newlines at or before lineLength at spaces or commas. If no space 
    * or comma can be found, the resultant line will not be broken up by 
    * newlines.
    * 
    * @param line the line to word-wrap
    * @param lineLength the maximum length any segment should be. 
    * @return a line with newlines inserted
    */
   public static String getWrappedLine(String line, int lineLength) {
<span class="nc bnc" id="L425" title="All 2 branches missed.">       if (line.length() &lt;= lineLength) {</span>
<span class="nc" id="L426">           return line;</span>
       }
<span class="nc" id="L428">       StringBuffer result = new StringBuffer();</span>
<span class="nc" id="L429">       char[] lineChars = line.toCharArray();</span>
<span class="nc" id="L430">       int lastBreakCharIdx = -1;</span>
<span class="nc" id="L431">       ArrayList&lt;Integer&gt; breakPoints = new ArrayList&lt;Integer&gt;();</span>
       
       // look for places to break the string
<span class="nc bnc" id="L434" title="All 2 branches missed.">       for (int i = 0; i &lt; lineChars.length; i++) {</span>
<span class="nc" id="L435">           char curr = lineChars[i];</span>
<span class="nc bnc" id="L436" title="All 4 branches missed.">           if (curr == ' ' || curr == ',') {</span>
<span class="nc" id="L437">               lastBreakCharIdx = i;</span>
           }
<span class="nc bnc" id="L439" title="All 6 branches missed.">           if (i &gt; 0 &amp;&amp; (i % lineLength == 0) &amp;&amp; lastBreakCharIdx != -1) {</span>
<span class="nc" id="L440">               breakPoints.add(Integer.valueOf(lastBreakCharIdx));</span>
           }
       }
<span class="nc bnc" id="L443" title="All 2 branches missed.">       if (lastBreakCharIdx != lineChars.length) {</span>
<span class="nc" id="L444">           breakPoints.add(Integer.valueOf(lineChars.length));</span>
       }
<span class="nc" id="L446">       int lastBreakPointIdx = 0;</span>
<span class="nc bnc" id="L447" title="All 2 branches missed.">       for (Iterator&lt;Integer&gt; iter = breakPoints.iterator(); iter.hasNext();) {</span>
<span class="nc" id="L448">           int breakPointIdx = (iter.next()).intValue() + 1;</span>
<span class="nc bnc" id="L449" title="All 2 branches missed.">           if (breakPointIdx &gt; line.length()) {</span>
<span class="nc" id="L450">               breakPointIdx = line.length();</span>
           }
<span class="nc" id="L452">           String part = line.substring(lastBreakPointIdx, breakPointIdx);</span>
<span class="nc" id="L453">           result.append(part.trim());</span>
<span class="nc bnc" id="L454" title="All 2 branches missed.">           if (!part.trim().endsWith(&quot;\\n&quot;)) { </span>
<span class="nc" id="L455">               result.append(&quot;\n&quot;);</span>
           }
<span class="nc" id="L457">           lastBreakPointIdx = breakPointIdx;</span>
<span class="nc" id="L458">       }</span>
<span class="nc" id="L459">       return result.toString();</span>
   }

   public static Point getScreenLocationFor(Component component)
   {
<span class="nc" id="L464">      Component comp = component;</span>

<span class="nc" id="L466">      Point ret = new Point(0,0);</span>

      for(;;)
      {
         Point buf;
<span class="nc bnc" id="L471" title="All 2 branches missed.">         if(comp instanceof Window)</span>
         {
<span class="nc" id="L473">            buf = comp.getLocationOnScreen();</span>
<span class="nc" id="L474">            ret.translate(buf.x, buf.y);</span>
<span class="nc" id="L475">            return ret;</span>
         }
         else
         {
<span class="nc" id="L479">            buf = comp.getLocation();</span>
<span class="nc" id="L480">            ret.translate(buf.x, buf.y);</span>
<span class="nc" id="L481">            comp = comp.getParent();</span>
         }

<span class="nc" id="L484">      }</span>
   }

   public static void enableCloseByEscape(final JDialog dialog)
   {
<span class="nc" id="L489">      AbstractAction closeAction = new AbstractAction()</span>
<span class="nc" id="L490">      {</span>

         public void actionPerformed(ActionEvent actionEvent)
         {
<span class="nc" id="L494">            dialog.setVisible(false);</span>
<span class="nc" id="L495">            dialog.dispose();</span>
<span class="nc" id="L496">         }</span>
      };
<span class="nc" id="L498">      KeyStroke escapeStroke = KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE, 0);</span>
<span class="nc" id="L499">      dialog.getRootPane().getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT).put(escapeStroke, &quot;CloseAction&quot;);</span>
<span class="nc" id="L500">      dialog.getRootPane().getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(escapeStroke, &quot;CloseAction&quot;);</span>
<span class="nc" id="L501">      dialog.getRootPane().getInputMap(JComponent.WHEN_FOCUSED).put(escapeStroke, &quot;CloseAction&quot;);</span>
<span class="nc" id="L502">      dialog.getRootPane().getActionMap().put(&quot;CloseAction&quot;, closeAction);</span>
<span class="nc" id="L503">   }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>