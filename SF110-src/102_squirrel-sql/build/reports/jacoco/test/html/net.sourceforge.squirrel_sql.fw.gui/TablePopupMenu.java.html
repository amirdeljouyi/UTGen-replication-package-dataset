<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>TablePopupMenu.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">102_squirrel-sql</a> &gt; <a href="index.source.html" class="el_package">net.sourceforge.squirrel_sql.fw.gui</a> &gt; <span class="el_source">TablePopupMenu.java</span></div><h1>TablePopupMenu.java</h1><pre class="source lang-java linenums">package net.sourceforge.squirrel_sql.fw.gui;
/*
 * Copyright (C) 2001-2004 Colin Bell
 * colbell@users.sourceforge.net
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 */
import java.awt.Component;
import java.awt.event.ActionEvent;
import java.awt.event.MouseEvent;
import java.awt.event.KeyEvent;

import java.awt.print.PrinterJob;

import javax.swing.*;

import net.sourceforge.squirrel_sql.fw.datasetviewer.IDataModelImplementationDetails;
import net.sourceforge.squirrel_sql.fw.gui.action.*;
import net.sourceforge.squirrel_sql.fw.gui.action.exportData.ExportDataException;
import net.sourceforge.squirrel_sql.fw.gui.action.wikiTable.CopyWikiTableActionFactory;
import net.sourceforge.squirrel_sql.fw.gui.action.wikiTable.ICopyWikiTableActionFactory;
import net.sourceforge.squirrel_sql.fw.gui.action.wikiTable.ITableActionCallback;
import net.sourceforge.squirrel_sql.fw.gui.action.wikiTable.IWikiTableConfiguration;
import net.sourceforge.squirrel_sql.fw.util.StringManager;
import net.sourceforge.squirrel_sql.fw.util.StringManagerFactory;
import net.sourceforge.squirrel_sql.fw.datasetviewer.IDataSetUpdateableModel;
import net.sourceforge.squirrel_sql.fw.datasetviewer.DataSetViewerTablePanel;


public class TablePopupMenu extends BasePopupMenu
{
	/**
	 * serialVersionUID
	 */
	private static final long serialVersionUID = -1016475198906837273L;

	/** Internationalized strings for this class. */
<span class="nc" id="L50">	private static final StringManager s_stringMgr =</span>
<span class="nc" id="L51">		StringManagerFactory.getStringManager(TablePopupMenu.class);</span>


	public interface IOptionTypes
	{
		int COPY = 0;
		int COPY_WITH_HEADERS = 1;
		int COPY_HTML = 2;
		int COPY_IN_STATEMENT = 3;
		int COPY_WHERE_STATEMENT = 4;
		int COPY_UPDATE_STATEMENT = 5;
		int COPY_INSERT_STATEMENT = 6;
		int EXPORT_CSV = 7;
		int SELECT_ALL = 8;
		int ADJUST_ALL_COL_WIDTHS_ACTION = 9;
		int ALWAYS_ADJUST_ALL_COL_WIDTHS_ACTION = 10;
		int SHOW_ROW_NUMBERS = 11;
		int COPY_WIKI = 12;
		int SELECT_ROWS = 13;
		int LAST_ENTRY = 14;
   }

<span class="nc" id="L73">	private static final KeyStroke COPY_STROKE = KeyStroke.getKeyStroke(KeyEvent.VK_C, KeyEvent.CTRL_DOWN_MASK);</span>

<span class="nc" id="L75">	private final JMenuItem[] _menuItems = new JMenuItem[IOptionTypes.LAST_ENTRY + 1];</span>

	private JTable _table;

	private JCheckBoxMenuItem _alwaysAdjustAllColWidtshActionItem;
	private JCheckBoxMenuItem _showRowNumbersItem;


<span class="nc" id="L83">	private CopyAction _copy = new CopyAction();</span>
<span class="nc" id="L84">	private CopyWithHeadersAction _copyWithHeaders = new CopyWithHeadersAction();</span>
<span class="nc" id="L85">	private CopyHtmlAction _copyHtml = new CopyHtmlAction();</span>
	
<span class="nc" id="L87">	private CopyInStatementAction _copyInStatement = new CopyInStatementAction();</span>
<span class="nc" id="L88">	private CopyWhereStatementAction _copyWhereStatement = new CopyWhereStatementAction();</span>
<span class="nc" id="L89">	private CopyUpdateStatementAction _copyUpdateStatement = new CopyUpdateStatementAction();</span>
<span class="nc" id="L90">	private CopyInsertStatementAction _copyInsertStatement = new CopyInsertStatementAction();</span>
<span class="nc" id="L91">	private ExportCsvAction _exportCvs = new ExportCsvAction();</span>
<span class="nc" id="L92">   private AdjustAllColWidthsAction _adjustAllColWidthsAction = new AdjustAllColWidthsAction();</span>
<span class="nc" id="L93">	private AlwaysAdjustAllColWidthsAction _alwaysAdjustAllColWidthsAction = new AlwaysAdjustAllColWidthsAction();</span>
<span class="nc" id="L94">   private ShowRowNumbersAction _showRowNumbersAction = new ShowRowNumbersAction();</span>

<span class="nc" id="L96">   private MakeEditableAction _makeEditable = new MakeEditableAction();</span>
<span class="nc" id="L97">	private UndoMakeEditableAction _undoMakeEditable = new UndoMakeEditableAction();</span>
<span class="nc" id="L98">	private DeleteRowsAction _deleteRows = new DeleteRowsAction();</span>
<span class="nc" id="L99">	private InsertRowAction _insertRow = new InsertRowAction();</span>
<span class="nc" id="L100">	private SelectAllAction _select = new SelectAllAction();</span>
<span class="nc" id="L101">	private SelectRowsAction _selectRows = new SelectRowsAction();</span>
<span class="nc" id="L102">	private PrintAction _print = new PrintAction();</span>


	// The following pointer is needed to allow the &quot;Make Editable button
	// to tell the application to set up an editable display panel
<span class="nc" id="L107">	private IDataSetUpdateableModel _updateableModel = null;</span>

   private IDataModelImplementationDetails _dataModelImplementationDetails;
   // pointer to the viewer
	// This is needed for insert and delete operations
<span class="nc" id="L112">	private DataSetViewerTablePanel _viewer = null;</span>
	
<span class="nc" id="L114">	private ICopyWikiTableActionFactory copyWikiTableActionFactory = CopyWikiTableActionFactory.getInstance();</span>

	/**
	 * Constructor used when caller wants to be able to make table editable.
	 * We need both parameters because there is at least one case where the
	 * underlying data model is updateable, but we do not want to allow the
	 * user to enter editing mode because they are already in edit mode.
	 * The caller needs to determine whether or not to allow a request for edit mode.
	 */
	public TablePopupMenu(boolean allowEditing,
								 IDataSetUpdateableModel updateableModel,
								 DataSetViewerTablePanel viewer,
                         IDataModelImplementationDetails dataModelImplementationDetails)
	{
<span class="nc" id="L128">		super();</span>
		// save the pointer needed to enable editing of data on-demand
<span class="nc" id="L130">		_updateableModel = updateableModel;</span>

<span class="nc" id="L132">      _dataModelImplementationDetails = dataModelImplementationDetails;</span>

		// save the pointer needed for insert and delete operations
<span class="nc" id="L135">		_viewer = viewer;</span>

		// add the menu items to the menu
<span class="nc" id="L138">		_menuItems[IOptionTypes.COPY] = add(_copy);</span>
<span class="nc" id="L139">		_menuItems[IOptionTypes.COPY].setAccelerator(COPY_STROKE);</span>
<span class="nc" id="L140">		_menuItems[IOptionTypes.COPY_WITH_HEADERS] = add(_copyWithHeaders);</span>
<span class="nc" id="L141">		_menuItems[IOptionTypes.COPY_HTML] = add(_copyHtml);</span>

<span class="nc" id="L143">		_menuItems[IOptionTypes.COPY_WIKI] = add(copyWikiTableActionFactory.createMenueItem(new ITableActionCallback() {</span>
			@Override
			public JTable getJTable() {
<span class="nc" id="L146">				return _table;</span>
			}
		}));
<span class="nc" id="L149">		_menuItems[IOptionTypes.COPY_IN_STATEMENT] = add(_copyInStatement);</span>
<span class="nc" id="L150">		_menuItems[IOptionTypes.COPY_WHERE_STATEMENT] = add(_copyWhereStatement);</span>
<span class="nc" id="L151">		_menuItems[IOptionTypes.COPY_UPDATE_STATEMENT] = add(_copyUpdateStatement);</span>
<span class="nc" id="L152">      _menuItems[IOptionTypes.COPY_INSERT_STATEMENT] = add(_copyInsertStatement);</span>
<span class="nc" id="L153">      addSeparator();</span>
<span class="nc" id="L154">		_menuItems[IOptionTypes.EXPORT_CSV] = add(_exportCvs);</span>
<span class="nc" id="L155">      addSeparator();</span>
<span class="nc" id="L156">      _menuItems[IOptionTypes.ADJUST_ALL_COL_WIDTHS_ACTION] = add(_adjustAllColWidthsAction);</span>

<span class="nc" id="L158">      _alwaysAdjustAllColWidtshActionItem = new JCheckBoxMenuItem();</span>
<span class="nc" id="L159">		_alwaysAdjustAllColWidtshActionItem.setSelected(ButtonTableHeader.isAlwaysAdjustAllColWidths());</span>
<span class="nc" id="L160">		_alwaysAdjustAllColWidtshActionItem.setAction(_alwaysAdjustAllColWidthsAction);</span>
<span class="nc" id="L161">      _menuItems[IOptionTypes.ALWAYS_ADJUST_ALL_COL_WIDTHS_ACTION] = add(_alwaysAdjustAllColWidtshActionItem);</span>

<span class="nc" id="L163">      addSeparator();</span>
      
<span class="nc" id="L165">      _showRowNumbersItem = new JCheckBoxMenuItem();</span>
<span class="nc" id="L166">		_showRowNumbersItem.setSelected(false);</span>
<span class="nc" id="L167">		_showRowNumbersItem.setAction(_showRowNumbersAction);</span>
<span class="nc" id="L168">		_menuItems[IOptionTypes.SHOW_ROW_NUMBERS] = add(_showRowNumbersItem);</span>


<span class="nc bnc" id="L171" title="All 2 branches missed.">		if (allowEditing)</span>
		{
<span class="nc" id="L173">			addSeparator();</span>
<span class="nc" id="L174">			add(_makeEditable);</span>
		}
//		if  ( ! allowEditing )
<span class="nc bnc" id="L177" title="All 4 branches missed.">		if (updateableModel != null &amp;&amp; updateableModel.editModeIsForced())</span>
		{
<span class="nc" id="L179">			add(_undoMakeEditable);</span>
		}
<span class="nc" id="L181">		addSeparator();</span>
<span class="nc" id="L182">		_menuItems[IOptionTypes.SELECT_ALL] = add(_select);</span>
		
<span class="nc" id="L184">		_menuItems[IOptionTypes.SELECT_ROWS] = add(_selectRows);</span>
		

		// add entries for insert and delete rows
		// only if table is updateable and already editable (ie. allowEditing is false)
<span class="nc bnc" id="L189" title="All 4 branches missed.">		if (_updateableModel != null &amp;&amp; allowEditing==false) {</span>
<span class="nc" id="L190">			addSeparator();</span>
<span class="nc" id="L191">			add(_insertRow);</span>
<span class="nc" id="L192">			add(_deleteRows);</span>
		}

<span class="nc" id="L195">		addSeparator();</span>
<span class="nc" id="L196">		add(_print);</span>
<span class="nc" id="L197">	}</span>

	/**
	 * Constructor used when creating menu for use in cell editor.
	 */
	public TablePopupMenu(IDataSetUpdateableModel updateableModel,
								 DataSetViewerTablePanel viewer, JTable table, IDataModelImplementationDetails dataModelImplementationDetails)
	{
<span class="nc" id="L205">		super();</span>
		// save the pointer needed to enable editing of data on-demand
<span class="nc" id="L207">		_updateableModel = updateableModel;</span>
<span class="nc" id="L208">      _dataModelImplementationDetails = dataModelImplementationDetails;</span>

      // save the pointer needed for insert and delete operations
<span class="nc" id="L211">		_viewer = viewer;</span>

<span class="nc" id="L213">		_table = table;</span>
<span class="nc" id="L214">		replaceStandardTableCopyAction();</span>

// Cut and Paste need to be worked on, so for now do not include them
// Also, the copy operations do not seem to work right - we may need special
//    versions for the cellEditor menu.
//		add(_cut);
//		add(_copy);
//		add(_copyHtml);
//		add(_paste);
//		addSeparator();
<span class="nc" id="L224">		add(_select);</span>
<span class="nc" id="L225">		addSeparator();</span>
<span class="nc" id="L226">		add(_insertRow);</span>
<span class="nc" id="L227">		add(_deleteRows);</span>

<span class="nc" id="L229">		addSeparator();</span>
<span class="nc" id="L230">		add(_print);</span>
<span class="nc" id="L231">	}</span>

	public void setTable(JTable value)
	{
<span class="nc" id="L235">		_table = value;</span>
<span class="nc" id="L236">		replaceStandardTableCopyAction();</span>
<span class="nc" id="L237">	}</span>

	public void reset()
	{
<span class="nc" id="L241">		_showRowNumbersItem.setSelected(false);</span>
<span class="nc" id="L242">	}</span>


	private void replaceStandardTableCopyAction()
	{
<span class="nc" id="L247">		_table.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT).put(COPY_STROKE, &quot;CopyAction&quot;);</span>
<span class="nc" id="L248">		_table.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(COPY_STROKE, &quot;CopyAction&quot;);</span>
<span class="nc" id="L249">		_table.getInputMap(JComponent.WHEN_FOCUSED).put(COPY_STROKE, &quot;CopyAction&quot;);</span>
<span class="nc" id="L250">		_table.getActionMap().put(&quot;CopyAction&quot;, _copy);</span>
<span class="nc" id="L251">	}</span>

	/**
	 * Show the menu.
	 */
	public void show(Component invoker, int x, int y)
	{
<span class="nc" id="L258">		super.show(invoker, x, y);</span>
<span class="nc" id="L259">	}</span>

	public void show(MouseEvent evt)
	{
<span class="nc" id="L263">		super.show(evt);</span>
<span class="nc" id="L264">	}</span>


   private String getStatementSeparatorFromModel()
   {
<span class="nc" id="L269">      return _dataModelImplementationDetails.getStatementSeparator();</span>
   }


   private class CopyAction extends BaseAction
	{
		/**
		 * serialVersionUID
		 */
		private static final long serialVersionUID = -2067301779079584296L;

		CopyAction()
<span class="nc" id="L281">		{</span>
<span class="nc" id="L282">			super(s_stringMgr.getString(&quot;TablePopupMenu.copy&quot;));</span>
<span class="nc" id="L283">		}</span>

		public void actionPerformed(ActionEvent evt)
		{
<span class="nc bnc" id="L287" title="All 2 branches missed.">			if (_table != null)</span>
			{
<span class="nc" id="L289">				new TableCopyCommand(_table, false).execute();</span>
			}
<span class="nc" id="L291">		}</span>
	}

	private class CopyWithHeadersAction extends BaseAction
	{
		/**
		 * serialVersionUID
		 */
		private static final long serialVersionUID = 5382436496333309089L;

		CopyWithHeadersAction()
<span class="nc" id="L302">		{</span>
<span class="nc" id="L303">			super(s_stringMgr.getString(&quot;TablePopupMenu.copyWithHeaders&quot;));</span>
<span class="nc" id="L304">		}</span>

		public void actionPerformed(ActionEvent evt)
		{
<span class="nc bnc" id="L308" title="All 2 branches missed.">			if (_table != null)</span>
			{
<span class="nc" id="L310">				new TableCopyCommand(_table, true).execute();</span>
			}
<span class="nc" id="L312">		}</span>
	}



	private class CopyHtmlAction extends BaseAction
	{
		/**
		 * serialVersionUID
		 */
		private static final long serialVersionUID = 2213871184115799502L;

		CopyHtmlAction()
<span class="nc" id="L325">		{</span>
<span class="nc" id="L326">			super(s_stringMgr.getString(&quot;TablePopupMenu.copyashtml&quot;));</span>
<span class="nc" id="L327">		}</span>

		public void actionPerformed(ActionEvent evt)
		{
<span class="nc bnc" id="L331" title="All 2 branches missed.">			if (_table != null)</span>
			{
<span class="nc" id="L333">				new TableCopyHtmlCommand(_table).execute();</span>
			}
<span class="nc" id="L335">		}</span>
	}
	
	

	private class CopyInStatementAction extends BaseAction
	{
		/**
		 * serialVersionUID
		 */
		private static final long serialVersionUID = 1635818404738839629L;

		CopyInStatementAction()
<span class="nc" id="L348">		{</span>
<span class="nc" id="L349">			super(s_stringMgr.getString(&quot;TablePopupMenu.copyasinstatement&quot;));</span>
<span class="nc" id="L350">		}</span>

		public void actionPerformed(ActionEvent evt)
		{
<span class="nc bnc" id="L354" title="All 2 branches missed.">			if (_table != null)</span>
			{
<span class="nc" id="L356">				new TableCopyInStatementCommand(_table).execute();</span>
			}
<span class="nc" id="L358">		}</span>
	}

	private class CopyWhereStatementAction extends BaseAction
	{
		/**
		 * serialVersionUID
		 */
		private static final long serialVersionUID = 5283906236033114554L;

		CopyWhereStatementAction()
<span class="nc" id="L369">		{</span>
<span class="nc" id="L370">			super(s_stringMgr.getString(&quot;TablePopupMenu.copyaswherestatement&quot;));</span>
<span class="nc" id="L371">		}</span>

		public void actionPerformed(ActionEvent evt)
		{
<span class="nc bnc" id="L375" title="All 2 branches missed.">			if (_table != null)</span>
			{
<span class="nc" id="L377">				new TableCopyWhereStatementCommand(_table).execute();</span>
			}
<span class="nc" id="L379">		}</span>
	}

	private class CopyUpdateStatementAction extends BaseAction
	{
		/**
		 * serialVersionUID
		 */
		private static final long serialVersionUID = -6021874127769966277L;

		CopyUpdateStatementAction()
<span class="nc" id="L390">		{</span>
<span class="nc" id="L391">			super(s_stringMgr.getString(&quot;TablePopupMenu.copyasupdatestatement&quot;));</span>
<span class="nc" id="L392">		}</span>

		public void actionPerformed(ActionEvent evt)
		{
<span class="nc bnc" id="L396" title="All 2 branches missed.">			if (_table != null)</span>
			{
<span class="nc" id="L398">				new TableCopyUpdateStatementCommand(_table).execute();</span>
			}
<span class="nc" id="L400">		}</span>
	}

	private class CopyInsertStatementAction extends BaseAction
	{
		/**
		 * serialVersionUID
		 */
		private static final long serialVersionUID = -7435854038358286356L;

		CopyInsertStatementAction()
<span class="nc" id="L411">		{</span>
<span class="nc" id="L412">			super(s_stringMgr.getString(&quot;TablePopupMenu.copyasinsertstatement&quot;));</span>
<span class="nc" id="L413">		}</span>

		public void actionPerformed(ActionEvent evt)
		{
<span class="nc bnc" id="L417" title="All 2 branches missed.">			if (_table != null)</span>
			{
<span class="nc" id="L419">				new TableCopyInsertStatementCommand(_table, getStatementSeparatorFromModel()).execute();</span>
			}
<span class="nc" id="L421">		}</span>

   }

   private class ExportCsvAction extends BaseAction
   {
      /**
		 * serialVersionUID
		 */
		private static final long serialVersionUID = 6085745835588355015L;

		ExportCsvAction()
<span class="nc" id="L433">      {</span>
         // i18n[TablePopupMenu.export=Export CSV / MS Excel / XML ...]
<span class="nc" id="L435">         super(s_stringMgr.getString(&quot;TablePopupMenu.export&quot;));</span>
<span class="nc" id="L436">      }</span>

      public void actionPerformed(ActionEvent evt)
      {
<span class="nc bnc" id="L440" title="All 2 branches missed.">         if (_table != null)</span>
         {
            try {
<span class="nc" id="L443">				new TableExportCsvCommand(_table).execute();</span>
<span class="nc" id="L444">			} catch (ExportDataException e) {</span>
				// should never happen. Just convert it to a Runtime Exception.
<span class="nc" id="L446">				throw new RuntimeException(e);</span>
<span class="nc" id="L447">			}</span>
         }
<span class="nc" id="L449">      }</span>
   }


   private class AdjustAllColWidthsAction extends BaseAction
	{
		/**
		 * serialVersionUID
		 */
		private static final long serialVersionUID = -3098803720561054400L;

		AdjustAllColWidthsAction()
<span class="nc" id="L461">		{</span>
<span class="nc" id="L462">			super(s_stringMgr.getString(&quot;TablePopupMenu.adoptAllColWidthsAction&quot;));</span>
<span class="nc" id="L463">		}</span>

		public void actionPerformed(ActionEvent evt)
		{
<span class="nc bnc" id="L467" title="All 2 branches missed.">			if (_table != null)</span>
			{
<span class="nc bnc" id="L469" title="All 2 branches missed.">            if(_table.getTableHeader() instanceof ButtonTableHeader)</span>
            {
<span class="nc" id="L471">               ((ButtonTableHeader)_table.getTableHeader()).adjustAllColWidths(true);</span>
            }
         }
<span class="nc" id="L474">		}</span>
	}


   private class AlwaysAdjustAllColWidthsAction extends BaseAction
	{
		/**
		 * serialVersionUID
		 */
		private static final long serialVersionUID = 1822505497525307610L;

		AlwaysAdjustAllColWidthsAction()
<span class="nc" id="L486">		{</span>
<span class="nc" id="L487">			super(s_stringMgr.getString(&quot;TablePopupMenu.alwaysAdoptAllColWiths&quot;));</span>
<span class="nc" id="L488">		}</span>

		public void actionPerformed(ActionEvent evt)
		{
<span class="nc" id="L492">         ButtonTableHeader.setAlwaysAdjustAllColWidths(_alwaysAdjustAllColWidtshActionItem.isSelected());</span>
<span class="nc bnc" id="L493" title="All 4 branches missed.">         if (_table != null &amp;&amp; _alwaysAdjustAllColWidtshActionItem.isSelected())</span>
			{
<span class="nc" id="L495">            ((ButtonTableHeader)_table.getTableHeader()).adjustAllColWidths(true);</span>
			}
<span class="nc" id="L497">		}</span>
	}

   private class ShowRowNumbersAction extends BaseAction
	{
		/**
		 * serialVersionUID
		 */
		private static final long serialVersionUID = 2334425978292516278L;

		ShowRowNumbersAction()
<span class="nc" id="L508">		{</span>
<span class="nc" id="L509">			super(s_stringMgr.getString(&quot;TablePopupMenu.showRowNumbers&quot;));</span>
<span class="nc" id="L510">		}</span>

		public void actionPerformed(ActionEvent evt)
		{
<span class="nc bnc" id="L514" title="All 2 branches missed.">			if (_table != null)</span>
			{
<span class="nc" id="L516">				JCheckBoxMenuItem mnu = (JCheckBoxMenuItem) evt.getSource();</span>
<span class="nc" id="L517">				new ShowRowNumbersCommand(_viewer, mnu.isSelected()).execute();</span>
			}
<span class="nc" id="L519">		}</span>
	}



	private class MakeEditableAction extends BaseAction
	{
		/**
		 * serialVersionUID
		 */
		private static final long serialVersionUID = 8437698495240738702L;

		MakeEditableAction()
<span class="nc" id="L532">		{</span>
<span class="nc" id="L533">			super(s_stringMgr.getString(&quot;TablePopupMenu.makeeditable&quot;));</span>
<span class="nc" id="L534">		}</span>

		public void actionPerformed(ActionEvent evt)
		{
<span class="nc bnc" id="L538" title="All 2 branches missed.">			if (_updateableModel != null)</span>
			{
<span class="nc" id="L540">				new MakeEditableCommand(_updateableModel).execute();</span>
			}
<span class="nc" id="L542">		}</span>
	}


	private class UndoMakeEditableAction extends BaseAction
	{
		/**
		 * serialVersionUID
		 */
		private static final long serialVersionUID = -4529894089150172541L;

		UndoMakeEditableAction()
<span class="nc" id="L554">		{</span>
<span class="nc" id="L555">			super(s_stringMgr.getString(&quot;TablePopupMenu.undomakeeditable&quot;));</span>
<span class="nc" id="L556">		}</span>

		public void actionPerformed(ActionEvent evt)
		{
<span class="nc bnc" id="L560" title="All 2 branches missed.">			if (_updateableModel != null)</span>
			{
<span class="nc" id="L562">				new UndoMakeEditableCommand(_updateableModel).execute();</span>
			}
<span class="nc" id="L564">		}</span>
	}
	private class DeleteRowsAction extends BaseAction
	{
		/**
		 * serialVersionUID
		 */
		private static final long serialVersionUID = -1579260225467807234L;

		DeleteRowsAction()
<span class="nc" id="L574">		{</span>
<span class="nc" id="L575">			super(s_stringMgr.getString(&quot;TablePopupMenu.deleterows&quot;));</span>
<span class="nc" id="L576">		}</span>

		public void actionPerformed(ActionEvent evt)
		{
<span class="nc bnc" id="L580" title="All 2 branches missed.">			if (_table != null)</span>
			{
<span class="nc" id="L582">				int selectedRows[] = _table.getSelectedRows();</span>

				// Tell the DataSetViewer to delete the rows
				// Note: rows are indexes in the SORTABLE model, not the ACTUAL model
<span class="nc" id="L586">				_viewer.deleteRows(selectedRows);</span>
			}
<span class="nc" id="L588">		}</span>
	}

	private class InsertRowAction extends BaseAction
	{
		/**
		 * serialVersionUID
		 */
		private static final long serialVersionUID = -1162317166099751091L;

		InsertRowAction()
<span class="nc" id="L599">		{</span>
<span class="nc" id="L600">			super(s_stringMgr.getString(&quot;TablePopupMenu.insertrow&quot;));</span>
<span class="nc" id="L601">		}</span>

		public void actionPerformed(ActionEvent evt)
		{
<span class="nc" id="L605">			_viewer.insertRow();</span>
<span class="nc" id="L606">		}</span>
	}

	private class SelectAllAction extends BaseAction
	{
		/**
		 * serialVersionUID
		 */
		private static final long serialVersionUID = -1785396901358722169L;

		SelectAllAction()
<span class="nc" id="L617">		{</span>
<span class="nc" id="L618">			super(s_stringMgr.getString(&quot;TablePopupMenu.selectall&quot;));</span>
<span class="nc" id="L619">		}</span>

		public void actionPerformed(ActionEvent evt)
		{
<span class="nc bnc" id="L623" title="All 2 branches missed.">			if (_table != null)</span>
			{
<span class="nc" id="L625">				new TableSelectAllCellsCommand(_table).execute();</span>
			}
<span class="nc" id="L627">		}</span>
	}

	/**
	 * Select the entire rows of the current selection.
	 * @author Stefan Willinger
	 *
	 */
	private class SelectRowsAction extends BaseAction
	{

		SelectRowsAction()
<span class="nc" id="L639">		{</span>
<span class="nc" id="L640">			super(s_stringMgr.getString(&quot;TablePopupMenu.selectEntireRows&quot;));</span>
<span class="nc" id="L641">		}</span>

		public void actionPerformed(ActionEvent evt)
		{
<span class="nc bnc" id="L645" title="All 2 branches missed.">			if (_table != null)</span>
			{
<span class="nc" id="L647">				new TableSelectEntireRowsCommand(_table).execute();</span>
			}
<span class="nc" id="L649">		}</span>
	}
	

   private class PrintAction extends BaseAction
   {
      /**
		 * serialVersionUID
		 */
		private static final long serialVersionUID = 2017562921244356617L;

		PrintAction()
<span class="nc" id="L661">      {</span>
<span class="nc" id="L662">         super(s_stringMgr.getString(&quot;TablePopupMenu.print&quot;));</span>
<span class="nc" id="L663">      }</span>

      public void actionPerformed(ActionEvent evt)
      {
<span class="nc bnc" id="L667" title="All 2 branches missed.">         if (_table != null)</span>
         {
            try
            {

<span class="nc" id="L672">               PrinterJob printerJob = PrinterJob.getPrinterJob();</span>

<span class="nc" id="L674">               printerJob.setPrintable(_viewer);</span>

<span class="nc bnc" id="L676" title="All 2 branches missed.">               if (printerJob.printDialog())</span>
               {
<span class="nc" id="L678">                  printerJob.print();</span>
               }
            }
<span class="nc" id="L681">            catch (Exception e)</span>
            {
<span class="nc" id="L683">               throw new RuntimeException(e);</span>
<span class="nc" id="L684">            }</span>
         }
<span class="nc" id="L686">      }</span>
   }
}

</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>