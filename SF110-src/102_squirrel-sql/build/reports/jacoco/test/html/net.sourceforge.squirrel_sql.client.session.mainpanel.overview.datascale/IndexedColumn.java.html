<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>IndexedColumn.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">102_squirrel-sql</a> &gt; <a href="index.source.html" class="el_package">net.sourceforge.squirrel_sql.client.session.mainpanel.overview.datascale</a> &gt; <span class="el_source">IndexedColumn.java</span></div><h1>IndexedColumn.java</h1><pre class="source lang-java linenums">package net.sourceforge.squirrel_sql.client.session.mainpanel.overview.datascale;

import net.sourceforge.squirrel_sql.fw.datasetviewer.ColumnDisplayDefinition;
import net.sourceforge.squirrel_sql.fw.datasetviewer.cellcomponent.CellComponentFactory;

import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;

public abstract class IndexedColumn
{
   private ArrayList&lt;Integer&gt; _ix;
   private List&lt;Object[]&gt; _rows;
   private int _colIx;
   private ColumnDisplayDefinition _colDef;
   private Comparator _comparator;

   public IndexedColumn(List&lt;Object[]&gt; rows, int colIx, ColumnDisplayDefinition colDef)
<span class="nc" id="L20">   {</span>
<span class="nc" id="L21">      _rows = rows;</span>
<span class="nc" id="L22">      _colIx = colIx;</span>
<span class="nc" id="L23">      _colDef = colDef;</span>
<span class="nc" id="L24">      _ix = new ArrayList&lt;Integer&gt;(rows.size());</span>

<span class="nc bnc" id="L26" title="All 2 branches missed.">      for (int i = 0; i &lt; rows.size(); i++)</span>
      {
<span class="nc" id="L28">         _ix.add(i);</span>
      }
<span class="nc" id="L30">   }</span>

   public void sortIx(Comparator comparator)
   {
<span class="nc" id="L34">      _comparator = comparator;</span>
<span class="nc" id="L35">      Collections.sort(_ix, _comparator);</span>
<span class="nc" id="L36">   }</span>

   public int getColumnIndex()
   {
<span class="nc" id="L40">      return _colIx;</span>
   }

   public Object get(int ix)
   {
<span class="nc" id="L45">      return _rows.get(_ix.get(ix))[_colIx];</span>
   }

   public Object getRow(Integer rowIx)
   {
<span class="nc" id="L50">      return _rows.get(rowIx)[_colIx];</span>
   }

   public int getRowIx(int ix)
   {
<span class="nc" id="L55">      return _ix.get(ix);</span>
   }



   public int binarySearch(Object border)
   {
<span class="nc" id="L62">      return Collections.binarySearch(_ix, new NoIx(border), _comparator);</span>
   }

   public String getColumnName()
   {
<span class="nc" id="L67">      return _colDef.getColumnName();</span>
   }

   public Object getMin()
   {
<span class="nc" id="L72">      return _rows.get(_ix.get(0))[_colIx];</span>
   }

   public Object getMax()
   {
<span class="nc" id="L77">      return _rows.get(_ix.get(_ix.size() - 1))[_colIx];</span>
   }

   public int size()
   {
<span class="nc" id="L82">      return _ix.size();</span>
   }

   public int getLastIndexOfVal(int startIx)
   {
<span class="nc" id="L87">      int ret = startIx;</span>

<span class="nc bnc" id="L89" title="All 2 branches missed.">      for (int i = startIx + 1; i &lt; _ix.size(); i++)</span>
      {
<span class="nc bnc" id="L91" title="All 2 branches missed.">         if(0 != _comparator.compare(new NoIx(get(startIx)), new NoIx(get(i))) )</span>
         {
<span class="nc" id="L93">            break;</span>
         }

<span class="nc" id="L96">         ++ret;</span>
      }

<span class="nc" id="L99">      return ret;</span>
   }

   public int getFirstIndexOfVal(int startIx)
   {
<span class="nc bnc" id="L104" title="All 2 branches missed.">      for (int i = startIx - 1; 0 &lt;= i ; i--)</span>
      {
<span class="nc bnc" id="L106" title="All 2 branches missed.">         if(0 != _comparator.compare(new NoIx(get(startIx)), new NoIx(get(i))) )</span>
         {
<span class="nc" id="L108">            return i;</span>
         }
      }

<span class="nc" id="L112">      return 0;</span>
   }


   public int compareObjects(Object o1, Object o2)
   {
<span class="nc" id="L118">      return _comparator.compare(new NoIx(o1), new NoIx(o2));</span>
   }


   public String renderObject(Object o)
   {
<span class="nc" id="L124">      return CellComponentFactory.renderObject(o, _colDef);</span>
   }

   public abstract Calculator getCalculator();


   public Comparator&lt;? super Object&gt; getComparator()
   {
<span class="nc" id="L132">      return _comparator;</span>
   }

   public List&lt;Object[]&gt; getResultRows(int firstIx, int lastIx)
   {
<span class="nc" id="L137">      ArrayList&lt;Object[]&gt; ret = new ArrayList&lt;Object[]&gt;(lastIx - firstIx + 1);</span>

<span class="nc bnc" id="L139" title="All 2 branches missed.">      for(int i= firstIx; i &lt;= lastIx; ++i)</span>
      {
<span class="nc" id="L141">         ret.add(_rows.get(_ix.get(i)));</span>
      }

<span class="nc" id="L144">      return ret;</span>
   }

   public ColumnDisplayDefinition getColumnDisplayDefinition()
   {
<span class="nc" id="L149">      return _colDef;</span>
   }

   public abstract String calculateDist(Object beginData, Object endData);
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>