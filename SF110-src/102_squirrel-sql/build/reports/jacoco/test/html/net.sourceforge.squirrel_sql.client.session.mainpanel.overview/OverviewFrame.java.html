<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>OverviewFrame.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">102_squirrel-sql</a> &gt; <a href="index.source.html" class="el_package">net.sourceforge.squirrel_sql.client.session.mainpanel.overview</a> &gt; <span class="el_source">OverviewFrame.java</span></div><h1>OverviewFrame.java</h1><pre class="source lang-java linenums">package net.sourceforge.squirrel_sql.client.session.mainpanel.overview;

import net.sourceforge.squirrel_sql.client.IApplication;
import net.sourceforge.squirrel_sql.client.gui.desktopcontainer.DialogWidget;
import net.sourceforge.squirrel_sql.client.gui.desktopcontainer.WidgetAdapter;
import net.sourceforge.squirrel_sql.client.gui.desktopcontainer.WidgetEvent;
import net.sourceforge.squirrel_sql.fw.datasetviewer.DataSetViewerTablePanel;
import net.sourceforge.squirrel_sql.fw.util.StringManager;
import net.sourceforge.squirrel_sql.fw.util.StringManagerFactory;

import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.prefs.Preferences;

public class OverviewFrame extends DialogWidget
{
<span class="nc" id="L19">   private static final StringManager s_stringMgr = StringManagerFactory.getStringManager(OverviewFrame.class);</span>

   private static final String PREF_KEY_OVERVIEW_FRAME_WIDTH = &quot;Squirrel.overview.FrameWidth&quot;;
   private static final String PREF_KEY_OVERVIEW_FRAME_HIGHT = &quot;Squirrel.overview.FrameHight&quot;;


   private JCheckBox _chkOnTop;

   public OverviewFrame(DataSetViewerTablePanel simpleTable, IApplication app, Window parent)
   {
<span class="nc" id="L29">      super(s_stringMgr.getString(&quot;OverviewFrame.title&quot;), true, true, true, true, app, parent);</span>

<span class="nc" id="L31">      setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);</span>

<span class="nc" id="L33">      final Container cont = getContentPane();</span>
<span class="nc" id="L34">      cont.setLayout(new BorderLayout());</span>

<span class="nc bnc" id="L36" title="All 2 branches missed.">      if (app.getDesktopStyle().supportsLayers())</span>
      {
<span class="nc" id="L38">         JPanel pnlButtons = new JPanel(new GridBagLayout());</span>
         GridBagConstraints gbc;


         // i18n[resultFrame.stayOnTop=Stay on top]
<span class="nc" id="L43">         _chkOnTop = new JCheckBox(s_stringMgr.getString(&quot;OverviewFrame.stayOnTop&quot;));</span>
<span class="nc" id="L44">         gbc = new GridBagConstraints(1,0,1,1,0,0,GridBagConstraints.WEST, GridBagConstraints.NONE, new Insets(0,5,0,5), 0,0);</span>
<span class="nc" id="L45">         pnlButtons.add(_chkOnTop, gbc);</span>
<span class="nc" id="L46">         _chkOnTop.setSelected(true);</span>


<span class="nc" id="L49">         _chkOnTop.addActionListener(new ActionListener()</span>
<span class="nc" id="L50">         {</span>
            public void actionPerformed(ActionEvent e)
            {
<span class="nc" id="L53">               onStayOnTopChanged();</span>
<span class="nc" id="L54">            }</span>
         });

<span class="nc" id="L57">         gbc = new GridBagConstraints(2,0,1,1,1,0,GridBagConstraints.WEST, GridBagConstraints.NONE, new Insets(0,5,0,5), 0,0);</span>
<span class="nc" id="L58">         pnlButtons.add(new JPanel(), gbc);</span>
<span class="nc" id="L59">         cont.add(pnlButtons, BorderLayout.NORTH);</span>
      }


<span class="nc" id="L63">      cont.add(new JScrollPane(simpleTable.getComponent()), BorderLayout.CENTER);</span>


<span class="nc" id="L66">      int width = Preferences.userRoot().getInt(PREF_KEY_OVERVIEW_FRAME_WIDTH, 300);</span>
<span class="nc" id="L67">      int hight = Preferences.userRoot().getInt(PREF_KEY_OVERVIEW_FRAME_HIGHT, 300);</span>

<span class="nc" id="L69">      setSize(new Dimension(width, hight));</span>


<span class="nc" id="L72">      addWidgetListener(new WidgetAdapter()</span>
<span class="nc" id="L73">      {</span>
         @Override
         public void widgetClosing(WidgetEvent evt)
         {
<span class="nc" id="L77">            onWidgetClosing();</span>
<span class="nc" id="L78">         }</span>
      });
<span class="nc" id="L80">   }</span>

   private void onWidgetClosing()
   {
<span class="nc" id="L84">      Dimension size = getSize();</span>

<span class="nc" id="L86">      Preferences.userRoot().putInt(PREF_KEY_OVERVIEW_FRAME_WIDTH, size.width);</span>
<span class="nc" id="L87">      Preferences.userRoot().putInt(PREF_KEY_OVERVIEW_FRAME_HIGHT, size.height);</span>
<span class="nc" id="L88">   }</span>


   private void onStayOnTopChanged()
   {
<span class="nc bnc" id="L93" title="All 2 branches missed.">      if(_chkOnTop.isSelected())</span>
      {
<span class="nc" id="L95">         setLayer(JLayeredPane.PALETTE_LAYER.intValue());</span>
      }
      else
      {
<span class="nc" id="L99">         setLayer(JLayeredPane.DEFAULT_LAYER.intValue());</span>
      }

      // Needs to be done in both cases because if the window goes back to
      // the default layer it goes back behind all other windows too.
<span class="nc" id="L104">      toFront();</span>
<span class="nc" id="L105">   }</span>



}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>