<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Version.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">102_squirrel-sql</a> &gt; <a href="index.source.html" class="el_package">net.sourceforge.squirrel_sql.client</a> &gt; <span class="el_source">Version.java</span></div><h1>Version.java</h1><pre class="source lang-java linenums">package net.sourceforge.squirrel_sql.client;
/*
 * Copyright (C) 2001-2006 Colin Bell
 * colbell@users.sourceforge.net
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 */
import java.io.IOException;
import java.io.InputStream;
import java.util.Properties;

import net.sourceforge.squirrel_sql.fw.util.StringManager;
import net.sourceforge.squirrel_sql.fw.util.StringManagerFactory;
/**
 * Application version information.
 *
 * @author &lt;A HREF=&quot;mailto:colbell@users.sourceforge.net&quot;&gt;Colin Bell&lt;/A&gt;
 */
<span class="nc" id="L31">public class Version</span>
{
	/** Internationalized strings for this class. */
<span class="nc" id="L34">	private static final StringManager s_stringMgr =</span>
<span class="nc" id="L35">		StringManagerFactory.getStringManager(Version.class);</span>

<span class="nc" id="L37">	private static final String APP_NAME = s_stringMgr.getString(&quot;Version.appname&quot;);</span>

<span class="nc" id="L39">	private static final String COPYRIGHT = s_stringMgr.getString(&quot;Version.copyright&quot;);</span>

<span class="nc" id="L41">	private static final String WEB_SITE = s_stringMgr.getString(&quot;Version.website&quot;);</span>
	
<span class="nc" id="L43">	private static String shortVersion = null;</span>
	
	public static String getApplicationName()
	{
<span class="nc" id="L47">		return APP_NAME;</span>
	}

	/**
	 * Returns a the project version according to the pom.xml file.  If this is a release version (like 3.2.0) 
	 * then the version will simply be 3.2.0.  However, for a snapshot version (like 3.2.0-SNAPSHOT) the 
	 * squirrelsql-version-plugin will alter this to have the current timestamp and Snapshot in the form like:
	 * 
	 * Snapshot-20100822_1326
	 * 
	 * @return the filtered in value of the version from maven.  This property is created in maven by using the
	 * squirrelsql-version-plugin.  This value is filtered into Version.properties and read from the 
	 * classloader at runtime.  If this string appears as ${squirrelsql.version} in the filtered version 
	 * of Version.properties (target/classes/net/sourceforge/squirrel_sql/client/Version.properties) ensure 
	 * that the squirrelsql-version-plugin is being bound to the initialize phase, or any phase prior to 
	 * process-resources.  
	 */
	synchronized public static String getShortVersion()
	{
<span class="nc bnc" id="L66" title="All 2 branches missed.">		if (shortVersion == null)</span>
		{
<span class="nc" id="L68">			InputStream is = Version.class.getResourceAsStream(&quot;Version.properties&quot;);</span>
<span class="nc" id="L69">			Properties props = new Properties();</span>
			try
			{
<span class="nc" id="L72">				props.load(is);</span>
<span class="nc" id="L73">				shortVersion = props.getProperty(&quot;squirrelsql.version&quot;);</span>
			}
<span class="nc" id="L75">			catch (IOException e)</span>
			{
<span class="nc" id="L77">				shortVersion = &quot;Unknown Version&quot;;</span>
<span class="nc" id="L78">			}</span>
		}		
<span class="nc" id="L80">		return shortVersion;</span>
	}

	public static void main(String[] args) {
<span class="nc" id="L84">		System.out.println(&quot;Version: &quot;+getShortVersion());</span>
<span class="nc" id="L85">	}</span>
	
	public static String getVersion()
	{
<span class="nc" id="L89">		StringBuffer buf = new StringBuffer();</span>
<span class="nc" id="L90">		buf.append(APP_NAME);</span>
<span class="nc" id="L91">		buf.append(&quot; &quot;);</span>
<span class="nc bnc" id="L92" title="All 2 branches missed.">		if (!isSnapshotVersion()) {</span>
<span class="nc" id="L93">			buf.append(&quot;Version &quot;);</span>
		}
<span class="nc" id="L95">		buf.append(getShortVersion());</span>
<span class="nc" id="L96">		return buf.toString();</span>
	}

	/**
	 * Returns a boolean value indicating whether or not this is a snapshot release or a stable release.
	 * 
	 * @return true if this is snapshot release; false otherwise.  Note: Since snapshot releases replace this
	 * version with Version.java.template, this version should always return false.  This makes it possible to 
	 * determine what channel to use for updates when SQuirreL is installed for the very first time and no 
	 * preference is set.  After that the channel can be changed by the user at will.
	 */
	public static boolean isSnapshotVersion() {
<span class="nc" id="L108">		return getShortVersion().toLowerCase().startsWith(&quot;snapshot&quot;);</span>
	}
	
	public static String getCopyrightStatement()
	{
<span class="nc" id="L113">		return COPYRIGHT;</span>
	}

	public static String getWebSite()
	{
<span class="nc" id="L118">		return WEB_SITE;</span>
	}

   public static boolean supportsUsedJDK()
   {
<span class="nc" id="L123">      String vmVer = System.getProperty(&quot;java.vm.version&quot;);</span>

<span class="nc bnc" id="L125" title="All 2 branches missed.">      if(   vmVer.startsWith(&quot;0&quot;)</span>
<span class="nc bnc" id="L126" title="All 2 branches missed.">         || vmVer.startsWith(&quot;1.0&quot;)</span>
<span class="nc bnc" id="L127" title="All 2 branches missed.">         || vmVer.startsWith(&quot;1.1&quot;)</span>
<span class="nc bnc" id="L128" title="All 2 branches missed.">         || vmVer.startsWith(&quot;1.2&quot;)</span>
<span class="nc bnc" id="L129" title="All 2 branches missed.">         || vmVer.startsWith(&quot;1.3&quot;)</span>
<span class="nc bnc" id="L130" title="All 2 branches missed.">         || vmVer.startsWith(&quot;1.4&quot;)</span>
<span class="nc bnc" id="L131" title="All 2 branches missed.">         || vmVer.startsWith(&quot;1.5&quot;))</span>
      {
<span class="nc" id="L133">         return false;</span>
      }
      else
      {
<span class="nc" id="L137">         return true;</span>
      }
   }

   public static String getUnsupportedJDKMessage()
   {
<span class="nc" id="L143">      String[] params = new String[]</span>
         {
<span class="nc" id="L145">            System.getProperty(&quot;java.vm.version&quot;),</span>
<span class="nc" id="L146">            System.getProperty(&quot;java.home&quot;)</span>
         };

<span class="nc" id="L149">      return s_stringMgr.getString(&quot;Application.error.unsupportedJDKVersion&quot;, params);</span>
   }

   public static boolean isJDK14()
   {
<span class="nc" id="L154">      String vmVer = System.getProperty(&quot;java.vm.version&quot;);</span>

<span class="nc bnc" id="L156" title="All 2 branches missed.">      if(vmVer.startsWith(&quot;1.4&quot;))</span>
      {
<span class="nc" id="L158">         return true;</span>
      }
      else
      {
<span class="nc" id="L162">         return false;</span>
      }
   }
   
   public static boolean isJDK16OrAbove()
   {
<span class="nc" id="L168">      String vmVer = System.getProperty(&quot;java.vm.version&quot;).substring(0, 3);</span>

<span class="nc bnc" id="L170" title="All 2 branches missed.">      if(vmVer.compareTo(&quot;1.6&quot;) &gt;= 0)</span>
      {
<span class="nc" id="L172">         return true;</span>
      }
      else
      {
<span class="nc" id="L176">         return false;</span>
      }
   }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>