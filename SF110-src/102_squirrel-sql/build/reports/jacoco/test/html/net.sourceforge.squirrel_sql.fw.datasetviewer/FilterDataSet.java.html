<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>FilterDataSet.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">102_squirrel-sql</a> &gt; <a href="index.source.html" class="el_package">net.sourceforge.squirrel_sql.fw.datasetviewer</a> &gt; <span class="el_source">FilterDataSet.java</span></div><h1>FilterDataSet.java</h1><pre class="source lang-java linenums">/*
 * Copyright (C) 2009 Rob Manning
 * manningr@users.sourceforge.net
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public License
 * as published by the Free Software Foundation; either version 2
 * of the License, or any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
 */
package net.sourceforge.squirrel_sql.fw.datasetviewer;

import java.util.Map;

import net.sourceforge.squirrel_sql.fw.util.IMessageHandler;

/**
 * An IDataSet implementation that wraps another IDataSet implementation and filters calls to 
 * get with the specified replacements list.  The list index specifies the column and the map 
 * at that index specifies the replacement original value as the key and what to replace it 
 * with as the value.  For example, suppose you wanted to replace the second column of the dataset
 * with values according to the following:
 * 
 * Column 1: 
 *   A =&gt; &quot;Alpha&quot;
 *   B =&gt; &quot;Beta&quot;
 * 
 * Column 2:
 *   1 =&gt; &quot;ONE&quot;
 *   2 =&gt; &quot;TWO&quot;
 *
 * Then the replacements list would be created with the following code:
 * 
 * Map&lt;Integer, Map&lt;String,String&gt;&gt; replacement = new HashMap&lt;Integer, Map&lt;String,String&gt;&gt;();
 * HashMap&lt;String,String&gt; map1 = new HashMap&lt;String,String&gt;();
 * map1.put(&quot;A&quot;, &quot;Alpha&quot;);
 * map1.put(&quot;B&quot;, &quot;Beta&quot;);
 * 	 
 * HashMap&lt;String,String&gt; map2 = new HashMap&lt;String,String&gt;();
 * map2.put(&quot;1&quot;, &quot;ONE&quot;);
 * map2.put(&quot;2&quot;, &quot;TWO&quot;);
 * 
 * replacement.put(0, map1);  // Column index is zero-based, so first column index is 0.
 * replacement.put(1, map2);
 */
public class FilterDataSet implements IDataSet {

	private final IDataSet _toBeFiltered;
	private final Map&lt;Integer, Map&lt;String, String&gt;&gt; _replacements;
	
<span class="nc" id="L59">	public FilterDataSet(IDataSet toBeFiltered, Map&lt;Integer, Map&lt;String, String&gt;&gt; replacements) {</span>
<span class="nc" id="L60">		this._toBeFiltered = toBeFiltered;</span>
<span class="nc" id="L61">		this._replacements = replacements;</span>
		
<span class="nc" id="L63">	}</span>
	
	@Override
	public Object get(int columnIndex) throws DataSetException
	{
<span class="nc" id="L68">		Object result = _toBeFiltered.get(columnIndex);</span>
<span class="nc bnc" id="L69" title="All 2 branches missed.">		if (result == null) {</span>
<span class="nc" id="L70">			return result;</span>
		}
		
<span class="nc" id="L73">		Map&lt;String, String&gt; replacementMap = _replacements.get(columnIndex);</span>
<span class="nc bnc" id="L74" title="All 2 branches missed.">		if (replacementMap != null) {</span>
<span class="nc" id="L75">			String value = replacementMap.get(result.toString());</span>
<span class="nc bnc" id="L76" title="All 2 branches missed.">			if (value != null) {</span>
<span class="nc" id="L77">				result = value;</span>
			}
		}
<span class="nc" id="L80">		return result; </span>
	}

	@Override
	public int getColumnCount() throws DataSetException
	{
<span class="nc" id="L86">		return _toBeFiltered.getColumnCount();</span>
	}

	@Override
	public DataSetDefinition getDataSetDefinition() throws DataSetException
	{
<span class="nc" id="L92">		return _toBeFiltered.getDataSetDefinition();</span>
	}

	@Override
	public boolean next(IMessageHandler msgHandler) throws DataSetException
	{
<span class="nc" id="L98">		return _toBeFiltered.next(msgHandler);</span>
	}
	
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>