<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>VWordPosition.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">40_glengineer</a> &gt; <a href="index.source.html" class="el_package">glengineer.positions</a> &gt; <span class="el_source">VWordPosition.java</span></div><h1>VWordPosition.java</h1><pre class="source lang-java linenums">package glengineer.positions;

import glengineer.blocks.Block;
import glengineer.blocks.CharTable;

/**
 * Encapsulates the position (start and end coordinates)
 * of a word lying vertically on the scheme.
 */
public class VWordPosition extends WordPosition
	implements Comparable&lt;VWordPosition&gt;
{
	/**
	 * The horizontal coordinate of the word.
	 */
	public final int x;
	
	/**
	 * The vertical coordinate of the word start.
	 */
	public final int y1;
	
	/**
	 * The vertical coordinate of the word end + 1.
	 */
	public final int y2;
	
	
<span class="nc" id="L29">	public VWordPosition(int x, int y1, int y2) {</span>
<span class="nc bnc" id="L30" title="All 2 branches missed.">		if( y1 &gt; y2 )</span>
<span class="nc" id="L31">			throw new IllegalArgumentException(&quot;wrong word position parameters&quot;);</span>
<span class="nc" id="L32">		this.x = x;</span>
<span class="nc" id="L33">		this.y1 = y1;</span>
<span class="nc" id="L34">		this.y2 = y2;</span>
<span class="nc" id="L35">	}</span>
	
	public VWordPosition(CharPosition start, int y2) {
<span class="nc" id="L38">		this(start.x, start.y, y2);</span>
<span class="nc" id="L39">	}</span>
	
	public VWordPosition(int y, CharPosition end) {
<span class="nc" id="L42">		this(end.x, y, end.y);</span>
<span class="nc" id="L43">	}</span>
	
	public VWordPosition(Block block) {
<span class="nc" id="L46">		this(block.getPos1(), block.getPos2().x);</span>
<span class="nc" id="L47">	}</span>
	
	/**
	 * Creates a trivial word position
	 * which begins and ends at the specified character position.
	 */
	public VWordPosition(CharPosition cp) {
<span class="nc" id="L54">		this(cp.x, cp.y,cp.y);</span>
<span class="nc" id="L55">	}</span>
	
	/**
	 * Returns the coordinates of the beginning of this word.
	 */
	public CharPosition1 getStart() {
<span class="nc" id="L61">		return new CharPosition1(x,y1);</span>
	}
	/**
	 * Returns the coordinates of the ending of this word (exclusive).
	 */
	public CharPosition2 getEnd() {
<span class="nc" id="L67">		return new CharPosition2(x,y2);</span>
	}
	
	public int getHeight()
	{
<span class="nc" id="L72">		return y2 - y1;</span>
	}
	
	public boolean equals(WordPosition wp)
	{
<span class="nc bnc" id="L77" title="All 2 branches missed.">		if( ! (wp instanceof VWordPosition) )</span>
<span class="nc" id="L78">			return false;</span>
<span class="nc" id="L79">		VWordPosition hwp = (VWordPosition) wp;</span>
<span class="nc bnc" id="L80" title="All 6 branches missed.">		return hwp.x == x &amp;&amp; hwp.y1 == y1 &amp;&amp; hwp.y2 == y2;</span>
	}
	
	public boolean isTrivial() {
<span class="nc bnc" id="L84" title="All 2 branches missed.">		return y1 &gt;= y2;</span>
	}
	
	public boolean contains(int x, int y)
	{
<span class="nc bnc" id="L89" title="All 6 branches missed.">		return x == this.x &amp;&amp; y1 &lt;= y &amp;&amp; y &lt; y2;</span>
	}
	
	public boolean liesIn(CharTable ct)
	{
<span class="nc bnc" id="L94" title="All 8 branches missed.">		return x &gt;= ct.x1 &amp;&amp; x &lt; ct.x2</span>
				&amp;&amp; y1 &gt;= ct.y1 &amp;&amp; y2 &lt;= ct.y2;
	}
	
	/**
	 * Verifies whether this word position intersects the specified char table.
	 */
	public boolean intersects(CharTable ct)
	{
<span class="nc bnc" id="L103" title="All 8 branches missed.">		return ct.x1 &lt;= x &amp;&amp; x &lt; ct.x2</span>
				&amp;&amp; ct.y1 &lt; y2 &amp;&amp; y1 &lt; ct.y2;
	}
	
	/**
	 * Returns the height of the intersection of this line
	 * with the specified block
	 * or &lt;code&gt;0&lt;/code&gt; if they are not intersected.
	 */
	public int getLengthInsideOf(Block block)
	{
<span class="nc" id="L114">		int height = Math.min( y2, block.y2 ) - Math.max( y1, block.y1 );</span>
<span class="nc" id="L115">		return Math.max( height, 0 );</span>
	}
	
	/**
	 * Compares this vertical position with the specified one
	 * according to their x-coordinates.
	 */
	public int compareTo(VWordPosition vLine)
	{
<span class="nc" id="L124">		int xx = vLine.x;</span>
<span class="nc bnc" id="L125" title="All 2 branches missed.">		if( x &lt; xx )</span>
<span class="nc" id="L126">			return -1;</span>
<span class="nc bnc" id="L127" title="All 2 branches missed.">		else if( x == xx ) </span>
<span class="nc" id="L128">			return 0;</span>
		else
<span class="nc" id="L130">			return +1;</span>
	}

	public String toString() {
<span class="nc" id="L134">		return &quot;vertical(&quot; + x + &quot;;&quot; + y1 + &quot;,&quot; + y2 + &quot;)&quot;;</span>
	}
	
	/**
	 * Returns the text at this position on the specified char table.
	 * 
	 * The call is dispatched back to the specified char table
	 * informing it about the concrete word position type. 
	 * 
	 * @param ct	the char table from which the text must be read.
	 * 
	 * @return		the text at this position on the specified char table.
	 */
	public String textAt(CharTable ct)
	{
<span class="nc" id="L149">		return ct.textAt(this);</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>