<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>HWordPosition.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">40_glengineer</a> &gt; <a href="index.source.html" class="el_package">glengineer.positions</a> &gt; <span class="el_source">HWordPosition.java</span></div><h1>HWordPosition.java</h1><pre class="source lang-java linenums">package glengineer.positions;

import glengineer.blocks.Block;
import glengineer.blocks.CharTable;

/**
 * Encapsulates the position (start and end coordinates)
 * of a word lying horizontally on the scheme.
 */
public class HWordPosition extends WordPosition
{
	/**
	 * The horizontal coordinate of the word start.
	 */
	public final int x1;
	
	/**
	 * The horizontal coordinate of the word end + 1.
	 */
	public final int x2;
	
	/**
	 * The vertical coordinate of the word.
	 */
	public final int y;
	
<span class="nc" id="L27">	public HWordPosition(int x1, int x2, int y) {</span>
<span class="nc bnc" id="L28" title="All 2 branches missed.">		if( x1 &gt; x2 )</span>
<span class="nc" id="L29">			throw new IllegalArgumentException(</span>
					&quot;wrong word position parameters&quot; );
<span class="nc" id="L31">		this.x1 = x1;</span>
<span class="nc" id="L32">		this.x2 = x2;</span>
<span class="nc" id="L33">		this.y = y;</span>
<span class="nc" id="L34">	}</span>
	
	public HWordPosition(CharPosition start, int x2) {
<span class="nc" id="L37">		this(start.x, x2, start.y);</span>
<span class="nc" id="L38">	}</span>
	
	public HWordPosition(int x1, CharPosition end) {
<span class="nc" id="L41">		this(x1, end.x, end.y);</span>
<span class="nc" id="L42">	}</span>
	
	/**
	 * The word position is initialized
	 * representing the upper line of the specified block.
	 */
	public HWordPosition(Block block) {
<span class="nc" id="L49">		this(block.getPos1(), block.getPos2().x);</span>
<span class="nc" id="L50">	}</span>
	
	/**
	 * Creates a trivial word position
	 * which begins and ends at the specified character position.
	 */
	public HWordPosition(CharPosition cp) {
<span class="nc" id="L57">		this(cp.x,cp.x, cp.y);</span>
<span class="nc" id="L58">	}</span>
	
	/**
	 * Returns the coordinates of the beginning of this word.
	 */
	public CharPosition1 getStart() {
<span class="nc" id="L64">		return new CharPosition1(x1,y);</span>
	}
	/**
	 * Returns the coordinates of the ending of this word (exclusive).
	 */
	public CharPosition2 getEnd() {
<span class="nc" id="L70">		return new CharPosition2(x2,y);</span>
	}
	
	public int getWidth()
	{
<span class="nc" id="L75">		return x2 - x1;</span>
	}
	
	public boolean equals(WordPosition wp)
	{
<span class="nc bnc" id="L80" title="All 2 branches missed.">		if( ! (wp instanceof HWordPosition) )</span>
<span class="nc" id="L81">			return false;</span>
<span class="nc" id="L82">		HWordPosition hwp = (HWordPosition) wp;</span>
<span class="nc bnc" id="L83" title="All 6 branches missed.">		return hwp.x1 == x1 &amp;&amp; hwp.x2 == x2 &amp;&amp; hwp.y == y;</span>
	}
	
	public boolean isTrivial() {
<span class="nc bnc" id="L87" title="All 2 branches missed.">		return x1 &gt;= x2;</span>
	}
	
	public boolean contains(int x, int y)
	{
<span class="nc bnc" id="L92" title="All 6 branches missed.">		return y == this.y &amp;&amp; x1 &lt;= x &amp;&amp; x &lt; x2;</span>
	}
	
	public boolean liesIn(CharTable ct)
	{
<span class="nc bnc" id="L97" title="All 8 branches missed.">		return x1 &gt;= ct.x1 &amp;&amp; x2 &lt;= ct.x2</span>
				&amp;&amp; y &gt;= ct.y1 &amp;&amp; y &lt; ct.y2;
	}
	
	/**
	 * Verifies whether this word position intersects the specified char table.
	 */
	public boolean intersects(CharTable ct)
	{
<span class="nc bnc" id="L106" title="All 8 branches missed.">		return ct.y1 &lt;= y &amp;&amp; y &lt; ct.y2</span>
				&amp;&amp; ct.x1 &lt; x2 &amp;&amp; x1 &lt; ct.x2;
	}
	
	/**
	 * Returns the width of the intersection of this line
	 * with the specified block
	 * or &lt;code&gt;0&lt;/code&gt; if they are not intersected.
	 */
	public int getLengthInsideOf(Block block)
	{
<span class="nc" id="L117">		int width = Math.min( x2, block.x2 ) - Math.max( x1, block.x1 );</span>
<span class="nc" id="L118">		return Math.max( width, 0 );</span>
	}
	
	public String toString() {
<span class="nc" id="L122">		return &quot;horizontal(&quot; + x1 + &quot;,&quot; + x2 + &quot;;&quot; + y + &quot;)&quot;;</span>
	}
	
	/**
	 * Returns the text at this position on the specified char table.
	 * 
	 * The call is dispatched back to the specified char table
	 * informing it about the concrete word position type. 
	 * 
	 * @param ct	the char table from which the text must be read.
	 * 
	 * @return		the text at this position on the specified char table.
	 */
	public String textAt(CharTable ct)
	{
<span class="nc" id="L137">		return ct.textAt(this);</span>
	}
	
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>