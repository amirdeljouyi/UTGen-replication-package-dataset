<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SSHMiscDialogs.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">65_gsftp</a> &gt; <a href="index.source.html" class="el_package">mindbright.ssh</a> &gt; <span class="el_source">SSHMiscDialogs.java</span></div><h1>SSHMiscDialogs.java</h1><pre class="source lang-java linenums">/******************************************************************************
 *
 * Copyright (c) 1998,99 by Mindbright Technology AB, Stockholm, Sweden.
 *                 www.mindbright.se, info@mindbright.se
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 *****************************************************************************
 * $Author: webjabber $
 * $Date: 2006/06/13 18:43:42 $
 * $Name:  $
 *****************************************************************************
 *
 * Modified by ISNetworks
 *
 *****************************************************************************/
package mindbright.ssh;

import java.awt.*;
import java.awt.event.*;

import mindbright.util.AWTConvenience;

<span class="nc" id="L32">public final class SSHMiscDialogs {</span>

<span class="nc" id="L34">    private static Dialog alertDialog = null;</span>
    private static Label  alertLabel;
    private static Button okAlertBut;
    public static void alert(String title, String message, Frame parent) {

<span class="nc bnc" id="L39" title="All 2 branches missed.">	if(alertDialog == null) {</span>
<span class="nc" id="L40">		alertDialog = new Dialog(parent, title, true);</span>

<span class="nc" id="L42">	    GridBagLayout       grid  = new GridBagLayout();</span>
<span class="nc" id="L43">	    GridBagConstraints  gridc = new GridBagConstraints();</span>

<span class="nc" id="L45">	    alertDialog.setLayout(grid);</span>

<span class="nc" id="L47">	    gridc.fill = GridBagConstraints.HORIZONTAL;</span>
<span class="nc" id="L48">	    gridc.weightx   = 1.0;</span>
<span class="nc" id="L49">	    gridc.weighty   = 1.0;</span>
<span class="nc" id="L50">	    gridc.gridwidth = GridBagConstraints.REMAINDER;</span>
<span class="nc" id="L51">	    gridc.anchor    = GridBagConstraints.CENTER;</span>
<span class="nc" id="L52">	    gridc.insets    = new Insets(8, 4, 4, 8);</span>

<span class="nc" id="L54">	    gridc.gridy = 0;</span>
<span class="nc" id="L55">	    alertLabel = new Label();</span>
<span class="nc" id="L56">	    grid.setConstraints(alertLabel, gridc);</span>
<span class="nc" id="L57">	    alertDialog.add(alertLabel);</span>

<span class="nc" id="L59">	    okAlertBut = new Button(&quot;OK&quot;);</span>
<span class="nc" id="L60">	    okAlertBut.addActionListener(new AWTConvenience.CloseAction(alertDialog));</span>
<span class="nc" id="L61">	    gridc.fill = GridBagConstraints.NONE;</span>
<span class="nc" id="L62">	    gridc.gridy = 1;</span>
<span class="nc" id="L63">	    grid.setConstraints(okAlertBut, gridc);</span>
<span class="nc" id="L64">	    alertDialog.add(okAlertBut);</span>

<span class="nc" id="L66">	    alertDialog.addWindowListener(new AWTConvenience.CloseAdapter(okAlertBut));</span>

<span class="nc" id="L68">	    AWTConvenience.setBackgroundOfChildren(alertDialog);</span>

<span class="nc" id="L70">	    alertDialog.setResizable(true);</span>
	}

<span class="nc" id="L73">	alertDialog.setTitle(title);</span>

<span class="nc" id="L75">	alertDialog.remove(alertLabel);</span>
<span class="nc" id="L76">	alertLabel.setText(message);</span>
<span class="nc" id="L77">	alertDialog.add(alertLabel);</span>
<span class="nc" id="L78">	alertDialog.pack();</span>

<span class="nc" id="L80">	AWTConvenience.placeDialog(alertDialog);</span>
<span class="nc" id="L81">	okAlertBut.requestFocus();</span>
<span class="nc" id="L82">	alertDialog.setVisible(true);</span>
<span class="nc" id="L83">    }</span>

	/** Original method */
    public static String password(String title, String message, Frame parent) {
<span class="nc" id="L87">		return password( title, message, parent, '*', &quot;&quot;, &quot;Password:&quot; );</span>
    }

	/** Create a dialog box with a title, a text field, and label for the text field */
    public static String textfield(String title, String message, Frame parent) {
<span class="nc" id="L92">		return password( title, &quot;&quot;, parent, (char)0, &quot;&quot;, message );</span>
    }

	/** Create a dialog box with a title, a text field with a default value, and label for the text field */
    public static String textfield(String title, String message, Frame parent, String defaultValue) {
<span class="nc" id="L97">		return password( title, &quot;&quot;, parent, (char)0, defaultValue, message );</span>
    }

<span class="nc" id="L100">    private static Dialog  passwordDialog = null;</span>
    private static Label   pwdMsgLabel;
	private static Label   pwdTextBoxLabel;
    private static String  pwdAnswer;
    private static TextField pwdPassword;
    public static String password(String title, String message, Frame parent, char echo, String defaultValue, String textBoxLabel ) {

<span class="nc bnc" id="L107" title="All 2 branches missed.">	if(passwordDialog == null) {</span>
<span class="nc" id="L108">	    passwordDialog = new Dialog(parent, title, true);</span>

<span class="nc" id="L110">	    GridBagLayout       grid  = new GridBagLayout();</span>
<span class="nc" id="L111">	    GridBagConstraints  gridc = new GridBagConstraints();</span>
	    ActionListener      al;
<span class="nc" id="L113">	    passwordDialog.setLayout(grid);</span>
	    Label lbl;

<span class="nc" id="L116">	    gridc.fill = GridBagConstraints.HORIZONTAL;</span>
<span class="nc" id="L117">	    gridc.gridwidth = GridBagConstraints.REMAINDER;</span>
<span class="nc" id="L118">	    gridc.anchor    = GridBagConstraints.CENTER;</span>
<span class="nc" id="L119">	    gridc.insets    = new Insets(8, 4, 4, 8);</span>

<span class="nc" id="L121">	    gridc.gridy = 0;</span>
<span class="nc" id="L122">	    pwdMsgLabel = new Label();</span>
<span class="nc" id="L123">	    grid.setConstraints(pwdMsgLabel, gridc);</span>
<span class="nc" id="L124">	    passwordDialog.add(pwdMsgLabel);</span>

<span class="nc" id="L126">	    gridc.gridy = 1;</span>
<span class="nc" id="L127">	    gridc.gridwidth = 1;</span>
<span class="nc" id="L128">	    gridc.anchor    = GridBagConstraints.WEST;</span>
<span class="nc" id="L129">	    pwdTextBoxLabel = new Label(&quot;Password:&quot;);</span>
<span class="nc" id="L130">	    grid.setConstraints(pwdTextBoxLabel, gridc);</span>
<span class="nc" id="L131">	    passwordDialog.add(pwdTextBoxLabel);</span>

<span class="nc" id="L133">	    pwdPassword = new TextField();</span>
<span class="nc" id="L134">	    gridc.gridwidth = GridBagConstraints.REMAINDER;</span>
<span class="nc" id="L135">	    grid.setConstraints(pwdPassword, gridc);</span>
<span class="nc" id="L136">	    passwordDialog.add(pwdPassword);</span>

<span class="nc" id="L138">	    Panel bp = new Panel(new FlowLayout());</span>

	    Button okBut, cancBut;
<span class="nc" id="L141">	    bp.add(okBut = new Button(&quot;OK&quot;));</span>

<span class="nc" id="L143">	    okBut.addActionListener(al = new ActionListener() {</span>
		public void actionPerformed(ActionEvent e) {
<span class="nc bnc" id="L145" title="All 2 branches missed.">		    if(e.getActionCommand().equals(&quot;OK&quot;)) {</span>
<span class="nc" id="L146">			pwdAnswer = pwdPassword.getText();</span>
		    } else {
<span class="nc" id="L148">			pwdAnswer = null;</span>
		    }
<span class="nc" id="L150">		    passwordDialog.setVisible(false);</span>
<span class="nc" id="L151">		}</span>
	    });

<span class="nc" id="L154">	    bp.add(cancBut = new Button(&quot;Cancel&quot;));</span>
<span class="nc" id="L155">	    cancBut.addActionListener(al);</span>

<span class="nc" id="L157">	    gridc.gridy = 2;</span>
<span class="nc" id="L158">	    gridc.gridwidth = GridBagConstraints.REMAINDER;</span>
<span class="nc" id="L159">	    grid.setConstraints(bp, gridc);</span>
<span class="nc" id="L160">	    passwordDialog.add(bp);</span>

<span class="nc" id="L162">	    passwordDialog.addWindowListener(new AWTConvenience.CloseAdapter(cancBut));</span>

<span class="nc" id="L164">	    AWTConvenience.setKeyListenerOfChildren(passwordDialog,</span>
						    new AWTConvenience.OKCancelAdapter(okBut, cancBut),
						    null);

<span class="nc" id="L168">	    AWTConvenience.setBackgroundOfChildren(passwordDialog);</span>

<span class="nc" id="L170">	    passwordDialog.setResizable(true);</span>
	}

<span class="nc" id="L173">	passwordDialog.setTitle(title);</span>

<span class="nc" id="L175">	passwordDialog.remove(pwdMsgLabel);</span>
<span class="nc" id="L176">	pwdMsgLabel.setText(message);</span>
<span class="nc" id="L177">	pwdPassword.setText(defaultValue);</span>
<span class="nc" id="L178">    pwdPassword.setEchoChar(echo);</span>
<span class="nc" id="L179">	pwdPassword.setColumns( 40 );</span>
<span class="nc" id="L180">	passwordDialog.add(pwdMsgLabel);</span>
<span class="nc" id="L181">	passwordDialog.pack();</span>
<span class="nc" id="L182">	pwdTextBoxLabel.setText(textBoxLabel);</span>
<span class="nc" id="L183">	passwordDialog.setSize( 450, 150 );</span>
<span class="nc" id="L184">	AWTConvenience.placeDialog(passwordDialog);</span>

<span class="nc" id="L186">	passwordDialog.setVisible(true);</span>

<span class="nc" id="L188">	return pwdAnswer;</span>
    }

<span class="nc" id="L191">    private static Dialog  setPasswordDialog = null;</span>
    private static Label   setPwdMsgLabel;
    private static String  setPwdAnswer;
    private static TextField setPwdText, setPwdText2;
    public static String setPassword(String title, String message, Frame parent) {

<span class="nc bnc" id="L197" title="All 2 branches missed.">	if(setPasswordDialog == null) {</span>
<span class="nc" id="L198">	    setPasswordDialog = new Dialog(parent, title, true);</span>

<span class="nc" id="L200">	    GridBagLayout       grid  = new GridBagLayout();</span>
<span class="nc" id="L201">	    GridBagConstraints  gridc = new GridBagConstraints();</span>
	    ActionListener      al;
<span class="nc" id="L203">	    setPasswordDialog.setLayout(grid);</span>
	    Label lbl;

<span class="nc" id="L206">	    gridc.fill = GridBagConstraints.HORIZONTAL;</span>
<span class="nc" id="L207">	    gridc.gridwidth = GridBagConstraints.REMAINDER;</span>
<span class="nc" id="L208">	    gridc.anchor    = GridBagConstraints.CENTER;</span>
<span class="nc" id="L209">	    gridc.insets    = new Insets(8, 4, 4, 8);</span>

<span class="nc" id="L211">	    gridc.gridy = 0;</span>
<span class="nc" id="L212">	    setPwdMsgLabel = new Label();</span>
<span class="nc" id="L213">	    grid.setConstraints(setPwdMsgLabel, gridc);</span>
<span class="nc" id="L214">	    setPasswordDialog.add(setPwdMsgLabel);</span>

<span class="nc" id="L216">	    gridc.gridy = 1;</span>
<span class="nc" id="L217">	    gridc.gridwidth = 1;</span>
<span class="nc" id="L218">	    gridc.anchor    = GridBagConstraints.WEST;</span>
<span class="nc" id="L219">	    lbl = new Label(&quot;Password:&quot;);</span>
<span class="nc" id="L220">	    grid.setConstraints(lbl, gridc);</span>
<span class="nc" id="L221">	    setPasswordDialog.add(lbl);</span>

<span class="nc" id="L223">	    setPwdText = new TextField(&quot;&quot;, 12);</span>
<span class="nc" id="L224">	    grid.setConstraints(setPwdText, gridc);</span>
<span class="nc" id="L225">	    setPwdText.setEchoChar('*');</span>
<span class="nc" id="L226">	    setPasswordDialog.add(setPwdText);</span>

<span class="nc" id="L228">	    gridc.gridy = 2;</span>
<span class="nc" id="L229">	    lbl = new Label(&quot;Password again:&quot;);</span>
<span class="nc" id="L230">	    grid.setConstraints(lbl, gridc);</span>
<span class="nc" id="L231">	    setPasswordDialog.add(lbl);</span>

<span class="nc" id="L233">	    setPwdText2 = new TextField(&quot;&quot;, 12);</span>
<span class="nc" id="L234">	    grid.setConstraints(setPwdText2, gridc);</span>
<span class="nc" id="L235">	    setPwdText2.setEchoChar('*');</span>
<span class="nc" id="L236">	    setPasswordDialog.add(setPwdText2);</span>

<span class="nc" id="L238">	    Panel bp = new Panel(new FlowLayout());</span>

	    Button okBut, cancBut;
<span class="nc" id="L241">	    bp.add(okBut = new Button(&quot;OK&quot;));</span>

<span class="nc" id="L243">	    okBut.addActionListener(al = new ActionListener() {</span>
		public void actionPerformed(ActionEvent e) {
<span class="nc bnc" id="L245" title="All 2 branches missed.">		    if(e.getActionCommand().equals(&quot;OK&quot;)) {</span>
<span class="nc" id="L246">			setPwdAnswer = setPwdText.getText();</span>
<span class="nc bnc" id="L247" title="All 2 branches missed.">			if(!setPwdAnswer.equals(setPwdText2.getText())) {</span>
<span class="nc" id="L248">			    setPwdText.setText(&quot;&quot;);</span>
<span class="nc" id="L249">			    setPwdText2.setText(&quot;&quot;);</span>
<span class="nc" id="L250">			    return;</span>
			}
		    } else {
<span class="nc" id="L253">			setPwdAnswer = null;</span>
		    }
<span class="nc" id="L255">		    setPasswordDialog.setVisible(false);</span>
<span class="nc" id="L256">		}</span>
	    });

<span class="nc" id="L259">	    bp.add(cancBut = new Button(&quot;Cancel&quot;));</span>
<span class="nc" id="L260">	    cancBut.addActionListener(al);</span>

<span class="nc" id="L262">	    gridc.gridy = 3;</span>
<span class="nc" id="L263">	    gridc.gridwidth = GridBagConstraints.REMAINDER;</span>
<span class="nc" id="L264">	    grid.setConstraints(bp, gridc);</span>
<span class="nc" id="L265">	    setPasswordDialog.add(bp);</span>

<span class="nc" id="L267">	    setPasswordDialog.addWindowListener(new AWTConvenience.CloseAdapter(cancBut));</span>

<span class="nc" id="L269">	    AWTConvenience.setKeyListenerOfChildren(setPasswordDialog,</span>
						    new AWTConvenience.OKCancelAdapter(okBut, cancBut),
						    null);

<span class="nc" id="L273">	    AWTConvenience.setBackgroundOfChildren(setPasswordDialog);</span>

<span class="nc" id="L275">	    setPasswordDialog.setResizable(true);</span>
	}

<span class="nc" id="L278">	setPasswordDialog.setTitle(title);</span>

<span class="nc" id="L280">	setPasswordDialog.remove(setPwdMsgLabel);</span>
<span class="nc" id="L281">	setPwdMsgLabel.setText(message);</span>
<span class="nc" id="L282">	setPwdText.setText(&quot;&quot;);</span>
<span class="nc" id="L283">	setPwdText2.setText(&quot;&quot;);</span>
<span class="nc" id="L284">	setPasswordDialog.add(setPwdMsgLabel);</span>
<span class="nc" id="L285">	setPasswordDialog.pack();</span>

<span class="nc" id="L287">	AWTConvenience.placeDialog(setPasswordDialog);</span>

<span class="nc" id="L289">	setPasswordDialog.setVisible(true);</span>

<span class="nc" id="L291">	return setPwdAnswer;</span>
    }

<span class="nc" id="L294">    private static Dialog  confirmDialog = null;</span>
    private static Label   confirmLabel;
    private static boolean confirmRet;
    private static Button  yesBut, noBut;
    public static boolean confirm(String title, String message, boolean defAnswer,
				  Frame parent) {

<span class="nc bnc" id="L301" title="All 2 branches missed.">	if(confirmDialog == null) {</span>
<span class="nc" id="L302">	    confirmDialog = new Dialog(parent, title, true);</span>

<span class="nc" id="L304">	    GridBagLayout       grid  = new GridBagLayout();</span>
<span class="nc" id="L305">	    GridBagConstraints  gridc = new GridBagConstraints();</span>
	    ActionListener      al;
<span class="nc" id="L307">	    confirmDialog.setLayout(grid);</span>

<span class="nc" id="L309">	    gridc.fill = GridBagConstraints.HORIZONTAL;</span>
<span class="nc" id="L310">	    gridc.gridwidth = GridBagConstraints.REMAINDER;</span>
<span class="nc" id="L311">	    gridc.anchor    = GridBagConstraints.CENTER;</span>
<span class="nc" id="L312">	    gridc.insets    = new Insets(8, 4, 4, 8);</span>

<span class="nc" id="L314">	    gridc.gridy = 0;</span>
<span class="nc" id="L315">	    confirmLabel = new Label();</span>
<span class="nc" id="L316">	    grid.setConstraints(confirmLabel, gridc);</span>
<span class="nc" id="L317">	    confirmDialog.add(confirmLabel);</span>

<span class="nc" id="L319">	    Panel bp = new Panel(new FlowLayout());</span>

<span class="nc" id="L321">	    bp.add(yesBut = new Button(&quot;Yes&quot;));</span>

<span class="nc" id="L323">	    yesBut.addActionListener(al = new ActionListener() {</span>
		public void actionPerformed(ActionEvent e) {
<span class="nc bnc" id="L325" title="All 2 branches missed.">		    if(e.getActionCommand().equals(&quot;Yes&quot;))</span>
<span class="nc" id="L326">		    confirmRet = true;</span>
		    else
<span class="nc" id="L328">		    confirmRet = false;</span>
<span class="nc" id="L329">		    confirmDialog.setVisible(false);</span>
<span class="nc" id="L330">		}</span>
	    });

<span class="nc" id="L333">	    bp.add(noBut = new Button(&quot;No&quot;));</span>
<span class="nc" id="L334">	    noBut.addActionListener(al);</span>

<span class="nc" id="L336">	    gridc.gridy = 1;</span>
<span class="nc" id="L337">	    gridc.gridwidth = GridBagConstraints.REMAINDER;</span>
<span class="nc" id="L338">	    grid.setConstraints(bp, gridc);</span>
<span class="nc" id="L339">	    confirmDialog.add(bp);</span>

<span class="nc" id="L341">	    confirmDialog.addWindowListener(new AWTConvenience.CloseAdapter(noBut));</span>

<span class="nc" id="L343">	    AWTConvenience.setBackgroundOfChildren(confirmDialog);</span>

<span class="nc" id="L345">	    confirmDialog.setResizable(true);</span>
	}

<span class="nc" id="L348">	confirmDialog.remove(confirmLabel);</span>
<span class="nc" id="L349">	confirmLabel.setText(message);</span>
<span class="nc" id="L350">	confirmDialog.add(confirmLabel);</span>
<span class="nc" id="L351">	confirmDialog.pack();</span>

<span class="nc" id="L353">	AWTConvenience.placeDialog(confirmDialog);</span>

<span class="nc bnc" id="L355" title="All 2 branches missed.">	if(defAnswer)</span>
<span class="nc" id="L356">	    yesBut.requestFocus();</span>
	else
<span class="nc" id="L358">	    noBut.requestFocus();</span>

<span class="nc" id="L360">	confirmDialog.setVisible(true);</span>

<span class="nc" id="L362">	return confirmRet;</span>
    }

    public static void notice(String title, String text, int rows, int cols,
			      boolean scrollbar, Frame parent) {
<span class="nc" id="L367">	Dialog   textDialog = null;</span>
	TextArea textArea;
	Button   okTextBut;

<span class="nc" id="L371">	textDialog = new Dialog(parent, title, true);</span>

<span class="nc" id="L373">	GridBagLayout       grid  = new GridBagLayout();</span>
<span class="nc" id="L374">	GridBagConstraints  gridc = new GridBagConstraints();</span>

<span class="nc" id="L376">	textDialog.setLayout(grid);</span>

<span class="nc" id="L378">	gridc.fill      = GridBagConstraints.NONE;</span>
<span class="nc" id="L379">	gridc.gridwidth = GridBagConstraints.REMAINDER;</span>
<span class="nc" id="L380">	gridc.anchor    = GridBagConstraints.CENTER;</span>
<span class="nc" id="L381">	gridc.insets    = new Insets(4, 4, 4, 4);</span>

<span class="nc bnc" id="L383" title="All 2 branches missed.">	textArea = new TextArea(text, rows, cols,</span>
				scrollbar ? TextArea.SCROLLBARS_VERTICAL_ONLY : TextArea.SCROLLBARS_NONE);
<span class="nc" id="L385">	grid.setConstraints(textArea, gridc);</span>
<span class="nc" id="L386">	textDialog.add(textArea);</span>
<span class="nc" id="L387">	textArea.setEditable(false);</span>

<span class="nc" id="L389">	okTextBut = new Button(&quot;OK&quot;);</span>
<span class="nc" id="L390">	okTextBut.addActionListener(new AWTConvenience.CloseAction(textDialog));</span>
<span class="nc" id="L391">	gridc.fill = GridBagConstraints.NONE;</span>
<span class="nc" id="L392">	grid.setConstraints(okTextBut, gridc);</span>
<span class="nc" id="L393">	textDialog.add(okTextBut);</span>

<span class="nc" id="L395">	textDialog.addWindowListener(new AWTConvenience.CloseAdapter(okTextBut));</span>

<span class="nc" id="L397">	AWTConvenience.setBackgroundOfChildren(textDialog);</span>

<span class="nc" id="L399">	textDialog.setResizable(true);</span>
<span class="nc" id="L400">	textDialog.pack();</span>

<span class="nc" id="L402">	AWTConvenience.placeDialog(textDialog);</span>
<span class="nc" id="L403">	okTextBut.requestFocus();</span>
<span class="nc" id="L404">	textDialog.setVisible(true);</span>
<span class="nc" id="L405">    }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>