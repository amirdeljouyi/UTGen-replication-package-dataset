<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SimpleArticle.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">23_jwbf</a> &gt; <a href="index.source.html" class="el_package">net.sourceforge.jwbf.core.contentRep</a> &gt; <span class="el_source">SimpleArticle.java</span></div><h1>SimpleArticle.java</h1><pre class="source lang-java linenums">/*
 * Copyright 2007 Thomas Stock.
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not
 * use this file except in compliance with the License. You may obtain a copy of
 * the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 *
 * Contributors:
 *
 */
package net.sourceforge.jwbf.core.contentRep;

import java.io.Serializable;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.regex.Pattern;

/**
 * This is a simple content helper class that implements the
 * EditContentAccesable interface, plus setter methods.
 *
 * @author Thomas Stock
 *
 */
public class SimpleArticle implements ArticleMeta, Serializable, Cloneable, ContentSetable {

  /**
   *
   */
  private static final long serialVersionUID = -1368796410854055279L;
<span class="nc" id="L40">  private String title = &quot;&quot;;</span>
<span class="nc" id="L41">  private String editSummary = &quot;&quot;;</span>
<span class="nc" id="L42">  private String text = &quot;&quot;;</span>
<span class="nc" id="L43">  private String editor = &quot;&quot;;</span>
<span class="nc" id="L44">  private boolean minorEdit = false;</span>
<span class="nc" id="L45">  private Date editTimestamp = INIT_DATE;</span>
<span class="nc" id="L46">  private String revId = &quot;&quot;;</span>

<span class="nc" id="L48">  public static final Date INIT_DATE = new Date(0);</span>

  /**
   *
   *
   */
<span class="nc" id="L54">  public SimpleArticle() {</span>
    // do nothing
<span class="nc" id="L56">  }</span>

  /**
   *
   * @param ca
   *            a
   */
<span class="nc" id="L63">  public SimpleArticle(ContentAccessable ca) {</span>

<span class="nc bnc" id="L65" title="All 2 branches missed.">    if (ca.getTitle() != null) {</span>
<span class="nc" id="L66">      title = ca.getTitle();</span>
    }
<span class="nc bnc" id="L68" title="All 2 branches missed.">    if (ca.getText() != null) {</span>
<span class="nc" id="L69">      text = ca.getText();</span>
    }
<span class="nc bnc" id="L71" title="All 2 branches missed.">    if (ca.getEditSummary() != null) {</span>
<span class="nc" id="L72">      editSummary = ca.getEditSummary();</span>
    }
<span class="nc bnc" id="L74" title="All 2 branches missed.">    if (ca.getEditor() != null) {</span>
<span class="nc" id="L75">      editor = ca.getEditor();</span>
    }

<span class="nc" id="L78">    setMinorEdit(ca.isMinorEdit());</span>

<span class="nc" id="L80">  }</span>

  /**
   *
   * @param sa
   *            a
   */
  public SimpleArticle(ArticleMeta sa) {
<span class="nc" id="L88">    this((ContentAccessable) sa);</span>

<span class="nc bnc" id="L90" title="All 2 branches missed.">    if (sa.getEditTimestamp() != null) {</span>
<span class="nc" id="L91">      editTimestamp = sa.getEditTimestamp();</span>
    }

<span class="nc bnc" id="L94" title="All 2 branches missed.">    if (sa.getRevisionId() != null) {</span>
<span class="nc" id="L95">      revId = sa.getRevisionId();</span>
    }
<span class="nc" id="L97">  }</span>

  /**
   * {@inheritDoc}
   */
  @Override
  public final Object clone() throws CloneNotSupportedException {
<span class="nc" id="L104">    super.clone();</span>
<span class="nc" id="L105">    return new SimpleArticle(this);</span>
  }

  /**
   *
   * @param text
   *            of article
   * @param title
   *            of article
   * @deprecated use {@link #SimpleArticle(String)} and
   *             {@link #setText(String)} instead.
   */
  @Deprecated
<span class="nc" id="L118">  public SimpleArticle(final String text, final String title) {</span>
<span class="nc" id="L119">    this.text = text;</span>
<span class="nc" id="L120">    this.title = title;</span>
<span class="nc" id="L121">  }</span>

  /**
   *
   * @param title
   *            of article
   */
<span class="nc" id="L128">  public SimpleArticle(final String title) {</span>
<span class="nc" id="L129">    this.title = title;</span>
<span class="nc" id="L130">  }</span>

  /**
   * {@inheritDoc}
   */
  public String getEditSummary() {
<span class="nc" id="L136">    return editSummary;</span>
  }

  /* (non-Javadoc)
   * @see net.sourceforge.jwbf.core.contentRep.ContentSetable#setEditSummary(java.lang.String)
   */
  public void setEditSummary(final String s) {
<span class="nc" id="L143">    editSummary = s;</span>
<span class="nc" id="L144">  }</span>

  /**
   * {@inheritDoc}
   */
  public boolean isMinorEdit() {
<span class="nc" id="L150">    return minorEdit;</span>
  }

  /* (non-Javadoc)
   * @see net.sourceforge.jwbf.core.contentRep.ContentSetable#setMinorEdit(boolean)
   */
  public void setMinorEdit(final boolean minor) {
<span class="nc" id="L157">    minorEdit = minor;</span>
<span class="nc" id="L158">  }</span>

  /**
   * @return the
   * @deprecated use {@link #getTitle()} instead
   */
  @Deprecated
  public String getLabel() {
<span class="nc" id="L166">    return getTitle();</span>
  }

  /**
   * {@inheritDoc}
   */
  public String getTitle() {
<span class="nc" id="L173">    return title;</span>
  }

  /**
   *
   * @param label
   *            the label, like &quot;Main Page&quot;
   * @deprecated use {@link #setTitle(String)} instead
   */
  @Deprecated
  public void setLabel(final String label) {
<span class="nc" id="L184">    setTitle(label);</span>
<span class="nc" id="L185">  }</span>

  /* (non-Javadoc)
   * @see net.sourceforge.jwbf.core.contentRep.ContentSetable#setTitle(java.lang.String)
   */
  public void setTitle(final String title) {
<span class="nc" id="L191">    this.title = title;</span>
<span class="nc" id="L192">  }</span>

  /**
   * {@inheritDoc}
   */
  public String getText() {
<span class="nc" id="L198">    return text;</span>
  }

  /* (non-Javadoc)
   * @see net.sourceforge.jwbf.core.contentRep.ContentSetable#setText(java.lang.String)
   */
  public void setText(final String text) {
<span class="nc" id="L205">    this.text = text;</span>
<span class="nc" id="L206">  }</span>

  /* (non-Javadoc)
   * @see net.sourceforge.jwbf.core.contentRep.ContentSetable#addText(java.lang.String)
   */
  public void addText(final String text) {
<span class="nc" id="L212">    setText(getText() + text);</span>
<span class="nc" id="L213">  }</span>

  /* (non-Javadoc)
   * @see net.sourceforge.jwbf.core.contentRep.ContentSetable#addTextnl(java.lang.String)
   */
  public void addTextnl(final String text) {
<span class="nc" id="L219">    setText(getText() + &quot;\n&quot; + text);</span>

<span class="nc" id="L221">  }</span>

  /**
   * {@inheritDoc}
   */
  public String getEditor() {
<span class="nc" id="L227">    return editor;</span>
  }

  /* (non-Javadoc)
   * @see net.sourceforge.jwbf.core.contentRep.ContentSetable#setEditor(java.lang.String)
   */
  public void setEditor(final String editor) {
<span class="nc" id="L234">    this.editor = editor;</span>
<span class="nc" id="L235">  }</span>

  /**
   * {@inheritDoc}
   */
  public boolean isRedirect() {

<span class="nc" id="L242">    Pattern pattern = Pattern.compile(&quot;#(.*)redirect(.*)&quot;,</span>
        Pattern.CASE_INSENSITIVE);
<span class="nc bnc" id="L244" title="All 2 branches missed.">    if (pattern.matcher(text).matches()) {</span>
<span class="nc" id="L245">      return true;</span>
    }

<span class="nc" id="L248">    return false;</span>
  }

  /**
   * @return the edittimestamp in UTC
   */
  public Date getEditTimestamp() {
<span class="nc" id="L255">    return editTimestamp;</span>
  }

  /**
   *
   * @param editTimestamp
   *            set
   * @throws ParseException
   *             if date unparseable
   */
  public void setEditTimestamp(String editTimestamp) throws ParseException {
<span class="nc" id="L266">    SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd'T'HH:mm:ss'Z'&quot;);</span>
    try {
<span class="nc" id="L268">      setEditTimestamp(sdf.parse(editTimestamp));</span>
<span class="nc" id="L269">    } catch (ParseException e) {</span>
<span class="nc" id="L270">      sdf = new SimpleDateFormat(&quot;MM/dd/yy' 'HH:mm:ss&quot;);</span>
<span class="nc" id="L271">      setEditTimestamp(sdf.parse(editTimestamp));</span>
<span class="nc" id="L272">    }</span>
<span class="nc" id="L273">  }</span>

  /**
   *
   * @param d
   *            the
   */
  public void setEditTimestamp(Date d) {
<span class="nc" id="L281">    editTimestamp = d;</span>
<span class="nc" id="L282">  }</span>

  /* (non-Javadoc)
   * @see java.lang.Object#equals(java.lang.Object)
   */
  @Override
  public boolean equals(Object obj) {
<span class="nc bnc" id="L289" title="All 2 branches missed.">    if (this == obj)</span>
<span class="nc" id="L290">      return true;</span>
<span class="nc bnc" id="L291" title="All 2 branches missed.">    if (obj == null)</span>
<span class="nc" id="L292">      return false;</span>
<span class="nc bnc" id="L293" title="All 2 branches missed.">    if (!(obj instanceof SimpleArticle))</span>
<span class="nc" id="L294">      return false;</span>
<span class="nc" id="L295">    SimpleArticle other = (SimpleArticle) obj;</span>
<span class="nc bnc" id="L296" title="All 2 branches missed.">    if (editTimestamp == null) {</span>
<span class="nc bnc" id="L297" title="All 2 branches missed.">      if (other.editTimestamp != null)</span>
<span class="nc" id="L298">        return false;</span>
<span class="nc bnc" id="L299" title="All 2 branches missed.">    } else if (!editTimestamp.equals(other.editTimestamp))</span>
<span class="nc" id="L300">      return false;</span>
<span class="nc bnc" id="L301" title="All 2 branches missed.">    if (revId == null) {</span>
<span class="nc bnc" id="L302" title="All 2 branches missed.">      if (other.revId != null)</span>
<span class="nc" id="L303">        return false;</span>
<span class="nc bnc" id="L304" title="All 2 branches missed.">    } else if (!revId.equals(other.revId))</span>
<span class="nc" id="L305">      return false;</span>
<span class="nc bnc" id="L306" title="All 2 branches missed.">    if (text == null) {</span>
<span class="nc bnc" id="L307" title="All 2 branches missed.">      if (other.text != null)</span>
<span class="nc" id="L308">        return false;</span>
<span class="nc bnc" id="L309" title="All 2 branches missed.">    } else if (!text.equals(other.text))</span>
<span class="nc" id="L310">      return false;</span>
<span class="nc bnc" id="L311" title="All 2 branches missed.">    if (title == null) {</span>
<span class="nc bnc" id="L312" title="All 2 branches missed.">      if (other.title != null)</span>
<span class="nc" id="L313">        return false;</span>
<span class="nc bnc" id="L314" title="All 2 branches missed.">    } else if (!title.equals(other.title))</span>
<span class="nc" id="L315">      return false;</span>
<span class="nc" id="L316">    return true;</span>
  }

  /* (non-Javadoc)
   * @see java.lang.Object#hashCode()
   */
  @Override
  public int hashCode() {
<span class="nc" id="L324">    final int prime = 31;</span>
<span class="nc" id="L325">    int result = 1;</span>
<span class="nc bnc" id="L326" title="All 2 branches missed.">    result = prime * result</span>
<span class="nc" id="L327">    + ((editTimestamp == null) ? 0 : editTimestamp.hashCode());</span>
<span class="nc bnc" id="L328" title="All 2 branches missed.">    result = prime * result + ((revId == null) ? 0 : revId.hashCode());</span>
<span class="nc bnc" id="L329" title="All 2 branches missed.">    result = prime * result + ((text == null) ? 0 : text.hashCode());</span>
<span class="nc bnc" id="L330" title="All 2 branches missed.">    result = prime * result + ((title == null) ? 0 : title.hashCode());</span>
<span class="nc" id="L331">    return result;</span>
  }

  /**
   * {@inheritDoc}
   */
  public String getRevisionId() {
<span class="nc" id="L338">    return revId;</span>
  }

  /**
   *
   * @param revId
   *            the
   */
  public void setRevisionId(String revId) {
<span class="nc" id="L347">    this.revId = revId;</span>
<span class="nc" id="L348">  }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>