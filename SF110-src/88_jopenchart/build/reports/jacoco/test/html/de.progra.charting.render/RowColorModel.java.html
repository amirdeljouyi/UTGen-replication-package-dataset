<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>RowColorModel.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">88_jopenchart</a> &gt; <a href="index.source.html" class="el_package">de.progra.charting.render</a> &gt; <span class="el_source">RowColorModel.java</span></div><h1>RowColorModel.java</h1><pre class="source lang-java linenums">/*
    JOpenChart Java Charting Library and Toolkit
    Copyright (C) 2001  Sebastian Mï¿½ller
    http://jopenchart.sourceforge.net

    This library is free software; you can redistribute it and/or
    modify it under the terms of the GNU Lesser General Public
    License as published by the Free Software Foundation; either
    version 2.1 of the License, or (at your option) any later version.

    This library is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
    Lesser General Public License for more details.

    You should have received a copy of the GNU Lesser General Public
    License along with this library; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA

    RowColorModel.java
    Created on 28. August 2001, 20:02
*/

package de.progra.charting.render;

import java.awt.Color;
import de.progra.charting.model.ChartDataModel;
import java.util.HashMap;
import java.awt.geom.RectangularShape;
import java.awt.geom.Ellipse2D;
import java.awt.geom.Rectangle2D;
import de.progra.charting.render.shape.Diamond2D;
import de.progra.charting.render.shape.Triangle2D;

/**
 * This class implements the correspondence between the DataSets and the
 * colors used for rendering the charts and the legend.
 * @author mueller
 * @version 1.0
 */
public class RowColorModel {

    private static RowColorModel instance;
    
    protected ChartDataModel model;
    
<span class="fc" id="L47">    protected final static Color[] predefinedColors = {Color.blue, Color.cyan, Color.red, </span>
                                                 Color.pink, Color.yellow,
                                                 Color.green, Color.magenta, Color.orange,
                                                 Color.darkGray, Color.gray, Color.lightGray};
    
<span class="fc" id="L52">	public static final Ellipse2D ELLIPSE_SHAPE = new Ellipse2D.Float(0f, 0f, 5f, 5f);</span>
<span class="fc" id="L53">	public static final Rectangle2D SQUARE_SHAPE = new Rectangle2D.Float(0f, 0f, 5f, 5f);</span>
<span class="fc" id="L54">	public static final Diamond2D DIAMOND_SHAPE = new Diamond2D(0f, 0f, 5f, 5f);</span>
<span class="fc" id="L55">	public static final Triangle2D TRIANGLE_SHAPE = new Triangle2D(0f, 0f, 5f, 5f, false);</span>
<span class="fc" id="L56">	public static final Triangle2D TRIANGLEDOWN_SHAPE = new Triangle2D(0f, 0f, 5f, 5f, true);</span>
    
<span class="fc" id="L58">    protected final static RectangularShape[] predefinedShapes = {ELLIPSE_SHAPE,</span>
                                                                  SQUARE_SHAPE, 
                                                                  DIAMOND_SHAPE,
                                                                  TRIANGLE_SHAPE,
                                                                  TRIANGLEDOWN_SHAPE};
                                                                  
<span class="fc" id="L64">    protected int predefinedColorsIdx = 0;</span>
                          
<span class="fc" id="L66">    protected HashMap customColors = new HashMap();</span>
    
<span class="fc" id="L68">    protected HashMap customShapes = new HashMap();</span>
    
    /** Creates new RowColorModel.
     * @param model the ChartDataModel which contains the information about all the DataSets
     */
<span class="fc" id="L73">    public RowColorModel(ChartDataModel model) {</span>
<span class="fc" id="L74">        this.model = model;</span>
<span class="fc" id="L75">    }</span>
    
    /** Use this method to get an instance of the chart's RowColorModel. 
     * @param model the ChartDataModel whose data sets will be mapped to
     * colors.
     * @return a new instance of RowColorModel if there's no instance 
     * of if the model has changed (esp. useful if you create multiple charts
     * after one another).
     * @deprecated
     */
    public static RowColorModel getInstance(ChartDataModel model) {
<span class="nc bnc" id="L86" title="All 4 branches missed.">        if(instance == null || !model.equals(instance.model))</span>
<span class="nc" id="L87">            instance = new RowColorModel(model);</span>
        
<span class="nc" id="L89">        return instance;</span>
    }
    
    /** Computes the amount of all Legend entries, ie. DataSets.
     * @return the amount of all rows, ie. DataSets.
     */    
    public int getRowCount() {
<span class="nc" id="L96">        return model.getDataSetNumber();</span>
    }
    
    /** Returns the row title of a specific DataSet.
     * @param i the DataSet index
     * @return the String title
     */    
    public String getRow(int i) {
<span class="nc" id="L104">        return model.getDataSetName(i);</span>
    }

    /** Computes the Color for a DataSet. For the first DataSets the stored Colors like &lt;CODE&gt;Color.red&lt;/CODE&gt; etc are used. If there are more DataSets than stored colors, random colors are used.
     * @param row the row for which the Color should be returned
     * @return the Color stored for the given row.
     */    
    public Color getColor(int row) {
    	
    	// get the custom color
<span class="nc" id="L114">        Color c = (Color)customColors.get(new Integer(row));</span>
        
        // if no custom color
<span class="nc bnc" id="L117" title="All 2 branches missed.">        if(c == null) </span>
        {        	
        	// see if there is a predefined color for this row
<span class="nc bnc" id="L120" title="All 2 branches missed.">        	if (predefinedColorsIdx &lt; predefinedColors.length)  {</span>
<span class="nc" id="L121">                c = predefinedColors[predefinedColorsIdx++];</span>
            }
        	else {
<span class="nc" id="L124">                c = new Color((float)Math.random(),</span>
<span class="nc" id="L125">                               (float)Math.random(),</span>
<span class="nc" id="L126">                               (float)Math.random());</span>
            }
          
          	// remember this 
<span class="nc" id="L130">            customColors.put(new Integer(row), c);</span>
        }
        
        // done
<span class="nc" id="L134">        return c;</span>
    }
    
    /** Returns the Shape for a DataSet. By default, the Shapes from
     * the &lt;code&gt;predefinedShapes&lt;/code&gt; array are cycled through unless you define
     * your own shape to data binding using 
     * &lt;code&gt;setShape(int row, RectangularShape shape)&lt;/code&gt;.
     * @param row the row for which the Shape should be returned
     * @return the Shape stored for the given row.
     */    
    public RectangularShape getShape(int row) {
    	
    	// get the custom color
<span class="nc" id="L147">        RectangularShape c = (RectangularShape)customShapes.get(new Integer(row));</span>
        
        // if no custom color
<span class="nc bnc" id="L150" title="All 2 branches missed.">        if(c == null) </span>
        {        	
        	// calculate the matching predefined shape by a modulo operation
<span class="nc" id="L153">            c = predefinedShapes[row % predefinedShapes.length];</span>
            
          	// remember this 
<span class="nc" id="L156">            customShapes.put(new Integer(row), c);</span>
        }
        
        // done
<span class="nc" id="L160">        return c;</span>
    }
    
    /** Force a certain color for a row
     * @param row the row for which the Color should be set
     * @param color the color that is associated with the row
     */    
    public void setColor(int row, Color color) {
<span class="nc" id="L168">        customColors.put(new Integer(row), color);</span>
<span class="nc" id="L169">    }</span>
    
    /** Force a certain Shape for a row
     * @param row the row for which the Shape should be set
     * @param shape the RectangularShape that is associated with the row
     */    
    public void setShape(int row, RectangularShape shape) {
<span class="nc" id="L176">        customShapes.put(new Integer(row), shape);</span>
<span class="nc" id="L177">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>