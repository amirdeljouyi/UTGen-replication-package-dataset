<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>CoordSystemUtilities.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">88_jopenchart</a> &gt; <a href="index.source.html" class="el_package">de.progra.charting</a> &gt; <span class="el_source">CoordSystemUtilities.java</span></div><h1>CoordSystemUtilities.java</h1><pre class="source lang-java linenums">/*
    JOpenChart Java Charting Library and Toolkit
    Copyright (C) 2001  Sebastian Mï¿½ller
    http://jopenchart.sourceforge.net

    This library is free software; you can redistribute it and/or
    modify it under the terms of the GNU Lesser General Public
    License as published by the Free Software Foundation; either
    version 2.1 of the License, or (at your option) any later version.

    This library is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
    Lesser General Public License for more details.

    You should have received a copy of the GNU Lesser General Public
    License along with this library; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA

    CoordSystemUtilities.java 
    Created on 4. April 2002, 22:28
 */

package de.progra.charting;

import java.awt.font.FontRenderContext;
import java.text.DecimalFormat;
import java.awt.geom.AffineTransform;
import java.awt.geom.Line2D;
import java.awt.geom.Point2D;
import java.awt.geom.Rectangle2D;
import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics2D;
import java.awt.font.TextLayout;
import de.progra.charting.model.ChartDataModelConstraints;
import de.progra.charting.model.ChartDataModel;

/**
 * This class provides some utility functions for a CoordSystem. They were
 * externalized to make the CoordSystem class clearer.
 * @author  mueller
 * @version 1.0
 */
public class CoordSystemUtilities {

	    /** used for the offset on the y axis for the size of a &quot;tick&quot;*/
<span class="fc" id="L48">    protected final int marginOffset = 6;</span>
	
    protected CoordSystem c;
    protected ChartDataModelConstraints constraints;    
    protected ChartDataModelConstraints constraints2;
    protected ChartDataModel model;
    
    /** Creates a new instance of CoordSystemUtilities */
    public CoordSystemUtilities(CoordSystem coord, 
                                ChartDataModelConstraints constraints, 
                                ChartDataModelConstraints constraints2, 
<span class="fc" id="L59">                                ChartDataModel model) {</span>
<span class="fc" id="L60">        c = coord;</span>
<span class="fc" id="L61">        this.constraints = constraints;</span>
<span class="fc" id="L62">        this.constraints2 = constraints2;</span>
<span class="fc" id="L63">        this.model = model;</span>
<span class="fc" id="L64">    }</span>
    
    /** Computes the left margin. */
    public int computeLeftMargin() {
<span class="nc" id="L68">		double xmin = constraints.getMinimumColumnValue();</span>
<span class="nc" id="L69">        double xmax = constraints.getMaximumColumnValue();</span>
        
<span class="nc bnc" id="L71" title="All 4 branches missed.">        if (xmin &lt;= 0 &amp;&amp; xmax &gt; 0) {</span>
<span class="nc" id="L72">		xmin = Math.abs(xmin);</span>
<span class="nc" id="L73">		xmax = Math.abs(xmax);</span>
		
<span class="nc" id="L75">		TextLayout layout = new TextLayout(c.getYAxisUnit(), c.getFont(), </span>
<span class="nc" id="L76">						   c.getFontRenderContext());</span>
        
		// yaxis label width
<span class="nc" id="L79">		int maxlmargin = computeYAxisLabelWidth() + marginOffset; // + yaxis title width</span>
        
		// unit width
<span class="nc" id="L82">		maxlmargin = Math.max(maxlmargin, (int) layout.getBounds().getWidth() + marginOffset);</span>
        
        
<span class="nc" id="L85">		int margin = (int)(maxlmargin - (xmin / (xmin + xmax)) * (c.getBounds().getWidth() - c.getRightMargin()));</span>
        
<span class="nc" id="L87">		margin += 5; // just for good looking</span>
	
<span class="nc bnc" id="L89" title="All 2 branches missed.">		if(margin &lt; c.MINIMALMARGIN)</span>
<span class="nc" id="L90">		    margin = c.MINIMALMARGIN;</span>
        
<span class="nc" id="L92">		return margin;</span>
	} else {
<span class="nc" id="L94">		return c.MINIMALMARGIN;</span>
	}
    }
    
    /** Computes the right margin. */
    public int computeRightMargin() {
<span class="nc" id="L100">	TextLayout layout = new TextLayout(c.getXAxisUnit(), c.getFont(), </span>
<span class="nc" id="L101">					  	c.getFontRenderContext());</span>
<span class="nc" id="L102">	return Math.max((int)(layout.getBounds().getWidth() + (double)c.ARROWLENGTH / 3) , c.ARROWLENGTH);</span>
    }
    
    /** Computes the top margin. */
    public int computeTopMargin() {
<span class="nc" id="L107">	TextLayout layout = new TextLayout(c.getYAxisUnit(), c.getFont(), </span>
<span class="nc" id="L108">					   c.getFontRenderContext());</span>
<span class="nc" id="L109">	return Math.max((int)(layout.getBounds().getHeight() + (double)c.ARROWLENGTH / 3 + layout.getDescent()), c.ARROWLENGTH);</span>
    }
    
    /** Computes the bottom margin. */
    public int computeBottomMargin() {
<span class="nc" id="L114">	double ymin = constraints.getMinimumValue().doubleValue();</span>
<span class="nc" id="L115">        double ymax = constraints.getMaximumValue().doubleValue();</span>
	
<span class="nc bnc" id="L117" title="All 4 branches missed.">        if (ymin &lt;= 0 &amp;&amp; ymax &gt; 0) {</span>
<span class="nc" id="L118">		ymin = Math.abs(ymin);</span>
<span class="nc" id="L119">		ymax = Math.abs(ymax);</span>
		
<span class="nc" id="L121">		TextLayout layout = new TextLayout(c.getXAxisUnit(), c.getFont(), </span>
<span class="nc" id="L122">						    c.getFontRenderContext());</span>
        
		// xaxis label height
<span class="nc" id="L125">		int maxbmargin = computeXAxisLabelHeight() + marginOffset; // + xaxis title height</span>
        
		// unit height
<span class="nc" id="L128">		maxbmargin = Math.max(maxbmargin, (int) layout.getBounds().getHeight() + marginOffset);</span>
        
        
<span class="nc" id="L131">		int margin = (int)(maxbmargin - (ymin / (ymin + ymax)) * (c.getBounds().getHeight() - c.getTopMargin()));</span>
        
<span class="nc" id="L133">		margin += 10; // just for good looking</span>
	
<span class="nc bnc" id="L135" title="All 2 branches missed.">		if(margin &lt; c.MINIMALMARGIN)</span>
<span class="nc" id="L136">		    margin = c.MINIMALMARGIN;</span>
        
<span class="nc" id="L138">		return margin;</span>
	} else {
<span class="nc" id="L140">		return c.MINIMALMARGIN;</span>
	}
    }
    
    /** Computes the maximum height of all x-axis labels. */
    public int computeXAxisLabelHeight() {        
<span class="nc" id="L146">        double min = constraints.getMinimumColumnValue();</span>
<span class="nc" id="L147">        double max = constraints.getMaximumColumnValue();</span>
<span class="nc" id="L148">        double tick = ChartUtilities.calculateTickSpacing(min, max);</span>
<span class="nc" id="L149">        double ypt = 0;</span>
        
<span class="nc" id="L151">        int height = 0;</span>
        
<span class="nc bnc" id="L153" title="All 2 branches missed.">        if(constraints.getMinimumValue().doubleValue() &gt; 0)</span>
<span class="nc" id="L154">            ypt = constraints.getMinimumValue().doubleValue();</span>
<span class="nc bnc" id="L155" title="All 2 branches missed.">        else if(constraints.getMaximumValue().doubleValue() &lt; 0)</span>
<span class="nc" id="L156">            ypt = constraints.getMaximumValue().doubleValue();</span>
<span class="nc" id="L157">        boolean paint = false;</span>
        
<span class="nc" id="L159">        DecimalFormat df = c.getXDecimalFormat();</span>
<span class="nc" id="L160">		FontRenderContext frc = c.getFontRenderContext();</span>
<span class="nc" id="L161">        Font f = c.getFont();</span>
        
<span class="nc bnc" id="L163" title="All 2 branches missed.">        for(double d = min; d &lt;= max; d += tick) {</span>
<span class="nc bnc" id="L164" title="All 2 branches missed.">            if(paint) {</span>
<span class="nc" id="L165">                String sb = df.format(d);</span>
<span class="nc" id="L166">                Rectangle2D r = f.getStringBounds(sb, frc);</span>
                
<span class="nc" id="L168">                height = Math.max(height, (int)r.getHeight());                </span>
            }
<span class="nc bnc" id="L170" title="All 2 branches missed.">            paint = !paint;</span>
        }
        
<span class="nc" id="L173">        return height;</span>
    }
    
    /** Computes the maximum width of all y-axis labels. */
    public int computeYAxisLabelWidth() {
<span class="nc" id="L178">        double min = constraints.getMinimumValue().doubleValue();</span>
<span class="nc" id="L179">        double max = constraints.getMaximumValue().doubleValue();</span>
<span class="nc" id="L180">        double tick = ChartUtilities.calculateTickSpacing(min, max);</span>
<span class="nc" id="L181">        double xpt = 0;</span>
       
<span class="nc" id="L183">        int width = 0;</span>
        
        // shift the y-axis according to the max and min x-values
<span class="nc bnc" id="L186" title="All 2 branches missed.">        if(constraints.getMinimumColumnValue() &gt; 0)</span>
<span class="nc" id="L187">            xpt = constraints.getMinimumColumnValue();</span>
<span class="nc bnc" id="L188" title="All 4 branches missed.">        else if(constraints.getMaximumColumnValue() &lt; 0 &amp;&amp; c.getSecondYAxis() != null)</span>
<span class="nc" id="L189">            xpt = constraints.getMaximumColumnValue();</span>
        
<span class="nc" id="L191">        boolean paint = false;</span>
        
<span class="nc" id="L193">        DecimalFormat df = c.getYDecimalFormat();</span>
<span class="nc" id="L194">		FontRenderContext frc = c.getFontRenderContext();</span>
<span class="nc" id="L195">        Font f = c.getFont();</span>
		
<span class="nc bnc" id="L197" title="All 2 branches missed.">        for(double d = min; d &lt;= max; d += tick) {</span>
<span class="nc bnc" id="L198" title="All 2 branches missed.">            if(paint) {</span>
<span class="nc" id="L199">                String sb = df.format(d);</span>
<span class="nc" id="L200">                Rectangle2D r = f.getStringBounds(sb, frc);</span>
                
<span class="nc" id="L202">                width = Math.max((int)r.getWidth(), width);</span>
            }
<span class="nc bnc" id="L204" title="All 2 branches missed.">            paint = !paint;</span>
        }
        
<span class="nc" id="L207">        return width;</span>
    }
    
    /** This method is called by paintDefault to paint the ticks on the
     * x-axis for numerical x-axis values.
     * @param g the Graphics2D context to paint in
     */
    public void drawNumericalXAxisTicks(Graphics2D g) {
<span class="nc" id="L215">        AffineTransform at = c.getTransform(CoordSystem.FIRST_YAXIS);</span>
        
<span class="nc" id="L217">        double min = constraints.getMinimumColumnValue();</span>
<span class="nc" id="L218">        double max = constraints.getMaximumColumnValue();</span>
<span class="nc" id="L219">        double tick = ChartUtilities.calculateTickSpacing(min, max);</span>
<span class="nc" id="L220">        double ypt = 0;</span>
        
<span class="nc bnc" id="L222" title="All 2 branches missed.">        if(constraints.getMinimumValue().doubleValue() &gt; 0)</span>
<span class="nc" id="L223">            ypt = constraints.getMinimumValue().doubleValue();</span>
<span class="nc bnc" id="L224" title="All 2 branches missed.">        else if(constraints.getMaximumValue().doubleValue() &lt; 0)</span>
<span class="nc" id="L225">            ypt = constraints.getMaximumValue().doubleValue();</span>
        
<span class="nc" id="L227">        Point2D p = new Point2D.Double(0.0, 0.0);</span>
        Point2D v;
<span class="nc" id="L229">        Line2D ticks = new Line2D.Double(0.0, 0.0, 0.0, 0.0);</span>
        
<span class="nc" id="L231">		DecimalFormat df = c.getXDecimalFormat();</span>
<span class="nc" id="L232">		FontRenderContext frc = c.getFontRenderContext();</span>
<span class="nc" id="L233">        Font f = c.getFont();</span>
        
<span class="nc" id="L235">		boolean paint = false;</span>
		
<span class="nc" id="L237">        g.setFont(f);</span>
<span class="nc" id="L238">        boolean paintLabels = c.isPaintLabels();</span>
        
<span class="nc bnc" id="L240" title="All 2 branches missed.">        for(double d = min; d &lt;= max; d += tick) {</span>
<span class="nc" id="L241">            p.setLocation(d, ypt);</span>
<span class="nc" id="L242">            v = at.transform(p, null);</span>
            
<span class="nc" id="L244">            ticks.setLine(v.getX(), v.getY() - marginOffset/2, v.getX(), v.getY() + marginOffset/2);</span>
<span class="nc" id="L245">            g.draw(ticks);</span>
<span class="nc bnc" id="L246" title="All 4 branches missed.">            if(paint &amp;&amp; paintLabels) {</span>
<span class="nc" id="L247">                String sb = df.format(d);</span>
<span class="nc" id="L248">                Rectangle2D r = f.getStringBounds(sb, frc);</span>
                
<span class="nc" id="L250">                g.drawString(sb, (float)(v.getX() - r.getWidth() / 2),</span>
<span class="nc" id="L251">							(float)(v.getY() + r.getHeight() + marginOffset));</span>
            }
<span class="nc bnc" id="L253" title="All 2 branches missed.">            paint = !paint;</span>
        }
<span class="nc" id="L255">    }</span>
    
    /** This method is called by paintDefault to paint the ticks on the
     * x-axis for non-numerical x-axis values..
     * @param g the Graphics2D context to paint in
     */
    public void drawXAxisTicks(Graphics2D g) {
<span class="nc" id="L262">        AffineTransform at = c.getTransform(CoordSystem.FIRST_YAXIS);</span>
        
<span class="nc" id="L264">        int min = (int)constraints.getMinimumColumnValue();</span>
<span class="nc" id="L265">        int max = (int)constraints.getMaximumColumnValue();</span>
<span class="nc" id="L266">        double tick = 1.0;</span>
<span class="nc" id="L267">        double ypt = 0;</span>
        
<span class="nc bnc" id="L269" title="All 2 branches missed.">        if(constraints.getMinimumValue().doubleValue() &gt; 0)</span>
<span class="nc" id="L270">            ypt = constraints.getMinimumValue().doubleValue();</span>
<span class="nc bnc" id="L271" title="All 2 branches missed.">        else if(constraints.getMaximumValue().doubleValue() &lt; 0)</span>
<span class="nc" id="L272">            ypt = constraints.getMaximumValue().doubleValue();</span>
        
<span class="nc" id="L274">        Point2D p = new Point2D.Double(0.0, 0.0);</span>
<span class="nc" id="L275">        Point2D v = null;</span>
<span class="nc" id="L276">        Point2D oldv = null;</span>
        
<span class="nc" id="L278">        Line2D ticks = new Line2D.Double(0.0, 0.0, 0.0, 0.0);</span>
        
<span class="nc" id="L280">		DecimalFormat df = c.getXDecimalFormat();</span>
<span class="nc" id="L281">		FontRenderContext frc = c.getFontRenderContext();</span>
<span class="nc" id="L282">        Font f = c.getFont();</span>
        
<span class="nc" id="L284">        boolean paint = false;</span>
<span class="nc" id="L285">        boolean paintLabels = c.isPaintLabels();</span>
<span class="nc" id="L286">        g.setFont(f);</span>
        
<span class="nc bnc" id="L288" title="All 2 branches missed.">        for(int i = min - 1; i &lt; max; i++) {</span>
<span class="nc" id="L289">            p.setLocation(i + 1, ypt);</span>
            
<span class="nc" id="L291">            v = at.transform(p, null);</span>
            
<span class="nc" id="L293">            ticks.setLine(v.getX(), v.getY() - marginOffset/2, v.getX(), v.getY() + marginOffset/2);</span>
            
<span class="nc bnc" id="L295" title="All 2 branches missed.">            if(i + 1 &lt; max)</span>
<span class="nc" id="L296">                g.draw(ticks);</span>
            
            // Draw Strings between ticks
<span class="nc bnc" id="L299" title="All 4 branches missed.">            if(oldv != null &amp;&amp; paintLabels) {</span>
<span class="nc" id="L300">                String sb = (String)model.getColumnValueAt(i);</span>
<span class="nc" id="L301">                Rectangle2D r = f.getStringBounds(sb, frc);</span>
                
<span class="nc" id="L303">                g.drawString(sb, (float)(oldv.getX()+(v.getX() - oldv.getX()) / 2 - r.getWidth() / 2),</span>
<span class="nc" id="L304">                                (float)(v.getY() + r.getHeight() + marginOffset));</span>
            }
            
<span class="nc" id="L307">            oldv = v;</span>
        }
<span class="nc" id="L309">    }</span>
    
    /** This method is called by paintDefault to paint the ticks on the
     * y-axis.
     * @param g the Graphics2D context in which to draw
     */
    public void drawYAxisTicks(Graphics2D g) {
<span class="nc" id="L316">        AffineTransform at = c.getTransform(CoordSystem.FIRST_YAXIS);</span>
        
<span class="nc" id="L318">        double min = constraints.getMinimumValue().doubleValue();</span>
<span class="nc" id="L319">        double max = constraints.getMaximumValue().doubleValue();</span>
<span class="nc" id="L320">        double tick = ChartUtilities.calculateTickSpacing(min, max);</span>
<span class="nc" id="L321">        double xpt = 0;</span>
       
        // shift the y-axis according to the max and min x-values
<span class="nc bnc" id="L324" title="All 2 branches missed.">        if(constraints.getMinimumColumnValue() &gt; 0)</span>
<span class="nc" id="L325">            xpt = constraints.getMinimumColumnValue();</span>
<span class="nc bnc" id="L326" title="All 4 branches missed.">        else if(constraints.getMaximumColumnValue() &lt; 0 &amp;&amp; c.getSecondYAxis() != null)</span>
<span class="nc" id="L327">            xpt = constraints.getMaximumColumnValue();</span>
        
<span class="nc" id="L329">        Point2D p = new Point2D.Double(0.0, 0.0);</span>
        Point2D v;
<span class="nc" id="L331">        Line2D ticks = new Line2D.Double(0.0, 0.0, 0.0, 0.0);</span>
<span class="nc" id="L332">        boolean paint = false;</span>
        
<span class="nc" id="L334">        DecimalFormat df = c.getYDecimalFormat();</span>
<span class="nc" id="L335">		FontRenderContext frc = c.getFontRenderContext();</span>
<span class="nc" id="L336">        Font f = c.getFont();</span>
		
<span class="nc" id="L338">		Color backupColor = g.getColor();</span>
<span class="nc" id="L339">        g.setFont(f);</span>
<span class="nc" id="L340">        boolean paintLabels = c.isPaintLabels();</span>
        
<span class="nc bnc" id="L342" title="All 2 branches missed.">        for(double d = min; d &lt;= max; d += tick) {</span>
<span class="nc" id="L343">            p.setLocation(xpt, d);</span>
<span class="nc" id="L344">            v = at.transform(p, null);</span>
            
<span class="nc" id="L346">            ticks.setLine(v.getX() - marginOffset/2, v.getY(), v.getX() + marginOffset/2, v.getY());</span>
            
<span class="nc" id="L348">			g.draw(ticks);</span>
			
<span class="nc bnc" id="L350" title="All 4 branches missed.">			if (d != min &amp;&amp; !c.isPaintOnlyTick()) {</span>
<span class="nc" id="L351">                Line2D xax = getXAxisLine2D();</span>
<span class="nc" id="L352">                ticks.setLine(v.getX() + marginOffset/2, v.getY(), xax.getX2(), v.getY());</span>
<span class="nc" id="L353">                g.setColor(Color.lightGray);</span>
<span class="nc" id="L354">                g.draw(ticks);</span>
<span class="nc" id="L355">                g.setColor(backupColor);</span>
            }
            
<span class="nc bnc" id="L358" title="All 6 branches missed.">            if(paintLabels &amp;&amp; (paint || !c.isPaintAltTick())) {</span>
<span class="nc" id="L359">                String sb = df.format(d);</span>
<span class="nc" id="L360">                Rectangle2D r = f.getStringBounds(sb, frc);</span>
                
<span class="nc" id="L362">                g.drawString(sb, (float)(v.getX() - r.getWidth() - marginOffset),</span>
<span class="nc" id="L363">                            (float)(v.getY() + r.getHeight() / 2));</span>
            }
<span class="nc bnc" id="L365" title="All 2 branches missed.">            paint = !paint;</span>
        }
<span class="nc" id="L367">    }</span>
    
    /** Computes the Line2D object of the x-axis using the DataConstraints.*/
    public Line2D getXAxisLine2D() {
<span class="nc" id="L371">        double ypt = 0.0;</span>
        // shift the x-axis according to the max and min y-values
<span class="nc bnc" id="L373" title="All 2 branches missed.">        if(constraints.getMinimumValue().doubleValue() &gt; 0)</span>
<span class="nc" id="L374">            ypt = constraints.getMinimumValue().doubleValue();</span>
<span class="nc bnc" id="L375" title="All 2 branches missed.">        else if(constraints.getMaximumValue().doubleValue() &lt; 0)</span>
<span class="nc" id="L376">            ypt = constraints.getMaximumValue().doubleValue();</span>
        
<span class="nc" id="L378">        AffineTransform at = c.getTransform(CoordSystem.FIRST_YAXIS);</span>
        
<span class="nc" id="L380">        Point2D l = at.transform(new Point2D.Double(constraints.getMinimumColumnValue(), ypt), null);</span>
<span class="nc" id="L381">        Point2D r = at.transform(new Point2D.Double(constraints.getMaximumColumnValue(), ypt), null);</span>
        
<span class="nc" id="L383">        return new Line2D.Double(l, r);</span>
    }
    
    /** Computes the Line2D object of the y-axis using the DataConstraints.*/
    public Line2D getYAxisLine2D() {
<span class="nc" id="L388">        double xpt = 0.0;</span>
        
        // shift the y-axis according to the max and min x-values
<span class="nc bnc" id="L391" title="All 2 branches missed.">        if(constraints.getMinimumColumnValue() &gt; 0)</span>
<span class="nc" id="L392">            xpt = constraints.getMinimumColumnValue();</span>
<span class="nc bnc" id="L393" title="All 4 branches missed.">        else if(constraints.getMaximumColumnValue() &lt; 0 &amp;&amp; c.getSecondYAxis() != null)</span>
<span class="nc" id="L394">            xpt = constraints.getMaximumColumnValue();</span>
        
<span class="nc" id="L396">        AffineTransform at = c.getTransform(CoordSystem.FIRST_YAXIS);</span>
        
<span class="nc" id="L398">        Point2D o = at.transform(new Point2D.Double(xpt, constraints.getMaximumValue().doubleValue()), null);</span>
<span class="nc" id="L399">        Point2D u = at.transform(new Point2D.Double(xpt, constraints.getMinimumValue().doubleValue()), null);</span>
        //System.out.println(&quot;** Y-Axis (&quot;+o+&quot;, &quot;+u+&quot;)&quot;);
<span class="nc" id="L401">        return new Line2D.Double(o, u);</span>
    }
    
    /** Computes the Line2D object of the second y-axis using the DataConstraints.*/
    public Line2D getSecondYAxisLine2D() {
<span class="nc" id="L406">        double xpt = constraints2.getMaximumColumnValue();</span>
        
<span class="nc" id="L408">        AffineTransform at = c.getTransform(CoordSystem.SECOND_YAXIS);</span>
        
<span class="nc" id="L410">        Point2D o = at.transform(new Point2D.Double(xpt, constraints2.getMaximumValue().doubleValue()), null);</span>
<span class="nc" id="L411">        Point2D u = at.transform(new Point2D.Double(xpt, constraints2.getMinimumValue().doubleValue()), null);</span>
        
<span class="nc" id="L413">        return new Line2D.Double(o, u);</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>