<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ClassViewer.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">91_classviewer</a> &gt; <a href="index.source.html" class="el_package">com.jstevh.viewer</a> &gt; <span class="el_source">ClassViewer.java</span></div><h1>ClassViewer.java</h1><pre class="source lang-java linenums">/* 
 * Class Viewer - program for viewing public class information
 *
 * Copyright (C) 2004-2010  James Harris 
 *
 * This program is free software; you can redistribute it 
 *
 * and/or modify it under the terms of the GNU General Public
 *
 * License as published by the Free Software Foundation;
 *
 * either version 2 of the License, or (at your option) any 
 *
 * later version.
 *
 *
 * This program is distributed in the hope that it will be 
 *
 * useful, but WITHOUT ANY WARRANTY; without even the implied 
 *
 * warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR 
 *
 * PURPOSE. See the GNU General Public License for more details.
 *
 *
 * You should have received a copy of the GNU General Public 
 *
 * License along with this program; if not, write to the Free 
 *
 * Software Foundation, Inc., 59 Temple Place, Suite 330, 
 *
 * Boston, MA 02111-1307 USA
 *
 */


package com.jstevh.viewer;

import javax.swing.*;
import javax.swing.WindowConstants;
import javax.swing.border.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.datatransfer.*;
import java.io.*;
import java.net.*;
import java.applet.*;
import java.util.*;

import com.jstevh.tools.*;

/**
* Viewing class that runs as an application or applet whichs
* is paired with an internal ClassInfo which is the data class. 
* &lt;p&gt;
* This class is for viewing data and managing.
*
* @author   James Harris
* @version  5.0.3
*/              
public class ClassViewer extends JApplet
{

	static final long serialVersionUID = -8097082256025613859L;
	
<span class="fc" id="L66">	private static String noWarrantyStr=&quot;&quot;;</span>
	{
<span class="nc" id="L68">		noWarrantyStr+=&quot;Class Viewer version &quot;+VERSION+&quot;, Copyright (C) &quot;+YEAR+&quot; by James Harris&quot;;</span>
<span class="nc" id="L69">		noWarrantyStr+=&quot;\ncomes with ABSOLUTELY NO WARRANTY; for details&quot;;</span>
<span class="nc" id="L70">		noWarrantyStr+=&quot;\nsee http://www.opensource.org/licenses/gpl-license.php\n&quot;;</span>
<span class="nc" id="L71">		noWarrantyStr+=&quot;\nThis is free software, and you are welcome\n&quot;;</span>
	
<span class="nc" id="L73">		noWarrantyStr+=&quot;to redistribute it under certain conditions;&quot;;</span>
<span class="nc" id="L74">		noWarrantyStr+=&quot;\ncheck at http://www.opensource.org/licenses/gpl-license.php&quot;;</span>
<span class="nc" id="L75">		noWarrantyStr+=&quot;\nfor details.&quot;;</span>
	}
            
<span class="nc" id="L78">    JButton b1 = new JButton(&quot;Documents&quot;);</span>
            
                        
    JTextArea txtArea, resWin, fldArea, cstrArea, infoArea;
    
    
<span class="nc" id="L84">    JComboBox txt = new JComboBox();</span>
    JTextField txtTextField;
    
<span class="nc" id="L87">    JTextField txt2 = new JTextField(10);</span>
                
<span class="nc" id="L89">    JPopupMenu popup = new JPopupMenu();</span>
    
<span class="nc" id="L91">    JMenuItem copy = new JMenuItem(&quot;Copy&quot;);</span>
<span class="nc" id="L92">    JMenuItem search = new JMenuItem(&quot;Search&quot;);</span>
<span class="nc" id="L93">    JMenuItem goJavaDoc = new JMenuItem(&quot;Documents&quot;);</span>
    
<span class="nc" id="L95">    JMenu[] menus = {new JMenu(&quot;Help&quot;), new JMenu(&quot;Weblinks&quot;), new JMenu(&quot;Command&quot;)};</span>
<span class="nc" id="L96">    JMenuBar menuBar = new JMenuBar();</span>
    
<span class="nc" id="L98">    JMenuItem instructions = new JMenuItem(&quot;Instructions&quot;);  </span>
<span class="nc" id="L99">    JMenuItem about = new JMenuItem(&quot;About&quot;);  </span>
    
<span class="nc" id="L101">    JMenuItem link1 = new JMenuItem(&quot;Class Viewer Home&quot;);  </span>
<span class="nc" id="L102">    JMenuItem link2 = new JMenuItem(&quot;Basic Use Instructions&quot;); </span>
<span class="nc" id="L103">    JMenuItem link3 = new JMenuItem(&quot;Beyond Mundane Blog&quot;);</span>
<span class="nc" id="L104">    JMenuItem link4 = new JMenuItem(&quot;Java.net--Tools&quot;);</span>

<span class="nc" id="L106">    JMenuItem command1 = new JMenuItem(&quot;Set classpath&quot;);</span>
<span class="nc" id="L107">    JMenuItem command2 = new JMenuItem(&quot;Edit file&quot;);</span>
    
<span class="nc" id="L109">    JTabbedPane panes = new JTabbedPane();</span>
    
    static final int RESWIN=0, CSTRWIN=1, FLDWIN=2;
   
<span class="fc" id="L113">    public static boolean mainRun=false;</span>

    public static String classPath;
    public static String currentDir;
    public static String operating_system;
    public static String file_separator;
    public static String file_editor;

    public static final String VERSION=&quot;5.0.3&quot;;
    public static final int YEAR=2011;
   
    private ClassInfo myClassInfo;
    
    private String startClass;
    
    private DirManager locManager;

    private HashMap location;


    private StringList localPackages;
<span class="nc" id="L134">    private boolean isLocalFile=false;</span>


    private String[] strMethods;
    private String[] displayMethods;

    private Dimension scrSize;
<span class="nc" id="L141">    private boolean autoSearch=false;</span>
    
    private String[] resWinData;
    private int resWinLine;

 
   
<span class="nc" id="L148">    public ClassViewer(){</span>
        
       // try{
          //UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
       // }
       // catch (Exception e){e.printStackTrace();}

<span class="nc" id="L155">	txt.requestFocus();</span>
        
<span class="nc" id="L157">    }</span>
    
<span class="nc" id="L159">    public ClassViewer(String name){</span>
        
        //try{
        //  UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        //}
        //catch (Exception e){e.printStackTrace();}
	
<span class="nc" id="L166">	startClass = name;</span>
	
<span class="nc" id="L168">	txt.requestFocus();</span>
        
<span class="nc" id="L170">    }</span>
	                
    public void init(){
	    
<span class="nc bnc" id="L174" title="All 2 branches missed.">	    if (mainRun){</span>
		    	try{
<span class="nc" id="L176">				classPath = System.getProperty(&quot;java.class.path&quot;);</span>
<span class="nc" id="L177">				currentDir = System.getProperty(&quot;user.dir&quot;);</span>
<span class="nc" id="L178">				operating_system = System.getProperty(&quot;os.name&quot;);</span>
<span class="nc" id="L179">				file_separator = System.getProperty(&quot;file.separator&quot;);</span>
			}
<span class="nc" id="L181">			catch (java.security.AccessControlException access){</span>
<span class="nc" id="L182">				access.printStackTrace();</span>
<span class="nc" id="L183">				System.out.println(&quot;Should never go in here&quot;);				</span>
<span class="nc" id="L184">				mainRun = false;</span>
<span class="nc" id="L185">			}</span>
	    }
	    
<span class="nc" id="L188">	    scrSize = getSize();//getToolkit().getScreenSize();</span>
	    
<span class="nc" id="L190">	    double ratio = scrSize.getWidth()/1024;</span>
	    
	    
	    
<span class="nc" id="L194">	    txtArea = new JTextArea((int)(20*ratio), (int)(40*ratio));</span>
	    
<span class="nc" id="L196">	    txtArea.setLineWrap(true);</span>
	    
<span class="nc" id="L198">	    fldArea = new JTextArea((int)(20*ratio), (int)(40*ratio));</span>
	    
<span class="nc" id="L200">	    resWin = new JTextArea((int)(20*ratio), (int)(40*ratio));</span>
	    
<span class="nc" id="L202">	    cstrArea = new JTextArea((int)(20*ratio), (int)(40*ratio));</span>
	    
<span class="nc" id="L204">	    infoArea = new JTextArea((int)(5*ratio), (int)(20*ratio));</span>
	    
	    //Adding in menus, first one is the help
	    //need to switch to fields with names
	    
<span class="nc" id="L209">	    menus[0].add(instructions);</span>
<span class="nc" id="L210">	    menus[0].add(about);</span>
	    
<span class="nc" id="L212">	    menus[1].add(link1);</span>
<span class="nc" id="L213">	    menus[1].add(link2);</span>
<span class="nc" id="L214">	    menus[1].add(link3);</span>
<span class="nc" id="L215">	    menus[1].add(link4);</span>

<span class="nc" id="L217">	    menus[2].add(command1);</span>
<span class="nc" id="L218">	    menus[2].add(command2);</span>


<span class="nc" id="L221">	    command2.setEnabled(false);</span>
	    
	    
<span class="nc bnc" id="L224" title="All 2 branches missed.">	    for (int i=0; i&lt;(menus.length); i++){</span>
<span class="nc" id="L225">		    menuBar.add(menus[i]);</span>
	    }
	    
	    
<span class="nc" id="L229">	    setJMenuBar(menuBar);</span>
            
<span class="nc bnc" id="L231" title="All 2 branches missed.">	    if (mainRun) popup.add(copy);</span>
<span class="nc" id="L232">	    popup.add(search);</span>
<span class="nc" id="L233">	    popup.add(goJavaDoc);</span>
	    
<span class="nc" id="L235">	    instructions.addActionListener(showInstructions);</span>
<span class="nc" id="L236">	    about.addActionListener(showInfo);</span>
	    
<span class="nc" id="L238">	    link1.addActionListener(goHome);</span>
<span class="nc" id="L239">	    link2.addActionListener(goBUO);</span>
<span class="nc" id="L240">	    link3.addActionListener(goBeyond);</span>
<span class="nc" id="L241">	    link4.addActionListener(goJN);</span>

<span class="nc" id="L243">	    command1.addActionListener(setClasspath);</span>
<span class="nc" id="L244">	    command2.addActionListener(editFile);</span>
	    
	    //menu items for pop-up menu getting ActionListeners
<span class="nc" id="L247">	    copy.addActionListener(copyToClipBoard);</span>
<span class="nc" id="L248">	    search.addActionListener(srchMethods);</span>
<span class="nc" id="L249">	    goJavaDoc.addActionListener(srchThenDocuments);</span>
<span class="nc" id="L250">	    b1.addActionListener(getDocuments);</span>
	    
<span class="nc" id="L252">	    txt.setEditable(true);</span>
<span class="nc" id="L253">	    txt.setMaximumRowCount(5);</span>
<span class="nc" id="L254">	    txt.addActionListener(inMeth);</span>
	    
	    //Found this value by trying but put in a backup
<span class="nc" id="L257">	    Object checkComponent = txt.getComponent(2);</span>
	    
	    try{
<span class="nc" id="L260">		    txtTextField = (JTextField)checkComponent;</span>
<span class="nc" id="L261">	    }catch(ClassCastException e){</span>
<span class="nc" id="L262">		    txtTextField = findTextField(txt);</span>
<span class="nc" id="L263">	    }</span>
	    
<span class="nc" id="L265">	    txt2.addActionListener(srchMethods2);</span>
	    
<span class="nc" id="L267">	    txtArea.setEditable(false);</span>
<span class="nc" id="L268">	    txtArea.addMouseListener(new ml());</span>
<span class="nc" id="L269">	    resWin.addMouseListener(new ml());</span>
	    
<span class="nc" id="L271">	    fldArea.setEditable(false);</span>
<span class="nc" id="L272">	    infoArea.setEditable(false);</span>
	    
<span class="nc" id="L274">	    Container cp = getContentPane();</span>
	    
<span class="nc" id="L276">	    JPanel 	bottomPanel = new JPanel();</span>
	    
<span class="nc" id="L278">	    JPanel 	bigWindows = new JPanel(),</span>
<span class="nc" id="L279">	    		smallWindow = new JPanel(),</span>
<span class="nc" id="L280">			classNameInput = new JPanel(),</span>
<span class="nc" id="L281">			searchWindow = new JPanel();</span>
			
<span class="nc bnc" id="L283" title="All 2 branches missed.">	if (!mainRun){</span>
<span class="nc" id="L284">		TitledBorder mode = new TitledBorder(&quot;Running in applet mode&quot;);</span>
<span class="nc" id="L285">		mode.setTitleColor(Color.BLUE);</span>
<span class="nc" id="L286">		mode.setTitleJustification(TitledBorder.CENTER);</span>
<span class="nc" id="L287">		bottomPanel.setBorder(mode);</span>
	}
	
<span class="nc" id="L290">	bigWindows.setBorder(new TitledBorder(&quot;Public Methods&quot;));</span>
<span class="nc" id="L291">	smallWindow.setBorder(new TitledBorder(&quot;General Class Information&quot;));</span>
<span class="nc" id="L292">	classNameInput.setBorder(new TitledBorder(&quot;Class Name&quot;));</span>
<span class="nc" id="L293">	searchWindow.setBorder(new TitledBorder(&quot;Search String&quot;));</span>
	
	//cp.setLayout( new BoxLayout(cp, BoxLayout.Y_AXIS ));
	
<span class="nc" id="L297">	bigWindows.add( new JScrollPane(txtArea));</span>
<span class="nc" id="L298">	bigWindows.add( panes);</span>

<span class="nc" id="L300">	panes.addTab(&quot;Results Window&quot;, new JScrollPane(resWin));</span>
<span class="nc" id="L301">	panes.addTab(&quot;Constructors&quot;, new JScrollPane(cstrArea));                </span>
<span class="nc" id="L302">	panes.addTab(&quot;Fields&quot;, new JScrollPane(fldArea));</span>
	
<span class="nc" id="L304">	smallWindow.add(infoArea);</span>
	
<span class="nc" id="L306">	classNameInput.add(txt);</span>
	
<span class="nc" id="L308">	searchWindow.add(txt2);</span>
	
<span class="nc" id="L310">	bottomPanel.add(bigWindows);</span>
	
<span class="nc" id="L312">	bottomPanel.add(smallWindow, BorderLayout.PAGE_START);</span>
<span class="nc" id="L313">	bottomPanel.add(classNameInput);</span>
	
<span class="nc" id="L315">	bottomPanel.add(b1);</span>
	
<span class="nc" id="L317">	bottomPanel.add(searchWindow);</span>
	
<span class="nc" id="L319">	cp.add(bottomPanel);</span>
	
	//Dimension d = getPreferredSize();
	
	//d = getSize();
	
<span class="nc" id="L325">	txt.requestFocus();</span>
	
	
<span class="nc" id="L328">	locManager = new DirManager(mainRun);</span>
	
<span class="nc bnc" id="L330" title="All 2 branches missed.">	if (!locManager.loaded()){</span>
<span class="nc" id="L331">		System.out.println(locManager.fileNotFoundError());</span>
		
<span class="nc bnc" id="L333" title="All 2 branches missed.">		if (locManager.fileNotFoundError()){</span>
<span class="nc" id="L334">			String errorStr = &quot;File packagedirectory.xml not found.&quot;;</span>
<span class="nc" id="L335">			errorStr +=&quot;\n\nLooking in directory--\n&quot;+locManager.currentDir+locManager.fileSeparator;</span>
<span class="nc" id="L336">			errorStr += &quot;\n\nPlease put that file in the same folder as the main&quot;;</span>
<span class="nc" id="L337">			errorStr += &quot;\nClass Viewer program and restart program.\n\n&quot;;</span>
			
<span class="nc" id="L339">			resWin.setText(errorStr);</span>
			
<span class="nc" id="L341">			errorStr += noWarrantyStr;</span>
<span class="nc" id="L342">			txtArea.setText(errorStr);</span>

<span class="nc" id="L344">		}</span>
	}
	else {
<span class="nc bnc" id="L347" title="All 2 branches missed.">		if(mainRun) txtArea.setText(&quot;classpath=&quot;+classPath+&quot;\n\n&quot; + noWarrantyStr);</span>
<span class="nc" id="L348">		else txtArea.setText(noWarrantyStr);		</span>
	}
	
	
<span class="nc" id="L352">	location = locManager.getDirectory();</span>
	
<span class="nc bnc" id="L354" title="All 4 branches missed.">	if (startClass!=null &amp;&amp; startClass.compareTo(&quot;&quot;)!=0){</span>
<span class="nc" id="L355">		txt.addItem(startClass);</span>
<span class="nc" id="L356">		System.out.println(&quot;adding &quot;+startClass);</span>
	}


<span class="nc" id="L360">	localPackages = locManager.getLocalPackages();</span>

<span class="nc" id="L362">	file_editor = locManager.getEditor();</span>
	
<span class="nc" id="L364">    }</span>
    
    /**
    * Returns the JTextField that should contain user input
    * &lt;p&gt;
    * 
    *
    * @param  in JComboBox to search within
    *               
    * @return      a JTextField component
    */              
    private JTextField findTextField(Container in){
	    
<span class="nc" id="L377">	    System.out.println(&quot;Looking for a JTextField inside of JComboBox&quot;);</span>
	    
<span class="nc" id="L379">	    Component[] allComponents = in.getComponents();</span>
	    JTextField retValue;
	    
<span class="nc bnc" id="L382" title="All 2 branches missed.">	    for (int i=0; i&lt;allComponents.length; i++){</span>
		    try{
<span class="nc" id="L384">			    retValue = (JTextField)allComponents[i];</span>
<span class="nc" id="L385">		    }catch(ClassCastException e){continue;}</span>
		    
<span class="nc" id="L387">		    return retValue;</span>
		    
		    
	    }
	    
<span class="nc" id="L392">	    System.out.println(&quot;Couldn't find JTextField inside of JComboBox&quot;);</span>
	    
<span class="nc" id="L394">	    return null;</span>
	    
    }


    /**
    * Returns information about the projects creator
    * &lt;p&gt;
    * This class is called when the user clicks Help and then About
    *
    * @return      string with author information
    */      
    public String getAppletInfo(){

<span class="nc" id="L408">        return &quot;ClassViewer for Java&quot;+'\n'+&quot;Author: James Harris&quot;+'\n'+&quot;Version: &quot;+VERSION;</span>

    }

    /**
    * Primary ActionListener that creates ClassInfo and populates
    * data on screen 
    * &lt;p&gt;
    * This class is called when a class name is entered.
    *
    * 
    */              
<span class="nc" id="L420">    ActionListener inMeth = new ActionListener(){</span>
        
        public void actionPerformed(ActionEvent e){
		
<span class="nc bnc" id="L424" title="All 2 branches missed.">		if(e.getActionCommand().equals(&quot;comboBoxChanged&quot;)){</span>
		    
<span class="nc" id="L426">		    String tempStr = (String)txt.getSelectedItem();</span>
	
<span class="nc bnc" id="L428" title="All 4 branches missed.">		    if (tempStr==null || tempStr.trim().equals(&quot;&quot;)) return;                       </span>
		    
		    try{
<span class="nc" id="L431">			myClassInfo = new ClassInfo(tempStr, locManager);</span>
<span class="nc" id="L432">			txtArea.setText(&quot;&quot;);</span>
<span class="nc bnc" id="L433" title="All 2 branches missed.">			if (txtArea.getLineWrap()) txtArea.setLineWrap(false);</span>
<span class="nc bnc" id="L434" title="All 2 branches missed.">			if (resWin.getLineWrap()) resWin.setLineWrap(false);</span>
			
<span class="nc" id="L436">			resWin.setText(&quot;&quot;);</span>
<span class="nc" id="L437">			fldArea.setText(&quot;&quot;);</span>
<span class="nc" id="L438">			cstrArea.setText(&quot;&quot;);</span>

<span class="nc" id="L440">			int pos = txt.getSelectedIndex();</span>
<span class="nc bnc" id="L441" title="All 2 branches missed.">			if (pos!=-1) txt.removeItemAt(pos); 			</span>
			
<span class="nc" id="L443">			txt.insertItemAt(myClassInfo.getClassName(), 0);</span>
<span class="nc bnc" id="L444" title="All 2 branches missed.">			if (txt.getItemCount()&gt;4) txt.removeItemAt(4);</span>
<span class="nc" id="L445">			txt.setSelectedIndex(0);</span>
			
<span class="nc" id="L447">			txtTextField.setText(&quot;&quot;);			</span>
			
<span class="nc bnc" id="L449" title="All 2 branches missed.">			if (!myClassInfo.isInterface()){</span>
<span class="nc bnc" id="L450" title="All 2 branches missed.">			    if (myClassInfo.isAbstract()) infoArea.setText(&quot;Abstract class &quot;);</span>
<span class="nc" id="L451">			    else infoArea.setText(&quot;Class &quot;);</span>
			}
<span class="nc" id="L453">			else infoArea.setText(&quot;Interface &quot;);</span>
			
<span class="nc" id="L455">			infoArea.append(myClassInfo.getClassName()+'\n');</span>
			
<span class="nc" id="L457">			tempStr = myClassInfo.getSuperClassName();</span>
			
<span class="nc bnc" id="L459" title="All 2 branches missed.">			if (tempStr!=null) infoArea.append(&quot;Superclass is &quot;+tempStr+'\n');</span>
			
<span class="nc" id="L461">			addInterfaces(infoArea);</span>
			
<span class="nc" id="L463">			strMethods = myClassInfo.printMethods(ClassInfo.NO_INHERITED_METHODS);</span>
			
<span class="nc bnc" id="L465" title="All 2 branches missed.">			if (strMethods!=null){</span>
	
<span class="nc" id="L467">			    displayMethods = new String[strMethods.length];</span>
<span class="nc bnc" id="L468" title="All 2 branches missed.">			    for (int i=0; i&lt;strMethods.length; i++) {</span>
				
<span class="nc" id="L470">				tempStr = removePackages(removeDeclarations(strMethods[i]));</span>
<span class="nc" id="L471">				displayMethods[i]=tempStr;</span>
				
<span class="nc" id="L473">				txtArea.append(tempStr+'\n');</span>
			    }
			    
<span class="nc" id="L476">			    txtArea.setCaretPosition(0);</span>
			}
<span class="nc" id="L478">			else txtArea.append(&quot;No public methods.&quot;);</span>
			
<span class="nc" id="L480">			addConstructors(cstrArea);</span>
			
<span class="nc" id="L482">			panes.setSelectedIndex(CSTRWIN);</span>
			
<span class="nc" id="L484">			addFields(fldArea);</span>
			
<span class="nc" id="L486">			txtTextField.setText(&quot;&quot;);</span>

<span class="nc bnc" id="L488" title="All 2 branches missed.">			if (localPackages.contains(myClassInfo.getClassPackage())) isLocalFile=true;</span>


<span class="nc bnc" id="L491" title="All 2 branches missed.">			if (isLocalFile) command2.setEnabled(true);</span>
<span class="nc" id="L492">			else command2.setEnabled(false);</span>
				     
		    }
<span class="nc" id="L495">		    catch (ClassNotFoundException j){</span>
	
<span class="nc" id="L497">			txtArea.setText(&quot;Class '&quot;+tempStr+&quot;' not found.  Case matters and for unknown\n packages, the full class name is required.&quot;);</span>
<span class="nc" id="L498">		    } </span>
		}
<span class="nc" id="L500">	}</span>
    };

        
    /**
    * MouseAdapter class that generates pop up when you right click
    * on selected text.  It also does the search.
    *
    * 
    */                 
<span class="nc" id="L510">    class ml extends MouseAdapter{</span>
	    
	    public void mouseReleased(MouseEvent e){
		    
<span class="nc bnc" id="L514" title="All 2 branches missed.">		    if (myClassInfo!=null){</span>
<span class="nc bnc" id="L515" title="All 4 branches missed.">			    if(resWin.isFocusOwner() &amp;&amp; e.getClickCount()&lt;2){</span>
				    try{
<span class="nc" id="L517">					    resWinLine = resWin.getLineOfOffset(resWin.getSelectionStart());</span>
				    }
<span class="nc" id="L519">				    catch (javax.swing.text.BadLocationException k){</span>
					    //if there's this exception, for now, do nothing, and move on
<span class="nc" id="L521">				    }</span>
			    }
		    }		    
<span class="nc" id="L524">	    }</span>
	    
	    public void mouseClicked(MouseEvent e){
		    
<span class="nc" id="L528">		    int event = e.getModifiers();</span>
		    
<span class="nc bnc" id="L530" title="All 6 branches missed.">		    if (myClassInfo!=null &amp;&amp; event==InputEvent.BUTTON1_MASK  &amp;&amp; e.getClickCount()==2){</span>
			    
<span class="nc bnc" id="L532" title="All 2 branches missed.">			    if (txtArea.isFocusOwner()){</span>
				
<span class="nc" id="L534">				    resWin.setText(&quot;&quot;);</span>
<span class="nc" id="L535">				    String[] result = myClassInfo.srchMethods(txtArea.getSelectedText(), displayMethods);</span>
				    
				    
<span class="nc bnc" id="L538" title="All 2 branches missed.">				    if (result==null) resWin.append(&quot;No methods found.&quot;);</span>
				    else {
<span class="nc" id="L540">					    addStrings(resWin, result, resWinData);</span>
<span class="nc" id="L541">					    resWin.setCaretPosition(0);</span>
				    }
				    
<span class="nc" id="L544">				    resWinLine = 0;</span>
				    
<span class="nc" id="L546">				    panes.setSelectedIndex(RESWIN);</span>
<span class="nc" id="L547">			    }</span>
<span class="nc bnc" id="L548" title="All 2 branches missed.">			    else if(resWin.isFocusOwner()){</span>
				    int lineStart, lineEnd;
				    
				    try{
					    
<span class="nc" id="L553">					    resWinLine = resWin.getLineOfOffset(resWin.getSelectionStart());</span>
					    
<span class="nc" id="L555">					    lineStart = resWin.getLineStartOffset(resWinLine);</span>
<span class="nc" id="L556">					    lineEnd = resWin.getLineEndOffset(resWinLine);</span>
					    
<span class="nc" id="L558">					    resWin.setCaretPosition(lineStart);</span>
<span class="nc" id="L559">					    resWin.moveCaretPosition(lineEnd);</span>
					    
<span class="nc" id="L561">					    doDocuments(resWinLine);</span>
					    
				    }
<span class="nc" id="L564">				    catch(Exception j){ </span>
<span class="nc" id="L565">					    j.printStackTrace();</span>
<span class="nc" id="L566">				    }</span>
				    
			    }
				
		    }
		    
<span class="nc bnc" id="L572" title="All 4 branches missed.">		    if (myClassInfo!=null &amp;&amp; event==InputEvent.BUTTON3_MASK){</span>
<span class="nc" id="L573">			    popup.setVisible(true);</span>
<span class="nc" id="L574">			    popup.show(txtArea, e.getX(),e.getY());                </span>
		    }
<span class="nc" id="L576">	    }</span>
    }
    
    /**
    * ActionListener that does search when &quot;Search&quot; chosen from pop-up
    * menu. 
    * 
    */                  
<span class="nc" id="L584">    ActionListener srchMethods = new ActionListener(){</span>
        public void actionPerformed(ActionEvent e){

<span class="nc" id="L587">            String tempStr = txtArea.getSelectedText();</span>
                                                    
<span class="nc" id="L589">            resWin.setText(&quot;&quot;);</span>
                
<span class="nc bnc" id="L591" title="All 2 branches missed.">            if (myClassInfo!=null){</span>
                                        
<span class="nc" id="L593">                String[] result = myClassInfo.srchMethods(tempStr, displayMethods);                </span>
                    
<span class="nc bnc" id="L595" title="All 2 branches missed.">                if (result==null) resWin.append(&quot;No methods found.&quot;);             </span>
                else {
<span class="nc" id="L597">			addStrings(resWin, result, resWinData);</span>
<span class="nc" id="L598">			resWin.setCaretPosition(0);</span>
		}
                
<span class="nc" id="L601">                panes.setSelectedIndex(RESWIN);</span>
                
            }             
            
<span class="nc" id="L605">        }</span>
    };
    
    /**
    * ActionListener that does search when text is entered
    * in input field. 
    * 
    */         
<span class="nc" id="L613">    ActionListener srchMethods2 = new ActionListener(){</span>
        public void actionPerformed(ActionEvent e){
            
<span class="nc" id="L616">            String tempStr = txt2.getText().trim();</span>
                                                    
<span class="nc" id="L618">            resWin.setText(&quot;&quot;);</span>
                
<span class="nc bnc" id="L620" title="All 2 branches missed.">            if (myClassInfo!=null){</span>

		String[] result;

<span class="nc bnc" id="L624" title="All 2 branches missed.">		if(tempStr.indexOf(&quot; &quot;)!=-1){</span>

<span class="nc" id="L626">			int pos = tempStr.indexOf(&quot; &quot;);</span>

<span class="nc" id="L628">			StringList hold = new StringList();</span>

			String segment;

<span class="nc" id="L632">			int count=0;</span>

<span class="nc bnc" id="L634" title="All 4 branches missed.">			while (pos!=-1 &amp;&amp; count&lt;10){</span>

<span class="nc" id="L636">				segment = tempStr.substring(0,pos);</span>
<span class="nc" id="L637">				tempStr = tempStr.substring(pos).trim();</span>

<span class="nc" id="L639">				hold.add(segment);</span>
				
<span class="nc" id="L641">				pos = tempStr.indexOf(&quot; &quot;);</span>

<span class="nc" id="L643">				count++;</span>

			}

<span class="nc" id="L647">			hold.add(tempStr);</span>

			String[] tempResults;

<span class="nc" id="L651">			result = myClassInfo.srchMethods(hold.get(0));</span>

<span class="nc bnc" id="L653" title="All 2 branches missed.">			for(int i=0; i&lt;hold.size(); i++){</span>

<span class="nc" id="L655">        			result = StringTools.searchStrings(result, hold.get(i));</span>

			}

<span class="nc" id="L659">		}</span>
<span class="nc" id="L660">		else result = myClassInfo.srchMethods(tempStr);                </span>
                    
<span class="nc bnc" id="L662" title="All 2 branches missed.">            if (result==null) resWin.append(&quot;No methods found.&quot;);             </span>
            else {
<span class="nc" id="L664">			addStrings(resWin, result);</span>
<span class="nc" id="L665">			resWin.setCaretPosition(0);</span>
		}
                
<span class="nc" id="L668">                panes.setSelectedIndex(RESWIN);</span>
                
            }             
            
<span class="nc" id="L672">        }</span>
    };
     
    /**
    * ActionListener calls srchMethods and getDocuments when &quot;Documents&quot;
    * is selected from pop-up menu. 
    * 
    */             
<span class="nc" id="L680">    ActionListener srchThenDocuments = new ActionListener(){</span>
        public void actionPerformed(ActionEvent e){
            
<span class="nc" id="L683">            srchMethods.actionPerformed(e);</span>
<span class="nc" id="L684">            getDocuments.actionPerformed(e);</span>
            
<span class="nc" id="L686">        }</span>
    };

    /**
    * ActionListener shows About information, selected from main menu.
    * 
    */             
<span class="nc" id="L693">    ActionListener showInfo = new ActionListener(){</span>
        public void actionPerformed(ActionEvent e){

            
<span class="nc" id="L697">           JOptionPane.showMessageDialog(null, getAppletInfo(),&quot;About ClassViewer&quot;, JOptionPane.INFORMATION_MESSAGE);</span>

<span class="nc" id="L699">        }</span>
    };
    
    /**
    * ActionListener go to Class Viewer Home webpage
    * 
    */             
<span class="nc" id="L706">    ActionListener goHome = new ActionListener(){</span>
        public void actionPerformed(ActionEvent e){
		
<span class="nc" id="L709">		callBrowser(&quot;http://classviewer.sourceforge.net&quot;);</span>

<span class="nc" id="L711">        }</span>
    };

    /**
    * ActionListener go to Basic Use Overview webpage
    * 
    */             
<span class="nc" id="L718">    ActionListener goBUO = new ActionListener(){</span>
        public void actionPerformed(ActionEvent e){
		
<span class="nc" id="L721">		callBrowser(&quot;http://classviewer.sourceforge.net/useoverview.html&quot;);</span>

<span class="nc" id="L723">        }</span>
    };
    
        /**
    * ActionListener go to Java Tools page at Java.net
    * 
    */             
<span class="nc" id="L730">    ActionListener goJN = new ActionListener(){</span>
        public void actionPerformed(ActionEvent e){
		
<span class="nc" id="L733">		callBrowser(&quot;http://community.java.net/javatools/&quot;);</span>

<span class="nc" id="L735">        }</span>
    };
    
<span class="nc" id="L738">    ActionListener goBeyond = new ActionListener(){</span>
        public void actionPerformed(ActionEvent e){
		
<span class="nc" id="L741">		callBrowser(&quot;http://beyondmund.blogspot.com/&quot;);</span>

<span class="nc" id="L743">        }</span>
    };

<span class="nc" id="L746">    ActionListener setClasspath = new ActionListener(){</span>
        public void actionPerformed(ActionEvent e){


<span class="nc" id="L750">        	String newPath = JOptionPane.showInputDialog(&quot;Set Classpath&quot;, classPath);</span>

<span class="nc bnc" id="L752" title="All 2 branches missed.">		if (newPath!=null){</span>
		
			try{
<span class="nc" id="L755">					System.setProperty(&quot;java.class.path&quot;, newPath);</span>

<span class="nc" id="L757">					classPath = System.getProperty(&quot;java.class.path&quot;);</span>

			}
<span class="nc" id="L760">			catch (java.security.AccessControlException access){</span>
<span class="nc" id="L761">				access.printStackTrace();</span>
<span class="nc" id="L762">				System.out.print(&quot;Crashed trying to set classpath&quot;);				</span>
<span class="nc" id="L763">			}</span>

		}

<span class="nc" id="L767">        }</span>
    };
    
<span class="nc" id="L770">    ActionListener editFile = new ActionListener(){</span>
        public void actionPerformed(ActionEvent e){
		
<span class="nc" id="L773">		doCommand(&quot;editFile&quot;, &quot;&quot;);</span>

<span class="nc" id="L775">        }</span>
    };

    
    /**
    * ActionListener shows Instructions, selected from main menu.
    * 
    */             
<span class="nc" id="L783">    ActionListener showInstructions = new ActionListener(){</span>
        public void actionPerformed(ActionEvent e){

<span class="nc" id="L786">		String instrStr=&quot;&quot;;</span>

<span class="nc" id="L788">        	instrStr+=&quot;Please input a full class name in the window below then&quot;;</span>
<span class="nc" id="L789">		instrStr+=&quot;\npress &lt;Enter&gt;\n&quot;;</span>
<span class="nc" id="L790">		instrStr+=&quot;\nCase matters but known package names like&quot;;</span>
<span class="nc" id="L791">		instrStr+=&quot;\njava.lang can be left off.\n&quot;;</span>
<span class="nc" id="L792">		instrStr+=&quot;\nSee packagedirectory.xml file for list of known packages&quot;;</span>
<span class="nc" id="L793">		instrStr+=&quot;\nand add packages as needed.\n\n&quot;;</span>

<span class="nc" id="L795">		instrStr+=&quot;After the methods load you can select a search string in the &quot;;</span>
<span class="nc" id="L796">		instrStr+=&quot;\nleft panel by highlighting some segment then right click.\n&quot;;</span>
<span class="nc" id="L797">		instrStr+=&quot;\nOr you can double-click on some string segment.\n&quot;;</span>
<span class="nc" id="L798">		instrStr+=&quot;\nOr you can enter a search string in the search field.  Searches\n&quot;;</span>
<span class="nc" id="L799">		instrStr+=&quot;in that field are space delimited and case insensitive.\n&quot;;</span>
<span class="nc" id="L800">		instrStr+=&quot;\nClick &lt;Documents&gt; button after a class is entered or after&quot;;</span>
<span class="nc" id="L801">		instrStr+=&quot;\nsearching for methods to get documents to a particular method.\n&quot;;</span>
<span class="nc" id="L802">		instrStr+=&quot;\nRecommended Java version is Java 1.5.0 or higher&quot;;</span>


<span class="nc" id="L805">        	resWin.setText(instrStr);</span>
		
<span class="nc" id="L807">		resWin.setCaretPosition(0);</span>
<span class="nc" id="L808">        }</span>
    };

    /**
    * ActionListener copies to System clipboard, selected from pop-up menu.
    * 
    */      
<span class="nc" id="L815">    ActionListener copyToClipBoard = new ActionListener(){</span>
        public void actionPerformed(ActionEvent e){
            
<span class="nc" id="L818">            String tempStr = txtArea.getSelectedText();</span>
<span class="nc bnc" id="L819" title="All 2 branches missed.">            if (tempStr!=null){</span>
               
<span class="nc" id="L821">                StringSelection selString = new StringSelection(tempStr);</span>
<span class="nc" id="L822">                getToolkit().getSystemClipboard().setContents(selString,selString);                                </span>
            }
            
<span class="nc" id="L825">        }</span>
    };

    /**
    * ActionListener gets Documents
    * 
    */       
<span class="nc" id="L832">    ActionListener getDocuments = new ActionListener(){</span>
	    
        public void actionPerformed(ActionEvent e){
		
<span class="nc" id="L836">		actionPerformed(e, resWinLine);</span>
		
<span class="nc" id="L838">		resWin.requestFocus();</span>
		
		int lineStart, lineEnd;
		
		try{
<span class="nc" id="L843">			lineStart = resWin.getLineStartOffset(resWinLine);</span>
<span class="nc" id="L844">			lineEnd = resWin.getLineEndOffset(resWinLine);</span>
			
<span class="nc" id="L846">			resWin.setCaretPosition(lineStart);</span>
<span class="nc" id="L847">			resWin.moveCaretPosition(lineEnd);</span>
		}
<span class="nc" id="L849">		catch (javax.swing.text.BadLocationException k){</span>
			//if there's this exception, for now, do nothing, and move on
<span class="nc" id="L851">		}</span>
<span class="nc" id="L852">	}</span>
        
        public void actionPerformed(ActionEvent e, int line){
<span class="nc" id="L855">		doDocuments(line);</span>
<span class="nc" id="L856">	}</span>

    };
    
    private boolean doDocuments(int line){
	    
<span class="nc" id="L862">            String className, packageName, tempStr=null;            </span>
            
<span class="nc bnc" id="L864" title="All 2 branches missed.">            if (myClassInfo!=null){</span>
                
<span class="nc" id="L866">                boolean check = false;</span>
<span class="nc" id="L867">		boolean found = false;</span>
                String[] tempArray;
                
<span class="nc" id="L870">                MethodData mData = myClassInfo.getFoundMethod(line);</span>
                
<span class="nc bnc" id="L872" title="All 2 branches missed.">                if (mData!=null){ </span>
<span class="nc" id="L873">                    packageName = mData.getMethPackage();</span>
<span class="nc" id="L874">                    className = mData.getMethClass();</span>
                }
                else {
                    
<span class="nc" id="L878">                    packageName = myClassInfo.getClassPackage();</span>
<span class="nc" id="L879">                    className = myClassInfo.getClassName();</span>
                }
		
<span class="nc bnc" id="L882" title="All 2 branches missed.">		if (locManager==null){</span>
			
<span class="nc" id="L884">			locManager = new DirManager(mainRun);</span>
<span class="nc" id="L885">			location = locManager.getDirectory();</span>
		
		}
<span class="nc" id="L888">		String locString = (String)location.get(packageName);</span>
                    
<span class="nc bnc" id="L890" title="All 8 branches missed.">            if ((locString!=null &amp;&amp; locString.trim().compareTo(&quot;&quot;)!=0) || packageName.indexOf(&quot;java.&quot;)!=-1 || packageName.indexOf(&quot;javax.&quot;)!=-1){</span>

<span class="nc" id="L892">            	    String runString=&quot;&quot;;</span>
<span class="nc" id="L893">		    String localBrowser=&quot;&quot;;</span>


<span class="nc bnc" id="L896" title="All 2 branches missed.">		    if (locString!=null) runString=locString;</span>
<span class="nc bnc" id="L897" title="All 2 branches missed.">		    else if (packageName.indexOf(&quot;java.&quot;)!= -1) runString = (String)location.get(&quot;java.lang&quot;);</span>
<span class="nc bnc" id="L898" title="All 2 branches missed.">		    else if (packageName.indexOf(&quot;javax.&quot;)!= -1) runString = (String)location.get(&quot;javax.swing.border&quot;);</span>
			
	                        
<span class="nc" id="L901">                    tempStr = className.replace('.','/');                </span>
                        
                    try{
                        
                        
<span class="nc bnc" id="L906" title="All 2 branches missed.">                        if (tempStr!=null){</span>
<span class="nc" id="L907">                            tempStr+=&quot;.html&quot;;</span>
<span class="nc bnc" id="L908" title="All 2 branches missed.">                            if (mData!=null){</span>
<span class="nc" id="L909">                                String tempStr2 = mData.getMethName();</span>

<span class="nc bnc" id="L911" title="All 2 branches missed.">                                if (tempStr2.indexOf(&quot;,&quot;)!=-1){</span>
<span class="nc" id="L912">                                    StringBuffer buff = new StringBuffer(tempStr2);</span>
<span class="nc" id="L913">                                    int pos=0;</span>
                                                                        
                                    do{
<span class="nc" id="L916">                                        pos = buff.toString().indexOf(&quot;,&quot;, pos);                                        </span>
                                        
                                        //buff.insert(++pos, ' '); 
<span class="nc" id="L919">                                        buff.insert(++pos, '%'); </span>
<span class="nc" id="L920">                                        buff.insert(++pos, '2');</span>
<span class="nc" id="L921">                                        buff.insert(++pos, '0');	</span>
			
                                        
<span class="nc bnc" id="L924" title="All 2 branches missed.">                                    }while (buff.toString().indexOf(&quot;,&quot;, pos)!=-1);</span>
                                    
<span class="nc" id="L926">                                    tempStr2 = buff.toString();</span>
                                }
<span class="nc" id="L928">                                tempStr+=&quot;#&quot;+tempStr2;</span>
                            }
<span class="nc" id="L930">                            runString+=tempStr;</span>
                        }

<span class="nc" id="L933">                        callBrowser(runString);</span>
			
<span class="nc" id="L935">			return true;</span>
		    }
<span class="nc" id="L937">		    catch (NullPointerException j){</span>

<span class="nc" id="L939">			System.out.println(&quot;Null pointer exception&quot;); </span>
<span class="nc" id="L940">			j.printStackTrace();</span>
<span class="nc" id="L941">			return false;</span>
		    }            
                        
                }
<span class="nc bnc" id="L945" title="All 2 branches missed.">		else if (isLocalFile){</span>

<span class="nc bnc" id="L947" title="All 2 branches missed.">			if (doCommand(&quot;editMethod&quot;, mData.getMethName())) return true;</span>
<span class="nc" id="L948">			else return false;</span>
			
		}
<span class="nc" id="L951">                else resWin.setText(&quot;Unknown package.  Unable to lookup Documents.\n  Please add package to packagedirectory.xml file.&quot;);</span>
<span class="nc" id="L952">		return false;</span>
            }
	    
<span class="nc" id="L955">	    return false;</span>
	    
	    
    }
    
    public boolean callBrowser(String runString){
	    
<span class="nc" id="L962">	    String tempStr=&quot;&quot;;</span>

<span class="nc bnc" id="L964" title="All 2 branches missed.">	    if (locManager==null) locManager = new DirManager(mainRun);</span>
	    
<span class="nc bnc" id="L966" title="All 2 branches missed.">	    if (!mainRun){</span>
		    try{
<span class="nc" id="L968">			    AppletContext appC = getAppletContext();</span>
<span class="nc" id="L969">			    URL ur = new URL(runString);</span>
<span class="nc" id="L970">			    appC.showDocument(ur,&quot;_blank&quot;);</span>
<span class="nc" id="L971">		    }catch (MalformedURLException l){</span>
<span class="nc" id="L972">			    l.printStackTrace();</span>
<span class="nc" id="L973">			    return false;</span>
<span class="nc" id="L974">		    }</span>
	    }
	    else{
		    try{
<span class="nc" id="L978">			    Runtime r = Runtime.getRuntime();</span>

<span class="nc" id="L980">			    tempStr = locManager.getLocalBrowser()+&quot; &quot;;</span>
<span class="nc" id="L981">			    tempStr+=runString;</span>
<span class="nc" id="L982">			    r.exec(tempStr);</span>
<span class="nc" id="L983">		    }catch (Exception m){</span>
<span class="nc" id="L984">			    m.printStackTrace();</span>
<span class="nc" id="L985">			    JOptionPane.showMessageDialog(null, &quot;Run call: &quot;+tempStr, &quot;Error calling browser&quot;, JOptionPane.ERROR_MESSAGE);	</span>

<span class="nc" id="L987">			    return false;</span>
<span class="nc" id="L988">		    }</span>
	    }
	    
<span class="nc" id="L991">	    return true;</span>
	    	    
    }



    private boolean doCommand(String comm, String infoString){
	    
<span class="nc" id="L999">	    String tempStr=&quot;&quot;;</span>

<span class="nc bnc" id="L1001" title="All 2 branches missed.">	    if (locManager==null) locManager = new DirManager(mainRun);</span>

	    
<span class="nc bnc" id="L1004" title="All 2 branches missed.">	    if (mainRun){</span>
			
<span class="nc bnc" id="L1006" title="All 2 branches missed.">		    if (comm.compareTo(&quot;editFile&quot;)==0){</span>

<span class="nc" id="L1008">			tempStr=findFile();</span>
<span class="nc bnc" id="L1009" title="All 2 branches missed.">			if (tempStr==null){</span>
          		
<span class="nc" id="L1011">				JOptionPane.showMessageDialog(null, &quot;File not found.  Please check your classpath.&quot;, &quot;Error&quot;, JOptionPane.ERROR_MESSAGE);	</span>
<span class="nc" id="L1012">				return false;</span>

			}
<span class="nc" id="L1015">			else tempStr = file_editor+&quot; &quot;+tempStr;</span>
			
		
		    }
<span class="nc bnc" id="L1019" title="All 2 branches missed.">		    else if (comm.compareTo(&quot;editMethod&quot;)==0){</span>

<span class="nc" id="L1021">			int lineNum=0;</span>

<span class="nc" id="L1023">			tempStr=findFile();</span>
<span class="nc bnc" id="L1024" title="All 2 branches missed.">			if (tempStr==null){</span>
          		
<span class="nc" id="L1026">				JOptionPane.showMessageDialog(null, &quot;File not found.  Please check your classpath.&quot;, &quot;Error&quot;, JOptionPane.ERROR_MESSAGE);	</span>
<span class="nc" id="L1027">				return false;</span>

			}

<span class="nc" id="L1031">			lineNum = getMethodLineNum(tempStr, infoString);			</span>
<span class="nc bnc" id="L1032" title="All 2 branches missed.">			if (lineNum!=-1){</span>
<span class="nc bnc" id="L1033" title="All 2 branches missed.">				if (locManager.acceptsLineNumber()) tempStr = file_editor+&quot; &quot;+tempStr+&quot; &quot;+locManager.lineNumberParameter()+lineNum;</span>
           			else{

<span class="nc" id="L1036">					tempStr = file_editor+&quot; &quot;+tempStr;</span>
<span class="nc" id="L1037">					JOptionPane.showMessageDialog(null, &quot;Not all text editors will accept the line number as an argument so giving it to you here.\nClick ok and your text editor will run.  Method is at line# &quot;+lineNum,&quot;Line Number Information&quot;, JOptionPane.INFORMATION_MESSAGE);</span>
				}
			}
			else {

<span class="nc" id="L1042">				JOptionPane.showMessageDialog(null,  &quot;Error reading file at: &quot;+tempStr, &quot;File read error&quot;, JOptionPane.ERROR_MESSAGE);	</span>
			}
			
		
		    }

<span class="nc bnc" id="L1048" title="All 2 branches missed.">		    if (tempStr!=null){	</span>

<span class="nc" id="L1050">			System.out.println(&quot;tempStr=&quot;+tempStr);</span>

		    	try{
<span class="nc" id="L1053">			    Runtime r = Runtime.getRuntime();</span>

<span class="nc" id="L1055">			    r.exec(tempStr);</span>
<span class="nc" id="L1056">		    	}catch (Exception m){</span>
<span class="nc" id="L1057">			    m.printStackTrace();</span>
<span class="nc" id="L1058">			    JOptionPane.showMessageDialog(null,  &quot;Run call: &quot;+tempStr, &quot;Runtime error&quot;, JOptionPane.ERROR_MESSAGE);	</span>

<span class="nc" id="L1060">			    return false;</span>
<span class="nc" id="L1061">		    	}</span>

<span class="nc" id="L1063">			return true;</span>
		    }
			
	    }
<span class="nc" id="L1067">	    return false;</span>
	
	    	    
    }


    private String findFile(){

<span class="nc" id="L1075">		String packageInfo = myClassInfo.getClassName();</span>

<span class="nc" id="L1077">		String primary_path=&quot;&quot;;</span>

<span class="nc" id="L1079">		primary_path = packageInfo.replace('.', file_separator.charAt(0));</span>

<span class="nc" id="L1081">		primary_path+=&quot;.java&quot;;</span>


<span class="nc" id="L1084">		String full_path=null;</span>
		String[] bases;

<span class="nc" id="L1087">		StringList partials = new StringList();</span>
<span class="nc" id="L1088">		String buildString=&quot;&quot;;</span>
		char addChar;

<span class="nc bnc" id="L1091" title="All 2 branches missed.">		for (int i=0; i&lt;classPath.length(); i++){</span>

<span class="nc" id="L1093">			addChar = classPath.charAt(i);</span>
			
<span class="nc bnc" id="L1095" title="All 2 branches missed.">			if (addChar!=';') buildString+=addChar;</span>
			else{

<span class="nc" id="L1098">				partials.add(buildString);</span>

<span class="nc" id="L1100">				buildString=&quot;&quot;;</span>
			}
			
			
		}

<span class="nc bnc" id="L1106" title="All 2 branches missed.">		if (buildString.length()!=0) partials.add(buildString);</span>


<span class="nc" id="L1109">		bases = partials.toArray();</span>

		File test_path;
		String tempPath;

<span class="nc bnc" id="L1114" title="All 2 branches missed.">		for (int i=0; i&lt;bases.length; i++){</span>

<span class="nc" id="L1116">			tempPath = bases[i];</span>

<span class="nc bnc" id="L1118" title="All 2 branches missed.">			if (tempPath.charAt(tempPath.length()-1)!=file_separator.charAt(0)) tempPath+=file_separator;	</span>

<span class="nc" id="L1120">			test_path = new File(tempPath+primary_path);</span>
<span class="nc bnc" id="L1121" title="All 2 branches missed.">			if (test_path.exists()){</span>

<span class="nc" id="L1123">				full_path = tempPath+primary_path;</span>
			}
		}


<span class="nc" id="L1128">		return full_path;</span>
	
    }

    private int getMethodLineNum(String file_path, String methodName){

<span class="nc" id="L1134">		StringList fullMethod = new StringList();</span>

<span class="nc" id="L1136">		String buildStr=&quot;&quot;;</span>
		char addChar;

<span class="nc" id="L1139">		fullMethod.add(&quot;public&quot;);</span>

		int pos;
<span class="nc" id="L1142">		pos = methodName.indexOf(&quot;(&quot;);</span>

<span class="nc" id="L1144">		fullMethod.add(methodName.substring(0, pos));</span>


<span class="nc bnc" id="L1147" title="All 2 branches missed.">		for (int i=pos+1; i&lt;methodName.length(); i++){</span>

<span class="nc" id="L1149">			addChar = methodName.charAt(i);</span>

<span class="nc bnc" id="L1151" title="All 2 branches missed.">			if (addChar==')'){</span>
<span class="nc" id="L1152">				fullMethod.add(removePackages(buildStr));</span>
<span class="nc" id="L1153">				break;</span>
			}

<span class="nc bnc" id="L1156" title="All 2 branches missed.">			if (addChar!=',') buildStr+=addChar;</span>

<span class="nc bnc" id="L1158" title="All 4 branches missed.">			if (addChar==' ' || addChar==','){</span>
<span class="nc" id="L1159">				fullMethod.add(removePackages(buildStr));</span>
<span class="nc" id="L1160">				buildStr=&quot;&quot;;</span>
			}

		}


<span class="nc" id="L1166">		int count=-1;</span>

		try{


<span class="nc" id="L1171">			File temp_file = new File(file_path);</span>
<span class="nc" id="L1172">			FileReader fileReader = new FileReader(temp_file);</span>
<span class="nc" id="L1173">			BufferedReader reader = new BufferedReader(fileReader);</span>

			String tempLine;

<span class="nc" id="L1177">			count = 0;</span>

<span class="nc" id="L1179">			String[] method_array = fullMethod.toArray();</span>

<span class="nc" id="L1181">			boolean testArgs = false;</span>
<span class="nc" id="L1182">			int i=0;</span>


<span class="nc bnc" id="L1185" title="All 2 branches missed.">			while ((tempLine = reader.readLine())!=null){</span>

<span class="nc" id="L1187">				pos=0;</span>

<span class="nc" id="L1189">				count++;</span>

<span class="nc" id="L1191">				pos = tempLine.indexOf(method_array[0]);</span>

<span class="nc bnc" id="L1193" title="All 2 branches missed.">				if (pos!=-1){</span>

<span class="nc" id="L1195">					testArgs = true;</span>
<span class="nc" id="L1196">					i=1;</span>

<span class="nc bnc" id="L1198" title="All 4 branches missed.">					while ( i&lt;method_array.length &amp;&amp; testArgs){</span>

<span class="nc" id="L1200">						pos = tempLine.indexOf(method_array[i]);</span>

<span class="nc bnc" id="L1202" title="All 2 branches missed.">						if (pos==-1) testArgs = false;</span>
<span class="nc" id="L1203">						else tempLine = tempLine.substring(pos);</span>
			
<span class="nc" id="L1205">						i++;</span>
					}
				}

<span class="nc bnc" id="L1209" title="All 2 branches missed.">				if (testArgs) break;</span>
					
			}
	

<span class="nc" id="L1214">		} catch (Exception e){</span>
<span class="nc" id="L1215">			e.printStackTrace();</span>
<span class="nc" id="L1216">			return -1;</span>
<span class="nc" id="L1217">		}</span>



<span class="nc" id="L1221">		return count;</span>
	
    }
               
    public String removeDeclarations(String in){
        
<span class="nc" id="L1227">        String tempStr=null;</span>
        
<span class="nc" id="L1229">        tempStr = myClassInfo.getClassName()+'.';</span>
        
<span class="nc" id="L1231">        String[] known = {&quot;public &quot;,tempStr};</span>
                               
<span class="nc" id="L1233">        return StringTools.removeStrings(in, known);        </span>
    }
    
    public String removePackages(String in){
        
        
<span class="nc" id="L1239">        String[] known = myClassInfo.knownPackages;</span>
        
<span class="nc" id="L1241">        return StringTools.removeStrings(in, known);</span>
    }       
       
                
    private void addStrings(JTextArea textArea, String[] strings){
                                
<span class="nc bnc" id="L1247" title="All 2 branches missed.">        if (strings!=null){</span>
            
            String tempStr;
            
<span class="nc bnc" id="L1251" title="All 2 branches missed.">            for (int i=0; i&lt;strings.length; i++) {</span>
                
<span class="nc" id="L1253">                tempStr = removePackages(removeDeclarations(strings[i]));</span>
                
<span class="nc" id="L1255">                textArea.append(tempStr+'\n');</span>
            }
        }
<span class="nc" id="L1258">    }</span>
    
    private void addStrings(JTextArea textArea, String[] strings, String[] output){
                                
<span class="nc bnc" id="L1262" title="All 2 branches missed.">        if (strings!=null){</span>
		
<span class="nc" id="L1264">		output = new String[strings.length];</span>
		
		String tempStr;
		
<span class="nc bnc" id="L1268" title="All 2 branches missed.">		for (int i=0; i&lt;strings.length; i++) {</span>
<span class="nc" id="L1269">			tempStr = removePackages(removeDeclarations(strings[i]));</span>
<span class="nc" id="L1270">			textArea.append(tempStr+'\n');</span>
<span class="nc" id="L1271">			output[i] = tempStr;</span>
		}
	}
<span class="nc" id="L1274">    }</span>
    
    private void addInterfaces(JTextArea textArea){
        
<span class="nc" id="L1278">        String[] strings = myClassInfo.printInterfaces();</span>
                        
<span class="nc bnc" id="L1280" title="All 2 branches missed.">        if (strings!=null){</span>
<span class="nc" id="L1281">            textArea.append(&quot;Interfaces:&quot;+'\n');</span>
<span class="nc bnc" id="L1282" title="All 2 branches missed.">            for (int i=0; i&lt;strings.length; i++) {</span>
<span class="nc" id="L1283">                textArea.append(strings[i]+'\n');</span>
            }
        }
<span class="nc" id="L1286">        else textArea.append(&quot;No interfaces.&quot;);</span>
<span class="nc" id="L1287">    }</span>
    
    private void addConstructors(JTextArea textArea){
        
<span class="nc" id="L1291">        String[] strings = myClassInfo.printConstructors();</span>
                        
<span class="nc bnc" id="L1293" title="All 2 branches missed.">        if (strings!=null){</span>
<span class="nc" id="L1294">            textArea.append(&quot;Constructors:&quot;+'\n');</span>
            String tempStr;
            
<span class="nc bnc" id="L1297" title="All 2 branches missed.">            for (int i=0; i&lt;strings.length; i++) {</span>
                
<span class="nc" id="L1299">                tempStr = removePackages(removeDeclarations(strings[i]));</span>
                
<span class="nc" id="L1301">                textArea.append(tempStr+'\n');</span>
            }
        }
<span class="nc bnc" id="L1304" title="All 2 branches missed.">        else if (!myClassInfo.isInterface()) textArea.setText(&quot;No public constructors.&quot;);</span>
<span class="nc" id="L1305">        else textArea.append(&quot;It's an interface.&quot;);</span>
<span class="nc" id="L1306">    }</span>
    
    private void addFields(JTextArea textArea){
<span class="nc" id="L1309">        String[] strings = myClassInfo.printFields();      </span>
            
<span class="nc bnc" id="L1311" title="All 2 branches missed.">        if (strings!=null){</span>
            
            String tempStr;
            
<span class="nc bnc" id="L1315" title="All 2 branches missed.">            for (int i=0; i&lt;strings.length; i++) {</span>
                
<span class="nc" id="L1317">                tempStr = removePackages(removeDeclarations(strings[i]));</span>
                    
<span class="nc" id="L1319">                textArea.append(tempStr+'\n');</span>
            }
        }
<span class="nc" id="L1322">        else textArea.setText(&quot;No public fields.&quot;);</span>
    
<span class="nc" id="L1324">    }</span>

    public void trySettingFocus(){

	//method call for setting focus to input field

<span class="nc" id="L1330">	txt.requestFocus();</span>

<span class="nc" id="L1332">    }      </span>
                         
    public static void main(String[] args)throws Exception{
	    
<span class="fc" id="L1336">	    mainRun = true;</span>
	    
	    JApplet viewer;
	    
<span class="pc bpc" id="L1340" title="1 of 2 branches missed.">	    if (args.length==1){</span>
		    
<span class="nc" id="L1342">		    viewer = new ClassViewer(args[0].trim());</span>
	    }
<span class="nc" id="L1344">	    else viewer = new ClassViewer();</span>
	    
<span class="nc" id="L1346">	    JFrame frame = new JFrame(&quot;ClassViewer&quot;);</span>
	    
<span class="nc" id="L1348">	    frame.addWindowListener(new WindowAdapter() {</span>
		    
		    public void windowClosing(WindowEvent e) {
			    
<span class="nc" id="L1352">			    System.exit(0);</span>
<span class="nc" id="L1353">		    }</span>
	    });
	    
<span class="nc" id="L1356">	    frame.getContentPane().add(viewer);</span>
	    
	    int width,height;

	    double width_adjust,height_adjust;
	    
<span class="nc" id="L1362">	    Dimension dim  = frame.getToolkit().getScreenSize();</span>

	    //using screen resolution of my laptop where I'm currently developing
<span class="nc" id="L1365">	    width_adjust = 1280/dim.getWidth();	</span>
<span class="nc" id="L1366">	    height_adjust = 800/dim.getHeight();	</span>
	    
<span class="nc" id="L1368">	    width =(int)(width_adjust*0.85*dim.getWidth());</span>
<span class="nc" id="L1369">	    height =(int)(height_adjust*0.85*dim.getHeight());</span>
	    
<span class="nc" id="L1371">	    frame.setSize(width, height);</span>
	    
<span class="nc" id="L1373">	    viewer.setSize(width,height);</span>
	    
<span class="nc" id="L1375">	    viewer.init();</span>
	    
<span class="nc" id="L1377">	    frame.setVisible(true);</span>
	    
	    //sets focus after start of app
	    
<span class="nc" id="L1381">	    ((ClassViewer)viewer).trySettingFocus();</span>
	    
<span class="nc" id="L1383">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>