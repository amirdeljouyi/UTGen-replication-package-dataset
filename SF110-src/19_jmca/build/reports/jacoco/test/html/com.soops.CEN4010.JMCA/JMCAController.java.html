<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>JMCAController.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">19_jmca</a> &gt; <a href="index.source.html" class="el_package">com.soops.CEN4010.JMCA</a> &gt; <span class="el_source">JMCAController.java</span></div><h1>JMCAController.java</h1><pre class="source lang-java linenums">/*
 JMCAController.java

 Contains class JMCAController
 JMCAController accepts a filename as input, then calls other classes to
 1) parse the file and get the Abstract Syntax Tree (AST)
 2) pass the AST to the cohesion analyzer class
 3) get the report output from the analyzer


 CEN4010
 FALL 2005
 GROUP2

 Curt Hayashida, Scott Springer, Ian Cole


 Revision History:
 10/15/2005 - IC - Quick &amp; Dirty Class Creation for prototype
 10/24/2005 - IC - First Integration pass with GUI code
           1) Added to package
           2) Added comments to the analyze() method
             based on Scott's early design
 10/30/2005 - IC - Convert to true MVC (Model-View-Controller) per the grading notes
      1) Changing from JMCAFrame has a JMCAController to
       JMCAController (Controller) has a JMCAFrame (View)
      2) Removed constructor that took filename - unneeded with MVC
      3) Removed get / set filename - unneeded
      4) Removed getOutput - unneeded
      5) Main function now target for application execution
      6) Main function updated to MVC pattern
      7) Converted to use JMCAView

 11/13/2005 - SS - Change parser to JMCAParser, analyzer to JMCAAnalyzer

 Compilation (from project directory)
 javac -d . *.java

 Execution (from top-level project directory)
 java com.soops.CEN4010.JMCA.JMCAController


 */


package com.soops.CEN4010.JMCA;

import java.io.Reader;
import java.io.IOException;
import java.io.FileReader;
import java.io.File;
import java.awt.event.*;
import java.awt.Toolkit;
import com.soops.CEN4010.JMCA.JParser.parseTest.JMCAParserTestFrame;
import javax.swing.tree.DefaultMutableTreeNode;
import java.awt.Dimension;


/**
 *
 * &lt;p&gt;Title: Group 2 Project &lt;/p&gt;
 *
 * &lt;p&gt;Class: CEN4010 Fall 2005&lt;/p&gt;
 *
 * &lt;p&gt;Description: Controller manages subsystems of JMCA &lt;/p&gt;
 *
 * &lt;p&gt;Instructor Dr. Stoeklin&lt;/p&gt;
 *
 * @author Group 2
 */

public class JMCAController {
    private static final boolean DEVELOPMENT = true;

    private static JMCAView view;

    /**
     * default constructor
     */
<span class="nc" id="L80">    JMCAController() {</span>
<span class="nc" id="L81">    }</span>


    /**
     *   controls Parser and Analyzer
     *     analyze will return String with analysis or error text
     * @return String
     */
    public static String analyze(String filename) {

        /**
         * implement placeholder implementations of Parser and Analyzer
         *       Reader rdr = new FileReader (new File (filename));
         *       ASTNode rootNode = new JMCAParser().parse(rdr);
         *       output = new JMCAAnalyzer().analyze(rootNode);
         */
<span class="nc bnc" id="L97" title="All 4 branches missed.">        if (filename != null &amp;&amp; !filename.equals(&quot;&quot;)) {</span>
<span class="nc" id="L98">            Reader rdr = null;</span>
            try {
<span class="nc" id="L100">                rdr = new FileReader(new File(filename));</span>
<span class="nc" id="L101">            } catch (IOException ie) {</span>
<span class="nc" id="L102">                System.err.println(ie.getMessage());</span>
<span class="nc" id="L103">            }</span>
            /**
             * call parser
             */
            // ASTNode rootNode = new DummyParser().parse(rdr);
<span class="nc" id="L108">            ASTNode rootNode = new JMCAParser().parse(rdr);</span>
<span class="nc bnc" id="L109" title="All 2 branches missed.">            if (DEVELOPMENT &amp;&amp; rootNode != null)  showTree(rootNode, filename);</span>
            /**
             * call analyzer
             */
            //  Analyzer analyzer = new UILayoutDisplayAnalyzer();
<span class="nc" id="L114">            Analyzer analyzer = new JMCAAnalyzer();</span>
<span class="nc" id="L115">            analyzer.setFileName(filename);</span>
<span class="nc" id="L116">            return analyzer.analyze(rootNode);</span>
        }

<span class="nc" id="L119">        return new String(&quot;ERROR: Filename not entered.&quot;);</span>

    } //end analyze()


    private static void showTree(ASTNode tmp, String filename) {
<span class="nc" id="L125">        DefaultMutableTreeNode rootNode = tmp.createTree();</span>

<span class="nc" id="L127">        JMCAParserTestFrame frame = new JMCAParserTestFrame(rootNode, filename);</span>

<span class="nc" id="L129">        frame.validate();</span>

// Center the window
<span class="nc" id="L132">        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();</span>
<span class="nc" id="L133">        Dimension frameSize = frame.getSize();</span>
<span class="nc bnc" id="L134" title="All 2 branches missed.">        if (frameSize.height &gt; screenSize.height) {</span>
<span class="nc" id="L135">            frameSize.height = screenSize.height;</span>
        }
<span class="nc bnc" id="L137" title="All 2 branches missed.">        if (frameSize.width &gt; screenSize.width) {</span>
<span class="nc" id="L138">            frameSize.width = screenSize.width;</span>
        }
<span class="nc" id="L140">        frame.setLocation((screenSize.width - frameSize.width) / 2,</span>
                          (screenSize.height - frameSize.height) / 2);
<span class="nc" id="L142">        frame.setVisible(true);</span>

<span class="nc" id="L144">    }</span>


    //main function for JMCA Application
    public static void main(String[] args) {

<span class="nc" id="L150">        view = new JMCAView();</span>
        // in this case our model is the Parser / Analyzer

        //set action listeners here....
<span class="nc" id="L154">        view.setAnalyzeListener(new ActionListener() {</span>
            public void actionPerformed(ActionEvent e) {

<span class="nc" id="L157">                view.updateDisplay(analyze(view.getFilename()));</span>
<span class="nc" id="L158">            }</span>
        }); //end setAnalyzeListener

<span class="nc" id="L161">        view.setSelectFileListener(new ActionListener() {</span>
            public void actionPerformed(ActionEvent e) {
<span class="nc" id="L163">                view.chooseFile();</span>
<span class="nc" id="L164">            }</span>
        }); //end setSelectFileListener

<span class="nc" id="L167">    } //end main</span>


} //end class
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>