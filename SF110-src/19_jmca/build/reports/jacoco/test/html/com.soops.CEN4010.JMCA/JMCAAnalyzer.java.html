<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>JMCAAnalyzer.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">19_jmca</a> &gt; <a href="index.source.html" class="el_package">com.soops.CEN4010.JMCA</a> &gt; <span class="el_source">JMCAAnalyzer.java</span></div><h1>JMCAAnalyzer.java</h1><pre class="source lang-java linenums">package com.soops.CEN4010.JMCA;

import java.util.*;

/**
 *
 * &lt;p&gt;Title: JMCAAnalyzer &lt;/p&gt;
 *
 * &lt;p&gt;Description: implements Analyzer&lt;/p&gt;
 *
 * Group2 for CEN4010 at FSU - Fall 2005
 */
<span class="fc" id="L13">public class JMCAAnalyzer implements Analyzer {</span>

<span class="fc" id="L15">    private String fileName = &quot;&quot;;</span>
<span class="fc" id="L16">    private StringBuilder output = new StringBuilder();</span>
<span class="fc" id="L17">    private java.util.HashSet&lt;String&gt; classList = null;</span>

    private static final boolean DEVELOPMENT = false;


    /**
     * Analyze the ASTree and return a formatted string
     * @param root ASTNode
     * @return String
     */
    public String analyze(ASTNode root) {
<span class="pc bpc" id="L28" title="1 of 2 branches missed.">        if (root == null) {</span>
<span class="fc" id="L29">            output.append(&quot;File did not parse correctly&quot;);</span>
<span class="fc" id="L30">            return output.toString();</span>
        }
<span class="nc" id="L32">        setHeader();</span>
        //  for each class
<span class="nc bnc" id="L34" title="All 2 branches missed.">        for (ASTNode node : root.list) {</span>
<span class="nc" id="L35">            analyzeClass(node);</span>
<span class="nc" id="L36">        }</span>

<span class="nc" id="L38">        return output.toString();</span>
    }

    /**
     * top level analyzer for each class &lt;br&gt;
     * calls analyzeMethod for each method
     * @param node ASTNode
     */
    private void analyzeClass(ASTNode node) {
        // list of class variables
<span class="nc" id="L48">        classList = new HashSet&lt;String&gt;();</span>
<span class="nc" id="L49">        java.util.ArrayList&lt;ASTNode&gt; methodList = new ArrayList&lt;ASTNode&gt;();</span>

        // print class header
<span class="nc" id="L52">        output.append(&quot;\nClass: &quot; + node.getIdentity() + &quot;\n\n&quot;);</span>
<span class="nc" id="L53">        output.append(</span>
                &quot;Method Name                             Cohesion Level\n&quot;);
<span class="nc" id="L55">        output.append(</span>
                &quot;--------------------------------------------------------------\n&quot;);

        // save each class variable in classList
<span class="nc bnc" id="L59" title="All 2 branches missed.">        for (ASTNode childNode : node.list) {</span>
<span class="nc bnc" id="L60" title="All 2 branches missed.">            if (childNode.getType().equals(&quot;ClassVariableDeclaration&quot;)) {</span>
<span class="nc" id="L61">                classList.add(childNode.getIdentity());</span>
            }
<span class="nc" id="L63">        }</span>

        //  do for each method
<span class="nc bnc" id="L66" title="All 2 branches missed.">        for (ASTNode childNode : node.list) {</span>
<span class="nc bnc" id="L67" title="All 2 branches missed.">            if (childNode.getType().equals(&quot;MethodDeclaration&quot;)) {</span>
<span class="nc" id="L68">                analyzeMethod(childNode);</span>
            }
<span class="nc" id="L70">        }</span>
<span class="nc" id="L71">    } // end method analyzeClass</span>

    /**
     * called for each method
     * @param node ASTNode
     */
    private void analyzeMethod(ASTNode node) {
<span class="nc" id="L78">        output.append(node.getIdentity());</span>

        /**
         * list of all statements
         */
<span class="nc" id="L83">        ArrayList&lt;StatementDS&gt; statementList = new ArrayList&lt;StatementDS&gt;();</span>
        /**
         *analyze all statements and add them to the statementList
         */
<span class="nc" id="L87">        statements(node, statementList, false, false);</span>
        /**
         * HashMap of all modified variables
         */
<span class="nc" id="L91">        HashMap&lt;String, StatementElement&gt; modifiedVariables =</span>
                new HashMap&lt;String, StatementElement&gt;();
        // build semantics for each statement
<span class="nc bnc" id="L94" title="All 2 branches missed.">        for (StatementDS tmpDS : statementList) {</span>
<span class="nc bnc" id="L95" title="All 2 branches missed.">            if (classList.contains(tmpDS.getLVal().getElementName())) {</span>
<span class="nc" id="L96">                tmpDS.getLVal().setType(StatementElement.variableType.</span>
                                        ClassVariable);
            }
<span class="nc bnc" id="L99" title="All 2 branches missed.">            if (tmpDS.getType() != null) {</span>
<span class="nc bnc" id="L100" title="All 2 branches missed.">                if (tmpDS.getType().equals(StatementDS.statementType.Assignment) ||</span>
<span class="nc bnc" id="L101" title="All 2 branches missed.">                    tmpDS.getType().equals(StatementDS.statementType.PostInc) ||</span>
<span class="nc bnc" id="L102" title="All 2 branches missed.">                    tmpDS.getType().equals(StatementDS.statementType.PreInc)) {</span>
<span class="nc" id="L103">                    tmpDS.getLVal().setModified(true);</span>
<span class="nc" id="L104">                    modifiedVariables.put(tmpDS.getLVal().getElementName(),</span>
<span class="nc" id="L105">                                          tmpDS.getLVal());</span>
                }
            }
            // set for selection
<span class="nc" id="L109">            tmpDS.getLVal().setInSelection(tmpDS.isInSelection());</span>
            // set for iteration
<span class="nc" id="L111">            tmpDS.getLVal().setInIteration(tmpDS.isInIteration());</span>
            // add modified variables to the chain of variables affecting this element
<span class="nc" id="L113">            ArrayList&lt;StatementElement&gt; rVals = tmpDS.getRVals();</span>
<span class="nc bnc" id="L114" title="All 2 branches missed.">            for (StatementElement rval : rVals) {</span>
<span class="nc" id="L115">                StatementElement tmpEl = modifiedVariables.get(rval.</span>
<span class="nc" id="L116">                        getElementName());</span>
<span class="nc bnc" id="L117" title="All 2 branches missed.">                if (tmpEl != null &amp;&amp;</span>
<span class="nc bnc" id="L118" title="All 2 branches missed.">                    !tmpEl.getElementName().equals(tmpDS.getLVal().</span>
<span class="nc" id="L119">                        getElementName())) {</span>
<span class="nc" id="L120">                    tmpDS.getLVal().addModifier(tmpEl);</span>
<span class="nc bnc" id="L121" title="All 2 branches missed.">                } else if (!rval.getElementName().equals(tmpDS.getLVal().</span>
<span class="nc" id="L122">                        getElementName())) {</span>
<span class="nc" id="L123">                    tmpDS.getLVal().addModifier(rval);</span>
                }

<span class="nc bnc" id="L126" title="All 2 branches missed.">                if (rval.hasBeenModified()) {</span>
<span class="nc" id="L127">                    tmpDS.getLVal().addModifier(rval);</span>
<span class="nc" id="L128">                    modifiedVariables.put(rval.getElementName(), rval);</span>
                }

<span class="nc" id="L131">            }</span>

<span class="nc" id="L133">        }</span>
<span class="nc" id="L134">        int modifiedClassVariables = 0;</span>
<span class="nc" id="L135">        int classVariableWithModifiers = 0;</span>
<span class="nc" id="L136">        int modifiedLocVariables = 0;</span>
<span class="nc" id="L137">        boolean iterative = false;</span>
<span class="nc" id="L138">        boolean selective = false;</span>
<span class="nc" id="L139">        String cohesionLevel = &quot;&quot;;</span>
<span class="nc" id="L140">        boolean firstModifiedClassVariableWithModifers = true;</span>
<span class="nc" id="L141">        ArrayList&lt;String&gt; classVarModifiers = new ArrayList&lt;String&gt;();</span>

        // do for every Statement
<span class="nc bnc" id="L144" title="All 2 branches missed.">        for (StatementElement el : modifiedVariables.values()) {</span>
<span class="nc bnc" id="L145" title="All 2 branches missed.">            if (el.hasBeenModified()) {</span>
                // class variables
<span class="nc bnc" id="L147" title="All 2 branches missed.">                if (el.getType() != null &amp;&amp;</span>
<span class="nc bnc" id="L148" title="All 2 branches missed.">                    el.getType().equals(StatementElement.variableType.</span>
                                        ClassVariable)) {
                    // selection
<span class="nc bnc" id="L151" title="All 2 branches missed.">                    if (el.isInSelection()) {</span>
<span class="nc" id="L152">                        selective = true;</span>
                    }
                    // iteration
<span class="nc bnc" id="L155" title="All 2 branches missed.">                    if (el.isInIteration()) {</span>
<span class="nc" id="L156">                        iterative = true;</span>
                    }
<span class="nc bnc" id="L158" title="All 2 branches missed.">                    if (el.getModifiers().size() &gt; 0) {</span>
<span class="nc" id="L159">                        ++classVariableWithModifiers;</span>
<span class="nc bnc" id="L160" title="All 2 branches missed.">                        if (firstModifiedClassVariableWithModifers) {</span>
<span class="nc" id="L161">                            createArrayListOfModifiers(el, classVarModifiers);</span>
<span class="nc" id="L162">                            firstModifiedClassVariableWithModifers = false;</span>
                        } else {
<span class="nc" id="L164">                            ArrayList&lt;String&gt; tmpList = new ArrayList&lt;String&gt;();</span>
<span class="nc" id="L165">                            createArrayListOfModifiers(el, tmpList);</span>
<span class="nc" id="L166">                            ArrayList&lt;String&gt; unionSet = new ArrayList&lt;String&gt;();</span>
                            // get the union of modifed variables
<span class="nc bnc" id="L168" title="All 2 branches missed.">                            for (String var : classVarModifiers) {</span>
<span class="nc bnc" id="L169" title="All 2 branches missed.">                                for (String tmpEl : tmpList) {</span>
<span class="nc bnc" id="L170" title="All 2 branches missed.">                                    if (var.equals(tmpEl)) {</span>
<span class="nc" id="L171">                                        unionSet.add(var);</span>
                                    }
<span class="nc" id="L173">                                }</span>
<span class="nc" id="L174">                            }</span>
<span class="nc" id="L175">                            classVarModifiers = unionSet;</span>
                        }
                    }
<span class="nc" id="L178">                    ++modifiedClassVariables;</span>
                } else { // end modified class variables
<span class="nc" id="L180">                    ++modifiedLocVariables;</span>
                }

            }
<span class="nc" id="L184">        }</span>
<span class="nc" id="L185">        String cohesionType = &quot;Coincidental&quot;;</span>
<span class="nc bnc" id="L186" title="All 4 branches missed.">        if (modifiedClassVariables == 1 &amp;&amp; modifiedLocVariables == 0) {</span>
<span class="nc" id="L187">            cohesionType = &quot;Functional&quot;;</span>
        } else
<span class="nc bnc" id="L189" title="All 4 branches missed.">        if (modifiedClassVariables == 1 &amp;&amp; classVarModifiers.size() &gt; 0) {</span>
<span class="nc" id="L190">            cohesionType = &quot;Sequential&quot;;</span>
        } else
<span class="nc bnc" id="L192" title="All 4 branches missed.">        if (modifiedClassVariables &gt; 1 &amp;&amp; classVarModifiers.size() &gt; 0) {</span>
<span class="nc" id="L193">            cohesionType = &quot;Communicational&quot;;</span>
        } else
<span class="nc bnc" id="L195" title="All 2 branches missed.">        if (modifiedClassVariables == 0) {</span>
<span class="nc" id="L196">            cohesionType = &quot;No Class Level Assignments&quot;;</span>
            //  cohesionType = &quot;Coincidental&quot;;
        }

<span class="nc bnc" id="L200" title="All 2 branches missed.">        if (iterative) {</span>
<span class="nc" id="L201">            cohesionType = &quot;Iterative&quot;;</span>
        }
<span class="nc bnc" id="L203" title="All 2 branches missed.">        if (selective) {</span>
<span class="nc" id="L204">            cohesionType = &quot;Conditional&quot;;</span>
        }
<span class="nc" id="L206">        for (int i = 0;</span>
<span class="nc bnc" id="L207" title="All 2 branches missed.">                     i &lt; 60 - node.getIdentity().length() - cohesionType.length();</span>
<span class="nc" id="L208">                     ++i) {</span>
<span class="nc" id="L209">            output.append(&quot; &quot;);</span>
        }
<span class="nc" id="L211">        output.append(cohesionType + &quot;\n&quot;);</span>
        // print out a toString dump for development analysis
        if (DEVELOPMENT) {
            for (StatementDS tmpDS : statementList) {
                output.append(&quot;     &quot; + tmpDS.toString() + &quot;\n&quot;);
            }
        }
<span class="nc" id="L218">    } // end method analyzeMethod</span>

    /**
     * recursive method to create a chain of modifiers to a variable &lt;b&gt;
     * using this method then :   a = b + c;  d = a;  e = d; &lt;br&gt;
     *   e would contain both d and a as modifiers it is dependent on
     * @param stE StatementElement
     * @param list ArrayList
     */
    private void createArrayListOfModifiers(StatementElement stE,
                                            ArrayList&lt;String&gt;
            list) {
<span class="nc bnc" id="L230" title="All 2 branches missed.">        for (StatementElement tmpEl : stE.getModifiers()) {</span>
<span class="nc" id="L231">            list.add(tmpEl.getElementName());</span>
<span class="nc bnc" id="L232" title="All 2 branches missed.">            if (tmpEl.getModifiers().size() &gt; 0) {</span>
<span class="nc" id="L233">                createArrayListOfModifiers(tmpEl, list);</span>
            }
<span class="nc" id="L235">        }</span>
<span class="nc" id="L236">    }</span>

    /**
     * recusive method to analyze statements
     * @param parentNode ASTNode
     * @param statementList ArrayList
     * @param isInSelection boolean
     * @param isInIteration boolean
     */
    private void statements(ASTNode parentNode, ArrayList&lt;StatementDS&gt;
            statementList, boolean isInSelection, boolean isInIteration) {

<span class="nc bnc" id="L248" title="All 2 branches missed.">        for (ASTNode childNode : parentNode.list) {</span>

<span class="nc bnc" id="L250" title="All 2 branches missed.">            if (childNode.getType().equals(&quot;Selection&quot;)) {</span>
<span class="nc" id="L251">                statements(childNode, statementList, true, isInIteration);</span>
<span class="nc bnc" id="L252" title="All 2 branches missed.">            } else if (childNode.getType().equals(&quot;Iteration&quot;)) {</span>
<span class="nc" id="L253">                statements(childNode, statementList, isInSelection, true);</span>
<span class="nc bnc" id="L254" title="All 2 branches missed.">            } else if (childNode.getIdentity().equals(&quot;StatementExpression&quot;)) {</span>
<span class="nc" id="L255">                StatementDS tmpDS = analyzeStatement(childNode);</span>
<span class="nc" id="L256">                tmpDS.setInIteration(isInIteration);</span>
<span class="nc" id="L257">                tmpDS.setInSelection(isInSelection);</span>
<span class="nc" id="L258">                statementList.add(tmpDS);</span>
            }
<span class="nc" id="L260">        }</span>
<span class="nc" id="L261">    }</span>

    /**
     * called for each statement
     * @param node ASTNode
     * @return StatementDS
     */
    private StatementDS analyzeStatement(ASTNode node) {
<span class="nc" id="L269">        StatementDS localDS = new StatementDS();</span>
<span class="nc" id="L270">        int nodeCount = node.list.size();</span>
<span class="nc" id="L271">        int currCtr = 0;</span>
<span class="nc bnc" id="L272" title="All 2 branches missed.">        int nxtCtr = nodeCount &gt; 0 ? 1 : 0;</span>

        // check for preDec ++ or --
<span class="nc" id="L275">        String firstVal = node.list.get(0).getIdentity();</span>
<span class="nc bnc" id="L276" title="All 4 branches missed.">        if (firstVal.equals(&quot;++&quot;) || firstVal.equals(&quot;--&quot;)) {</span>
<span class="nc" id="L277">            localDS.setType(StatementDS.statementType.PreInc);</span>
<span class="nc" id="L278">            currCtr++;</span>
        }
<span class="nc" id="L280">        currCtr = getLVal(currCtr, node.list);</span>
<span class="nc" id="L281">        localDS.setLVal(node.list.get(currCtr).getIdentity());</span>
<span class="nc bnc" id="L282" title="All 2 branches missed.">        if (currCtr + 1 == nodeCount) {</span>
<span class="nc" id="L283">            return localDS;</span>
        }

        // have the LVAL and there is a next
<span class="nc" id="L287">        currCtr++;</span>
<span class="nc bnc" id="L288" title="All 2 branches missed.">        if (node.list.get(currCtr).getIdentity().equals(&quot;[&quot;)) {</span>
<span class="nc bnc" id="L289" title="All 2 branches missed.">            while (!node.list.get(currCtr).getIdentity().equals(&quot;]&quot;)) {</span>
<span class="nc" id="L290">                currCtr++;</span>
            }
<span class="nc" id="L292">            currCtr++;</span>
        }
<span class="nc bnc" id="L294" title="All 2 branches missed.">        if (currCtr + 1 == nodeCount) {</span>
<span class="nc" id="L295">            return localDS;</span>
        }

        // have the LVAL and there is a next

<span class="nc" id="L300">        String tmpVl = node.list.get(currCtr).getIdentity();</span>
<span class="nc bnc" id="L301" title="All 2 branches missed.">        if (tmpVl.equals(&quot;(&quot;)) {</span>
<span class="nc" id="L302">            localDS.setType(StatementDS.statementType.MethodCall);</span>
<span class="nc" id="L303">            return localDS;</span>
        }
<span class="nc bnc" id="L305" title="All 4 branches missed.">        if (tmpVl.equals(&quot;++&quot;) || tmpVl.equals(&quot;--&quot;)) {</span>
<span class="nc" id="L306">            localDS.setType(StatementDS.statementType.PostInc);</span>
<span class="nc" id="L307">            return localDS;</span>
        }
<span class="nc bnc" id="L309" title="All 6 branches missed.">        if (tmpVl.equals(&quot;+=&quot;) || tmpVl.equals(&quot;=&quot;) || tmpVl.equals(&quot;-=&quot;) ||</span>
<span class="nc bnc" id="L310" title="All 4 branches missed.">            tmpVl.equals(&quot;\\=&quot;) || tmpVl.equals(&quot;*=&quot;)) {</span>
<span class="nc" id="L311">            localDS.setType(StatementDS.statementType.Assignment);</span>
<span class="nc" id="L312">            currCtr++;</span>
        }
<span class="nc" id="L314">        getRVals(localDS, currCtr, node.list);</span>
<span class="nc" id="L315">        return localDS;</span>
    }

    /**
     * called from analyzeStatement - gets a list of RVals in assignment statements
     * @param locDS StatementDS
     * @param ctr int
     * @param list ArrayList
     */
    private void getRVals(StatementDS locDS, int ctr, ArrayList&lt;ASTNode&gt; list) {
<span class="nc" id="L325">        boolean isFirstToken = true; // reset to true for each new rval element</span>
<span class="nc" id="L326">        String currVariable = null;</span>
<span class="nc" id="L327">        int nodeCount = list.size();</span>
<span class="nc" id="L328">        String currID = null, nextID = null;</span>
<span class="nc" id="L329">        StatementElement currEl = null;</span>
<span class="nc bnc" id="L330" title="All 2 branches missed.">        while (ctr &lt; nodeCount) {</span>
<span class="nc" id="L331">            currID = list.get(ctr).getIdentity();</span>
<span class="nc bnc" id="L332" title="All 2 branches missed.">            if (ctr + 1 &lt; nodeCount) {</span>
<span class="nc" id="L333">                nextID = list.get(ctr + 1).getIdentity();</span>
            } else {
<span class="nc" id="L335">                nextID = null;</span>
            }
<span class="nc bnc" id="L337" title="All 2 branches missed.">            if (isFirstToken) {</span>
<span class="nc" id="L338">                currEl = new StatementElement();</span>
<span class="nc" id="L339">                isFirstToken = false;</span>
<span class="nc bnc" id="L340" title="All 4 branches missed.">                if (currID.equals(&quot;++&quot;) || currID.equals(&quot;--&quot;)) {</span>
<span class="nc" id="L341">                    currEl.setModified(true);</span>
                }
<span class="nc bnc" id="L343" title="All 2 branches missed.">                if (currID.equals(&quot;(&quot;)) {</span>
<span class="nc" id="L344">                    ctr++;</span>
<span class="nc" id="L345">                    continue;</span>
                }
            }

<span class="nc bnc" id="L349" title="All 6 branches missed.">            if (nextID != null &amp;&amp; (nextID.equals(&quot;++&quot;) || nextID.equals(&quot;--&quot;))) {</span>
<span class="nc" id="L350">                currEl.setModified(true);</span>
<span class="nc bnc" id="L351" title="All 2 branches missed.">                if (currEl.getElementName() == null) {</span>
<span class="nc" id="L352">                    currEl.setElementName(currID);</span>
                }
            }
<span class="nc bnc" id="L355" title="All 4 branches missed.">            if (nextID != null &amp;&amp; (nextID.equals(&quot;)&quot;))) {</span>
<span class="nc bnc" id="L356" title="All 2 branches missed.">                if (currEl.getElementName() == null) {</span>
<span class="nc" id="L357">                    currEl.setElementName(currID);</span>
                }
<span class="nc" id="L359">                ctr++;</span>
<span class="nc" id="L360">                continue;</span>
            }
<span class="nc bnc" id="L362" title="All 4 branches missed.">            if (nextID != null &amp;&amp; nextID.equals(&quot;.&quot;)) {</span>
<span class="nc" id="L363">                ctr += 2;</span>
<span class="nc" id="L364">                continue;</span>
            }
<span class="nc bnc" id="L366" title="All 4 branches missed.">            if (nextID == null || isOperator(nextID)) {</span>
<span class="nc bnc" id="L367" title="All 2 branches missed.">                if (currEl.getElementName() == null) {</span>
<span class="nc" id="L368">                    currEl.setElementName(currID);</span>
                }
<span class="nc" id="L370">                locDS.addRVal(currEl);</span>
<span class="nc" id="L371">                isFirstToken = true; // set for the next element</span>
<span class="nc" id="L372">                ctr++;</span>
<span class="nc" id="L373">                continue;</span>
            }
<span class="nc bnc" id="L375" title="All 2 branches missed.">            if (currID.equals(&quot;new&quot;)) {</span>
<span class="nc" id="L376">                currEl.setType(StatementElement.variableType.ClassInitiator);</span>
            }
<span class="nc bnc" id="L378" title="All 4 branches missed.">            if (nextID != null &amp;&amp; nextID.equals(&quot;(&quot;)) {</span>
<span class="nc bnc" id="L379" title="All 2 branches missed.">                if (currEl.getType() == null) {</span>
<span class="nc" id="L380">                    currEl.setType(StatementElement.variableType.MethodCall);</span>
                }
<span class="nc bnc" id="L382" title="All 2 branches missed.">                if (currEl.getElementName() == null) {</span>
<span class="nc" id="L383">                    currEl.setElementName(currID);</span>
                }
            }
            // ignore the array subscripts
<span class="nc bnc" id="L387" title="All 4 branches missed.">            if (nextID != null &amp;&amp; nextID.equals(&quot;[&quot;)) {</span>
<span class="nc bnc" id="L388" title="All 2 branches missed.">                if (currEl.getElementName() == null) {</span>
<span class="nc" id="L389">                    currEl.setElementName(currID);</span>
                }
<span class="nc" id="L391">                String tmpVal = list.get(ctr).getIdentity();</span>
<span class="nc bnc" id="L392" title="All 2 branches missed.">                while (!tmpVal.equals(&quot;]&quot;)) {</span>
<span class="nc" id="L393">                    ctr++;</span>
<span class="nc" id="L394">                    tmpVal = list.get(ctr).getIdentity();</span>
                }
<span class="nc bnc" id="L396" title="All 2 branches missed.">                if (ctr == nodeCount - 1) {</span>
<span class="nc" id="L397">                    locDS.addRVal(currEl);</span>
                }
            }
<span class="nc" id="L400">            ctr++;</span>
        } // end while loop
<span class="nc" id="L402">    }</span>

    /**
     * helper function - checks for delimiters in a equation where delimiters &lt;br&gt;
     * are defined as arithmetic operands such as '+' and '-'
     * @param id String
     * @return boolean
     */
    private boolean isOperator(String id) {
<span class="nc bnc" id="L411" title="All 2 branches missed.">        if (id == null) {</span>
<span class="nc" id="L412">            return false;</span>
        }
<span class="nc bnc" id="L414" title="All 6 branches missed.">        if (id.equals(&quot;+&quot;) || id.equals(&quot;-&quot;) || id.equals(&quot;\\&quot;) ||</span>
<span class="nc bnc" id="L415" title="All 6 branches missed.">            id.equals(&quot;*&quot;) || id.equals(&quot;&lt;&lt;&quot;) || id.equals(&quot;&gt;&gt;&quot;) ||</span>
<span class="nc bnc" id="L416" title="All 2 branches missed.">            id.equals(&quot;%&quot;)) {</span>
<span class="nc" id="L417">            return true;</span>
        }
<span class="nc" id="L419">        return false;</span>
    }

    /**
     * gets the variable name for the lVal of an expression
     * @param ctr int
     * @param list ArrayList
     * @return int
     */
    private int getLVal(int ctr, ArrayList&lt;ASTNode&gt; list) {
        // do until the LVal is found
        // lval is an identity that does not have a '.' as the next identity
        // ie.   java.util.Type   in this instance Type is the LVal
<span class="nc" id="L432">        int nodeCount = list.size();</span>
<span class="nc" id="L433">        String currID = null, nextID = null;</span>
<span class="nc bnc" id="L434" title="All 2 branches missed.">        while (ctr &lt; nodeCount) {</span>
<span class="nc" id="L435">            currID = list.get(ctr).getIdentity();</span>
<span class="nc bnc" id="L436" title="All 2 branches missed.">            if (ctr + 1 &lt; nodeCount) {</span>
<span class="nc" id="L437">                nextID = list.get(ctr + 1).getIdentity();</span>
            } else {
<span class="nc" id="L439">                return ctr;</span>
            }
<span class="nc bnc" id="L441" title="All 2 branches missed.">            if (!nextID.equals(&quot;.&quot;)) {</span>
<span class="nc" id="L442">                return ctr;</span>
            }
<span class="nc" id="L444">            ctr += 2;</span>
        }
<span class="nc" id="L446">        return ctr;</span>
    }

    /**
     * write the report header to output
     */
    private void setHeader() {
<span class="nc" id="L453">        output.append(&quot;\nFile:  &quot;);</span>
<span class="nc" id="L454">        output.append(fileName);</span>
<span class="nc" id="L455">        output.append(&quot;\n&quot;);</span>
<span class="nc" id="L456">    }</span>

    /**
     * Store the file name parsed for formatted display purposes
     * @param fileName String
     */
    public void setFileName(String fileName) {
<span class="fc" id="L463">        this.fileName = fileName;</span>
<span class="fc" id="L464">    }</span>

}


/**
 *  represents a variable in an expression
 */
class StatementElement {
    /**
     * marked true if this variable is modifed in the method
     */
<span class="nc" id="L476">    private boolean hasBeenModified = false;</span>
    /**
     * represents the variable name
     */
<span class="nc" id="L480">    private String elementName = null;</span>
    /**
     * set true if variable is within a if statement
     */
<span class="nc" id="L484">    private boolean isInSelection = false;</span>
    /**
     * set true if variable is within an interation block
     */
<span class="nc" id="L488">    private boolean isInIteration = false;</span>
    /**
     * list of elements that have modified this element &lt;br&gt;
     * a recursive descent of elements will get a chain of modifiers
     */
<span class="nc" id="L493">    private ArrayList&lt;StatementElement&gt; modifiers =</span>
            new ArrayList&lt;StatementElement&gt;();
    /**
     * add a variable to the modifier list
     * @param rval StatementElement
     */
    public void addModifier(StatementElement rval) {
<span class="nc" id="L500">        modifiers.add(rval);</span>
<span class="nc" id="L501">    }</span>

    /**
     * return a reference to the modifier list
     * @return ArrayList
     */
    public ArrayList&lt;StatementElement&gt; getModifiers() {
<span class="nc" id="L508">        return modifiers;</span>
    }

    /**
     *  enumeration of types
     */
<span class="fc" id="L514">    public static enum variableType {</span>
<span class="fc" id="L515">        ClassVariable, LocalVariable, MethodCall, ClassInitiator} ;</span>

        /**
         * local variableType represent the type of variable this is
         */
<span class="nc" id="L520">        variableType type = null;</span>

        /**
         * default constructor
         */
<span class="nc" id="L525">        StatementElement() {}</span>

        /**
         *  setter for the variable name
         * @param name String
         */
<span class="nc" id="L531">        StatementElement(String name) {</span>
<span class="nc" id="L532">            setElementName(name);</span>
<span class="nc" id="L533">        }</span>

        /**
         * getter for the type : see enum variableType
         * @return variableType
         */
        variableType getType() {
<span class="nc" id="L540">            return type;</span>
        }

        /**
         * setter for the variable type
         * @param t variableType
         */
        void setType(variableType t) {
<span class="nc" id="L548">            type = t;</span>
<span class="nc" id="L549">        }</span>

        /**
         * setter for the name
         * @param name String
         */
        void setElementName(String name) {
<span class="nc" id="L556">            elementName = name;</span>
<span class="nc" id="L557">        }</span>

        /**
         * getter for the boolean flag hasBeenModified
         * @return boolean
         */
        boolean hasBeenModified() {
<span class="nc" id="L564">            return hasBeenModified;</span>
        }

        /**
         * getter for the variable name
         * @return String
         */
        String getElementName() {
<span class="nc" id="L572">            return elementName;</span>
        }

        /**
         * setter for the boolean flag has been modified
         * @param val boolean
         */
        void setModified(boolean val) {
<span class="nc" id="L580">            hasBeenModified = val;</span>
<span class="nc" id="L581">        }</span>

        /**
         * override of toString provides information for debugging/development
         * @return String
         */
        public String toString() {
<span class="nc" id="L588">            String tmp = elementName;</span>
<span class="nc bnc" id="L589" title="All 2 branches missed.">            if (hasBeenModified) {</span>
<span class="nc" id="L590">                tmp += &quot; (modified) &quot;;</span>
            }
<span class="nc bnc" id="L592" title="All 2 branches missed.">            if (type != null) {</span>
<span class="nc" id="L593">                tmp += &quot; (&quot; + type.toString() + &quot;) &quot;;</span>
            }
<span class="nc bnc" id="L595" title="All 2 branches missed.">            for (StatementElement element : modifiers) {</span>
<span class="nc" id="L596">                tmp += element.toString();</span>
<span class="nc" id="L597">            }</span>
<span class="nc" id="L598">            return tmp;</span>
        }

        /**
         * getter for the boolean flag isInSelection
         * @return boolean
         */
        boolean isInSelection() {
<span class="nc" id="L606">            return isInSelection;</span>
        }

        /**
         * getter for the boolean flag isInIteration
         * @return boolean
         */
        boolean isInIteration() {
<span class="nc" id="L614">            return isInIteration;</span>
        }

        /**
         * setter for isInSelection
         * @param val boolean
         */
        void setInSelection(boolean val) {
<span class="nc" id="L622">            isInSelection = val;</span>
<span class="nc" id="L623">        }</span>

        /**
         * setter for isInIteration
         * @param val boolean
         */
        void setInIteration(boolean val) {
<span class="nc" id="L630">            isInIteration = val;</span>
<span class="nc" id="L631">        }</span>
    } // end class


    /**
     *   represents an expression statement &lt;br&gt;
     *   has Statment Elements  : one lVal and 0 . . . n rVals
     */
<span class="nc" id="L639">    class StatementDS {</span>
<span class="nc" id="L640">        private StatementElement lVal = null;</span>
<span class="nc" id="L641">        private ArrayList&lt;StatementElement&gt; rValList = new ArrayList&lt;</span>
                StatementElement&gt;();
<span class="fc" id="L643">        public static enum statementType {</span>
<span class="fc" id="L644">            PreInc, PostInc, Assignment,</span>
<span class="fc" id="L645">            MethodCall} ;</span>

<span class="nc" id="L647">            private statementType type = null;</span>
<span class="nc" id="L648">            private boolean isInSelection = false;</span>
<span class="nc" id="L649">            private boolean isInIteration = false;</span>


            statementType getType() {
<span class="nc" id="L653">                return type;</span>
            }

            /**
             * add a rVal to the list
             * @param rv StatementElement
             */
            void addRVal(StatementElement rv) {
<span class="nc" id="L661">                rValList.add(rv);</span>
<span class="nc" id="L662">            }</span>

            /**
             * set statement type: see  enum statementType
             * @param t statementType
             */
            void setType(statementType t) {
<span class="nc" id="L669">                type = t;</span>
<span class="nc" id="L670">            }</span>

            /**
             * get a reference to the list of rVals
             * @return ArrayList
             */
            ArrayList&lt;StatementElement&gt; getRVals() {
<span class="nc" id="L677">                return rValList;</span>
            }

            /**
             * override of toString contains information for debugging
             * @return String
             */
            public String toString() {
<span class="nc" id="L685">                String tmp = lVal.toString();</span>
<span class="nc" id="L686">                tmp += &quot; : &quot; + type.toString();</span>
<span class="nc bnc" id="L687" title="All 2 branches missed.">                if (this.isInIteration()) {</span>
<span class="nc" id="L688">                    tmp += &quot; (Iteration) &quot;;</span>
                }
<span class="nc bnc" id="L690" title="All 2 branches missed.">                if (this.isInSelection()) {</span>
<span class="nc" id="L691">                    tmp += &quot; (Selection) &quot;;</span>
                }
<span class="nc bnc" id="L693" title="All 2 branches missed.">                for (StatementElement rVal : rValList) {</span>
<span class="nc" id="L694">                    tmp += &quot; := &quot; + rVal.toString();</span>
<span class="nc" id="L695">                }</span>
<span class="nc" id="L696">                return tmp;</span>
            }

            /**
             * setter for the LVal
             * @param rv StatementElement
             */
            void setLVal(StatementElement rv) {
<span class="nc" id="L704">                lVal = rv;</span>
<span class="nc" id="L705">            }</span>

            /**
             * setter for the LVal
             * @param id String
             */
            void setLVal(String id) {
<span class="nc" id="L712">                lVal = new StatementElement(id);</span>
<span class="nc" id="L713">            }</span>

            /**
             * getter for the LVal
             * @return StatementElement
             */
            StatementElement getLVal() {
<span class="nc" id="L720">                return lVal;</span>
            }

            /**
             * getter for the boolean flag isInSelection
             * @return boolean
             */
            boolean isInSelection() {
<span class="nc" id="L728">                return isInSelection;</span>
            }

            /**
             * getter for the boolean flag isInIteration
             * @return boolean
             */
            boolean isInIteration() {
<span class="nc" id="L736">                return isInIteration;</span>
            }

            /**
             * setter for isInSelection
             * @param val boolean
             */
            void setInSelection(boolean val) {
<span class="nc" id="L744">                isInSelection = val;</span>
<span class="nc" id="L745">            }</span>

            /**
             * setter for isInIteration
             * @param val boolean
             */
            void setInIteration(boolean val) {
<span class="nc" id="L752">                isInIteration = val;</span>
<span class="nc" id="L753">            }</span>

        }
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>