<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>JMCAView.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">19_jmca</a> &gt; <a href="index.source.html" class="el_package">com.soops.CEN4010.JMCA</a> &gt; <span class="el_source">JMCAView.java</span></div><h1>JMCAView.java</h1><pre class="source lang-java linenums">/*
JMCAView.java

Contains classes JMCAView, JMCAFileFilter (inner)

CEN4010
FALL 2005
GROUP2

Curt Hayashida, Scott Springer, Ian Cole

Revision History:
1) 10/20/05 - CH - Original creation for GUI prototype - GUI.java and UI.java
2) 10/24/05 - IC - Integration with controller class, first pass
				     1) New name - JMCAFrame.java
					 2) Move UI into file as Inner Class - JMCAPanel
					 3) Add JMCAFileFilter as Inner Class
					 4) Set display text frame to courier
					 5) Rework Frame sizing and controls for smaller screens
					 6) Removed code in actionPerformed that was recreating
					 		display and scroller
					 7) Added controller and wired in basic functions
					 		including setting filename and getting output
					 8) Selecting a new file clears the display
					 9) Made display read-only on creation
3) 10/30/05 - IC - Convert to true MVC (Model-View-Controller) per the grading notes
					 1) Changed from JMCAFrame has a JMCAController to
					 		JMCAController has a JMCAFrame
					 2) Rewired actions to MVC pattern
					 3) Renamed to JMCAView.java (Should be more obvious that we are using MVC
					 4) Removing Panel as inner class with all actions
							since its awkward in the controller to do
								JMCAFrame.JMCAPanel.methodCall(), and
								a few other minor annoyances.
					 5) Also changing so that JMCAView &quot;has a&quot; JFrame, instead of &quot;is a&quot; JFrame



Compilation (from project directory)
javac -d . *.java

Execution (from top-level project directory)
java com.soops.CEN4010.JMCA.JMCAController


*/
package com.soops.CEN4010.JMCA;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.io.IOException;
import java.io.File;
import javax.swing.*;
import javax.swing.filechooser.*;



public class JMCAView
{

private JFrame 			frame;
private JPanel 			panel;

private JLabel 			label1;
private JTextField 		InputFile;
private JTextArea 		display;
private JButton 		analyzeButton;
private JButton 		selectFileButton;
private JScrollPane 	scroller;
private JFileChooser 	chooseFile;

public JMCAView()
<span class="nc" id="L74">    {</span>
<span class="nc" id="L75">	frame = new JFrame(&quot;Java Method Cohesion Analyzer&quot;);</span>
<span class="nc" id="L76">	panel = new JPanel();</span>
<span class="nc" id="L77">	panel.setLayout(null);</span>

<span class="nc" id="L79">    frame.setLayout(new GridLayout() );</span>
<span class="nc" id="L80">    frame.add(panel);</span>
<span class="nc" id="L81">        frame.setBounds(10, 10, 400, 400);</span>
<span class="nc" id="L82">    frame.setSize(500, 500);</span>



<span class="nc" id="L86">    label1 = new JLabel(&quot;File to be analyzed:&quot;);</span>
<span class="nc" id="L87">    label1.setBounds(20, 20, 200, 20);</span>
<span class="nc" id="L88">	panel.add(label1);</span>

<span class="nc" id="L90">    InputFile = new JTextField();</span>
<span class="nc" id="L91">    InputFile.setBounds(20,50, 350, 20);</span>
<span class="nc" id="L92">    panel.add(InputFile);</span>

<span class="nc" id="L94">	selectFileButton = new JButton(&quot;Select File&quot;);</span>
<span class="nc" id="L95">	selectFileButton.setBounds(375, 50, 98, 20);</span>
<span class="nc" id="L96">	panel.add(selectFileButton);</span>

<span class="nc" id="L98">	analyzeButton = new JButton(&quot;Analyze&quot;);</span>
<span class="nc" id="L99">	analyzeButton.setBounds(200, 100, 80, 20);</span>
<span class="nc" id="L100">	panel.add(analyzeButton);</span>

<span class="nc" id="L102">	display = new JTextArea();</span>
<span class="nc" id="L103">	display.setBounds(20, 150, 450, 300);</span>
<span class="nc" id="L104">	display.setFont (new Font(&quot;Courier&quot;, Font.PLAIN, 12));</span>
<span class="nc" id="L105">	display.setEditable(false);</span>
<span class="nc" id="L106">	scroller = new JScrollPane(display);</span>
<span class="nc" id="L107">	scroller.setBounds(20, 150, 450, 300);</span>
<span class="nc" id="L108">	panel.add(scroller);</span>


	//shutdown application on window close
<span class="nc" id="L112">	frame.addWindowListener(new WindowAdapter()</span>
<span class="nc" id="L113">		{</span>
			public void windowClosing(WindowEvent e)
			{
<span class="nc" id="L116">				System.exit(0);</span>
<span class="nc" id="L117">			}</span>
		});


<span class="nc" id="L121">    frame.setVisible(true);</span>

<span class="nc" id="L123">    } // end JMCAFrame constructor</span>



//Sets the text in the Display text control
public void updateDisplay(String input)
{
<span class="nc" id="L130">	display.setText(input);</span>
<span class="nc" id="L131">}</span>

//Launches a JFileChooser
public void chooseFile()
{
<span class="nc" id="L136">	chooseFile = new JFileChooser();</span>
<span class="nc" id="L137">	chooseFile.addChoosableFileFilter(new JMCAFileFilter());</span>
<span class="nc" id="L138">	chooseFile.showOpenDialog(frame);</span>

	try
	{
<span class="nc" id="L142">		String fullPath = chooseFile.getSelectedFile().getCanonicalPath();</span>
<span class="nc" id="L143">		InputFile.setText(fullPath);</span>
<span class="nc" id="L144">		display.setText(&quot;&quot;);</span>
	}
<span class="nc" id="L146">	catch (IOException ioe)</span>
	{
		//do something
<span class="nc" id="L149">	}</span>

<span class="nc" id="L151">}</span>

//Called by the controller when filename is needed
public String getFilename()
{
<span class="nc" id="L156">	return InputFile.getText();</span>
}

//Since this is MVC, the controller will be wiring the action
public void setAnalyzeListener( ActionListener al)
{
<span class="nc" id="L162">	analyzeButton.addActionListener (al);</span>
<span class="nc" id="L163">}</span>

//Since this is MVC, the controller will be wiring the action
public void setSelectFileListener( ActionListener al)
{
<span class="nc" id="L168">	selectFileButton.addActionListener (al);</span>
<span class="nc" id="L169">}</span>



// JMCAFileFilter restricts the file browser to displaying .java files
// See this link for details:
// http://java.sun.com/docs/books/tutorial/uiswing/components/filechooser.html#filters
// Some code below taken from that tutorial

<span class="nc" id="L178">public class JMCAFileFilter extends FileFilter {</span>

    //Accept all directories and .java files.
    public boolean accept(File f)
    {
<span class="nc bnc" id="L183" title="All 2 branches missed.">        if (f.isDirectory())</span>
        {
<span class="nc" id="L185">            return true;</span>
        }

		//get the file extension
		//then check the extension for our allowed filetype

<span class="nc" id="L191">	    String ext = null;</span>
<span class="nc" id="L192">	    String s = f.getName();</span>
<span class="nc" id="L193">	    int i = s.lastIndexOf('.');</span>

<span class="nc bnc" id="L195" title="All 4 branches missed.">	    if (i &gt; 0 &amp;&amp;  i &lt; s.length() - 1)</span>
	    {
<span class="nc" id="L197">	        ext = s.substring(i+1).toLowerCase();</span>
	    }


<span class="nc bnc" id="L201" title="All 2 branches missed.">        if (ext != null) {</span>
<span class="nc bnc" id="L202" title="All 4 branches missed.">            if (ext.equals(&quot;java&quot;) || ext.equals(&quot;txt&quot;)) {</span>
<span class="nc" id="L203">                    return true;</span>
            } else {
<span class="nc" id="L205">                return false;</span>
            }
        }

<span class="nc" id="L209">        return false;</span>
    }

    //The description of this filter
    public String getDescription()
    {
<span class="nc" id="L215">        return &quot;Java Class Files&quot;;</span>
    }
} //end innerclass JMCAFileFilter

} // end JMCAView class


</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>