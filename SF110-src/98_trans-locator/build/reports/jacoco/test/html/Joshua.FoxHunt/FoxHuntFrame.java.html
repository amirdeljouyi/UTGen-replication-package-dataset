<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>FoxHuntFrame.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">98_trans-locator</a> &gt; <a href="index.source.html" class="el_package">Joshua.FoxHunt</a> &gt; <span class="el_source">FoxHuntFrame.java</span></div><h1>FoxHuntFrame.java</h1><pre class="source lang-java linenums">//ï¿½2003 Joshua Job
/*    This file is part of Trans-Locator.

    Trans-Locator is free software; you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation; either version 2 of the License, or
    (at your option) any later version.

    Trans-Locator is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Trans-Locator; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 */
package Joshua.FoxHunt;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.table.*;
import java.io.*;
import java.util.*;
import java.net.*;
import java.text.*;

public class FoxHuntFrame extends JFrame implements ActionListener{
  //GUI components
  JTextField theta, lat, lon,zoom;
  JButton add;
  JTable pos;
  FoxTableModel posModel;
  HuntDisplay display;
  JPanel panel1,panel2,panel3,panel;

  //Data containers
  Vector points;
  Vector fox;
  public FoxHuntFrame() {
<span class="nc" id="L41">    super(&quot;Triangulation&quot;);</span>
<span class="nc" id="L42">    JFrame.setDefaultLookAndFeelDecorated(true);</span>
<span class="nc" id="L43">    points = new Vector();</span>
<span class="nc" id="L44">    fox = new Vector();</span>
<span class="nc" id="L45">    textPrep();</span>
<span class="nc" id="L46">    tablePrep();</span>
<span class="nc" id="L47">    displayPrep();</span>
<span class="nc" id="L48">    finalPrep();</span>
<span class="nc" id="L49">    ImageIcon icon = new ImageIcon(&quot;icon.gif&quot;);</span>
<span class="nc" id="L50">    this.setIconImage(icon.getImage());</span>
<span class="nc" id="L51">    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span>
<span class="nc" id="L52">    this.getContentPane().add(panel,BorderLayout.CENTER);</span>
<span class="nc" id="L53">    this.pack();</span>
<span class="nc" id="L54">    this.setState(JFrame.MAXIMIZED_BOTH);</span>
<span class="nc" id="L55">    this.setVisible(true);</span>
<span class="nc" id="L56">  }</span>
  public void actionPerformed(ActionEvent e) {
<span class="nc" id="L58">    addPoint();</span>
<span class="nc" id="L59">  }</span>
  public void addPoint() {
    int angle;
    double LAT, LON;
    TrigPoint point;
<span class="nc" id="L64">    angle = Integer.parseInt(theta.getText());</span>
<span class="nc" id="L65">    LAT = Double.parseDouble(lat.getText());</span>
<span class="nc" id="L66">    LON = Double.parseDouble(lon.getText());</span>
<span class="nc" id="L67">    point = new TrigPoint(LAT,LON,angle);</span>
<span class="nc" id="L68">    points.add(point);</span>
<span class="nc" id="L69">    display.addPoint(point);</span>
<span class="nc bnc" id="L70" title="All 2 branches missed.">    if(points.size() &gt; 1) {</span>
<span class="nc" id="L71">      TrigPoint C = (TrigPoint) points.elementAt(points.size()-2);</span>
<span class="nc" id="L72">      TrigPoint B = FoxCalc.calcFox(point, C);</span>
<span class="nc" id="L73">      fox.add(B);</span>
<span class="nc" id="L74">      posModel.fireTableDataChanged();</span>
<span class="nc" id="L75">      display.addPoint(B);</span>
    }
<span class="nc" id="L77">  }</span>
  private void finalPrep() {
<span class="nc" id="L79">    zoom = new JTextField(&quot;1&quot;);</span>
<span class="nc" id="L80">    zoom.addActionListener(this);</span>
<span class="nc" id="L81">    JLabel zoomL = new JLabel(&quot;Zoom&quot;);</span>
<span class="nc" id="L82">    JPanel zoomP = new JPanel(new GridLayout(1,2));</span>
<span class="nc" id="L83">    zoomP.add(zoomL);</span>
<span class="nc" id="L84">    zoomP.add(zoom);</span>
<span class="nc" id="L85">    panel3 = new JPanel(new BorderLayout());</span>
<span class="nc" id="L86">    panel3.add(zoom, BorderLayout.NORTH);</span>
<span class="nc" id="L87">    panel3.add(display, BorderLayout.CENTER);</span>
    JSplitPane map, controls;
<span class="nc" id="L89">    panel = new JPanel(new BorderLayout());</span>
<span class="nc" id="L90">    controls = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT, panel1,panel2);</span>
<span class="nc" id="L91">    map = new JSplitPane(JSplitPane.VERTICAL_SPLIT,controls,panel3);</span>
<span class="nc" id="L92">    map.setDividerLocation(.25);</span>
<span class="nc" id="L93">    panel = new JPanel(new BorderLayout());</span>
<span class="nc" id="L94">    panel.add(map,BorderLayout.CENTER);</span>
<span class="nc" id="L95">  }</span>
  private void textPrep() {
    JLabel thetaL,latL,lonL;
<span class="nc" id="L98">    theta = new JTextField(3);</span>
<span class="nc" id="L99">    lat = new JTextField(9);</span>
<span class="nc" id="L100">    lon = new JTextField(10);</span>
<span class="nc" id="L101">    add = new JButton(&quot;Add It!!!&quot;);</span>
<span class="nc" id="L102">    add.addActionListener(this);</span>
<span class="nc" id="L103">    thetaL = new JLabel(&quot;Theta in Degrees&quot;);</span>
<span class="nc" id="L104">    latL = new JLabel(&quot;Lat. dd*mm.mmm&quot;);</span>
<span class="nc" id="L105">    lonL = new JLabel(&quot;lon. ddd*mm.mmm&quot;);</span>
<span class="nc" id="L106">    panel1 = new JPanel(new GridLayout(4,2));</span>
<span class="nc" id="L107">    panel1.add(thetaL);</span>
<span class="nc" id="L108">    panel1.add(theta);</span>
<span class="nc" id="L109">    panel1.add(latL);</span>
<span class="nc" id="L110">    panel1.add(lat);</span>
<span class="nc" id="L111">    panel1.add(lonL);</span>
<span class="nc" id="L112">    panel1.add(lon);</span>
<span class="nc" id="L113">    panel1.add(add);</span>
<span class="nc" id="L114">  }</span>
  private void tablePrep(){
<span class="nc" id="L116">    posModel = new FoxTableModel();</span>
<span class="nc" id="L117">    pos = new JTable(posModel);</span>
<span class="nc" id="L118">    JScrollPane scroll = new JScrollPane(pos);</span>
<span class="nc" id="L119">    pos.setPreferredScrollableViewportSize(new Dimension(500, 70));</span>
<span class="nc" id="L120">    panel2 = new JPanel(new BorderLayout());</span>
<span class="nc" id="L121">    panel2.add(scroll, BorderLayout.CENTER);</span>
<span class="nc" id="L122">  }</span>
  private void displayPrep() {
<span class="nc" id="L124">    display = new HuntDisplay();</span>
<span class="nc" id="L125">    loadLandmarks();</span>
<span class="nc" id="L126">  }</span>
  private void loadLandmarks() {
   try{
    double[] lat,lon;
    String[] iconFile;
<span class="nc" id="L131">    File file = new File(&quot;./landmarks.cfg&quot;);</span>
<span class="nc" id="L132">    FileInputStream inFile = new FileInputStream(file);</span>
<span class="nc" id="L133">    BufferedReader in = new BufferedReader(new InputStreamReader(inFile));</span>
<span class="nc" id="L134">    String input = &quot;&quot;;</span>
<span class="nc" id="L135">    int NUM = 0;</span>
<span class="nc bnc" id="L136" title="All 2 branches missed.">    if ((input = in.readLine()) != null) {</span>
<span class="nc" id="L137">      String num = input.substring(4);</span>
<span class="nc" id="L138">      NUM = Integer.parseInt(num);</span>
    }
<span class="nc" id="L140">    int numAtFile = 0;</span>
<span class="nc" id="L141">    int numAtLat = 0;</span>
<span class="nc" id="L142">    int numAtLon = 0;</span>
<span class="nc" id="L143">    iconFile = new String[NUM];</span>
<span class="nc" id="L144">    lat = new double[NUM];</span>
<span class="nc" id="L145">    lon = new double[NUM];</span>
<span class="nc bnc" id="L146" title="All 2 branches missed.">    while ((input = in.readLine()) != null) {</span>
<span class="nc bnc" id="L147" title="All 2 branches missed.">      if (input.startsWith(&quot;FILE&quot;)) {</span>
<span class="nc" id="L148">       iconFile[numAtFile] = input.substring(4);</span>
<span class="nc" id="L149">       numAtFile++;</span>
<span class="nc bnc" id="L150" title="All 2 branches missed.">      } else if (input.startsWith(&quot;LAT&quot;)) {</span>
<span class="nc" id="L151">       lat[numAtLat] = Double.parseDouble(input.substring(4));</span>
<span class="nc" id="L152">       numAtLat++;</span>
<span class="nc bnc" id="L153" title="All 2 branches missed.">      } else if (input.startsWith(&quot;LON&quot;)) {</span>
<span class="nc" id="L154">       lon[numAtLon] = Double.parseDouble(input.substring(4));</span>
<span class="nc" id="L155">       numAtLon++;</span>
      }
    }
<span class="nc bnc" id="L158" title="All 2 branches missed.">    for (int a = 0; a &lt; NUM; a++) {</span>
<span class="nc" id="L159">      display.addLandMark(new Landmark(lat[a],lon[a],new ImageIcon(iconFile[a])));</span>
    }
<span class="nc" id="L161">    in.close();</span>
<span class="nc" id="L162">    inFile.close();</span>
<span class="nc" id="L163">   } catch (FileNotFoundException e) {</span>
<span class="nc" id="L164">    error(&quot;Can't Find the file&quot;);</span>
<span class="nc" id="L165">   } catch (IOException e) {</span>
<span class="nc" id="L166">    error(&quot;Error communicating with the file&quot;);</span>
<span class="nc" id="L167">   }</span>
<span class="nc" id="L168">  }</span>
  private void error(String text) {
<span class="nc" id="L170">    Object[] options = {&quot;Abort&quot;, &quot;Continue&quot;};</span>

<span class="nc" id="L172">    int ans = JOptionPane.showOptionDialog(this,text,&quot;Error&quot;,JOptionPane.YES_NO_OPTION,JOptionPane.ERROR_MESSAGE,null,options,options[0]);</span>
<span class="nc bnc" id="L173" title="All 6 branches missed.">    if (ans == 0 | ans == JOptionPane.CLOSED_OPTION) {</span>
<span class="nc" id="L174">      System.exit(1);</span>
    }
<span class="nc" id="L176">  }</span>
<span class="nc" id="L177">  class FoxTableModel extends AbstractTableModel{</span>
<span class="nc" id="L178">    String[] colNames = {&quot;Lattitude&quot;,&quot;Longitude&quot;};</span>
    public int getColumnCount() {
<span class="nc" id="L180">      return colNames.length;</span>
    }
    public int getRowCount() {
<span class="nc" id="L183">      return fox.size();</span>
    }
    public String getColumnName(int col) {
<span class="nc" id="L186">      return colNames[col];</span>
    }
    public Object getValueAt(int row, int col) {
<span class="nc" id="L189">      DecimalFormat formatter = new DecimalFormat(&quot;###.##############&quot;);</span>
<span class="nc" id="L190">      TrigPoint point = (TrigPoint) fox.elementAt(row);</span>
      String output;
<span class="nc bnc" id="L192" title="All 2 branches missed.">      if (col == 0) {</span>
<span class="nc" id="L193">       output = formatter.format(point.getY());</span>
<span class="nc" id="L194">       return output;</span>
      } else {
<span class="nc" id="L196">       output = formatter.format(point.getX());</span>
<span class="nc" id="L197">       return output;</span>
      }
    }
    public Class getColumnClass(int col) {
<span class="nc" id="L201">      return getValueAt(0,col).getClass();</span>
    }
    public boolean isCellEditable(int row, int col) {
<span class="nc" id="L204">      return false;</span>
    }
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>