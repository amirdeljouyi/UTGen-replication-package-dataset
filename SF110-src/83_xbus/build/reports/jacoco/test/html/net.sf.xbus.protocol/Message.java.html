<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Message.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">83_xbus</a> &gt; <a href="index.source.html" class="el_package">net.sf.xbus.protocol</a> &gt; <span class="el_source">Message.java</span></div><h1>Message.java</h1><pre class="source lang-java linenums">package net.sf.xbus.protocol;

import java.util.Date;

import net.sf.xbus.base.core.Constants;
import net.sf.xbus.base.xbussystem.XBUSSystem;

/**
 * &lt;code&gt;Message&lt;/code&gt; is the base for all classes that handle the data of
 * requests and responses. It contains all methods and attributes which are
 * independent of the application-protocol.
 */
public class Message
{
	/**
	 * Each message that has been initially received has an unique identifier.
	 * If there is a chain, in which this message is processed (eg. with storing
	 * in a message-queue), the identifier is preserved in all steps.
	 * &lt;p&gt;
	 * This means, if the identifier can be read from an incoming call, it is
	 * used, otherwise a new identifier will be created.
	 * &lt;p&gt;
	 * It is allowed to create &lt;code&gt;Message&lt;/code&gt;-Classes, which always
	 * creates a new identifier for incoming calls. But these
	 * &lt;code&gt;Message's&lt;/code&gt; shouldn't be used in the middle of a chain.
	 */
<span class="nc" id="L27">	private String mId = null;</span>

	/**
	 * The name of a function, that a neighbor-system should execute, when it
	 * receives the message.
	 */
<span class="nc" id="L33">	private String mFunction = null;</span>

	/**
	 * Each neighbor-system of the xBus has a name. The message stores the name
	 * of the neighbor-system which has sent the call.
	 * &lt;p&gt;
	 * The name of the neighbor-system is under control of the xBus. It is part
	 * of the configuration of the receiver and cannot be changed.
	 */
<span class="nc" id="L42">	private XBUSSystem mSource = null;</span>

	/**
	 * The timestamp when this &lt;code&gt;Message&lt;/code&gt; has been received.
	 */
<span class="nc" id="L47">	private Date mRequestTimestamp = null;</span>

	/**
	 * The timestamp when the response has been given to the neighbor-system,
	 * which has sent the request.
	 */
<span class="nc" id="L53">	private Date mResponseTimestamp = null;</span>

	/**
	 * The returncode indicates, wether an request has been processed
	 * successfully (&lt;code&gt;RC_OK&lt;/code&gt;) or not (&lt;code&gt;RC_NOK&lt;/code&gt;).
	 */
<span class="nc" id="L59">	private String mReturncode = Constants.RC_OK;</span>

	/**
	 * If an error has occured an numerical errorcode can be set by the method
	 * or neighbor-system that generates the error.
	 */
<span class="nc" id="L65">	private int mErrorcode = 0;</span>

	/**
	 * If an error has occured an errortext can be set by the method or
	 * neighbor-system that generates the error.
	 */
<span class="nc" id="L71">	private String mErrortext = null;</span>

	/**
	 * The shortname for the call is used many times in the configuration
	 */
<span class="nc" id="L76">	private String mShortname = null;</span>

	/**
	 * This constructor stores the &lt;code&gt;source&lt;/code&gt;, creates an unique
	 * identifier for the call and initializes the requestTimestamp. It is used
	 * when constructing a new &lt;code&gt;Message&lt;/code&gt; from the data of a
	 * receiver.
	 */
	public Message(XBUSSystem source)
<span class="nc" id="L85">	{</span>
<span class="nc" id="L86">		mSource = source;</span>
<span class="nc" id="L87">		mId = createUniqueId();</span>
<span class="nc" id="L88">		mRequestTimestamp = new Date();</span>
<span class="nc" id="L89">		mFunction = &quot;Default&quot;;</span>
<span class="nc" id="L90">	}</span>

	/**
	 * This constructor initializes the new &lt;code&gt;Message&lt;/code&gt; with the
	 * given parameters. It is used when constructing a new &lt;code&gt;Message&lt;/code&gt;
	 * by converting it from another &lt;code&gt;Message&lt;/code&gt;.
	 */
	public Message(String function, XBUSSystem source, String id)
<span class="nc" id="L98">	{</span>
<span class="nc" id="L99">		mRequestTimestamp = new Date();</span>
<span class="nc" id="L100">		mId = id;</span>
<span class="nc" id="L101">		mFunction = function;</span>
<span class="nc" id="L102">		mSource = source;</span>
<span class="nc" id="L103">	}</span>

	/**
	 * Gets the unique id.
	 */
	public String getId()
	{
<span class="nc" id="L110">		return mId;</span>
	}

	/**
	 * Sets the unique id.
	 */
	protected void setId(String id)
	{
<span class="nc" id="L118">		mId = id;</span>
<span class="nc" id="L119">	}</span>

	/**
	 * Gets the name of the function.
	 */
	public String getFunction()
	{
<span class="nc" id="L126">		return mFunction;</span>
	}

	/**
	 * Sets the name of the function.
	 */
	protected void setFunction(String function)
	{
<span class="nc" id="L134">		mFunction = function;</span>
<span class="nc" id="L135">	}</span>

	/**
	 * Gets the name of the neighbor-system that has send the message.
	 */
	public XBUSSystem getSource()
	{
<span class="nc" id="L142">		return mSource;</span>
	}

	/**
	 * Gets the timestamp when this &lt;code&gt;Message&lt;/code&gt; has been received.
	 */
	public Date getRequestTimestamp()
	{
<span class="nc" id="L150">		return mRequestTimestamp;</span>
	}

	/**
	 * Gets the timestamp when the response has been given to the
	 * neighbor-system, which has sent the request.
	 */
	public Date getResponseTimestamp()
	{
<span class="nc" id="L159">		return mResponseTimestamp;</span>
	}

	/**
	 * Sets the timestamp when the response has been given to the
	 * neighbor-system, which has sent the request.
	 */
	public void setResponseTimestamp(Date timestamp)
	{
<span class="nc" id="L168">		mResponseTimestamp = timestamp;</span>
<span class="nc" id="L169">	}</span>

	/**
	 * Gets the returncode.
	 */
	public String getReturncode()
	{
<span class="nc" id="L176">		return mReturncode;</span>
	}

	/**
	 * Sets the returncode.
	 */
	public void setReturncode(String rc)
	{
<span class="nc" id="L184">		mReturncode = rc;</span>
<span class="nc" id="L185">	}</span>

	/**
	 * Gets the errorcode.
	 */
	public int getErrorcode()
	{
<span class="nc" id="L192">		return mErrorcode;</span>
	}

	/**
	 * Sets the errorcode.
	 */
	public void setErrorcode(int errorcode)
	{
<span class="nc" id="L200">		mErrorcode = errorcode;</span>
<span class="nc" id="L201">	}</span>

	/**
	 * Gets the errortext.
	 */
	public String getErrortext()
	{
<span class="nc" id="L208">		return mErrortext;</span>
	}

	/**
	 * Sets the errortext.
	 */
	public void setErrortext(String errortext)
	{
<span class="nc" id="L216">		mErrortext = errortext;</span>
<span class="nc" id="L217">	}</span>

	/**
	 * Sets the shortname.
	 */
	public void setShortname(String shortname)
	{
<span class="nc" id="L224">		mShortname = shortname;</span>
<span class="nc" id="L225">	}</span>

	/**
	 * Gets the shortname.
	 */
	public String getShortname()
	{
<span class="nc" id="L232">		return mShortname;</span>
	}

	private String createUniqueId()
	{
<span class="nc" id="L237">		return new StringBuffer().append(Thread.currentThread().getName())</span>
<span class="nc" id="L238">				.append(&quot;_&quot;).append((new Date()).getTime()).toString();</span>
	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>