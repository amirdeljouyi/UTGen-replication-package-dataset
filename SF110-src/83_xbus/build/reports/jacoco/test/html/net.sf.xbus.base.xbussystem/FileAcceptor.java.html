<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>FileAcceptor.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">83_xbus</a> &gt; <a href="index.source.html" class="el_package">net.sf.xbus.base.xbussystem</a> &gt; <span class="el_source">FileAcceptor.java</span></div><h1>FileAcceptor.java</h1><pre class="source lang-java linenums">package net.sf.xbus.base.xbussystem;
import java.io.File;
import java.io.FilenameFilter;
import java.util.List;
import java.util.Vector;

import net.sf.xbus.base.core.Constants;
import net.sf.xbus.base.core.XException;

/**
 * Class &lt;code&gt;FileAcceptor&lt;/code&gt; implements &lt;code&gt;FilenameFilter&lt;/code&gt;
 * interface to filter filenames.&lt;br&gt;
 * Its instances are used to filter directory listings in the
 * {@link java.io.File#list(java.io.FilenameFilter)}method. All file names in
 * the returned array must satisfy this filter.
 * &lt;p&gt;
 * &lt;i&gt;Note:&lt;/i&gt;&amp;nbsp;A name satisfies the filter if and only if the value true
 * results when the {@link #accept(File, String)} method is invoked on this
 * abstract pathname and the name of a file or directory in the directory that
 * it denotes.
 * &lt;p&gt;
 * 
 * @author Fleckenstein
 */
public class FileAcceptor implements FilenameFilter
{
	/**
	 * Stores the name of the file before separator(WILDCARD)
	 */
<span class="nc" id="L30">	String mPrefix = null;</span>
	/**
	 * Stores the name of the file after separator(WILDCARD) or empty string if
	 * the name ends with separator(WILDCARD)
	 */
<span class="nc" id="L35">	String mPostfix = null;</span>
	/**
	 * Stores all replacements(WILDCARDS)
	 */
<span class="nc" id="L39">	Vector mReplacements = new Vector();</span>

	/**
	 * Initializes new Filename filter for the given abstract pathname with
	 * checking it on observance of a Separator(WILDCARD) and storing the prefix
	 * and postfix of this filename in to class variables.
	 * 
	 * @param pathname abstract path name to be filtered
	 * @exception XException if the filename doesn't contain a seperator or has
	 *                more than one seperator
	 */
	public FileAcceptor(String pathname) throws XException
<span class="nc" id="L51">	{</span>
		// store the name of the file or directory denoted by this abstract
		// pathname.
		// This is just the last name in the pathname's name sequence.
<span class="nc" id="L55">		String filename = new File(pathname).getName();</span>

		// check if this name contains one and only one WILDCARD
<span class="nc" id="L58">		int seperatorIndex = filename.indexOf(XBUSSystem.FILENAME_WILDCARD);</span>
<span class="nc bnc" id="L59" title="All 2 branches missed.">		if (seperatorIndex &lt; 0)</span>
		{
<span class="nc" id="L61">			List params = new Vector();</span>
<span class="nc" id="L62">			params.add(filename);</span>
<span class="nc" id="L63">			throw new XException(Constants.LOCATION_INTERN,</span>
					Constants.LAYER_BASE, Constants.PACKAGE_BASE_XBUSSYSTEM,
					&quot;1&quot;, params);
		} // if (seperatorIndex &lt; 0)

<span class="nc" id="L68">		if (seperatorIndex != filename</span>
<span class="nc bnc" id="L69" title="All 2 branches missed.">				.lastIndexOf(XBUSSystem.FILENAME_WILDCARD))</span>
		{
<span class="nc" id="L71">			List params = new Vector();</span>
<span class="nc" id="L72">			params.add(filename);</span>
<span class="nc" id="L73">			throw new XException(Constants.LOCATION_INTERN,</span>
					Constants.LAYER_BASE, Constants.PACKAGE_BASE_XBUSSYSTEM,
					&quot;2&quot;, params);
		} // if (seperatorIndex !=
			// filename.lastIndexOf(XBUSSystem.FILENAME_WILDCARD))

		// save prefix (name before WILDCARD) and postfix (name after WILDCARD
		// or &quot;&quot; if the filename ends with the WILDCARD) in class variablen
<span class="nc" id="L81">		mPrefix = filename.substring(0, seperatorIndex);</span>
<span class="nc" id="L82">		if (filename.length() &gt; seperatorIndex</span>
<span class="nc bnc" id="L83" title="All 2 branches missed.">				+ XBUSSystem.FILENAME_WILDCARD.length())</span>
		{
<span class="nc" id="L85">			mPostfix = filename.substring(seperatorIndex</span>
<span class="nc" id="L86">					+ XBUSSystem.FILENAME_WILDCARD.length(), filename.length());</span>
		} // then (filename.length()
		else
		{
<span class="nc" id="L90">			mPostfix = &quot;&quot;;</span>
		} // else (filename.length()
<span class="nc" id="L92">	} // FileAcceptor(String pathname)</span>

	/**
	 * Tests whether or not the specified file should be included in a file
	 * list. If the file is satisfyd this filter, that stores this method the
	 * placeholder to be replace late (substring between prefix and postfix) in
	 * vector.
	 * 
	 * @see java.io.FilenameFilter#accept(File, String)
	 * @param dir the directory in which the file was found.
	 * @param filename the name of the file to be tested
	 * @return true if and only if filename should be included in the file list;
	 *         false otherwise.
	 */
	public boolean accept(File dir, String filename)
	{
<span class="nc" id="L108">		boolean result = false;</span>
<span class="nc bnc" id="L109" title="All 4 branches missed.">		if (filename.startsWith(mPrefix) &amp;&amp; filename.endsWith(mPostfix))</span>
		{ // File name is matches the pattern.
<span class="nc" id="L111">			mReplacements.add(filename.substring(mPrefix.length(), filename</span>
<span class="nc" id="L112">					.lastIndexOf(mPostfix)));</span>
<span class="nc" id="L113">			result = true;</span>
		} // if (filename.startsWith(mPrefix) &amp;&amp; filename.endsWith(mPostfix))
<span class="nc" id="L115">		return result;</span>
	} // accept(File dir, String filename)

	/**
	 * Returns the list with all replacements (WILDCARDS)
	 * 
	 * @return list with all replacements
	 */

	public List getReplacements()
	{
<span class="nc" id="L126">		return mReplacements;</span>
	} // getReplacements()

} // FileAcceptor

</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>