<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>JTailMainFrame.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">64_jtailgui</a> &gt; <a href="index.source.html" class="el_package">fr.pingtimeout.jtail.gui.view</a> &gt; <span class="el_source">JTailMainFrame.java</span></div><h1>JTailMainFrame.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 2010 Pierre Laporte.
 *
 * This file is part of JTailPlus.
 *
 * JTailPlus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * JTailPlus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with JTailPlus.  If not, see &lt;http://www.gnu.org/licenses/&gt;.
 */

package fr.pingtimeout.jtail.gui.view;

import fr.pingtimeout.jtail.gui.action.*;
import fr.pingtimeout.jtail.gui.model.JTailMainModel;
import fr.pingtimeout.jtail.gui.model.JTailMainModelEvent;
import fr.pingtimeout.jtail.util.JTailLogger;

import javax.swing.*;
import java.awt.*;
import java.util.Observable;
import java.util.Observer;
import java.util.ResourceBundle;

public class JTailMainFrame extends JFrame implements Observer {
    /**
     * Buddle.
     */
    private static final ResourceBundle
<span class="nc" id="L38">            bundle = ResourceBundle.getBundle(&quot;fr.pingtimeout.jtail.gui.language&quot;); //NON-NLS</span>

    final JTailMainModel model;

    final JPanel mainPanel;
    final JTabbedPane tabbedPane;

    final JMenuBar menuBar;
    final JMenu fileMenu;
    final JMenu toolsMenu;
    final JToolBar toolBar;

    final JMenuItem openMenuItem;
    final JMenuItem closeMenuItem;
    final JMenuItem closeAllMenuItem;
    final JMenuItem quitMenuItem;
    final JMenuItem highlightMenuItem;
    final JButton openButton;
    final JButton closeButton;
    final JButton closeAllButton;
    final JButton highlightButton;

    final MenuAction fileAction;
    final OpenFileAction openFileAction;
    final CloseAction closeAction;
    final CloseAllAction closeAllAction;
    final QuitAction quitAction;
    final MenuAction toolsAction;
    final HighlightAction highlightAction;

    public JTailMainFrame(JTailMainModel jTailMainModel,
                          MenuAction fileAction,
                          OpenFileAction openFileAction,
                          CloseAction closeAction,
                          CloseAllAction closeAllAction,
                          QuitAction quitAction,
                          MenuAction toolsAction,
                          HighlightAction highlightAction) {
<span class="nc" id="L76">        super(bundle.getString(&quot;jtail.title&quot;));</span>
<span class="nc" id="L77">        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span>

        // Build the model
<span class="nc" id="L80">        this.model = jTailMainModel;</span>
<span class="nc" id="L81">        this.model.addObserver(this);</span>

        // Build the main panels
<span class="nc" id="L84">        this.mainPanel = new JPanel();</span>
<span class="nc" id="L85">        this.mainPanel.setLayout(new BorderLayout());</span>
<span class="nc" id="L86">        this.tabbedPane = new JTabbedPane();</span>
<span class="nc" id="L87">        this.tabbedPane.setPreferredSize(new Dimension(800, 600));</span>

        // Build the actions
<span class="nc" id="L90">        this.fileAction = fileAction;</span>
<span class="nc" id="L91">        this.openFileAction = openFileAction;</span>
<span class="nc" id="L92">        this.closeAction = closeAction;</span>
<span class="nc" id="L93">        this.closeAllAction = closeAllAction;</span>
<span class="nc" id="L94">        this.quitAction = quitAction;</span>
<span class="nc" id="L95">        this.toolsAction = toolsAction;</span>
<span class="nc" id="L96">        this.highlightAction = highlightAction;</span>

        // Build the menu
<span class="nc" id="L99">        this.fileMenu = new JMenu(this.fileAction);</span>
<span class="nc" id="L100">        this.toolsMenu = new JMenu(this.toolsAction);</span>
<span class="nc" id="L101">        this.menuBar = new JMenuBar();</span>
<span class="nc" id="L102">        this.menuBar.add(this.fileMenu);</span>
<span class="nc" id="L103">        this.menuBar.add(this.toolsMenu);</span>

        // Build and add the menu items to the menubar
<span class="nc" id="L106">        this.openMenuItem = new JMenuItem(this.openFileAction);</span>
<span class="nc" id="L107">        this.closeMenuItem = new JMenuItem(this.closeAction);</span>
<span class="nc" id="L108">        this.closeAllMenuItem = new JMenuItem(this.closeAllAction);</span>
<span class="nc" id="L109">        this.quitMenuItem = new JMenuItem(this.quitAction);</span>
<span class="nc" id="L110">        this.highlightMenuItem = new JMenuItem(this.highlightAction);</span>
<span class="nc" id="L111">        this.fileMenu.add(this.openMenuItem);</span>
<span class="nc" id="L112">        this.fileMenu.add(this.closeMenuItem);</span>
<span class="nc" id="L113">        this.fileMenu.add(this.closeAllMenuItem);</span>
<span class="nc" id="L114">        this.fileMenu.addSeparator();</span>
<span class="nc" id="L115">        this.fileMenu.add(this.quitMenuItem);</span>
<span class="nc" id="L116">        this.toolsMenu.add(this.highlightMenuItem);</span>

        // Build the toolbar
<span class="nc" id="L119">        this.toolBar = new JToolBar((String) this.fileAction.getValue(MenuAction.NAME));</span>
<span class="nc" id="L120">        this.openButton = new JButton(this.openFileAction);</span>
<span class="nc" id="L121">        this.openButton.setText(&quot;&quot;);</span>
<span class="nc" id="L122">        this.closeButton = new JButton(this.closeAction);</span>
<span class="nc" id="L123">        this.closeButton.setText(&quot;&quot;);</span>
<span class="nc" id="L124">        this.closeAllButton = new JButton(this.closeAllAction);</span>
<span class="nc" id="L125">        this.closeAllButton.setText(&quot;&quot;);</span>
<span class="nc" id="L126">        this.highlightButton = new JButton(this.highlightAction);</span>
<span class="nc" id="L127">        this.highlightButton.setText(&quot;&quot;);</span>

<span class="nc" id="L129">        this.toolBar.add(this.openButton);</span>
<span class="nc" id="L130">        this.toolBar.add(this.closeButton);</span>
<span class="nc" id="L131">        this.toolBar.add(this.closeAllButton);</span>
<span class="nc" id="L132">        this.toolBar.addSeparator();</span>
<span class="nc" id="L133">        this.toolBar.add(this.highlightButton);</span>

<span class="nc" id="L135">        this.mainPanel.add(this.tabbedPane, BorderLayout.CENTER);</span>
<span class="nc" id="L136">        this.mainPanel.add(this.toolBar, BorderLayout.PAGE_START);</span>
<span class="nc" id="L137">        this.setContentPane(this.mainPanel);</span>
<span class="nc" id="L138">        this.setJMenuBar(this.menuBar);</span>
<span class="nc" id="L139">    }</span>

    @Override
    public void update(Observable observable, Object arg) {
<span class="nc bnc" id="L143" title="All 2 branches missed.">        if (observable == this.model) {</span>
<span class="nc" id="L144">            JTailLogger.debug(&quot;JTailMainFrame just received a notification : &quot; //NON-NLS</span>
                    + arg);

<span class="nc" id="L147">            final JTailMainModelEvent event = (JTailMainModelEvent) arg;</span>
<span class="nc bnc" id="L148" title="All 4 branches missed.">            switch (event.type) {</span>
                case CREATED:
<span class="nc" id="L150">                    JTailLogger.debug(&quot;Adding a tab for {}&quot;, event.model.getFileName()); //NON-NLS</span>
<span class="nc" id="L151">                    JTailPanel panel = new JTailPanel(event.model);</span>

<span class="nc" id="L153">                    this.tabbedPane.add(event.model.getFileName(), panel);</span>
<span class="nc" id="L154">                    this.tabbedPane.setSelectedComponent(panel);</span>
<span class="nc" id="L155">                    break;</span>

                case UPDATED:
<span class="nc" id="L158">                    JTailLogger.debug(&quot;Updating ... wait what ?&quot;); //NON-NLS</span>
<span class="nc" id="L159">                    throw new UnsupportedOperationException();</span>
                    //break;

                case REMOVED:
<span class="nc" id="L163">                    JTailLogger.debug(&quot;Removing tab {}&quot;, event.index); //NON-NLS</span>

<span class="nc" id="L165">                    this.tabbedPane.remove(event.index);</span>
                    break;
            }
        }
<span class="nc" id="L169">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>