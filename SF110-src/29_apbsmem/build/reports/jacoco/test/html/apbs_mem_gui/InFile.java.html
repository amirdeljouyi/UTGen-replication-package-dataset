<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>InFile.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">29_apbsmem</a> &gt; <a href="index.source.html" class="el_package">apbs_mem_gui</a> &gt; <span class="el_source">InFile.java</span></div><h1>InFile.java</h1><pre class="source lang-java linenums">/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

package apbs_mem_gui;

/**
 *
 * @author Keith Callenberg
 */

public class InFile {
	private String molecule1, molecule2, molecule3, dime, glen[],
            solMethod, proteinDi, solventDi, boundCond, countIon1,
            countIon2, srad, sdens, temp, potential, zmem, lmem, mdie,
            idie, geo1, geo2, geo3, i1charge, i1radius, i1conc, i2charge,
            i2conc, i2radius, center;
	private StringBuffer readMols, focus, all;
	private int maxfocus, calcType;
        private boolean drawpot;
<span class="nc" id="L22">	public void setMaxFocus(int mfocus) {maxfocus = mfocus;}</span>

<span class="nc" id="L24">	public InFile() {</span>
<span class="nc" id="L25">            maxfocus = 0;</span>
<span class="nc" id="L26">            dime = new String(&quot;&quot;);</span>
<span class="nc" id="L27">            glen = new String[3]; glen[0] = new String(&quot;&quot;);</span>
<span class="nc" id="L28">            solMethod = new String(&quot;&quot;);</span>
<span class="nc" id="L29">            proteinDi = new String(&quot;&quot;);</span>
<span class="nc" id="L30">            solventDi = new String(&quot;&quot;);</span>
<span class="nc" id="L31">            boundCond = new String(&quot;&quot;);</span>
<span class="nc" id="L32">            molecule1 = new String(&quot;&quot;);</span>
<span class="nc" id="L33">            molecule2 = new String(&quot;&quot;);</span>
<span class="nc" id="L34">            molecule3 = new String(&quot;&quot;);</span>
<span class="nc" id="L35">            i1charge = new String(&quot;&quot;);</span>
<span class="nc" id="L36">            i1conc = new String(&quot;&quot;);</span>
<span class="nc" id="L37">            i1radius = new String(&quot;&quot;);</span>
<span class="nc" id="L38">            i2charge = new String(&quot;&quot;);</span>
<span class="nc" id="L39">            i2conc = new String(&quot;&quot;);</span>
<span class="nc" id="L40">            i2radius = new String(&quot;&quot;);</span>

<span class="nc" id="L42">            countIon2 = new String(&quot;&quot;);</span>
<span class="nc" id="L43">            srad      = new String(&quot;&quot;);</span>
<span class="nc" id="L44">            sdens     = new String(&quot;&quot;);</span>
<span class="nc" id="L45">            temp      = new String(&quot;&quot;);</span>
<span class="nc" id="L46">            potential = new String(&quot;&quot;);</span>
<span class="nc" id="L47">            zmem      = new String(&quot;&quot;);</span>
<span class="nc" id="L48">            lmem      = new String(&quot;&quot;);</span>
<span class="nc" id="L49">            mdie      = new String(&quot;&quot;);</span>
<span class="nc" id="L50">            idie      = new String(&quot;&quot;);</span>
<span class="nc" id="L51">            geo1      = new String(&quot;&quot;);</span>
<span class="nc" id="L52">            geo2      = new String(&quot;&quot;);</span>
<span class="nc" id="L53">            geo3      = new String(&quot;&quot;);</span>
<span class="nc" id="L54">            center    = new String(&quot;&quot;);</span>
<span class="nc" id="L55">            calcType  = 0;</span>
<span class="nc" id="L56">            drawpot   = false;</span>

<span class="nc" id="L58">            readMols = new StringBuffer();</span>
<span class="nc" id="L59">            focus = new StringBuffer();</span>
<span class="nc" id="L60">            all = new StringBuffer();</span>
<span class="nc" id="L61">	}</span>

        /* setter methods for the Main class */
<span class="nc" id="L64">	public void setMol1     (String mol1)  {molecule1 = mol1;System.out.println(&quot;infile: &quot; + mol1);}</span>
<span class="nc" id="L65">        public void setMol2     (String mol2)  {molecule2 = mol2;}</span>
<span class="nc" id="L66">        public void setMol3     (String mol3)  {molecule3 = mol3;}</span>
<span class="nc" id="L67">	public void setDime     (String newDime)  {dime = newDime;}</span>
<span class="nc" id="L68">	public void setGlen     (String newGlen, int f)  {     glen[f] = newGlen;}</span>
<span class="nc" id="L69">	public void setProteinDi(String newpDi)  {proteinDi = newpDi;}</span>
<span class="nc" id="L70">	public void setSolventDi(String newsDi)  {solventDi = newsDi;}</span>
<span class="nc" id="L71">	public void setSolMethod(String newsol)  {solMethod = newsol;}</span>
<span class="nc" id="L72">	public void setBoundCond(String newbcd)  {boundCond = newbcd;}</span>
<span class="nc" id="L73">        public void setIon1Charge(String newi1charge) {i1charge = newi1charge;}</span>
<span class="nc" id="L74">        public void setIon1Conc(String newi1conc) {i1conc = newi1conc;}</span>
<span class="nc" id="L75">        public void setIon1Radius(String newi1radius) {i1radius = newi1radius;}</span>
<span class="nc" id="L76">        public void setIon2Charge(String newi2charge) {i2charge = newi2charge;}</span>
<span class="nc" id="L77">        public void setIon2Conc(String newi2conc) {i2conc = newi2conc;}</span>
<span class="nc" id="L78">        public void setIon2Radius(String newi2radius) {i2radius = newi2radius;}</span>
<span class="nc" id="L79">	public void setCountIon1(String newci1)  {countIon1 = newci1;}</span>
<span class="nc" id="L80">	public void setCountIon2(String newci2)  {countIon2 = newci2;}</span>
<span class="nc" id="L81">	public void setSrad     (String newrad)  {     srad = newrad;}</span>
<span class="nc" id="L82">	public void setSdens    (String newden)  {    sdens = newden;}</span>
<span class="nc" id="L83">	public void setTemp     (String newtem)  {     temp = newtem;}</span>
<span class="nc" id="L84">        public void setType     (int type)       {    calcType = type;}</span>
<span class="nc" id="L85">        public void setPotential(String pot)    { potential = pot;}</span>
<span class="nc" id="L86">        public void setZmem     (String zm)      { zmem = zm;}</span>
<span class="nc" id="L87">        public void setLmem     (String lm)      { lmem = lm;}</span>
<span class="nc" id="L88">        public void setMdie     (String md)      { mdie = md;}</span>
<span class="nc" id="L89">        public void setIdie     (String id)      { idie = id;}</span>
<span class="nc" id="L90">        public void setGeo1     (String g1)      { geo1 = g1;}</span>
<span class="nc" id="L91">        public void setGeo2     (String g2)      { geo2 = g2;}</span>
<span class="nc" id="L92">        public void setGeo3     (String g3)      { geo3 = g3;}</span>
<span class="nc" id="L93">        public void setDrawPot  (boolean dp)     { drawpot = dp;}</span>
<span class="nc" id="L94">        public void setCenter   (String ctr)     { center = ctr;}</span>

        /* getter methods for the Run class */
<span class="nc" id="L97">        public String getMol1()  {return molecule1;}</span>
<span class="nc" id="L98">        public String getMol2()  {return molecule2;}</span>
<span class="nc" id="L99">        public String getMol3()  {return molecule3;}</span>
<span class="nc" id="L100">	public String getDime()  {return      dime;}</span>
<span class="nc" id="L101">	public String[] getGlen()  {return      glen;}</span>
<span class="nc" id="L102">	public String getProteinDi()  {return proteinDi;}</span>
<span class="nc" id="L103">	public String getSolventDi()  {return solventDi;}</span>
<span class="nc" id="L104">	public String getSolMethod()  {return solMethod;}</span>
<span class="nc" id="L105">	public String getBoundCond()  {return boundCond;}</span>
<span class="nc" id="L106">	public String getCountIon1()  {return i1conc;}</span>
<span class="nc" id="L107">	public String getCountIon2()  {return i2conc;}</span>
<span class="nc" id="L108">	public String getSrad()  { return     srad;}</span>
<span class="nc" id="L109">	public String getSdens()  { return    sdens;}</span>
<span class="nc" id="L110">	public String getTemp()  {  return    temp;}</span>
<span class="nc" id="L111">        public int getType()     {  return   calcType;}</span>
<span class="nc" id="L112">        public String getPotential()   {return  potential;}</span>
<span class="nc" id="L113">        public String getZmem()     {return  zmem;}</span>
<span class="nc" id="L114">        public String getLmem()      {return  lmem;}</span>
<span class="nc" id="L115">        public String getMdie ()      {return  mdie;}</span>
<span class="nc" id="L116">        public String getIdie ()      {return  idie;}</span>
<span class="nc" id="L117">        public String getGeo1()      {return  geo1;}</span>
<span class="nc" id="L118">        public String getGeo2()      {return  geo2;}</span>
<span class="nc" id="L119">        public String getGeo3 ()      {return  geo3;}</span>
<span class="nc" id="L120">        public boolean getDrawPot()     {return  drawpot;}</span>
<span class="nc" id="L121">        public int getMaxfocus()    {return maxfocus;}</span>
<span class="nc" id="L122">        public String getCenter()   {return center;}</span>

        /*
         * The toString method is used when writing APBS input files
         * from the variables stored in an InFile object.
         * There are 3 calculation types:
         *  0: Protein solvation
         *  1: Ion solvation
         *  2: Gating charge
         * @param firstcall True if the output should be written for a Dummy calculation
         */
	public String toString(boolean firstcall) {
<span class="nc" id="L134">		all = new StringBuffer(); readMols = new StringBuffer();	//reset all the stringbuffers or it will</span>
<span class="nc" id="L135">		focus = new StringBuffer();	</span>

<span class="nc" id="L137">                all.append(&quot;#APBSmem geometric factors\n&quot;);</span>
<span class="nc" id="L138">                all.append(getRunParams());</span>

<span class="nc" id="L140">		readMols.append(new String(&quot;# READ IN MOLECULES\nread\n&quot;));</span>

<span class="nc bnc" id="L142" title="All 4 branches missed.">                if(calcType == 2 &amp;&amp; firstcall)</span>
<span class="nc" id="L143">                    readMols.append(&quot;mol pqr \&quot;&quot; + molecule1 + &quot;.n.pqr\&quot;\n&quot;);</span>
                else 
<span class="nc" id="L145">                    readMols.append(&quot;mol pqr \&quot;&quot; + molecule1 + &quot;\&quot;\n&quot;);</span>

<span class="nc bnc" id="L147" title="All 2 branches missed.">                if(!molecule2.equals(&quot;&quot;)) {</span>
<span class="nc bnc" id="L148" title="All 4 branches missed.">                    if(calcType == 2 &amp;&amp; firstcall)</span>
<span class="nc" id="L149">                        readMols.append(&quot;mol pqr \&quot;&quot; + molecule2 + &quot;.n.pqr\&quot;\n&quot;);</span>
                    else
<span class="nc" id="L151">                        readMols.append(&quot;mol pqr \&quot;&quot; + molecule2 + &quot;\&quot;\n&quot;);</span>
                }
                
<span class="nc bnc" id="L154" title="All 2 branches missed.">                if(!molecule3.equals(&quot;&quot;))</span>
<span class="nc" id="L155">                    readMols.append(&quot;mol pqr \&quot;&quot; + molecule3 + &quot;\&quot;\n&quot;);</span>


<span class="nc bnc" id="L158" title="All 2 branches missed.">                if(calcType == 0) {</span>
                    //PROTEIN SOLVATION

<span class="nc bnc" id="L161" title="All 2 branches missed.">                    if(!firstcall) {</span>
<span class="nc" id="L162">                            readMols.append(new String(&quot;\n# Read Maps&quot;));</span>
<span class="nc bnc" id="L163" title="All 2 branches missed.">                            for(int i = 1; i &lt;= (maxfocus + 1); i++)</span>
<span class="nc" id="L164">                                    readMols.append(new String(&quot;\ndiel dx dielx_&quot; + i + &quot;m.dx diely_&quot; + i + &quot;m.dx dielz_&quot; + i + &quot;m.dx&quot;));</span>
<span class="nc" id="L165">                            readMols.append(&quot;\n&quot;);</span>
<span class="nc bnc" id="L166" title="All 2 branches missed.">                            for(int i = 1; i &lt;= (maxfocus + 1); i++)</span>
<span class="nc" id="L167">                                    readMols.append(new String(&quot;\n    kappa dx kappa_&quot; + i + &quot;m.dx&quot;));</span>
<span class="nc" id="L168">                            readMols.append(&quot;\n&quot;);</span>
<span class="nc bnc" id="L169" title="All 2 branches missed.">                            for(int i = 1; i &lt;= (maxfocus + 1); i++)</span>
<span class="nc" id="L170">                                    readMols.append(new String(&quot;\n    charge dx charge_&quot; + i + &quot;m.dx&quot;));</span>
                    }
<span class="nc" id="L172">                    readMols.append(new String(&quot;\nend\n\n&quot;));</span>
<span class="nc" id="L173">                    all.append(readMols);</span>

                    
<span class="nc bnc" id="L176" title="All 2 branches missed.">                    if(firstcall) {</span>
<span class="nc bnc" id="L177" title="All 2 branches missed.">                        for(int i = 0; i &lt;= maxfocus; i++) {</span>
<span class="nc" id="L178">                            all.append(writeSection(i, 1, new String(&quot;solv&quot; + i), firstcall, false));</span>
                        }
                    }
                    else {
<span class="nc bnc" id="L182" title="All 2 branches missed.">                        for(int i = 0; i &lt;= maxfocus; i++) {</span>
<span class="nc" id="L183">                            all.append(writeSection(i, 1, new String(&quot;solv&quot; + i), firstcall, false));</span>
                        }
<span class="nc bnc" id="L185" title="All 2 branches missed.">                        for(int i = 0; i &lt;= maxfocus; i++) {</span>
<span class="nc" id="L186">                            all.append(writeSection(i, 1, new String(&quot;ref&quot; + i), firstcall, true));</span>
                        }
<span class="nc" id="L188">                        all.append(&quot;print elecEnergy ref&quot; + Integer.toString(maxfocus) + &quot; - solv&quot; +</span>
<span class="nc" id="L189">                                Integer.toString(maxfocus) + &quot;\nend\n\n&quot;);</span>
                    }
                }

<span class="nc bnc" id="L193" title="All 2 branches missed.">                else if(calcType == 1) {</span>
                    //ION SOLVATION

<span class="nc bnc" id="L196" title="All 2 branches missed.">                    if(!firstcall) {</span>
<span class="nc" id="L197">                            readMols.append(new String(&quot;\n# Read Maps&quot;));</span>
<span class="nc bnc" id="L198" title="All 2 branches missed.">                            for(int i = 1; i &lt;= (maxfocus + 1)*2; i++)</span>
<span class="nc" id="L199">                                    readMols.append(new String(&quot;\ndiel dx dielx_&quot; + i + &quot;m.dx diely_&quot; + i + &quot;m.dx dielz_&quot; + i + &quot;m.dx&quot;));</span>
<span class="nc" id="L200">                            readMols.append(&quot;\n&quot;);</span>
<span class="nc bnc" id="L201" title="All 2 branches missed.">                            for(int i = 1; i &lt;= (maxfocus + 1)*2; i++)</span>
<span class="nc" id="L202">                                    readMols.append(new String(&quot;\n    kappa dx kappa_&quot; + i + &quot;m.dx&quot;));</span>
<span class="nc" id="L203">                            readMols.append(&quot;\n&quot;);</span>
<span class="nc bnc" id="L204" title="All 2 branches missed.">                            for(int i = 1; i &lt;= (maxfocus + 1)*2; i++)</span>
<span class="nc" id="L205">                                    readMols.append(new String(&quot;\n    charge dx charge_&quot; + i + &quot;m.dx&quot;));</span>
                    }
<span class="nc" id="L207">                    readMols.append(new String(&quot;\nend\n\n&quot;));</span>
<span class="nc" id="L208">                    all.append(readMols);</span>

<span class="nc bnc" id="L210" title="All 2 branches missed.">                    if(firstcall) {</span>
                        //Write the input file for the &quot;DUMMY&quot; calculation
<span class="nc bnc" id="L212" title="All 2 branches missed.">                        for(int i = 0; i &lt;= maxfocus; i++) {</span>
<span class="nc" id="L213">                            all.append(writeIonSection(i, 3, new String(&quot;protion&quot; + i), firstcall, false, i+1));</span>
                        }
<span class="nc bnc" id="L215" title="All 2 branches missed.">                        for(int i = 0; i &lt;= maxfocus; i++) {</span>
<span class="nc" id="L216">                            all.append(writeIonSection(i, 1, new String(&quot;prot&quot; + i), firstcall, false, (maxfocus+2)+i));</span>
                        }
                    }
                    else {
                        //SOLV
<span class="nc bnc" id="L221" title="All 2 branches missed.">                        for(int i = 0; i &lt;= maxfocus; i++) {</span>
<span class="nc" id="L222">                            all.append(writeIonSection(i, 3, new String(&quot;protion&quot; + i), firstcall, true, i + 1));</span>
                        }
<span class="nc bnc" id="L224" title="All 2 branches missed.">                        for(int i = 0; i &lt;= maxfocus; i++) {</span>
<span class="nc" id="L225">                            all.append(writeIonSection(i, 2, new String(&quot;ion&quot; + i), firstcall, false, 0));</span>
                        }
<span class="nc bnc" id="L227" title="All 2 branches missed.">                        for(int i = 0; i &lt;= maxfocus; i++) {</span>
<span class="nc" id="L228">                            all.append(writeIonSection(i, 1, new String(&quot;prot&quot; + i), firstcall, true, (maxfocus + 2) + i));</span>
                        }
<span class="nc" id="L230">                        all.append(&quot;print elecEnergy protion&quot; + Integer.toString(maxfocus) + &quot; - ion&quot; +</span>
<span class="nc" id="L231">                                Integer.toString(maxfocus) + &quot; - prot&quot; + Integer.toString(maxfocus)  + &quot;\nend\n\n&quot;);</span>
                    }
                }
		
<span class="nc bnc" id="L235" title="All 2 branches missed.">                else if(calcType == 2) {</span>
                    //GATING CHARGE                    

<span class="nc bnc" id="L238" title="All 2 branches missed.">                    if(firstcall) {</span>
                        //Write the input file for the &quot;DUMMY&quot; calculation
<span class="nc" id="L240">                        readMols.append(new String(&quot;\nend\n\n&quot;));</span>
<span class="nc" id="L241">                        all.append(readMols);</span>

<span class="nc bnc" id="L243" title="All 2 branches missed.">                        for(int i = 0; i &lt;= maxfocus; i++) {</span>
<span class="nc" id="L244">                            all.append(writeSection(i, 1, new String(&quot;ref_neut_&quot; + i), firstcall, false));</span>
                        }
<span class="nc bnc" id="L246" title="All 2 branches missed.">                        for(int i = 0; i &lt;= maxfocus; i++) {</span>
<span class="nc" id="L247">                            all.append(writeIonSection(i, 2, new String(&quot;motion_neut_&quot; + i), firstcall, false, (maxfocus+2)+i));</span>
                        }
                    }
                    
                    else {
                        //Write the input fule for the &quot;SOLV&quot; calculation
<span class="nc" id="L253">                        readMols.append(new String(&quot;\n# Read Maps&quot;));</span>
<span class="nc bnc" id="L254" title="All 2 branches missed.">                        for(int i = 1; i &lt;= (maxfocus + 1)*2; i++)</span>
<span class="nc" id="L255">                                readMols.append(new String(&quot;\n    diel dx dielx_&quot; + i + &quot;m.dx diely_&quot; + i + &quot;m.dx dielz_&quot; + i + &quot;m.dx&quot;));</span>
<span class="nc" id="L256">                        readMols.append(&quot;\n&quot;);</span>
<span class="nc bnc" id="L257" title="All 2 branches missed.">                        for(int i = 1; i &lt;= (maxfocus + 1)*2; i++)</span>
<span class="nc" id="L258">                                readMols.append(new String(&quot;\n    kappa dx kappa_&quot; + i + &quot;m.dx&quot;));</span>
<span class="nc" id="L259">                        readMols.append(&quot;\n&quot;);</span>
<span class="nc bnc" id="L260" title="All 2 branches missed.">                        for(int i = 1; i &lt;= (maxfocus + 1)*2; i++)</span>
<span class="nc" id="L261">                                readMols.append(new String(&quot;\n    charge dx charge_&quot; + i + &quot;m.dx&quot;));</span>
<span class="nc" id="L262">                        readMols.append(new String(&quot;\nend\n\n&quot;));</span>
<span class="nc" id="L263">                        all.append(readMols);</span>
                        
<span class="nc bnc" id="L265" title="All 2 branches missed.">                        for(int i = 0; i &lt;= maxfocus; i++) {</span>
<span class="nc" id="L266">                            all.append(writeGatingSection(i, 1, new String(&quot;ref_charged&quot; + i), firstcall, true, i+1));</span>
                        }
<span class="nc bnc" id="L268" title="All 2 branches missed.">                        for(int i = 0; i &lt;= maxfocus; i++) {</span>
<span class="nc" id="L269">                            all.append(writeGatingSection(i, 2, new String(&quot;motion_charged&quot; + i), firstcall, true, (maxfocus+2)+i));</span>
                        }
<span class="nc" id="L271">                        all.append(&quot;print elecEnergy ref_charged&quot; + Integer.toString(maxfocus)  + &quot; - motion_charged&quot; + Integer.toString(maxfocus) + &quot;\nend\n\n&quot;);</span>
                    }
                }

<span class="nc" id="L275">		all.append(&quot;quit&quot;);</span>
<span class="nc" id="L276">		return all.toString();</span>
	}


        private String writeSection(int i, int mol, String calcId, boolean firstcall, boolean solv) {
<span class="nc" id="L281">            StringBuffer section = new StringBuffer();</span>

<span class="nc" id="L283">            section.append(&quot;elec name &quot; + calcId + &quot;\n&quot;);</span>

<span class="nc bnc" id="L285" title="All 2 branches missed.">            if(firstcall)</span>
<span class="nc" id="L286">                section.append(&quot;mg-dummy\n&quot;);</span>
            else
<span class="nc" id="L288">                section.append(&quot;mg-manual\n&quot;);</span>

<span class="nc" id="L290">            section.append(&quot;dime &quot; + dime +&quot;\n&quot;);</span>
<span class="nc" id="L291">            section.append(&quot;glen &quot; + glen[i] + &quot;\n&quot;);</span>
<span class="nc" id="L292">            section.append(solMethod + &quot;\n&quot;);</span>
<span class="nc" id="L293">            section.append(&quot;pdie &quot; + proteinDi + &quot;\n&quot;);</span>
<span class="nc" id="L294">            section.append(&quot;sdie &quot; + solventDi + &quot;\n&quot;);</span>
<span class="nc" id="L295">            section.append(&quot;bcfl &quot;);</span>
<span class="nc bnc" id="L296" title="All 2 branches missed.">            if(i == 0)</span>
<span class="nc" id="L297">                section.append(&quot;zero\n&quot;);</span>
            else
<span class="nc" id="L299">                section.append(&quot;focus\n&quot;);</span>
<span class="nc" id="L300">            section.append(&quot;ion &quot; + i1charge + &quot; &quot; + i1conc + &quot; &quot; + i1radius +&quot;\n&quot;);</span>
<span class="nc" id="L301">            section.append(&quot;ion &quot; + i2charge + &quot; &quot; + i2conc + &quot; &quot; + i2radius +&quot;\n&quot;);</span>
<span class="nc" id="L302">            section.append(&quot;gcent &quot; + center + &quot;\n&quot;);</span>
<span class="nc" id="L303">            section.append(&quot;mol &quot; + mol + &quot;\n&quot;);</span>
<span class="nc" id="L304">            section.append(&quot;chgm spl2\n&quot;);</span>
<span class="nc" id="L305">            section.append(&quot;srfm mol\n&quot;);</span>
<span class="nc" id="L306">            section.append(&quot;srad &quot; + srad + &quot;\n&quot;);</span>
<span class="nc" id="L307">            section.append(&quot;swin 0.3\n&quot;);</span>
<span class="nc" id="L308">            section.append(&quot;sdens &quot; + sdens +&quot;\n&quot;);</span>
<span class="nc" id="L309">            section.append(&quot;temp &quot; + temp + &quot;\n&quot;);</span>
<span class="nc bnc" id="L310" title="All 2 branches missed.">            if(!firstcall)</span>
<span class="nc" id="L311">                section.append(&quot;calcenergy total\n&quot;);</span>
            else
<span class="nc" id="L313">                section.append(&quot;calcenergy no\n&quot;);</span>
<span class="nc" id="L314">            section.append(&quot;calcforce no\n&quot;);</span>

<span class="nc bnc" id="L316" title="All 2 branches missed.">            if(firstcall) {</span>
<span class="nc" id="L317">                section.append(&quot;write dielx dx dielx_&quot; + Integer.toString(i+1) + &quot;\n&quot;);</span>
<span class="nc" id="L318">                section.append(&quot;write diely dx diely_&quot; + Integer.toString(i+1) + &quot;\n&quot;);</span>
<span class="nc" id="L319">                section.append(&quot;write dielz dx dielz_&quot; + Integer.toString(i+1) + &quot;\n&quot;);</span>
<span class="nc" id="L320">                section.append(&quot;write kappa dx kappa_&quot; + Integer.toString(i+1) + &quot;\n&quot;);</span>
<span class="nc" id="L321">                section.append(&quot;write charge dx charge_&quot; + Integer.toString(i+1) + &quot;\nend\n\n&quot;);</span>
            }
<span class="nc bnc" id="L323" title="All 2 branches missed.">            else if(solv) {</span>
<span class="nc" id="L324">                section.append(&quot;usemap diel &quot; + Integer.toString(i+1) + &quot;\n&quot;);</span>
<span class="nc" id="L325">                section.append(&quot;usemap kappa &quot; + Integer.toString(i+1) + &quot;\n&quot;);</span>
<span class="nc" id="L326">                section.append(&quot;usemap charge &quot; + Integer.toString(i+1) + &quot;\n&quot;);</span>
<span class="nc bnc" id="L327" title="All 2 branches missed.">                if(drawpot)</span>
<span class="nc" id="L328">                    section.append(&quot;write pot dx pot_&quot; + Integer.toString(i+1) + &quot;\n&quot;);</span>
<span class="nc" id="L329">                section.append(&quot;end\n\n&quot;);</span>
            }
            else
<span class="nc" id="L332">                    section.append(&quot;end\n\n&quot;);</span>

<span class="nc" id="L334">            return section.toString();</span>
        }

        private String writeIonSection(int i, int mol, String calcId, boolean firstcall, boolean solv, int loadmap) {
<span class="nc" id="L338">            StringBuffer section = new StringBuffer();</span>

<span class="nc" id="L340">            section.append(&quot;elec name &quot; + calcId + &quot;\n&quot;);</span>

<span class="nc bnc" id="L342" title="All 2 branches missed.">            if(firstcall)</span>
<span class="nc" id="L343">                section.append(&quot;mg-dummy\n&quot;);</span>
            else
<span class="nc" id="L345">                section.append(&quot;mg-manual\n&quot;);</span>

<span class="nc" id="L347">            section.append(&quot;dime &quot; + dime +&quot;\n&quot;);</span>
<span class="nc" id="L348">            section.append(&quot;glen &quot; + glen[i] + &quot;\n&quot;);</span>
<span class="nc" id="L349">            section.append(solMethod + &quot;\n&quot;);</span>
<span class="nc" id="L350">            section.append(&quot;pdie &quot; + proteinDi + &quot;\n&quot;);</span>
<span class="nc" id="L351">            section.append(&quot;sdie &quot; + solventDi + &quot;\n&quot;);</span>
<span class="nc" id="L352">            section.append(&quot;bcfl &quot;);</span>
<span class="nc bnc" id="L353" title="All 2 branches missed.">            if(i == 0)</span>
<span class="nc" id="L354">                section.append(&quot;zero\n&quot;);</span>
            else
<span class="nc" id="L356">                section.append(&quot;focus\n&quot;);</span>
<span class="nc" id="L357">            section.append(&quot;ion &quot; + i1charge + &quot; &quot; + i1conc + &quot; &quot; + i1radius +&quot;\n&quot;);</span>
<span class="nc" id="L358">            section.append(&quot;ion &quot; + i2charge + &quot; &quot; + i2conc + &quot; &quot; + i2radius +&quot;\n&quot;);</span>
<span class="nc" id="L359">            section.append(&quot;gcent &quot; + center + &quot;\n&quot;);</span>
<span class="nc" id="L360">            section.append(&quot;mol &quot; + mol + &quot;\n&quot;);</span>
<span class="nc" id="L361">            section.append(&quot;chgm spl2\n&quot;);</span>
<span class="nc" id="L362">            section.append(&quot;srfm mol\n&quot;);</span>
<span class="nc" id="L363">            section.append(&quot;srad &quot; + srad + &quot;\n&quot;);</span>
<span class="nc" id="L364">            section.append(&quot;swin 0.3\n&quot;);</span>
<span class="nc" id="L365">            section.append(&quot;sdens &quot; + sdens +&quot;\n&quot;);</span>
<span class="nc" id="L366">            section.append(&quot;temp &quot; + temp + &quot;\n&quot;);</span>
<span class="nc" id="L367">            section.append(&quot;calcenergy total\n&quot;);</span>
<span class="nc" id="L368">            section.append(&quot;calcforce no\n&quot;);</span>

<span class="nc bnc" id="L370" title="All 2 branches missed.">            if(firstcall) {</span>
<span class="nc" id="L371">                section.append(&quot;write dielx dx dielx_&quot; + Integer.toString(loadmap) + &quot;\n&quot;);</span>
<span class="nc" id="L372">                section.append(&quot;write diely dx diely_&quot; + Integer.toString(loadmap) + &quot;\n&quot;);</span>
<span class="nc" id="L373">                section.append(&quot;write dielz dx dielz_&quot; + Integer.toString(loadmap) + &quot;\n&quot;);</span>
<span class="nc" id="L374">                section.append(&quot;write kappa dx kappa_&quot; + Integer.toString(loadmap) + &quot;\n&quot;);</span>
<span class="nc" id="L375">                section.append(&quot;write charge dx charge_&quot; + Integer.toString(loadmap) + &quot;\nend\n\n&quot;);</span>
            }
<span class="nc bnc" id="L377" title="All 2 branches missed.">            else if(solv) {		</span>
<span class="nc" id="L378">                section.append(&quot;usemap diel &quot; + Integer.toString(loadmap) + &quot;\n&quot;);</span>
<span class="nc" id="L379">                section.append(&quot;usemap kappa &quot; + Integer.toString(loadmap) + &quot;\n&quot;);</span>
<span class="nc" id="L380">                section.append(&quot;usemap charge &quot; + Integer.toString(loadmap) + &quot;\n&quot;);</span>
<span class="nc bnc" id="L381" title="All 2 branches missed.">                if(drawpot)</span>
<span class="nc" id="L382">                    section.append(&quot;write pot dx pot_&quot; + Integer.toString(loadmap) + &quot;\n&quot;);</span>
<span class="nc" id="L383">                section.append(&quot;end\n\n&quot;);</span>
            }
            else
<span class="nc" id="L386">                    section.append(&quot;end\n\n&quot;);</span>

<span class="nc" id="L388">            return section.toString();</span>
        }

        private String writeGatingSection(int i, int mol, String calcId, boolean firstcall, boolean solv, int loadmap) {
<span class="nc" id="L392">            StringBuffer section = new StringBuffer();</span>

<span class="nc" id="L394">            section.append(&quot;elec name &quot; + calcId + &quot;\n&quot;);</span>

<span class="nc bnc" id="L396" title="All 2 branches missed.">            if(firstcall)</span>
<span class="nc" id="L397">                section.append(&quot;mg-dummy\n&quot;);</span>
            else
<span class="nc" id="L399">                section.append(&quot;mg-manual\n&quot;);</span>

<span class="nc" id="L401">            section.append(&quot;dime &quot; + dime +&quot;\n&quot;);</span>
<span class="nc" id="L402">            section.append(&quot;glen &quot; + glen[i] + &quot;\n&quot;);</span>
<span class="nc" id="L403">            section.append(solMethod + &quot;\n&quot;);</span>
<span class="nc" id="L404">            section.append(&quot;pdie &quot; + proteinDi + &quot;\n&quot;);</span>
<span class="nc" id="L405">            section.append(&quot;sdie &quot; + solventDi + &quot;\n&quot;);</span>
<span class="nc" id="L406">            section.append(&quot;bcfl &quot;);</span>
<span class="nc bnc" id="L407" title="All 2 branches missed.">            if(i == 0)</span>
<span class="nc" id="L408">                section.append(&quot;mem\n&quot;);</span>
            else {
<span class="nc bnc" id="L410" title="All 2 branches missed.">                if (firstcall)</span>
<span class="nc" id="L411">                    section.append(&quot;zero\n&quot;);</span>
                else
<span class="nc" id="L413">                    section.append(&quot;focus\n&quot;);</span>
            }
<span class="nc" id="L415">            section.append(&quot;ion &quot; + i1charge + &quot; &quot; + i1conc + &quot; &quot; + i1radius +&quot;\n&quot;);</span>
<span class="nc" id="L416">            section.append(&quot;ion &quot; + i2charge + &quot; &quot; + i2conc + &quot; &quot; + i2radius +&quot;\n&quot;);</span>
<span class="nc" id="L417">            section.append(&quot;gcent &quot; + center + &quot;\n&quot;);</span>
<span class="nc" id="L418">            section.append(&quot;mol &quot; + mol + &quot;\n&quot;);</span>
<span class="nc" id="L419">            section.append(&quot;chgm spl2\n&quot;);</span>
<span class="nc" id="L420">            section.append(&quot;srfm mol\n&quot;);</span>
<span class="nc" id="L421">            section.append(&quot;srad &quot; + srad + &quot;\n&quot;);</span>
<span class="nc" id="L422">            section.append(&quot;swin 0.3\n&quot;);</span>
<span class="nc" id="L423">            section.append(&quot;sdens &quot; + sdens +&quot;\n&quot;);</span>
<span class="nc" id="L424">            section.append(&quot;temp &quot; + temp + &quot;\n&quot;);</span>

<span class="nc bnc" id="L426" title="All 2 branches missed.">            if(firstcall)</span>
<span class="nc" id="L427">                section.append(&quot;calcenergy no\n&quot;);</span>
            else
<span class="nc" id="L429">                section.append(&quot;calcenergy comps\n&quot;);</span>
<span class="nc" id="L430">            section.append(&quot;calcforce no\n&quot;);</span>

<span class="nc bnc" id="L432" title="All 2 branches missed.">            if(i==0) {</span>
<span class="nc" id="L433">                section.append(&quot;zmem &quot; + zmem + &quot;\n&quot;);</span>
<span class="nc" id="L434">                section.append(&quot;lmem &quot; + lmem + &quot;\n&quot;);</span>
<span class="nc" id="L435">                section.append(&quot;mdie &quot; + mdie + &quot;\n&quot;);</span>
<span class="nc" id="L436">                section.append(&quot;memv &quot; + potential + &quot;\n&quot;);</span>
            }

<span class="nc bnc" id="L439" title="All 2 branches missed.">            if(firstcall) {</span>
<span class="nc" id="L440">                section.append(&quot;write dielx dx dielx_&quot; + Integer.toString(loadmap) + &quot;\n&quot;);</span>
<span class="nc" id="L441">                section.append(&quot;write diely dx diely_&quot; + Integer.toString(loadmap) + &quot;\n&quot;);</span>
<span class="nc" id="L442">                section.append(&quot;write dielz dx dielz_&quot; + Integer.toString(loadmap) + &quot;\n&quot;);</span>
<span class="nc" id="L443">                section.append(&quot;write kappa dx kappa_&quot; + Integer.toString(loadmap) + &quot;\n&quot;);</span>
<span class="nc" id="L444">                section.append(&quot;write charge dx charge_&quot; + Integer.toString(loadmap) + &quot;\nend\n\n&quot;);</span>
            }
<span class="nc bnc" id="L446" title="All 2 branches missed.">            else if(solv) {</span>
<span class="nc" id="L447">                section.append(&quot;usemap diel &quot; + Integer.toString(loadmap) + &quot;\n&quot;);</span>
<span class="nc" id="L448">                section.append(&quot;usemap kappa &quot; + Integer.toString(loadmap) + &quot;\n&quot;);</span>
<span class="nc" id="L449">                section.append(&quot;usemap charge &quot; + Integer.toString(loadmap) + &quot;\n&quot;);</span>
<span class="nc" id="L450">                section.append(&quot;write pot dx pot_&quot; + Integer.toString(loadmap) + &quot;\nend\n\n&quot;);</span>
            }
            else
<span class="nc" id="L453">                    section.append(&quot;end\n\n&quot;);</span>

<span class="nc" id="L455">            return section.toString();</span>
        }

        private String getRunParams() {
<span class="nc" id="L459">            StringBuffer section = new StringBuffer();</span>
<span class="nc" id="L460">            section.append(&quot;#zmem &quot; + zmem + &quot;\n&quot;);</span>
<span class="nc" id="L461">            section.append(&quot;#lmem &quot; + lmem + &quot;\n&quot;);</span>
<span class="nc" id="L462">            section.append(&quot;#mdie &quot; + mdie + &quot;\n&quot;);</span>
<span class="nc" id="L463">            section.append(&quot;#idie &quot; + idie + &quot;\n&quot;);</span>
<span class="nc" id="L464">            section.append(&quot;#geo1 &quot; + geo1 + &quot;\n&quot;);</span>
<span class="nc" id="L465">            section.append(&quot;#geo2 &quot; + geo2 + &quot;\n&quot;);</span>
<span class="nc" id="L466">            section.append(&quot;#geo3 &quot; + geo3 + &quot;\n\n&quot;);</span>
<span class="nc" id="L467">            return section.toString();</span>
        }

}

</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>