<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SimplePlotXY.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">29_apbsmem</a> &gt; <a href="index.source.html" class="el_package">jahuwaldt.plot</a> &gt; <span class="el_source">SimplePlotXY.java</span></div><h1>SimplePlotXY.java</h1><pre class="source lang-java linenums">/*
*   SimplePlotXY  -- Represents a simple X-Y scatter graph type data plot.
*
*   Copyright (C) 2000-2002 by Joseph A. Huwaldt &lt;jhuwaldt@knology.net&gt;.
*   All rights reserved.
*   
*   This library is free software; you can redistribute it and/or
*   modify it under the terms of the GNU Library General Public
*   License as published by the Free Software Foundation; either
*   version 2 of the License, or (at your option) any later version.
*   
*   This library is distributed in the hope that it will be useful,
*   but WITHOUT ANY WARRANTY; without even the implied warranty of
*   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
*   Library General Public License for more details.
**/
package jahuwaldt.plot;

import java.awt.*;
import javax.swing.*;
import java.util.*;
import java.text.NumberFormat;


/**
*  &lt;p&gt; An object that represents a simple XY scatter
*      graph type plot.  X is the horizontal axis
*      and Y is the vertical axis.
*  &lt;/p&gt;
*  &lt;p&gt; Grid styles, axis formats, and axis labels can
*      be changed by accessing this object's axes and
*      making the changes there.  Then call repaint()
*      on the component containing this plot.
*  &lt;/p&gt;
*  &lt;p&gt; The data being plotted can be
*      changed by accessing this object's run list
*      and making the changes to the runs and
*      data points there.  Then call repaint()
*      on the component containing this plot.
*  &lt;/p&gt;
*
*  &lt;p&gt;  Modified by:  Joseph A. Huwaldt  &lt;/p&gt;
*
*  @author  Joseph A. Huwaldt   Date:  September 15, 2000
*  @version December 2, 2000
**/
public class SimplePlotXY implements Plot2D {

	//	Debug flag.
	private static final boolean DEBUG = false;
	
	/**
	*  The title to be displayed across the top of the plot.
	**/
	private String plotTitle;

	/**
	*  The list of runs plotted in this panel.
	**/
<span class="nc" id="L60">	private PlotRunList runs = new PlotRunList();</span>
	
	/**
	*  The X and Y axes for this plot.
	**/
	private PlotAxis xAxis, yAxis;
	
	
	//-------------------------------------------------------------------------
	/**
	*  Only subclasses can access the default constructor.
	**/
<span class="nc" id="L72">	protected SimplePlotXY() { }</span>
	
	/**
	*  Creates an XY plot (scatter graph) using the data in
	*  the supplied run list.
	*
	*  @param  runList An list of runs of data points to be plotted.
	*  @param  title   The title to be displayed across the top
	*                  of the plot.
	*  @param  xLabel  The label to be displayed along the X-axis.
	*  @param  yLabel  The label to be displayed along the Y-axis.
	*  @param  xFormat The number format to be used for the X axis
	*                  tick mark labels.
	*  @param  yFormat The number format to be used for the Y axis
	*                  tick mark labels.
	**/
	public SimplePlotXY( PlotRunList runList, String title,
						String xLabel, String yLabel,
<span class="nc" id="L90">						NumberFormat xFormat, NumberFormat yFormat ) {</span>

<span class="nc" id="L92">		plotTitle = title;</span>
<span class="nc" id="L93">		runs = runList;</span>
		
		//	Create our plot axes.
<span class="nc" id="L96">		xAxis = new PlotXAxis(xLabel, null, xFormat, PlotAxis.kMajorGrid);</span>
<span class="nc" id="L97">		yAxis = new PlotYAxis(yLabel, null, yFormat, PlotAxis.kMajorGrid);</span>
		
<span class="nc" id="L99">	}</span>

	/**
	*  Creates an XY plot (scatter graph) using the supplied
	*  X and Y data values, titles, labels, and formats.
	*
	*  @param  xArr    An array of X coordinate values.
	*  @param  yArr    An array of Y coordinate values.
	*  @param  title   The title to be displayed across the top
	*                  of the plot.
	*  @param  xLabel  The label to be displayed along the X-axis.
	*  @param  yLabel  The label to be displayed along the Y-axis.
	*  @param  xFormat The number format to be used for the X axis
	*                  tick mark labels.
	*  @param  yFormat The number format to be used for the Y axis
	*                  tick mark labels.
	**/
	public SimplePlotXY( double[] xArr, double[] yArr, String title,
						String xLabel, String yLabel,
<span class="nc" id="L118">						NumberFormat xFormat, NumberFormat yFormat ) {</span>

<span class="nc" id="L120">		plotTitle = title;</span>
		
<span class="nc" id="L122">		createPlot(xArr, yArr, xLabel, yLabel, xFormat, yFormat, null);</span>
		
<span class="nc" id="L124">	}</span>

	/**
	*  Creates an XY plot (scatter graph) using the supplied
	*  X and Y data values, titles, labels, formats and plot symbols.
	*
	*  @param  xArr    An array of X coordinate values.
	*  @param  yArr    An array of Y coordinate values.
	*  @param  title   The title to be displayed across the top
	*                  of the plot.
	*  @param  xLabel  The label to be displayed along the X-axis.
	*  @param  yLabel  The label to be displayed along the Y-axis.
	*  @param  xFormat The number format to be used for the X axis
	*                  tick mark labels.
	*  @param  yFormat The number format to be used for the Y axis
	*                  tick mark labels.
	*  @param  symbol  The plot symbol to use for the data points in this plot.
	*                  If null is passed, no symbol will be drawn.
	**/
	public SimplePlotXY( double[] xArr, double[] yArr, String title,
						String xLabel, String yLabel,
<span class="nc" id="L145">						NumberFormat xFormat, NumberFormat yFormat, PlotSymbol symbol ) {</span>

<span class="nc" id="L147">		plotTitle = title;</span>
		
<span class="nc" id="L149">		createPlot(xArr, yArr, xLabel, yLabel, xFormat, yFormat, symbol);</span>
		
<span class="nc" id="L151">	}</span>

	private void createPlot( double[] xArr, double[] yArr,
						String xLabel, String yLabel,
						NumberFormat xFormat, NumberFormat yFormat, PlotSymbol symbol) {
		
		//	Create a single run of data.
<span class="nc" id="L158">		int numPoints = xArr.length;</span>
<span class="nc bnc" id="L159" title="All 2 branches missed.">		if (yArr.length != numPoints)</span>
<span class="nc" id="L160">			throw new IllegalArgumentException(&quot;Inconsistant array sizes.&quot;);</span>
		
		//	Create a data run.
<span class="nc" id="L163">		PlotRun newRun = new PlotRun();</span>
		
		//	Add each data point to the run.
<span class="nc bnc" id="L166" title="All 2 branches missed.">		for (int i=0; i &lt; numPoints; ++i) {</span>
<span class="nc" id="L167">			newRun.add( new PlotDatum(xArr[i], yArr[i], true, symbol) );</span>
		}
		
		//	Add this new run to this graph's run list.
<span class="nc" id="L171">		runs.add(newRun);</span>
		
		//	Create our plot axes.
<span class="nc" id="L174">		xAxis = new PlotXAxis(xLabel, null, xFormat, PlotAxis.kMajorGrid);</span>
<span class="nc" id="L175">		yAxis = new PlotYAxis(yLabel, null, yFormat, PlotAxis.kMajorGrid);</span>
		
<span class="nc" id="L177">	}</span>
	
	//-------------------------------------------------------------------------
	/**
	*  Returns the title assigned to this plot.
	**/
	public String getTitle() {
<span class="nc" id="L184">		return plotTitle;</span>
	}
	
	/**
	*  Set's the title assigned to this plot.
	**/
	public void setTitle(String title) {
<span class="nc" id="L191">		plotTitle = title;</span>
<span class="nc" id="L192">	}</span>

	/**
	*  Return a reference to the plot's vertical or Y axis.
	**/
	public PlotAxis getVerticalAxis() {
<span class="nc" id="L198">		return yAxis;</span>
	}
	
	/**
	*  Set the plot's vertical or Y axis.
	**/
	public void setVerticalAxis(PlotAxis axis) {
<span class="nc" id="L205">		yAxis = axis;</span>
<span class="nc" id="L206">	}</span>
	
	/**
	*  Return a reference to the plot's horizontal or X axis.
	**/
	public PlotAxis getHorizontalAxis() {
<span class="nc" id="L212">		return xAxis;</span>
	}
	
	/**
	*  Set the plot's horizontal or X axis.
	**/
	public void setHorizontalAxis(PlotAxis axis) {
<span class="nc" id="L219">		xAxis = axis;</span>
<span class="nc" id="L220">	}</span>
	
	/**
	*  Return a reference to the list of data runs 
	*  assigned to this plot.
	**/
	public PlotRunList getRuns() {
<span class="nc" id="L227">		return runs;</span>
	}
	
	/**
	*  Set the list of runs to be plotted in this plot.
	**/
	public void setRuns(PlotRunList runList) {
<span class="nc" id="L234">		runs = runList;</span>
<span class="nc" id="L235">	}</span>
	
	/**
	*  Make a copy of this SimplePlotXY object.
	*
	*  @return  Returns a clone of this object.
	**/
	public Object clone() {
<span class="nc" id="L243">		SimplePlotXY newObject = null;</span>
		
		try {
			// Make a shallow copy of this object.
<span class="nc" id="L247">			newObject = (SimplePlotXY) super.clone();</span>

			// Make a copy of this object's data structures.
<span class="nc" id="L250">			newObject.runs = (PlotRunList)this.runs.clone();</span>
<span class="nc" id="L251">			newObject.xAxis = (PlotAxis)this.xAxis.clone();</span>
<span class="nc" id="L252">			newObject.yAxis = (PlotAxis)this.yAxis.clone();</span>

<span class="nc" id="L254">		} catch (CloneNotSupportedException e) {</span>
			// Can't happen.
<span class="nc" id="L256">			e.printStackTrace();</span>
<span class="nc" id="L257">		}</span>
		
		// Output the newly cloned object.
<span class="nc" id="L260">		return newObject;</span>
	}

	/**
	*  This method is called to render this plot to the
	*  specified graphics context within the specified bounding
	*  rectangle.
	*
	*  @param  gc      The graphics context we are drawing into.
	*  @param  comp    The component that we are drawing into.
	*  @param  bounds  The overall bounding rectangle we are drawing into
	*                  including the title and axis labels.  This is typically
	*                  the component bounding rectangle minus insets.
	**/
	public void draw( Graphics gc, Component comp, Rectangle bounds ) {

		//	Determine the bounds of the data to be plotted.
<span class="nc" id="L277">		xAxis.setAxisBounds(runs);</span>
<span class="nc" id="L278">		yAxis.setAxisBounds(runs);</span>
		
		// Find the bounds of the plot itself (minus labels).
<span class="nc" id="L281">		Rectangle plotBounds = findPlotBounds(bounds, xAxis, yAxis, plotTitle, gc);</span>
		
		// Scale axes to the new plot data bounds.
<span class="nc" id="L284">		xAxis.setSize(plotBounds);</span>
<span class="nc" id="L285">		yAxis.setSize(plotBounds);</span>
		
		// Render this plot image.
<span class="nc" id="L288">		drawTitle(gc, bounds);</span>
<span class="nc" id="L289">		drawAxesAndGrid(gc, comp, plotBounds);</span>
<span class="nc" id="L290">		drawPlotData(gc, plotBounds);</span>
		
<span class="nc" id="L292">	}</span>


	/**
	*  Determines how much space is required for the plot title, axes,
	*  and labels and reduces the plot bounds accordingly.
	*
	*  @param  bounds     The overall bounding rectangle we are drawing into
	*                     including the title and axis labels.
	*  @param  xAxis      Reference to the plot's X axis.
	*  @param  yAxis      Reference to the plot's Y axis.
	*  @param  plotTitle  The title of the plot.
	*  @param  gc         The graphics context being used for rendering.
	*  @return A rectangle that defines the boundaries of the plot itself
	*          without the title, axes labels, etc.
	**/
	private static Rectangle findPlotBounds(Rectangle bounds, PlotAxis xAxis,
							PlotAxis yAxis, String plotTitle, Graphics gc) {

		if (DEBUG)
			System.out.println(&quot;In SimplePlotXY.findPlotBounds()...&quot;);
			
<span class="nc" id="L314">		FontMetrics fm = null;</span>
<span class="nc" id="L315">		int height = 0;</span>
<span class="nc" id="L316">		int leading = 0;</span>
<span class="nc" id="L317">		int width = 0;</span>
<span class="nc" id="L318">		int offset = 0;</span>
		
		//	Copy over overall bounds rectangle data.
<span class="nc" id="L321">		Rectangle plotBounds = new Rectangle(bounds.x, bounds.y, bounds.width, bounds.height);</span>
		
		//	Make space for the plot title.
<span class="nc bnc" id="L324" title="All 2 branches missed.">		if (plotTitle != null) {</span>
		
			//	Retrieve information on the current font.
<span class="nc" id="L327">			Font currFont = gc.getFont();</span>
<span class="nc" id="L328">			String fontName = currFont.getName();</span>
<span class="nc" id="L329">			int fontSize = currFont.getSize();</span>
		
			//	Enlarge the title text and make it bold.
<span class="nc" id="L332">			Font newFont = new Font(fontName, Font.BOLD, fontSize*2);</span>
<span class="nc" id="L333">			gc.setFont(newFont);</span>
			
			//	Get info about the title font we are using
<span class="nc" id="L336">			fm = gc.getFontMetrics();</span>
<span class="nc" id="L337">			height = fm.getHeight();</span>
<span class="nc" id="L338">			leading = fm.getLeading();</span>
			
			//	Lower top of plot enough to leave room for text.
<span class="nc" id="L341">			offset = height + leading + 1;</span>
<span class="nc" id="L342">			plotBounds.y += offset;</span>
<span class="nc" id="L343">			plotBounds.height -= offset;</span>
			
			//	Restore the previous font.
<span class="nc" id="L346">			gc.setFont(currFont);</span>
		}
		
		//	Make space for the X axis numbers and labels.
		
		//	Get info about the font we are using.
<span class="nc" id="L352">		fm = gc.getFontMetrics();</span>
<span class="nc" id="L353">		height = fm.getHeight();</span>
<span class="nc" id="L354">		leading = fm.getLeading();</span>
		
		//	Raise bottom of plot enough to leave room for axis numbers.
<span class="nc" id="L357">		plotBounds.height -= height + leading + 1;</span>
		
		//	Make room for X axis label.
<span class="nc bnc" id="L360" title="All 2 branches missed.">		if (xAxis.getLabel() != null)</span>
<span class="nc" id="L361">			plotBounds.height -= 1.5*height;</span>
		
		//	Move right bounds to allow room for the last X axis number
		//	to hang over.
<span class="nc" id="L365">		width = fm.stringWidth(xAxis.upperBoundsAsString());</span>
<span class="nc" id="L366">		plotBounds.width -= width/2 + 6;</span>
		
		//	Make space for Y axis numbers and labels.
		
		//	Make room for the axis numbers.
<span class="nc" id="L371">		width = fm.stringWidth(yAxis.upperBoundsAsString());</span>
<span class="nc" id="L372">		int width2 = fm.stringWidth(yAxis.lowerBoundsAsString());</span>
<span class="nc" id="L373">		width = Math.max(width, width2);</span>
<span class="nc" id="L374">		plotBounds.x += width + 4;</span>
<span class="nc" id="L375">		plotBounds.width -= width + 4;</span>
<span class="nc" id="L376">		plotBounds.y += height/2;</span>
<span class="nc" id="L377">		plotBounds.height -= height/2;</span>
		
		//	Make room for the axis label (if there is one).
<span class="nc bnc" id="L380" title="All 2 branches missed.">		if (yAxis.getLabel() != null) {</span>
<span class="nc" id="L381">			plotBounds.x += 1.5*height;</span>
<span class="nc" id="L382">			plotBounds.width -= 1.5*height;</span>
		}
		
		if (DEBUG)
			System.out.println(&quot;    plotBounds = &quot; + plotBounds);
		
<span class="nc" id="L388">		return plotBounds;</span>
	}
	
	/**
	*  Draw the plot title onto the plot.
	*
	*  @param  gc      The graphics context we are drawing into.
	*  @param  bounds  The overall bounding rectangle we are drawing into
	*                  including the title and axis labels.
	**/
	private void drawTitle(Graphics gc, Rectangle bounds) {
<span class="nc bnc" id="L399" title="All 4 branches missed.">		if ( plotTitle != null &amp;&amp; !plotTitle.equals(&quot;&quot;) ) {</span>
			
			//	Retrieve information on the current font.
<span class="nc" id="L402">			Font currFont = gc.getFont();</span>
<span class="nc" id="L403">			String fontName = currFont.getName();</span>
<span class="nc" id="L404">			int fontSize = currFont.getSize();</span>
		
			//	Enlarge the title text and make it bold.
<span class="nc" id="L407">			Font newFont = new Font(fontName, Font.BOLD, fontSize*2);</span>
<span class="nc" id="L408">			gc.setFont(newFont);</span>
			
			//	Get info about the font we are using
<span class="nc" id="L411">			FontMetrics fm = gc.getFontMetrics();</span>
<span class="nc" id="L412">			int textWidth = fm.stringWidth(plotTitle);</span>
			
			//	Center the title in the frame.
<span class="nc" id="L415">			int xPos = bounds.width/2 - textWidth/2;</span>
<span class="nc" id="L416">			int yPos = bounds.y + fm.getAscent() + fm.getLeading() + 1;</span>
			
			//	Render the title.
<span class="nc" id="L419">			gc.drawString(plotTitle, xPos, yPos);</span>
			
			//	Reset the font back to it's previous value.
<span class="nc" id="L422">			gc.setFont(currFont);</span>
		}
<span class="nc" id="L424">	}</span>
	
	/**
	*  Draw the plot's horizontal and vertical axes and
	*  grid lines (depending on grid style set for each
	*  axis).
	*
	*  @param  gc      The graphics context we are drawing into.
	*  @param  comp    The component that we are drawing into.
	*  @param  bounds  The bounding rectangle for the data area
	*                  of the plot (overall bounds minus area for titles,
	*                  labels, etc).
	**/
	private void drawAxesAndGrid(Graphics gc, Component comp, Rectangle bounds) {
		
		//	Draw a box around the boundary of the plot.
<span class="nc" id="L440">		gc.drawRect(bounds.x, bounds.y, bounds.width, bounds.height);</span>
<span class="nc" id="L441">		gc.drawRect(bounds.x+1, bounds.y+1, bounds.width-2, bounds.height-2);</span>
		
		//	Draw the horizontal axis and grid.
<span class="nc" id="L444">		xAxis.draw(gc, comp, bounds);</span>
		
		//	Draw the vertical axis and grid.
<span class="nc" id="L447">		yAxis.draw(gc, comp, bounds);</span>
		
<span class="nc" id="L449">	}</span>
	
	/**
	*  Loop over all the runs and render the data in 
	*  each one in turn.
	*
	*  @param  gc      The graphics context we are drawing into.
	*  @param  bounds  The bounding rectangle for the data area
	*                  of the plot (overall bounds minus area for titles,
	*                  labels, etc).
	**/
	private void drawPlotData(Graphics gc, Rectangle bounds) {
		
<span class="nc bnc" id="L462" title="All 4 branches missed.">		if (runs != null &amp;&amp; runs.size() &gt; 0) {</span>
			
			//	Loop over all the runs.
<span class="nc bnc" id="L465" title="All 2 branches missed.">			for (Iterator i=runs.iterator(); i.hasNext();) {</span>
		
				//	Extract the next run.
<span class="nc" id="L468">				PlotRun run = (PlotRun)i.next();</span>
<span class="nc bnc" id="L469" title="All 2 branches missed.">				if (run.size() &gt; 0)</span>
<span class="nc" id="L470">					drawSingleRun(gc, bounds, run);</span>
<span class="nc" id="L471">			}</span>
		}
<span class="nc" id="L473">	}</span>
	
	/**
	*  Loop over all the data points in a single run
	*  and render them to the plot.
	*
	*  @param  gc      The graphics context we are drawing into.
	*  @param  bounds  The bounding rectangle for the data area
	*                  of the plot (overall bounds minus area for titles,
	*                  labels, etc).
	*  @param  run     A single run of data to be plotted.
	**/
	private void drawSingleRun(Graphics gc, Rectangle bounds, PlotRun run) {
<span class="nc" id="L486">		int xo = 0, yo = 0;</span>
<span class="nc" id="L487">		boolean conFlg = false;</span>
<span class="nc" id="L488">		Color saveColor = gc.getColor();</span>
		
		//	Loop over all the data points to be plotted.
<span class="nc bnc" id="L491" title="All 2 branches missed.">		for (Iterator i=run.iterator(); i.hasNext();) {</span>
<span class="nc" id="L492">			PlotDatum datum = (PlotDatum)i.next();</span>
			
			// Check for break in the line.
<span class="nc" id="L495">			conFlg &amp;= datum.connected();</span>
			
			//	Scale data points to screen coordinates.
<span class="nc" id="L498">			int xi = xAxis.scaleCoord(datum.x);</span>
<span class="nc" id="L499">			int yi = yAxis.scaleCoord(datum.y);</span>
				
			//	If this point falls outside the plot bounds, skip it.
<span class="nc bnc" id="L502" title="All 8 branches missed.">			if (xi &lt; bounds.x &amp;&amp; xi &gt; bounds.x + bounds.width &amp;&amp;</span>
				yi &lt; bounds.y &amp;&amp; yi &gt; bounds.y + bounds.width) {
<span class="nc" id="L504">				conFlg = false;</span>
<span class="nc" id="L505">				continue;</span>
			}
			
			//	Is there an error bar to be drawn?
<span class="nc bnc" id="L509" title="All 2 branches missed.">			if (datum.hasErrorBar()) {</span>
<span class="nc" id="L510">				int topPos = bounds.y;</span>
<span class="nc" id="L511">				int botPos = bounds.y + bounds.height;</span>
				
				//	Deal with error bar.
<span class="nc" id="L514">				int yi1 = yAxis.scaleCoord(datum.y + datum.getYError());</span>
<span class="nc" id="L515">				int yi2 = yAxis.scaleCoord(datum.y - datum.getYError());</span>
				
				//	Start drawing the data point.
				//	Connect the center of the bar.
<span class="nc bnc" id="L519" title="All 2 branches missed.">				if (conFlg) {</span>
<span class="nc" id="L520">					gc.setColor(datum.getLineColor());</span>
<span class="nc" id="L521">					gc.drawLine(xo, yo, xi, yi);</span>
<span class="nc" id="L522">					gc.setColor(saveColor);</span>
<span class="nc" id="L523">					xo = xi;</span>
<span class="nc" id="L524">					yo = yi;</span>
				} else {
<span class="nc" id="L526">					xo = xi;</span>
<span class="nc" id="L527">					yo = yi;</span>
				}
				
				//	If error bar is off top or bottom, adjust.
<span class="nc bnc" id="L531" title="All 2 branches missed.">				if (!bounds.contains(xi, yi1) )</span>
<span class="nc" id="L532">					yi1 = topPos;</span>
<span class="nc bnc" id="L533" title="All 2 branches missed.">				if (!bounds.contains(xi, yi2) )</span>
<span class="nc" id="L534">					yi2 = botPos;</span>
				
				//	Height of error bar.
<span class="nc" id="L537">				int delta = yi1 - yi2;</span>
<span class="nc" id="L538">				delta /= 5;</span>
<span class="nc" id="L539">				int count = run.size();</span>
<span class="nc" id="L540">				int bar = 3*PlotAxis.kTick*(count+10)/(3*count+10);</span>
<span class="nc bnc" id="L541" title="All 2 branches missed.">				int dbar = (bar &lt; delta) ? bar : delta;</span>
<span class="nc bnc" id="L542" title="All 2 branches missed.">				int xi1 = (botPos &lt; xi - dbar) ? xi - dbar : botPos;</span>
<span class="nc bnc" id="L543" title="All 2 branches missed.">				int xi2 = (topPos &gt; xi + dbar) ? xi + dbar : topPos;</span>
				
				//	Draw first segment of error bar.
<span class="nc" id="L546">				gc.drawLine(xi1, yi1, xi2, yi1);</span>
				
				//	Draw 2nd segment of error bar.
<span class="nc" id="L549">				gc.drawLine(xi1, yi2, xi2, yi2);</span>
<span class="nc" id="L550">				gc.drawLine(xi, yi1, xi, yi2);</span>
				
<span class="nc" id="L552">			} else {</span>
				//	Must not have an error bar.
				//	Just draw the line and point.
<span class="nc bnc" id="L555" title="All 2 branches missed.">				if (conFlg) {</span>
<span class="nc" id="L556">					gc.setColor(datum.getLineColor());</span>
<span class="nc" id="L557">					gc.drawLine(xo, yo, xi, yi);</span>
<span class="nc" id="L558">					gc.setColor(saveColor);</span>
<span class="nc" id="L559">					xo = xi;</span>
<span class="nc" id="L560">					yo = yi;</span>
				} else {
<span class="nc" id="L562">					xo = xi;</span>
<span class="nc" id="L563">					yo = yi;</span>
				}
			}
			
			//	Draw the plot symbol.
<span class="nc" id="L568">			PlotSymbol symbol = datum.getPlotSymbol();</span>
<span class="nc bnc" id="L569" title="All 2 branches missed.">			if (symbol != null)</span>
<span class="nc" id="L570">				symbol.draw(gc, xi, yi);</span>

			//	Prepare for next data point.
<span class="nc" id="L573">			conFlg = true;</span>
<span class="nc" id="L574">		}</span>
<span class="nc" id="L575">	}</span>
	
	
}


</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>