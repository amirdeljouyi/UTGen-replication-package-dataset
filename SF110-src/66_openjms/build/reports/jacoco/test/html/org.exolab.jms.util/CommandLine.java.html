<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>CommandLine.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">66_openjms</a> &gt; <a href="index.source.html" class="el_package">org.exolab.jms.util</a> &gt; <span class="el_source">CommandLine.java</span></div><h1>CommandLine.java</h1><pre class="source lang-java linenums">/**
 * Redistribution and use of this software and associated documentation
 * (&quot;Software&quot;), with or without modification, are permitted provided
 * that the following conditions are met:
 *
 * 1. Redistributions of source code must retain copyright
 *    statements and notices.  Redistributions must also contain a
 *    copy of this document.
 *
 * 2. Redistributions in binary form must reproduce the
 *    above copyright notice, this list of conditions and the
 *    following disclaimer in the documentation and/or other
 *    materials provided with the distribution.
 *
 * 3. The name &quot;Exolab&quot; must not be used to endorse or promote
 *    products derived from this Software without prior written
 *    permission of Exoffice Technologies.  For written permission,
 *    please contact info@exolab.org.
 *
 * 4. Products derived from this Software may not be called &quot;Exolab&quot;
 *    nor may &quot;Exolab&quot; appear in their names without prior written
 *    permission of Exoffice Technologies. Exolab is a registered
 *    trademark of Exoffice Technologies.
 *
 * 5. Due credit should be given to the Exolab Project
 *    (http://www.exolab.org/).
 *
 * THIS SOFTWARE IS PROVIDED BY EXOFFICE TECHNOLOGIES AND CONTRIBUTORS
 * ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES, INCLUDING, BUT
 * NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
 * FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL
 * EXOFFICE TECHNOLOGIES OR ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
 * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * Copyright 1999 (C) Exoffice Technologies Inc. All Rights Reserved.
 *
 * $Id: CommandLine.java,v 1.1 2004/11/26 01:51:02 tanderson Exp $
 *
 * Date         Author  Changes
 * 1/6/2000     jima    Created
 * 1/9/2000     jima    changed package name from com.comware to org.exolab
 * 7/1/2000     jima    removed the CW prefix from the class name
 * 1/8/2001     jima    Removed it from jtf library and imported it into
 *                      the openjms library
 */

package org.exolab.jms.util;

import java.util.Hashtable;
import java.util.Vector;


/**
 * This core class is responsible for processing the command line and
 * storing away the list of options and parameters specified. The
 * difference between an option and a command line is that an option
 * is a boolean value (true if it is specified and false otherwise)
 * and a parameter always has an associated value.
 *
 * @version     $version$
 * @author      jima
 **/
public class CommandLine {

    /**
     * A list of option of switches on the command line. A switch
     * is either set or not
     */
<span class="nc" id="L75">    private Vector _switches = new Vector();</span>

    /**
     * A dictionary of all the options and their associated values
     */
<span class="nc" id="L80">    private Hashtable _options = new Hashtable();</span>

    /**
     * Construct an instance of this class with the specified string
     * array.
     *
     * @param       args        command line argument
     */
<span class="nc" id="L88">    public CommandLine(String[] args) {</span>
<span class="nc" id="L89">        processCommandLine(args);</span>
<span class="nc" id="L90">    }</span>

    /**
     * Default constructor which simply initialised the class
     */
<span class="nc" id="L95">    public CommandLine() {</span>
<span class="nc" id="L96">    }</span>

    /**
     * Check if the following option or command has been specified
     *
     * @param       name        name of option or command
     * @return      boolean     true if it has been specified
     */
    public boolean exists(String name) {
<span class="nc bnc" id="L105" title="All 4 branches missed.">        return _switches.contains(name) || _options.containsKey(name);</span>
    }

    /**
     * Check if the following option has been specified.
     *
     * @param       name        name of the option
     * @return      boolean     true if it has been specified
     */
    public boolean isSwitch(String name) {
<span class="nc" id="L115">        return _switches.contains(name);</span>
    }

    /**
     * Check if the following parameter has been specified.
     *
     * @param       name        name of the parameter
     * @return      boolean     true if it has been specified
     */
    public boolean isParameter(String name) {
<span class="nc" id="L125">        return _options.containsKey(name);</span>
    }

    /**
     * Return the value of the parameter or option. If the string nominates
     * an option then return null
     *
     * @param       name        name of option or parameter
     * @return      String      value of parameter or null
     */
    public String value(String name) {
<span class="nc" id="L136">        String result = null;</span>

<span class="nc bnc" id="L138" title="All 2 branches missed.">        if (_options.containsKey(name)) {</span>
<span class="nc" id="L139">            result = (String) _options.get(name);</span>
        }

<span class="nc" id="L142">        return result;</span>
    }

    /**
     * Return the value of the parameter or option, returning a default
     * value if none is specified
     *
     * @param       name        name of option or parameter
     * @param       defaultValue the default value
     * @return      String      value of parameter
     */
    public String value(String name, String defaultValue) {
<span class="nc" id="L154">        String result = value(name);</span>
<span class="nc bnc" id="L155" title="All 2 branches missed.">        return (result != null) ? result : defaultValue;</span>
    }

    /**
     * Add the following option or parameter to the list. An option will
     * have a null value, whereas a parameter will have a non-null value.
     * &lt;p&gt;
     * This will automatically overwrite the previous value, if one has been
     * specified.
     *
     * @param       name        name of option or parameter
     * @param       value       value of name
     * @return      boolean     true if it was successfully added
     */
    public boolean add(String name, String value) {
<span class="nc" id="L170">        return add(name, value, true);</span>
    }

    /**
     * Add the following option or parameter to the list. An option will
     * have a null value, whereas a parameter will have a non-null value.
     * &lt;p&gt;
     * If the overwrite flag is true then this value will overwrite the
     * previous value. If the overwrite flag is false and the name already
     * exists then it will not overwrite it and the function will return
     * false. In all other circumstances it will return true.
     *
     * @param       name        name of option or parameter
     * @param       value       value of name
     * @param       overwrite   true to overwrite previous value
     * @return      boolean     true if it was successfully added
     */
    public boolean add(String name, String value, boolean overwrite) {
<span class="nc" id="L188">        boolean result = false;</span>

<span class="nc bnc" id="L190" title="All 2 branches missed.">        if (value == null) {</span>
            // it is an option
<span class="nc bnc" id="L192" title="All 4 branches missed.">            if ((_switches.contains(name)) &amp;&amp;</span>
                (overwrite)) {
<span class="nc" id="L194">                _switches.addElement(name);</span>
<span class="nc" id="L195">                result = true;</span>
<span class="nc bnc" id="L196" title="All 2 branches missed.">            } else if (!_switches.contains(name)) {</span>
<span class="nc" id="L197">                _switches.addElement(name);</span>
<span class="nc" id="L198">                result = true;</span>
            }
        } else {
            // parameter
<span class="nc bnc" id="L202" title="All 4 branches missed.">            if ((_options.containsKey(name)) &amp;&amp;</span>
                (overwrite)) {
<span class="nc" id="L204">                _options.put(name, value);</span>
<span class="nc" id="L205">                result = true;</span>
<span class="nc bnc" id="L206" title="All 2 branches missed.">            } else if (!_options.containsKey(name)) {</span>
<span class="nc" id="L207">                _options.put(name, value);</span>
<span class="nc" id="L208">                result = true;</span>
            }
        }

<span class="nc" id="L212">        return result;</span>
    }

    /**
     * This method processes the command line and extracts the list of
     * options and command lines. It doesn't intepret the meaning of the
     * entities, which is left to the application.
     *
     * @param       args        command line as a collection of tokens
     */
    private void processCommandLine(String[] args) {
<span class="nc" id="L223">        boolean prev_was_hyphen = false;</span>
<span class="nc" id="L224">        String prev_key = null;</span>

<span class="nc bnc" id="L226" title="All 2 branches missed.">        for (int index = 0; index &lt; args.length; index++) {</span>
<span class="nc bnc" id="L227" title="All 2 branches missed.">            if (args[index].startsWith(&quot;-&quot;)) {</span>
                // if the previous string started with a hyphen then
                // it was an option store store it, without the hyphen
                // in the _switches vector. Otherwise if the previous was
                // not a hyphen then store key and value in the _options
                // hashtable
<span class="nc bnc" id="L233" title="All 2 branches missed.">                if (prev_was_hyphen) {</span>
<span class="nc" id="L234">                    add(prev_key, null);</span>
                }

<span class="nc" id="L237">                prev_key = args[index].substring(1);</span>
<span class="nc" id="L238">                prev_was_hyphen = true;</span>

                // check to see whether it is the last element in the
                // arg list. If it is then assume it is an option and
                // break the processing
<span class="nc bnc" id="L243" title="All 2 branches missed.">                if (index == args.length - 1) {</span>
<span class="nc" id="L244">                    add(prev_key, null);</span>
<span class="nc" id="L245">                    break;</span>
                }
            } else {
                // it does not start with a hyphen. If the prev_key is
                // not null then set the value to the prev_value.
<span class="nc bnc" id="L250" title="All 2 branches missed.">                if (prev_key != null) {</span>
<span class="nc" id="L251">                    add(prev_key, args[index]);</span>
<span class="nc" id="L252">                    prev_key = null;</span>
                }
<span class="nc" id="L254">                prev_was_hyphen = false;</span>
            }
        }
<span class="nc" id="L257">    }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>