<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>FormatConverter.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">66_openjms</a> &gt; <a href="index.source.html" class="el_package">org.exolab.jms.message</a> &gt; <span class="el_source">FormatConverter.java</span></div><h1>FormatConverter.java</h1><pre class="source lang-java linenums">/**
 * Redistribution and use of this software and associated documentation
 * (&quot;Software&quot;), with or without modification, are permitted provided
 * that the following conditions are met:
 *
 * 1. Redistributions of source code must retain copyright
 *    statements and notices.  Redistributions must also contain a
 *    copy of this document.
 *
 * 2. Redistributions in binary form must reproduce the
 *    above copyright notice, this list of conditions and the
 *    following disclaimer in the documentation and/or other
 *    materials provided with the distribution.
 *
 * 3. The name &quot;Exolab&quot; must not be used to endorse or promote
 *    products derived from this Software without prior written
 *    permission of Exoffice Technologies.  For written permission,
 *    please contact info@exolab.org.
 *
 * 4. Products derived from this Software may not be called &quot;Exolab&quot;
 *    nor may &quot;Exolab&quot; appear in their names without prior written
 *    permission of Exoffice Technologies. Exolab is a registered
 *    trademark of Exoffice Technologies.
 *
 * 5. Due credit should be given to the Exolab Project
 *    (http://www.exolab.org/).
 *
 * THIS SOFTWARE IS PROVIDED BY EXOFFICE TECHNOLOGIES AND CONTRIBUTORS
 * ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES, INCLUDING, BUT
 * NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
 * FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL
 * EXOFFICE TECHNOLOGIES OR ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
 * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * Copyright 2000,2001 (C) Exoffice Technologies Inc. All Rights Reserved.
 *
 * $Id: FormatConverter.java,v 1.1 2004/11/26 01:50:43 tanderson Exp $
 *
 * Date         Author  Changes
 * 02/26/2000   jimm    Created
 */

package org.exolab.jms.message;

// jms

import javax.jms.JMSException;
import javax.jms.MessageFormatException;


/**
 * A simple format converter to help convert an Object type as per the
 * table listed below.
 *
 * &lt;P&gt;A value written as the row type can be read as the column type.
 *
 * &lt;PRE&gt;
 * |        | boolean byte short char int long float double String byte[]
 * |----------------------------------------------------------------------
 * |boolean |    X                                            X
 * |byte    |          X     X         X   X                  X
 * |short   |                X         X   X                  X
 * |char    |                     X                           X
 * |int     |                          X   X                  X
 * |long    |                              X                  X
 * |float   |                                    X     X      X
 * |double  |                                          X      X
 * |String  |    X     X     X         X   X     X     X      X
 * |byte[]  |                                                        X
 * |----------------------------------------------------------------------
 * &lt;/PRE&gt;
 *
 * &lt;P&gt;Attempting to read a null value as a Java primitive type must be treated
 * as calling the primitive's corresponding &lt;code&gt;valueOf(String)&lt;/code&gt;
 * conversion method with a null value. Since char does not support a String
 * conversion, attempting to read a null value as a char must throw
 * NullPointerException.
 *
 * @version     $Revision: 1.1 $ $Date: 2004/11/26 01:50:43 $
 * @author      &lt;a href=&quot;mailto:mourikis@intalio.com&quot;&gt;Jim Mourikis&lt;/a&gt;
 * @author      &lt;a href=&quot;mailto:tima@intalio.com&quot;&gt;Tim Anderson&lt;/a&gt;
 */
<span class="nc" id="L89">class FormatConverter {</span>

    /**
     * Convert value to boolean
     *
     * @param value the object to convert from
     * @return the converted boolean
     * @throws MessageFormatException if the conversion is invalid
     */
    public static boolean getBoolean(Object value)
        throws MessageFormatException {
<span class="nc" id="L100">        boolean result = false;</span>

<span class="nc bnc" id="L102" title="All 2 branches missed.">        if (value instanceof Boolean) {</span>
<span class="nc" id="L103">            result = ((Boolean) value).booleanValue();</span>
<span class="nc bnc" id="L104" title="All 2 branches missed.">        } else if (value instanceof String) {</span>
<span class="nc" id="L105">            result = Boolean.valueOf((String) value).booleanValue();</span>
<span class="nc bnc" id="L106" title="All 2 branches missed.">        } else if (value == null) {</span>
<span class="nc" id="L107">            result = Boolean.valueOf((String) value).booleanValue();</span>
        } else {
<span class="nc" id="L109">            raise(value, boolean.class);</span>
        }
<span class="nc" id="L111">        return result;</span>
    }

    /**
     * Convert value to byte
     *
     * @param value the object to convert from
     * @return the converted byte
     * @throws MessageFormatException if the conversion is invalid
     * @throws NumberFormatException if value is a String and the conversion
     * is invalid
     */
    public static byte getByte(Object value) throws MessageFormatException {
<span class="nc" id="L124">        byte result = 0;</span>

<span class="nc bnc" id="L126" title="All 2 branches missed.">        if (value instanceof Byte) {</span>
<span class="nc" id="L127">            result = ((Byte) value).byteValue();</span>
<span class="nc bnc" id="L128" title="All 2 branches missed.">        } else if (value instanceof String) {</span>
<span class="nc" id="L129">            result = Byte.parseByte((String) value);</span>
<span class="nc bnc" id="L130" title="All 2 branches missed.">        } else if (value == null) {</span>
<span class="nc" id="L131">            result = Byte.valueOf((String) value).byteValue();</span>
        } else {
<span class="nc" id="L133">            raise(value, byte.class);</span>
        }
<span class="nc" id="L135">        return result;</span>
    }


    /**
     * Convert value to short
     *
     * @param value the object to convert from
     * @return the converted short
     * @throws MessageFormatException if the conversion is invalid
     * @throws NumberFormatException if value is a String and the conversion
     * is invalid
     */
    public static short getShort(Object value) throws MessageFormatException {
<span class="nc" id="L149">        short result = 0;</span>

<span class="nc bnc" id="L151" title="All 2 branches missed.">        if (value instanceof Short) {</span>
<span class="nc" id="L152">            result = ((Short) value).shortValue();</span>
<span class="nc bnc" id="L153" title="All 2 branches missed.">        } else if (value instanceof Byte) {</span>
<span class="nc" id="L154">            result = ((Byte) value).shortValue();</span>
<span class="nc bnc" id="L155" title="All 2 branches missed.">        } else if (value instanceof String) {</span>
<span class="nc" id="L156">            result = Short.parseShort((String) value);</span>
<span class="nc bnc" id="L157" title="All 2 branches missed.">        } else if (value == null) {</span>
<span class="nc" id="L158">            result = Short.valueOf((String) value).shortValue();</span>
        } else {
<span class="nc" id="L160">            raise(value, short.class);</span>
        }
<span class="nc" id="L162">        return result;</span>
    }

    /**
     * Convert value to char
     *
     * @param value the object to convert from
     * @return the converted char
     * @throws MessageFormatException if the conversion is invalid
     * @throws NullPointerException if value is null
     */
    public static char getChar(Object value) throws MessageFormatException {
<span class="nc" id="L174">        char result = '\0';</span>
<span class="nc bnc" id="L175" title="All 2 branches missed.">        if (value instanceof Character) {</span>
<span class="nc" id="L176">            result = ((Character) value).charValue();</span>
<span class="nc bnc" id="L177" title="All 2 branches missed.">        } else if (value == null) {</span>
<span class="nc" id="L178">            throw new NullPointerException(</span>
                &quot;Cannot convert null value to char&quot;);
        } else {
<span class="nc" id="L181">            raise(value, char.class);</span>
        }
<span class="nc" id="L183">        return result;</span>
    }

    /**
     * Convert value to int
     *
     * @param value the object to convert from
     * @return the converted int
     * @throws MessageFormatException if the conversion is invalid
     * @throws NumberFormatException if value is a String and the conversion
     * is invalid
     */
    public static int getInt(Object value) throws MessageFormatException {
<span class="nc" id="L196">        int result = 0;</span>

<span class="nc bnc" id="L198" title="All 2 branches missed.">        if (value instanceof Integer) {</span>
<span class="nc" id="L199">            result = ((Integer) value).intValue();</span>
<span class="nc bnc" id="L200" title="All 2 branches missed.">        } else if (value instanceof Short) {</span>
<span class="nc" id="L201">            result = ((Short) value).intValue();</span>
<span class="nc bnc" id="L202" title="All 2 branches missed.">        } else if (value instanceof Byte) {</span>
<span class="nc" id="L203">            result = ((Byte) value).intValue();</span>
<span class="nc bnc" id="L204" title="All 2 branches missed.">        } else if (value instanceof String) {</span>
<span class="nc" id="L205">            result = Integer.parseInt((String) value);</span>
<span class="nc bnc" id="L206" title="All 2 branches missed.">        } else if (value == null) {</span>
<span class="nc" id="L207">            result = Integer.valueOf((String) value).intValue();</span>
        } else {
<span class="nc" id="L209">            raise(value, int.class);</span>
        }
<span class="nc" id="L211">        return result;</span>
    }


    /**
     * Convert value to long
     *
     * @param value the object to convert from
     * @return the converted long
     * @throws MessageFormatException if the conversion is invalid
     * @throws NumberFormatException if value is a String and the conversion
     * is invalid
     */
    public static long getLong(Object value) throws MessageFormatException {
<span class="nc" id="L225">        long result = 0;</span>

<span class="nc bnc" id="L227" title="All 2 branches missed.">        if (value instanceof Long) {</span>
<span class="nc" id="L228">            result = ((Long) value).longValue();</span>
<span class="nc bnc" id="L229" title="All 2 branches missed.">        } else if (value instanceof Integer) {</span>
<span class="nc" id="L230">            result = ((Integer) value).longValue();</span>
<span class="nc bnc" id="L231" title="All 2 branches missed.">        } else if (value instanceof Short) {</span>
<span class="nc" id="L232">            result = ((Short) value).longValue();</span>
<span class="nc bnc" id="L233" title="All 2 branches missed.">        } else if (value instanceof Byte) {</span>
<span class="nc" id="L234">            result = ((Byte) value).longValue();</span>
<span class="nc bnc" id="L235" title="All 2 branches missed.">        } else if (value instanceof String) {</span>
<span class="nc" id="L236">            result = Long.parseLong((String) value);</span>
<span class="nc bnc" id="L237" title="All 2 branches missed.">        } else if (value == null) {</span>
<span class="nc" id="L238">            result = Long.valueOf((String) value).longValue();</span>
        } else {
<span class="nc" id="L240">            raise(value, long.class);</span>
        }
<span class="nc" id="L242">        return result;</span>
    }

    /**
     * Convert value to float
     *
     * @param value the object to convert from
     * @return the converted float
     * @throws MessageFormatException if the conversion is invalid
     * @throws NumberFormatException if value is a String and the conversion
     * is invalid
     */
    public static float getFloat(Object value) throws MessageFormatException {
<span class="nc" id="L255">        float result = 0;</span>

<span class="nc bnc" id="L257" title="All 2 branches missed.">        if (value instanceof Float) {</span>
<span class="nc" id="L258">            result = ((Float) value).floatValue();</span>
<span class="nc bnc" id="L259" title="All 2 branches missed.">        } else if (value instanceof String) {</span>
<span class="nc" id="L260">            result = Float.parseFloat((String) value);</span>
<span class="nc bnc" id="L261" title="All 2 branches missed.">        } else if (value == null) {</span>
<span class="nc" id="L262">            result = Float.valueOf((String) value).floatValue();</span>
        } else {
<span class="nc" id="L264">            raise(value, float.class);</span>
        }
<span class="nc" id="L266">        return result;</span>
    }

    /**
     * Convert value to double
     *
     * @param value the object to convert from
     * @return the converted double
     * @throws MessageFormatException if the conversion is invalid
     * @throws NumberFormatException if value is a String and the conversion
     * is invalid
     */
    public static double getDouble(Object value)
        throws MessageFormatException {
<span class="nc" id="L280">        double result = 0;</span>

<span class="nc bnc" id="L282" title="All 2 branches missed.">        if (value instanceof Double) {</span>
<span class="nc" id="L283">            result = ((Double) value).doubleValue();</span>
<span class="nc bnc" id="L284" title="All 2 branches missed.">        } else if (value instanceof Float) {</span>
<span class="nc" id="L285">            result = ((Float) value).doubleValue();</span>
<span class="nc bnc" id="L286" title="All 2 branches missed.">        } else if (value instanceof String) {</span>
<span class="nc" id="L287">            result = Double.parseDouble((String) value);</span>
<span class="nc bnc" id="L288" title="All 2 branches missed.">        } else if (value == null) {</span>
<span class="nc" id="L289">            result = Double.valueOf((String) value).doubleValue();</span>
        } else {
<span class="nc" id="L291">            raise(value, double.class);</span>
        }
<span class="nc" id="L293">        return result;</span>
    }

    /**
     * Convert value to String
     *
     * @param value the object to convert from
     * @return the converted String
     * @throws MessageFormatException if the conversion is invalid
     */
    public static String getString(Object value)
        throws MessageFormatException {
<span class="nc bnc" id="L305" title="All 2 branches missed.">        if (value instanceof byte[]) {</span>
<span class="nc" id="L306">            raise(value, String.class);</span>
        }
<span class="nc bnc" id="L308" title="All 2 branches missed.">        return (value == null) ? null : String.valueOf(value);</span>
    }

    /**
     * Convert value to byte[]
     *
     * @param value the object to convert from. This must be a byte array, or
     * null
     * @return a copy of the supplied array, or null
     * @throws MessageFormatException if value is not a byte array or is not
     * null
     */
    public static byte[] getBytes(Object value)
        throws MessageFormatException {
<span class="nc" id="L322">        byte[] result = null;</span>

<span class="nc bnc" id="L324" title="All 2 branches missed.">        if (value instanceof byte[]) {</span>
<span class="nc" id="L325">            byte[] bytes = (byte[]) value;</span>
<span class="nc" id="L326">            result = new byte[bytes.length];</span>
<span class="nc" id="L327">            System.arraycopy(bytes, 0, result, 0, bytes.length);</span>
<span class="nc bnc" id="L328" title="All 2 branches missed.">        } else if (value != null) {</span>
<span class="nc" id="L329">            raise(value, byte[].class);</span>
        }
<span class="nc" id="L331">        return result;</span>
    }

    /**
     * Helper to raise a MessageFormatException when a conversion cannot be
     * performed
     *
     * @param value the value that cannot be converted
     * @param type the type that the value cannot be converted to
     * @throws MessageFormatException when invoked
     */
    private static void raise(Object value, Class type)
        throws MessageFormatException {

<span class="nc" id="L345">        throw new MessageFormatException(</span>
<span class="nc" id="L346">            &quot;Cannot convert values of type &quot; + value.getClass().getName() +</span>
<span class="nc" id="L347">            &quot; to &quot; + type.getName());</span>
    }

} //-- FormatConverter
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>