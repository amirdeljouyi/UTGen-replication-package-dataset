<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ShortMetadataResultBean.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">96_heal</a> &gt; <a href="index.source.html" class="el_package">org.heal.module.search</a> &gt; <span class="el_source">ShortMetadataResultBean.java</span></div><h1>ShortMetadataResultBean.java</h1><pre class="source lang-java linenums">package org.heal.module.search;

import org.heal.module.metadata.ShortMetadataBean;

import java.io.Serializable;

/**
 * This class contains information about the results of a Metadata search.
 * The SearchResultBean contains an ordered list of
 *
 * @author Seth Wright
 * @version 0.1
 */
<span class="nc" id="L14">public class ShortMetadataResultBean implements Serializable, Comparable {</span>
    //the greater the match string, the better the match
<span class="nc" id="L16">    private int matchStrength = 0;</span>
<span class="nc" id="L17">    private int keywordsMatched = 0;</span>
<span class="nc" id="L18">    private String lastKeywordMatched = null;</span>
<span class="nc" id="L19">    private String metadataId = null;</span>
<span class="nc" id="L20">    private ShortMetadataBean shortMetadata = null;</span>

    public void setMatchStrength(int newStrength) {
<span class="nc" id="L23">        matchStrength = newStrength;</span>
<span class="nc" id="L24">    }</span>

    public int getMatchStrength() {
<span class="nc" id="L27">        return matchStrength;</span>
    }

    public void incrementMatchStrength(int incrementAmount) {
<span class="nc" id="L31">        matchStrength += incrementAmount;</span>
<span class="nc" id="L32">    }</span>

    public void setKeywordsMatched(int newKeywordsMatched) {
<span class="nc" id="L35">        keywordsMatched = newKeywordsMatched;</span>
<span class="nc" id="L36">    }</span>

    public void incrementKeywordsMatched(int incrementAmount) {
<span class="nc" id="L39">        keywordsMatched += incrementAmount;</span>
<span class="nc" id="L40">    }</span>

    public int getKeywordsMatched() {
<span class="nc" id="L43">        return keywordsMatched;</span>
    }

    public void setLastKeywordMatched(String newLastKeywordMatched) {
<span class="nc" id="L47">        lastKeywordMatched = newLastKeywordMatched;</span>
<span class="nc" id="L48">    }</span>

    public String getLastKeywordMatched() {
<span class="nc" id="L51">        return lastKeywordMatched;</span>
    }

    public void setMetadataId(String newMetadataId) {
<span class="nc" id="L55">        metadataId = newMetadataId;</span>
<span class="nc" id="L56">    }</span>

    public String getMetadataId() {
<span class="nc" id="L59">        return metadataId;</span>
    }

    public void setShortMetadata(ShortMetadataBean newShortMetadata) {
<span class="nc" id="L63">        shortMetadata = newShortMetadata;</span>
<span class="nc" id="L64">    }</span>

    public ShortMetadataBean getShortMetadata() {
<span class="nc" id="L67">        return shortMetadata;</span>
    }

    /* compare the metadataIds of the objects
     * It only makes sense to compare ShortMetadataResultBeans from the _same_
     * search, so in theory the matchStrength of two results with the same
     * metadataId should be identical.  Thus we only need to compare the
     * metadataIds.
     */
    public boolean equals(Object obj) {
<span class="nc" id="L77">        boolean equal = false;</span>
<span class="nc bnc" id="L78" title="All 2 branches missed.">        if(obj instanceof ShortMetadataResultBean) {</span>
<span class="nc" id="L79">            ShortMetadataResultBean sr = (ShortMetadataResultBean)obj;</span>
<span class="nc bnc" id="L80" title="All 2 branches missed.">            if(metadataId.equals(sr.metadataId)) {</span>
<span class="nc" id="L81">                equal = true;</span>
            }
        }
<span class="nc" id="L84">        return equal;</span>
    }

    /**
     * Compares two ShortMetadataResultBeans.  The comparison is done upon
     * the strength of the match.  If the passed in object has a stronger
     * match a negative value will be returned, if the strengths are equal
     * zero is returned, and if this object has a greater match strength
     * than the passed in object, a positive value is returned.
     *
     * Note: We don't check the type of the object because if we detect that
     * the types don't match, there is no valid/logical return value we
     * can give to indicate this.  Therefore we rely upon a
     * ClassCastException to be thrown.
     *
     * We switch the order of the comparisons here because we want the first
     * elements in a sorted collection to be those with the largest
     * matchStrengths.
     */
    public int compareTo(Object obj) throws ClassCastException {
<span class="nc" id="L104">        ShortMetadataResultBean smr = (ShortMetadataResultBean)obj;</span>
<span class="nc bnc" id="L105" title="All 2 branches missed.">        if(smr.matchStrength &gt; matchStrength) {</span>
<span class="nc" id="L106">            return 1;</span>
<span class="nc bnc" id="L107" title="All 2 branches missed.">        } else if(smr.matchStrength == matchStrength) {</span>
            try {
<span class="nc" id="L109">                int smrId = Integer.parseInt(smr.metadataId);</span>
<span class="nc" id="L110">                int id = Integer.parseInt(metadataId);</span>
<span class="nc bnc" id="L111" title="All 2 branches missed.">                if(id &gt; smrId) {</span>
<span class="nc" id="L112">                    return 1;</span>
<span class="nc bnc" id="L113" title="All 2 branches missed.">                } else if(id == smrId) {</span>
<span class="nc" id="L114">                    return 0;</span>
                } else {
<span class="nc" id="L116">                    return -1;</span>
                }
<span class="nc" id="L118">            } catch(NumberFormatException ex) {</span>
                //should not happen
<span class="nc" id="L120">                return 0;  //??? - do some logging</span>
            }
        } else {
<span class="nc" id="L123">            return -1;</span>
        }
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>