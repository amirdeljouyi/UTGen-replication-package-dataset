<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Query.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">2_a4j</a> &gt; <a href="index.source.html" class="el_package">net.kencochrane.a4j.data</a> &gt; <span class="el_source">Query.java</span></div><h1>Query.java</h1><pre class="source lang-java linenums">/*
Copyright (c) 2003, Ken Cochrane
All rights reserved.

Redistribution and use in source and binary forms, with or without modification, are permitted
provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright notice,
    this list of conditions and the following disclaimer.

    * Redistributions in binary form must reproduce the above copyright notice,
    this list of conditions and the following disclaimer in the documentation
    and/or other materials provided with the distribution.

    * Neither the name of Ken Cochrane nor the names of its contributors may be used to endorse
    or promote products derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES,
INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE
USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

*/

/**
 * http://www.KenCochrane.net
 * Ken Cochrane
 * Date: May 23, 2003
 * Time: 9:18:23 AM
 *
 *  Some of these methods are from the Amazon.com AWS Java examples that they include when you
 *  download the AWS bundle.
 */
package net.kencochrane.a4j.data;

//import org.apache.log4j.Logger;

import net.kencochrane.a4j.util.LoadProperties;
import net.kencochrane.a4j.util.a4jUtil;

import java.io.ByteArrayOutputStream;
import java.io.DataInputStream;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;
import java.util.Properties;

public class Query {
    //   Logger log = Logger.getLogger(this.getClass());

<span class="fc" id="L54">    protected String serverURL,</span>
    associatesID,
    token = &quot;DSB0XDDW1GQ3S&quot;, //don't change A4J won't work without this. Used for tracking tool use.
    searchType,
    type,
    page,
    offer;
    protected ArrayList searchValues;

<span class="fc" id="L63">    public Query() {</span>
<span class="fc" id="L64">        Properties props = LoadProperties.instance().getProperties();</span>
<span class="fc" id="L65">        this.serverURL = props.getProperty(&quot;amazonServerURL&quot;);</span>
<span class="fc" id="L66">        this.associatesID = props.getProperty(&quot;associateID&quot;);</span>
<span class="fc" id="L67">    }</span>

<span class="fc" id="L69">    a4jUtil jawsUtil = new a4jUtil();</span>

    /*****************************************************************************
     Method name: generateMultipleSearchString
     Function: used in AsinSearch only (since AsinSearch allows multiple searches)
     add ',' in between each Asin number
     Input Parameters: search type (String)
     asin numbers (ArrayList)
     Return Values: one string containing all asin numbers (String)
     *****************************************************************************/
    protected String generateMultipleSearchString(String searchType, ArrayList searchValues) {
        //	log.debug(&quot;genertateMulti in&quot;);
<span class="fc" id="L81">        StringBuffer resultString = new StringBuffer();</span>
        //     log.debug(&quot;Generatemulti before if&quot;);
        // log.debug(&quot;searchValues = &quot; + searchValues.isEmpty());
<span class="pc bpc" id="L84" title="1 of 6 branches missed.">        if (searchType.equals(&quot;AsinSearch&quot;) &amp;&amp; (searchValues != null) &amp;&amp; !searchValues.isEmpty()) {</span>
            //        log.debug(&quot;Generatemulti if&quot;);
<span class="fc" id="L86">            resultString.append(searchValues.get(0));</span>
<span class="pc bpc" id="L87" title="1 of 2 branches missed.">            for (int i = 1; i &lt; searchValues.size(); i++) {</span>
<span class="nc" id="L88">                resultString.append(&quot;,&quot;);</span>
<span class="nc" id="L89">                resultString.append(searchValues.get(i));</span>
            }
        }
        // other search methods don't allow multiple entries
        else {
            //        log.debug(&quot;Generatemulti else&quot;);
<span class="fc" id="L95">            resultString.append(searchValues.get(0));</span>
        }
        //    log.debug(&quot;Generatemulti out&quot;);
<span class="fc" id="L98">        return new String(resultString);</span>
    }

    /*****************************************************************************
     Method name: queryGenerator
     Function: generate the URI (query) for XML request
     Input Parameters: N/A
     Return Values: the URI string (String)
     *****************************************************************************/
    public String queryGenerator(String searchType, String type, String page, String offer, ArrayList searchValues) {
        //    log.debug(&quot;queryGenerator - in&quot;);
<span class="fc" id="L109">        StringBuffer buffer = new StringBuffer();</span>
<span class="fc" id="L110">        buffer.append(serverURL);</span>
<span class="fc" id="L111">        buffer.append(&quot;?&quot;);</span>
<span class="fc" id="L112">        buffer.append(&quot;t=&quot;);</span>
<span class="fc" id="L113">        buffer.append(associatesID);</span>
<span class="fc" id="L114">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L115">        buffer.append(&quot;dev-t=&quot;);</span>
<span class="fc" id="L116">        buffer.append(token);</span>
<span class="fc" id="L117">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L118">        buffer.append(searchType);</span>
<span class="fc" id="L119">        buffer.append(&quot;=&quot;);</span>
<span class="fc" id="L120">        buffer.append(generateMultipleSearchString(searchType, searchValues));</span>
<span class="fc" id="L121">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L122">        buffer.append(&quot;type=&quot;);</span>
<span class="fc" id="L123">        buffer.append(type);</span>
<span class="fc" id="L124">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L125">        buffer.append(&quot;offerpage=&quot;);</span>
<span class="fc" id="L126">        buffer.append(page);</span>
<span class="fc" id="L127">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L128">        buffer.append(&quot;offer=&quot;);</span>
<span class="fc" id="L129">        buffer.append(offer);</span>
<span class="fc" id="L130">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L131">        buffer.append(&quot;f=xml&quot;);</span>
        //      log.debug(&quot;queryGenerator - out&quot;);
<span class="fc" id="L133">        return new String(buffer);</span>
    }

    /*****************************************************************************
     Method name: sendRequest
     Function: send the request to server (both AsinSearch and Exchange
     use this method)
     Input Parameters: the URI string (String)
     Return Values: the response string from server (String)
     *****************************************************************************/
    public String sendRequest(String string) throws Exception {
        //        log.debug(&quot;sendRequest&quot;);
        // send the request through URL
<span class="fc" id="L146">        URL url = new URL(string);</span>

        // receive the response
<span class="fc" id="L149">        URLConnection urlConnection = url.openConnection();</span>
<span class="fc" id="L150">        urlConnection.connect();</span>
<span class="fc" id="L151">        DataInputStream in = new DataInputStream(urlConnection.getInputStream());</span>
<span class="fc" id="L152">        ByteArrayOutputStream bo = new ByteArrayOutputStream();</span>
<span class="fc" id="L153">        byte[] buffer = new byte[100];</span>
        do {
<span class="fc" id="L155">            int available = in.read(buffer);</span>
<span class="fc bfc" id="L156" title="All 2 branches covered.">            if (available == -1) break;</span>
<span class="fc" id="L157">            bo.write(buffer, 0, available);</span>
<span class="fc" id="L158">        } while (true);</span>
<span class="fc" id="L159">        return bo.toString();</span>
    }

    public String browseNodeQueryGenerator(String type, String page, String offer, String mode, String browseNode) {
<span class="fc" id="L163">        StringBuffer buffer = new StringBuffer();</span>
<span class="fc" id="L164">        buffer.append(serverURL);</span>
<span class="fc" id="L165">        buffer.append(&quot;?&quot;);</span>
<span class="fc" id="L166">        buffer.append(&quot;t=&quot;);</span>
<span class="fc" id="L167">        buffer.append(associatesID);</span>
<span class="fc" id="L168">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L169">        buffer.append(&quot;dev-t=&quot;);</span>
<span class="fc" id="L170">        buffer.append(token);</span>
<span class="fc" id="L171">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L172">        buffer.append(&quot;BrowseNodeSearch=&quot;);</span>
<span class="fc" id="L173">        buffer.append(browseNode);</span>
<span class="fc" id="L174">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L175">        buffer.append(&quot;mode=&quot;);</span>
<span class="fc" id="L176">        buffer.append(mode);</span>
<span class="fc" id="L177">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L178">        buffer.append(&quot;type=&quot;);</span>
<span class="fc" id="L179">        buffer.append(type);</span>
<span class="fc" id="L180">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L181">        buffer.append(&quot;page=&quot;);</span>
<span class="fc" id="L182">        buffer.append(page);</span>
<span class="fc" id="L183">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L184">        buffer.append(&quot;offer=&quot;);</span>
<span class="fc" id="L185">        buffer.append(offer);</span>
<span class="fc" id="L186">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L187">        buffer.append(&quot;f=xml&quot;);</span>
        //     log.debug(&quot;URL = &quot; + buffer.toString());
<span class="fc" id="L189">        return new String(buffer);</span>
    }

    public String BlendedSearchGenerator(String type, String searchTerm) {
<span class="fc" id="L193">        StringBuffer buffer = new StringBuffer();</span>

<span class="fc" id="L195">        searchTerm = jawsUtil.encodeString(searchTerm);</span>

<span class="fc" id="L197">        buffer.append(serverURL);</span>
<span class="fc" id="L198">        buffer.append(&quot;?&quot;);</span>
<span class="fc" id="L199">        buffer.append(&quot;t=&quot;);</span>
<span class="fc" id="L200">        buffer.append(associatesID);</span>
<span class="fc" id="L201">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L202">        buffer.append(&quot;dev-t=&quot;);</span>
<span class="fc" id="L203">        buffer.append(token);</span>
<span class="fc" id="L204">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L205">        buffer.append(&quot;BlendedSearch=&quot;);</span>
<span class="fc" id="L206">        buffer.append(searchTerm);</span>
<span class="fc" id="L207">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L208">        buffer.append(&quot;type=&quot;);</span>
<span class="fc" id="L209">        buffer.append(type);</span>
<span class="fc" id="L210">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L211">        buffer.append(&quot;f=xml&quot;);</span>
        //     log.debug(&quot;URL = &quot; + buffer.toString());
<span class="fc" id="L213">        return new String(buffer);</span>
    }

    public String KeywordSearchGenerator(String searchTerm, String productLine, String type, String page) {
<span class="fc" id="L217">        StringBuffer buffer = new StringBuffer();</span>

<span class="fc" id="L219">        searchTerm = jawsUtil.encodeString(searchTerm);</span>

<span class="fc" id="L221">        buffer.append(serverURL);</span>
<span class="fc" id="L222">        buffer.append(&quot;?&quot;);</span>
<span class="fc" id="L223">        buffer.append(&quot;t=&quot;);</span>
<span class="fc" id="L224">        buffer.append(associatesID);</span>
<span class="fc" id="L225">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L226">        buffer.append(&quot;dev-t=&quot;);</span>
<span class="fc" id="L227">        buffer.append(token);</span>
<span class="fc" id="L228">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L229">        buffer.append(&quot;KeywordSearch=&quot;);</span>
<span class="fc" id="L230">        buffer.append(searchTerm);</span>
<span class="fc" id="L231">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L232">        buffer.append(&quot;mode=&quot;);</span>
<span class="fc" id="L233">        buffer.append(productLine);</span>
<span class="fc" id="L234">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L235">        buffer.append(&quot;type=&quot;);</span>
<span class="fc" id="L236">        buffer.append(type);</span>
<span class="fc" id="L237">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L238">        buffer.append(&quot;page=&quot;);</span>
<span class="fc" id="L239">        buffer.append(page);</span>
<span class="fc" id="L240">        buffer.append(&quot;&amp;&quot;);</span>
        //buffer.append(&quot;offer=&quot;); buffer.append(offer); buffer.append(&quot;&amp;&quot;); // offer?
<span class="fc" id="L242">        buffer.append(&quot;f=xml&quot;);</span>
        //      log.debug(&quot;URL = &quot; + buffer.toString());
<span class="fc" id="L244">        return new String(buffer);</span>
    }

    public String SearchQueryGenerator(String searchType, String searchTerm, String mode, String type, String page, String offer) {
//      log.debug(&quot;SearchQueryGenerator - in&quot;);
<span class="fc" id="L249">        StringBuffer buffer = new StringBuffer();</span>

<span class="fc" id="L251">        searchTerm = jawsUtil.encodeString(searchTerm);</span>

<span class="fc" id="L253">        buffer.append(serverURL);</span>
<span class="fc" id="L254">        buffer.append(&quot;?&quot;);</span>
<span class="fc" id="L255">        buffer.append(&quot;t=&quot;);</span>
<span class="fc" id="L256">        buffer.append(associatesID);</span>
<span class="fc" id="L257">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L258">        buffer.append(&quot;dev-t=&quot;);</span>
<span class="fc" id="L259">        buffer.append(token);</span>
<span class="fc" id="L260">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L261">        buffer.append(searchType);</span>
<span class="fc" id="L262">        buffer.append(&quot;=&quot;);</span>
<span class="fc" id="L263">        buffer.append(searchTerm);</span>
<span class="fc" id="L264">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L265">        buffer.append(&quot;mode=&quot;);</span>
<span class="fc" id="L266">        buffer.append(mode);</span>
<span class="fc" id="L267">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L268">        buffer.append(&quot;type=&quot;);</span>
<span class="fc" id="L269">        buffer.append(type);</span>
<span class="fc" id="L270">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L271">        buffer.append(&quot;page=&quot;);</span>
<span class="fc" id="L272">        buffer.append(page);</span>
<span class="fc" id="L273">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L274">        buffer.append(&quot;offer=&quot;);</span>
<span class="fc" id="L275">        buffer.append(offer);</span>
<span class="fc" id="L276">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L277">        buffer.append(&quot;f=xml&quot;);</span>
//     log.debug(&quot;SearchQueryGenerator - out&quot;);
<span class="fc" id="L279">        return new String(buffer);</span>
    }

    public String SearchThirdPartyGenerator(String sellerId, String type, String page, String status) {
        //      log.debug(&quot;SearchQueryGenerator - in&quot;);
<span class="fc" id="L284">        StringBuffer buffer = new StringBuffer();</span>
<span class="fc" id="L285">        buffer.append(serverURL);</span>
<span class="fc" id="L286">        buffer.append(&quot;?&quot;);</span>
<span class="fc" id="L287">        buffer.append(&quot;t=&quot;);</span>
<span class="fc" id="L288">        buffer.append(associatesID);</span>
<span class="fc" id="L289">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L290">        buffer.append(&quot;dev-t=&quot;);</span>
<span class="fc" id="L291">        buffer.append(token);</span>
<span class="fc" id="L292">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L293">        buffer.append(&quot;SellerSearch=&quot;);</span>
<span class="fc" id="L294">        buffer.append(sellerId);</span>
<span class="fc" id="L295">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L296">        buffer.append(&quot;type=&quot;);</span>
<span class="fc" id="L297">        buffer.append(type);</span>
<span class="fc" id="L298">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L299">        buffer.append(&quot;page=&quot;);</span>
<span class="fc" id="L300">        buffer.append(page);</span>
<span class="fc" id="L301">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L302">        buffer.append(&quot;offerstatus=&quot;);</span>
<span class="fc" id="L303">        buffer.append(status);</span>
<span class="fc" id="L304">        buffer.append(&quot;&amp;&quot;);</span>
<span class="fc" id="L305">        buffer.append(&quot;f=xml&quot;);</span>
        //     log.debug(&quot;SearchQueryGenerator - out&quot;);
<span class="fc" id="L307">        return new String(buffer);</span>
    }

    public String AddtoCart(String ASIN, String quantity) {
<span class="nc" id="L311">        StringBuffer buffer = new StringBuffer();</span>
<span class="nc" id="L312">        buffer.append(serverURL);</span>
<span class="nc" id="L313">        buffer.append(&quot;?&quot;);</span>
<span class="nc" id="L314">        buffer.append(&quot;ShoppingCart=add&amp;f=xml&amp;dev-t=&quot;);</span>
<span class="nc" id="L315">        buffer.append(token);</span>
<span class="nc" id="L316">        buffer.append(&quot;&amp;t=&quot;);</span>
<span class="nc" id="L317">        buffer.append(associatesID);</span>
<span class="nc" id="L318">        buffer.append(&quot;&amp;Asin.&quot;);</span>
<span class="nc" id="L319">        buffer.append(ASIN);</span>
<span class="nc" id="L320">        buffer.append(&quot;=&quot;);</span>
<span class="nc" id="L321">        buffer.append(quantity);</span>
<span class="nc" id="L322">        return new String(buffer);</span>
    }

    public String AddToExistingCart(String ASIN, String quantity, String cartId, String hmac) {
<span class="nc" id="L326">        StringBuffer buffer = new StringBuffer();</span>
<span class="nc" id="L327">        buffer.append(serverURL);</span>
<span class="nc" id="L328">        buffer.append(&quot;?&quot;);</span>
<span class="nc" id="L329">        buffer.append(&quot;ShoppingCart=add&amp;f=xml&amp;dev-t=&quot;);</span>
<span class="nc" id="L330">        buffer.append(token);</span>
<span class="nc" id="L331">        buffer.append(&quot;&amp;t=&quot;);</span>
<span class="nc" id="L332">        buffer.append(associatesID);</span>
<span class="nc" id="L333">        buffer.append(&quot;&amp;Asin.&quot;);</span>
<span class="nc" id="L334">        buffer.append(ASIN);</span>
<span class="nc" id="L335">        buffer.append(&quot;=&quot;);</span>
<span class="nc" id="L336">        buffer.append(quantity);</span>
<span class="nc" id="L337">        buffer.append(&quot;&amp;CartId=&quot;);</span>
<span class="nc" id="L338">        buffer.append(cartId);</span>
<span class="nc" id="L339">        buffer.append(&quot;&amp;Hmac=&quot;);</span>
<span class="nc" id="L340">        buffer.append(jawsUtil.encodeString(hmac));</span>
<span class="nc" id="L341">        return new String(buffer);</span>
        /*
          http://xml.amazon.com/onca/xml3?ShoppingCart=add&amp;f=xml&amp;
          dev-t=[ [developer's token goes here]
          &amp;t=[associates ID goes here]
          &amp;Asin.[ASIN goes here]=[quantity goes here]
          &amp;CartId=[cart ID goes here] &amp;Hmac=[HMAC goes here]
        */
    }

    public String ClearCart(String cartId, String hmac) {
<span class="nc" id="L352">        StringBuffer buffer = new StringBuffer();</span>
<span class="nc" id="L353">        buffer.append(serverURL);</span>
<span class="nc" id="L354">        buffer.append(&quot;?&quot;);</span>
<span class="nc" id="L355">        buffer.append(&quot;ShoppingCart=clear&amp;f=xml&amp;dev-t=&quot;);</span>
<span class="nc" id="L356">        buffer.append(token);</span>
<span class="nc" id="L357">        buffer.append(&quot;&amp;t=&quot;);</span>
<span class="nc" id="L358">        buffer.append(associatesID);</span>
<span class="nc" id="L359">        buffer.append(&quot;&amp;CartId=&quot;);</span>
<span class="nc" id="L360">        buffer.append(cartId);</span>
<span class="nc" id="L361">        buffer.append(&quot;&amp;Hmac=&quot;);</span>
<span class="nc" id="L362">        buffer.append(jawsUtil.encodeString(hmac));</span>
<span class="nc" id="L363">        return new String(buffer);</span>
        /*
          http://xml.amazon.com/onca/xml3?ShoppingCart=clear
          &amp;f=xml&amp; dev-t=[ [developer's token goes here]
          &amp;t=[associates ID goes here]
          &amp;CartId=[cart ID goes here]
          &amp;Hmac=[HMAC goes here]
        */
    }

    public String GetItemsFromCart(String cartId, String hmac) {
<span class="nc" id="L374">        StringBuffer buffer = new StringBuffer();</span>
<span class="nc" id="L375">        buffer.append(serverURL);</span>
<span class="nc" id="L376">        buffer.append(&quot;?&quot;);</span>
<span class="nc" id="L377">        buffer.append(&quot;ShoppingCart=get&amp;f=xml&amp;dev-t=&quot;);</span>
<span class="nc" id="L378">        buffer.append(token);</span>
<span class="nc" id="L379">        buffer.append(&quot;&amp;t=&quot;);</span>
<span class="nc" id="L380">        buffer.append(associatesID);</span>
<span class="nc" id="L381">        buffer.append(&quot;&amp;CartId=&quot;);</span>
<span class="nc" id="L382">        buffer.append(cartId);</span>
<span class="nc" id="L383">        buffer.append(&quot;&amp;Hmac=&quot;);</span>
<span class="nc" id="L384">        buffer.append(jawsUtil.encodeString(hmac));</span>
<span class="nc" id="L385">        return new String(buffer);</span>
        /*
          http://xml.amazon.com/onca/xml3?ShoppingCart=get
          &amp;f=xml&amp; dev-t=[ [developer's token goes here]
          &amp;t=[associates ID goes here]
          &amp;CartId=[cart ID goes here]
          &amp;Hmac=[HMAC goes here]
        */
    }

    public String ModifyCart(String itemId, String quantity, String cartId, String hmac) {
<span class="nc" id="L396">        StringBuffer buffer = new StringBuffer();</span>
<span class="nc" id="L397">        buffer.append(serverURL);</span>
<span class="nc" id="L398">        buffer.append(&quot;?&quot;);</span>
<span class="nc" id="L399">        buffer.append(&quot;ShoppingCart=modify&amp;f=xml&amp;dev-t=&quot;);</span>
<span class="nc" id="L400">        buffer.append(token);</span>
<span class="nc" id="L401">        buffer.append(&quot;&amp;t=&quot;);</span>
<span class="nc" id="L402">        buffer.append(associatesID);</span>
<span class="nc" id="L403">        buffer.append(&quot;&amp;Item.&quot;);</span>
<span class="nc" id="L404">        buffer.append(itemId);</span>
<span class="nc" id="L405">        buffer.append(&quot;=&quot;);</span>
<span class="nc" id="L406">        buffer.append(quantity);</span>
<span class="nc" id="L407">        buffer.append(&quot;&amp;CartId=&quot;);</span>
<span class="nc" id="L408">        buffer.append(cartId);</span>
<span class="nc" id="L409">        buffer.append(&quot;&amp;Hmac=&quot;);</span>
<span class="nc" id="L410">        buffer.append(jawsUtil.encodeString(hmac));</span>
<span class="nc" id="L411">        return new String(buffer);</span>
        /*
          http://xml.amazon.com/onca/xml3?ShoppingCart=modify
          &amp;f=xml&amp; dev-t=[ [developer's token goes here]
          &amp;t=[associates ID goes here]
          &amp;Item.[itemID goes here]=[quantity goes here]
          &amp;CartId=[cart ID goes here]
          &amp;Hmac=[HMAC goes here]
        */
    }

    public String RemoveFromCart(String itemId, String cartId, String hmac) {
<span class="nc" id="L423">        StringBuffer buffer = new StringBuffer();</span>
<span class="nc" id="L424">        buffer.append(serverURL);</span>
<span class="nc" id="L425">        buffer.append(&quot;?&quot;);</span>
<span class="nc" id="L426">        buffer.append(&quot;ShoppingCart=remove&amp;f=xml&amp;dev-t=&quot;);</span>
<span class="nc" id="L427">        buffer.append(token);</span>
<span class="nc" id="L428">        buffer.append(&quot;&amp;t=&quot;);</span>
<span class="nc" id="L429">        buffer.append(associatesID);</span>
<span class="nc" id="L430">        buffer.append(&quot;&amp;Item.&quot;);</span>
<span class="nc" id="L431">        buffer.append(itemId);</span>
<span class="nc" id="L432">        buffer.append(&quot;&amp;CartId=&quot;);</span>
<span class="nc" id="L433">        buffer.append(cartId);</span>
<span class="nc" id="L434">        buffer.append(&quot;&amp;Hmac=&quot;);</span>
<span class="nc" id="L435">        buffer.append(jawsUtil.encodeString(hmac));</span>
<span class="nc" id="L436">        return new String(buffer);</span>
        /*
          http://xml.amazon.com/onca/xml3?ShoppingCart=remove
          &amp;CartId=CART
          &amp;Hmac=HMAC=
          &amp;Item.17120277375791359165
          &amp;Item.1813019710362345961
          &amp;dev-t=TOKEN&amp;t=test&amp;f=xml&amp;type=lite
        */
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>