<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>RIFServiceStub.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">4_rif</a> &gt; <a href="index.source.html" class="el_package">com.densebrain.rif.client.service</a> &gt; <span class="el_source">RIFServiceStub.java</span></div><h1>RIFServiceStub.java</h1><pre class="source lang-java linenums">/**
        * RIFServiceStub.java
        *
        * This file was auto-generated from WSDL
        * by the Apache Axis2 version: 1.0 May 05, 2006 (12:31:13 IST)
        */
package com.densebrain.rif.client.service;


/*
*  RIFServiceStub java implementation
*/
public class RIFServiceStub extends org.apache.axis2.client.Stub
    implements RIFService {
    //default axis home being null forces the system to pick up the mars from the axis2 library
<span class="nc" id="L16">    public static final java.lang.String AXIS2_HOME = null;</span>
    protected static org.apache.axis2.description.AxisOperation[] _operations;

    //http://JGLANZLT:10001/rif/services/RIFService
<span class="nc" id="L20">    private static javax.xml.namespace.QName[] qNameArray = {  };</span>

    //hashmaps to keep the fault mapping
<span class="nc" id="L23">    private java.util.HashMap faultExeptionNameMap = new java.util.HashMap();</span>
<span class="nc" id="L24">    private java.util.HashMap faultExeptionClassNameMap = new java.util.HashMap();</span>
<span class="nc" id="L25">    private java.util.HashMap faultMessageMap = new java.util.HashMap();</span>
<span class="nc" id="L26">    private javax.xml.namespace.QName[] opNameArray = null;</span>

    public RIFServiceStub(
        org.apache.axis2.context.ConfigurationContext configurationContext,
<span class="nc" id="L30">        java.lang.String targetEndpoint) throws java.lang.Exception {</span>
        //To populate AxisService
<span class="nc" id="L32">        populateAxisService();</span>
<span class="nc" id="L33">        populateFaults();</span>

<span class="nc" id="L35">        _serviceClient = new org.apache.axis2.client.ServiceClient(configurationContext,</span>
                _service);
<span class="nc" id="L37">        _serviceClient.getOptions()</span>
<span class="nc" id="L38">                      .setTo(new org.apache.axis2.addressing.EndpointReference(</span>
                targetEndpoint));

        //Set the soap version
<span class="nc" id="L42">        _serviceClient.getOptions()</span>
<span class="nc" id="L43">                      .setSoapVersionURI(org.apache.axiom.soap.SOAP12Constants.SOAP_ENVELOPE_NAMESPACE_URI);</span>
<span class="nc" id="L44">    }</span>

/**
     * Default Constructor
     */
    public RIFServiceStub() throws java.lang.Exception {
<span class="nc" id="L50">        this(&quot;http://JGLANZLT:10001/rif/services/RIFService&quot;);</span>
<span class="nc" id="L51">    }</span>

/**
     * Constructor taking the target endpoint
     */
    public RIFServiceStub(java.lang.String targetEndpoint)
        throws java.lang.Exception {
<span class="nc" id="L58">        this(org.apache.axis2.context.ConfigurationContextFactory.createConfigurationContextFromFileSystem(</span>
                AXIS2_HOME, null), targetEndpoint);
<span class="nc" id="L60">    }</span>

    private void populateAxisService() {
        //creating the Service
<span class="nc" id="L64">        _service = new org.apache.axis2.description.AxisService(&quot;RIFService&quot;);</span>

        //creating the operations
        org.apache.axis2.description.AxisOperation __operation;

<span class="nc" id="L69">        _operations = new org.apache.axis2.description.AxisOperation[1];</span>

<span class="nc" id="L71">        __operation = new org.apache.axis2.description.OutInAxisOperation();</span>

<span class="nc" id="L73">        __operation.setName(new javax.xml.namespace.QName(&quot;&quot;, &quot;invoke&quot;));</span>

<span class="nc" id="L75">        _operations[0] = __operation;</span>
<span class="nc" id="L76">        _service.addOperation(__operation);</span>
<span class="nc" id="L77">    }</span>

    //populates the faults
    private void populateFaults() {
<span class="nc" id="L81">    }</span>

    /**
     * Auto generated method signature
     *
     * @param param2
     *
     * @see com.densebrain.rif.client.service.RIFService#invoke
     */
    public com.densebrain.rif.client.service.types.InvokeResponse invoke(
        com.densebrain.rif.client.service.types.Invoke param2)
        throws java.rmi.RemoteException {
        try {
<span class="nc" id="L94">            org.apache.axis2.client.OperationClient _operationClient = _serviceClient.createClient(_operations[0].getName());</span>
<span class="nc" id="L95">            _operationClient.getOptions().setAction(&quot;urn:invoke&quot;);</span>
<span class="nc" id="L96">            _operationClient.getOptions().setExceptionToBeThrownOnSOAPFault(true);</span>

            // create SOAP envelope with that payload
<span class="nc" id="L99">            org.apache.axiom.soap.SOAPEnvelope env = null;</span>

            //Style is Doc.
<span class="nc" id="L102">            env = toEnvelope(getFactory(_operationClient.getOptions()</span>
<span class="nc" id="L103">                                                        .getSoapVersionURI()),</span>
                    param2,
<span class="nc" id="L105">                    optimizeContent(new javax.xml.namespace.QName(&quot;&quot;, &quot;invoke&quot;)));</span>

            // create message context with that soap envelope
<span class="nc" id="L108">            org.apache.axis2.context.MessageContext _messageContext = new org.apache.axis2.context.MessageContext();</span>
<span class="nc" id="L109">            _messageContext.setEnvelope(env);</span>

            // add the message contxt to the operation client
<span class="nc" id="L112">            _operationClient.addMessageContext(_messageContext);</span>

            //execute the operation client
<span class="nc" id="L115">            _operationClient.execute(true);</span>

<span class="nc" id="L117">            org.apache.axis2.context.MessageContext _returnMessageContext = _operationClient.getMessageContext(org.apache.axis2.wsdl.WSDLConstants.MESSAGE_LABEL_IN_VALUE);</span>
<span class="nc" id="L118">            org.apache.axiom.soap.SOAPEnvelope _returnEnv = _returnMessageContext.getEnvelope();</span>

<span class="nc" id="L120">            java.lang.Object object = fromOM(getElement(_returnEnv, &quot;document&quot;),</span>
                    com.densebrain.rif.client.service.types.InvokeResponse.class,
<span class="nc" id="L122">                    getEnvelopeNamespaces(_returnEnv));</span>
<span class="nc" id="L123">            _messageContext.getTransportOut().getSender()</span>
<span class="nc" id="L124">                           .cleanup(_messageContext);</span>

<span class="nc" id="L126">            return (com.densebrain.rif.client.service.types.InvokeResponse) object;</span>
<span class="nc" id="L127">        } catch (org.apache.axis2.AxisFault f) {</span>
<span class="nc" id="L128">            org.apache.axiom.om.OMElement faultElt = f.getDetail();</span>

<span class="nc bnc" id="L130" title="All 2 branches missed.">            if (faultElt != null) {</span>
<span class="nc bnc" id="L131" title="All 2 branches missed.">                if (faultExeptionNameMap.containsKey(faultElt.getQName())) {</span>
                    //make the fault by reflection
                    try {
<span class="nc" id="L134">                        java.lang.String exceptionClassName = (java.lang.String) faultExeptionClassNameMap.get(faultElt.getQName());</span>
<span class="nc" id="L135">                        java.lang.Class exceptionClass = java.lang.Class.forName(exceptionClassName);</span>
<span class="nc" id="L136">                        java.rmi.RemoteException ex = (java.rmi.RemoteException) exceptionClass.newInstance();</span>

                        //message class
<span class="nc" id="L139">                        java.lang.String messageClassName = (java.lang.String) faultMessageMap.get(faultElt.getQName());</span>
<span class="nc" id="L140">                        java.lang.Class messageClass = java.lang.Class.forName(messageClassName);</span>
<span class="nc" id="L141">                        java.lang.Object messageObject = fromOM(faultElt,</span>
                                messageClass, null);
<span class="nc" id="L143">                        java.lang.reflect.Method m = exceptionClass.getMethod(&quot;setFaultMessage&quot;,</span>
                                new java.lang.Class[] { messageClass });
<span class="nc" id="L145">                        m.invoke(ex, new java.lang.Object[] { messageObject });</span>

<span class="nc" id="L147">                        throw ex;</span>
<span class="nc" id="L148">                    } catch (java.lang.ClassCastException e) {</span>
                        // we cannot intantiate the class - throw the original Axis fault
<span class="nc" id="L150">                        throw f;</span>
<span class="nc" id="L151">                    } catch (java.lang.ClassNotFoundException e) {</span>
                        // we cannot intantiate the class - throw the original Axis fault
<span class="nc" id="L153">                        throw f;</span>
<span class="nc" id="L154">                    } catch (java.lang.NoSuchMethodException e) {</span>
                        // we cannot intantiate the class - throw the original Axis fault
<span class="nc" id="L156">                        throw f;</span>
<span class="nc" id="L157">                    } catch (java.lang.reflect.InvocationTargetException e) {</span>
                        // we cannot intantiate the class - throw the original Axis fault
<span class="nc" id="L159">                        throw f;</span>
<span class="nc" id="L160">                    } catch (java.lang.IllegalAccessException e) {</span>
                        // we cannot intantiate the class - throw the original Axis fault
<span class="nc" id="L162">                        throw f;</span>
<span class="nc" id="L163">                    } catch (java.lang.InstantiationException e) {</span>
                        // we cannot intantiate the class - throw the original Axis fault
<span class="nc" id="L165">                        throw f;</span>
                    }
                } else {
<span class="nc" id="L168">                    throw f;</span>
                }
            } else {
<span class="nc" id="L171">                throw f;</span>
            }
        }
    }

    /**
     * A utility method that copies the namepaces from the SOAPEnvelope
     */
    private java.util.Map getEnvelopeNamespaces(
        org.apache.axiom.soap.SOAPEnvelope env) {
<span class="nc" id="L181">        java.util.Map returnMap = new java.util.HashMap();</span>
<span class="nc" id="L182">        java.util.Iterator namespaceIterator = env.getAllDeclaredNamespaces();</span>

<span class="nc bnc" id="L184" title="All 2 branches missed.">        while (namespaceIterator.hasNext()) {</span>
<span class="nc" id="L185">            org.apache.axiom.om.OMNamespace ns = (org.apache.axiom.om.OMNamespace) namespaceIterator.next();</span>
<span class="nc" id="L186">            returnMap.put(ns.getPrefix(), ns.getName());</span>
<span class="nc" id="L187">        }</span>

<span class="nc" id="L189">        return returnMap;</span>
    }

    private boolean optimizeContent(javax.xml.namespace.QName opName) {
<span class="nc bnc" id="L193" title="All 2 branches missed.">        if (opNameArray == null) {</span>
<span class="nc" id="L194">            return false;</span>
        }

<span class="nc bnc" id="L197" title="All 2 branches missed.">        for (int i = 0; i &lt; opNameArray.length; i++) {</span>
<span class="nc bnc" id="L198" title="All 2 branches missed.">            if (opName.equals(opNameArray[i])) {</span>
<span class="nc" id="L199">                return true;</span>
            }
        }

<span class="nc" id="L203">        return false;</span>
    }

    private org.apache.axiom.om.OMElement toOM(
        com.densebrain.rif.client.service.types.Invoke param,
        boolean optimizeContent) {
<span class="nc bnc" id="L209" title="All 2 branches missed.">        if (param instanceof org.apache.axis2.databinding.ADBBean) {</span>
<span class="nc" id="L210">            org.apache.axiom.om.impl.builder.StAXOMBuilder builder = new org.apache.axiom.om.impl.builder.StAXOMBuilder(org.apache.axiom.om.OMAbstractFactory.getOMFactory(),</span>
<span class="nc" id="L211">                    new org.apache.axis2.util.StreamWrapper(param.getPullParser(</span>
                            com.densebrain.rif.client.service.types.Invoke.MY_QNAME)));
<span class="nc" id="L213">            org.apache.axiom.om.OMElement documentElement = builder.getDocumentElement();</span>
<span class="nc" id="L214">            ((org.apache.axiom.om.impl.OMNodeEx) documentElement).setParent(null); // remove the parent link</span>

<span class="nc" id="L216">            return documentElement;</span>
        } else {
            //todo finish this onece the bean serializer has the necessary methods
<span class="nc" id="L219">            return null;</span>
        }
    }

    private org.apache.axiom.soap.SOAPEnvelope toEnvelope(
        org.apache.axiom.soap.SOAPFactory factory,
        com.densebrain.rif.client.service.types.Invoke param,
        boolean optimizeContent) {
<span class="nc bnc" id="L227" title="All 2 branches missed.">        if (param instanceof org.apache.axis2.databinding.ADBBean) {</span>
<span class="nc" id="L228">            org.apache.axis2.databinding.ADBSOAPModelBuilder builder = new org.apache.axis2.databinding.ADBSOAPModelBuilder(param.getPullParser(</span>
                        com.densebrain.rif.client.service.types.Invoke.MY_QNAME),
                    factory);

<span class="nc" id="L232">            return builder.getEnvelope();</span>
        } else {
            //todo finish this onece the bean serializer has the necessary methods
<span class="nc" id="L235">            return null;</span>
        }
    }

    private org.apache.axiom.om.OMElement toOM(
        com.densebrain.rif.client.service.types.InvokeResponse param,
        boolean optimizeContent) {
<span class="nc bnc" id="L242" title="All 2 branches missed.">        if (param instanceof org.apache.axis2.databinding.ADBBean) {</span>
<span class="nc" id="L243">            org.apache.axiom.om.impl.builder.StAXOMBuilder builder = new org.apache.axiom.om.impl.builder.StAXOMBuilder(org.apache.axiom.om.OMAbstractFactory.getOMFactory(),</span>
<span class="nc" id="L244">                    new org.apache.axis2.util.StreamWrapper(param.getPullParser(</span>
                            com.densebrain.rif.client.service.types.InvokeResponse.MY_QNAME)));
<span class="nc" id="L246">            org.apache.axiom.om.OMElement documentElement = builder.getDocumentElement();</span>
<span class="nc" id="L247">            ((org.apache.axiom.om.impl.OMNodeEx) documentElement).setParent(null); // remove the parent link</span>

<span class="nc" id="L249">            return documentElement;</span>
        } else {
            //todo finish this onece the bean serializer has the necessary methods
<span class="nc" id="L252">            return null;</span>
        }
    }

    private org.apache.axiom.soap.SOAPEnvelope toEnvelope(
        org.apache.axiom.soap.SOAPFactory factory,
        com.densebrain.rif.client.service.types.InvokeResponse param,
        boolean optimizeContent) {
<span class="nc bnc" id="L260" title="All 2 branches missed.">        if (param instanceof org.apache.axis2.databinding.ADBBean) {</span>
<span class="nc" id="L261">            org.apache.axis2.databinding.ADBSOAPModelBuilder builder = new org.apache.axis2.databinding.ADBSOAPModelBuilder(param.getPullParser(</span>
                        com.densebrain.rif.client.service.types.InvokeResponse.MY_QNAME),
                    factory);

<span class="nc" id="L265">            return builder.getEnvelope();</span>
        } else {
            //todo finish this onece the bean serializer has the necessary methods
<span class="nc" id="L268">            return null;</span>
        }
    }

    /**
     * get the default envelope
     */
    private org.apache.axiom.soap.SOAPEnvelope toEnvelope(
        org.apache.axiom.soap.SOAPFactory factory) {
<span class="nc" id="L277">        return factory.getDefaultEnvelope();</span>
    }

    private java.lang.Object fromOM(org.apache.axiom.om.OMElement param,
        java.lang.Class type, java.util.Map extraNamespaces) {
        try {
<span class="nc bnc" id="L283" title="All 2 branches missed.">            if (com.densebrain.rif.client.service.types.Invoke.class.equals(</span>
                        type)) {
<span class="nc" id="L285">                return com.densebrain.rif.client.service.types.Invoke.Factory.parse(param.getXMLStreamReaderWithoutCaching());</span>
            }

<span class="nc bnc" id="L288" title="All 2 branches missed.">            if (com.densebrain.rif.client.service.types.InvokeResponse.class.equals(</span>
                        type)) {
<span class="nc" id="L290">                return com.densebrain.rif.client.service.types.InvokeResponse.Factory.parse(param.getXMLStreamReaderWithoutCaching());</span>
            }
<span class="nc" id="L292">        } catch (Exception e) {</span>
<span class="nc" id="L293">            throw new RuntimeException(e);</span>
<span class="nc" id="L294">        }</span>

<span class="nc" id="L296">        return null;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>