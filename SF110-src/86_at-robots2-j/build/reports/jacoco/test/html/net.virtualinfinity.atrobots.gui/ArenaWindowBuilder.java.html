<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ArenaWindowBuilder.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">86_at-robots2-j</a> &gt; <a href="index.source.html" class="el_package">net.virtualinfinity.atrobots.gui</a> &gt; <span class="el_source">ArenaWindowBuilder.java</span></div><h1>ArenaWindowBuilder.java</h1><pre class="source lang-java linenums">package net.virtualinfinity.atrobots.gui;

import net.virtualinfinity.atrobots.gui.renderers.GradientExplosionRenderer;
import net.virtualinfinity.atrobots.gui.renderers.RobotRenderer;
import net.virtualinfinity.atrobots.gui.renderers.ScanRenderer;
import net.virtualinfinity.atrobots.gui.renderers.SimpleExplosionRenderer;

import javax.swing.*;
import javax.swing.border.BevelBorder;
import java.awt.*;
import java.awt.event.ActionEvent;

/**
 * TODO: JavaDoc
 *
 * @author &lt;a href='mailto:daniel.pitts@cbs.com'&gt;Daniel Pitts&lt;/a&gt;
 */
public abstract class ArenaWindowBuilder {
    protected JFrame mainFrame;
    protected JMenuBar menubar;
    protected ArenaPane arenaPane;
    protected RobotStatusPane robotStatusPane;
    protected RobotRenderer robotRenderer;
    protected ScanRenderer scanRenderer;
    protected final ToggleProperty toggleRobotStatusBars;
    protected final ToggleProperty toggleRenderDeadRobots;
    protected final ToggleProperty toggleFillScanArc;
    protected final ToggleProperty toggleFillShields;
    protected final ToggleProperty toggleShowNames;

<span class="nc" id="L31">    protected ArenaWindowBuilder() {</span>
<span class="nc" id="L32">        toggleRobotStatusBars = new ToggleProperty(&quot;Robot Status Bars&quot;, new ShowStatusBarsAccessor());</span>
<span class="nc" id="L33">        toggleRenderDeadRobots = new ToggleProperty(&quot;Dead Robots&quot;, new ShowDeadRobotsAccessor());</span>
<span class="nc" id="L34">        toggleFillScanArc = new ToggleProperty(&quot;Filled Scans&quot;, new ShowFilledScansAccessor());</span>
<span class="nc" id="L35">        toggleFillShields = new ToggleProperty(&quot;Filled Shields&quot;, new ShowFillShieldAccessor());</span>
<span class="nc" id="L36">        toggleShowNames = new ToggleProperty(&quot;Label Robots&quot;, new ShowRobotNameAccessor());</span>
<span class="nc" id="L37">    }</span>

    protected void initializeWindow() {
<span class="nc" id="L40">        initializeSystemLookAndFeel();</span>
<span class="nc" id="L41">        mainFrame = new JFrame(&quot;AT-Robots 2 Clone 0.0.01&quot;);</span>
<span class="nc" id="L42">        mainFrame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);</span>
<span class="nc" id="L43">        registerCloseListener();</span>
<span class="nc" id="L44">        menubar = new JMenuBar();</span>
<span class="nc" id="L45">        mainFrame.setJMenuBar(menubar);</span>
<span class="nc" id="L46">        buildMenuBar();</span>
<span class="nc" id="L47">        robotStatusPane = RobotStatusPane.createRobotStatusPane();</span>
<span class="nc" id="L48">        final JScrollPane robotStatusScroller = new JScrollPane(robotStatusPane, ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS, ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);</span>
<span class="nc" id="L49">        mainFrame.getContentPane().add(robotStatusScroller, BorderLayout.EAST);</span>
<span class="nc" id="L50">        arenaPane = new ArenaPane();</span>
<span class="nc" id="L51">        mainFrame.getContentPane().add(arenaPane, BorderLayout.CENTER);</span>
<span class="nc" id="L52">        arenaPane.setBackground(Color.black);</span>
<span class="nc" id="L53">        arenaPane.setOpaque(true);</span>
<span class="nc" id="L54">        arenaPane.setBorder(BorderFactory.createBevelBorder(BevelBorder.LOWERED, Color.gray, Color.darkGray));</span>
<span class="nc" id="L55">        arenaPane.setPreferredSize(new Dimension(500, 500));</span>
<span class="nc" id="L56">        arenaPane.setRobotStatusPane(robotStatusPane);</span>
<span class="nc" id="L57">        robotRenderer = new RobotRenderer();</span>
<span class="nc" id="L58">        scanRenderer = new ScanRenderer();</span>
<span class="nc" id="L59">        arenaPane.getArenaRenderer().setRobotRenderer(robotRenderer);</span>
<span class="nc" id="L60">        arenaPane.getArenaRenderer().setScanRenderer(scanRenderer);</span>

<span class="nc" id="L62">        mainFrame.setLocationRelativeTo(null);</span>
<span class="nc" id="L63">        mainFrame.setLocationByPlatform(true);</span>
<span class="nc" id="L64">        mainFrame.pack();</span>
<span class="nc" id="L65">        mainFrame.setVisible(true);</span>
<span class="nc" id="L66">    }</span>

    protected abstract void buildMenuBar();

    protected abstract void registerCloseListener();

    protected JMenu createViewMenu() {
<span class="nc" id="L73">        final JMenu viewMenu = new JMenu(&quot;View&quot;);</span>
<span class="nc" id="L74">        viewMenu.add(toggleShowNames.configure(new JCheckBoxMenuItem()));</span>
<span class="nc" id="L75">        viewMenu.add(toggleRobotStatusBars.configure(new JCheckBoxMenuItem()));</span>
<span class="nc" id="L76">        viewMenu.add(toggleFillShields.configure(new JCheckBoxMenuItem()));</span>
<span class="nc" id="L77">        viewMenu.add(toggleRenderDeadRobots.configure(new JCheckBoxMenuItem()));</span>
<span class="nc" id="L78">        viewMenu.addSeparator();</span>
<span class="nc" id="L79">        viewMenu.add(toggleFillScanArc.configure(new JCheckBoxMenuItem()));</span>
<span class="nc" id="L80">        viewMenu.add(new JCheckBoxMenuItem(new AbstractAction(&quot;Gradiant Explosions&quot;) {</span>
            public void actionPerformed(ActionEvent e) {
<span class="nc" id="L82">                AbstractButton aButton = (AbstractButton) e.getSource();</span>
<span class="nc" id="L83">                boolean selected = aButton.getModel().isSelected();</span>
<span class="nc bnc" id="L84" title="All 2 branches missed.">                arenaPane.getArenaRenderer().setExplosionRenderer(selected ? new GradientExplosionRenderer() : new SimpleExplosionRenderer());</span>
<span class="nc" id="L85">            }</span>
        }));
<span class="nc" id="L87">        return viewMenu;</span>
    }

    private void initializeSystemLookAndFeel() {
        try {
<span class="nc" id="L92">            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());</span>
<span class="nc" id="L93">        } catch (Exception e) {</span>
<span class="nc" id="L94">            throw new RuntimeException(e);</span>
<span class="nc" id="L95">        }</span>
<span class="nc" id="L96">        JFrame.setDefaultLookAndFeelDecorated(true);</span>
<span class="nc" id="L97">        JDialog.setDefaultLookAndFeelDecorated(true);</span>
<span class="nc" id="L98">    }</span>

<span class="nc" id="L100">    private abstract class RepaintArenaAfterSetBooleanAccessor implements BooleanAccessor {</span>
        public final void set(boolean value) {
<span class="nc" id="L102">            doSet(value);</span>
<span class="nc" id="L103">            arenaPane.repaint();</span>
<span class="nc" id="L104">        }</span>

        protected abstract void doSet(boolean value);
    }

<span class="nc" id="L109">    private class ShowStatusBarsAccessor extends RepaintArenaAfterSetBooleanAccessor {</span>
        public boolean get() {
<span class="nc" id="L111">            return robotRenderer.isShowStatusBars();</span>
        }

        public void doSet(boolean value) {
<span class="nc" id="L115">            robotRenderer.setShowStatusBars(value);</span>
<span class="nc" id="L116">        }</span>
    }

<span class="nc" id="L119">    private class ShowFillShieldAccessor extends RepaintArenaAfterSetBooleanAccessor {</span>
        public boolean get() {
<span class="nc" id="L121">            return robotRenderer.isFillShield();</span>
        }

        public void doSet(boolean value) {
<span class="nc" id="L125">            robotRenderer.setFillShield(value);</span>
<span class="nc" id="L126">        }</span>
    }

<span class="nc" id="L129">    private class ShowRobotNameAccessor extends RepaintArenaAfterSetBooleanAccessor {</span>
        public boolean get() {
<span class="nc" id="L131">            return robotRenderer.isShowName();</span>
        }

        public void doSet(boolean value) {
<span class="nc" id="L135">            robotRenderer.setShowName(value);</span>
<span class="nc" id="L136">        }</span>
    }


<span class="nc" id="L140">    private class ShowDeadRobotsAccessor extends RepaintArenaAfterSetBooleanAccessor {</span>
        public boolean get() {
<span class="nc" id="L142">            return robotRenderer.isRenderDead();</span>
        }

        public void doSet(boolean value) {
<span class="nc" id="L146">            robotRenderer.setRenderDead(value);</span>
<span class="nc" id="L147">        }</span>
    }

<span class="nc" id="L150">    private class ShowFilledScansAccessor extends RepaintArenaAfterSetBooleanAccessor {</span>
        public boolean get() {
<span class="nc" id="L152">            return scanRenderer.isFillArcs();</span>
        }

        public void doSet(boolean value) {
<span class="nc" id="L156">            scanRenderer.setFillArcs(value);</span>
<span class="nc" id="L157">        }</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>