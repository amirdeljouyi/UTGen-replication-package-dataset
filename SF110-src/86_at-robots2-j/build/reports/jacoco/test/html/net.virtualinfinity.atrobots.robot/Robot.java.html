<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Robot.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">86_at-robots2-j</a> &gt; <a href="index.source.html" class="el_package">net.virtualinfinity.atrobots.robot</a> &gt; <span class="el_source">Robot.java</span></div><h1>Robot.java</h1><pre class="source lang-java linenums">package net.virtualinfinity.atrobots.robot;

import net.virtualinfinity.atrobots.ArenaObjectVisitor;
import net.virtualinfinity.atrobots.arena.*;
import net.virtualinfinity.atrobots.arenaobjects.DamageInflicter;
import net.virtualinfinity.atrobots.computer.*;
import net.virtualinfinity.atrobots.hardware.HasHeading;
import net.virtualinfinity.atrobots.hardware.HasOverburner;
import net.virtualinfinity.atrobots.hardware.armor.Armor;
import net.virtualinfinity.atrobots.hardware.armor.ArmorDepletionListener;
import net.virtualinfinity.atrobots.hardware.heatsinks.HeatSinks;
import net.virtualinfinity.atrobots.hardware.mines.MineLayer;
import net.virtualinfinity.atrobots.hardware.missiles.Missile;
import net.virtualinfinity.atrobots.hardware.missiles.MissileFactory;
import net.virtualinfinity.atrobots.hardware.radio.Transceiver;
import net.virtualinfinity.atrobots.hardware.scanning.ScanResult;
import net.virtualinfinity.atrobots.hardware.scanning.ScanSource;
import net.virtualinfinity.atrobots.hardware.scanning.radar.Radar;
import net.virtualinfinity.atrobots.hardware.scanning.sonar.Sonar;
import net.virtualinfinity.atrobots.hardware.shield.Shield;
import net.virtualinfinity.atrobots.hardware.throttle.Throttle;
import net.virtualinfinity.atrobots.hardware.transponder.Transponder;
import net.virtualinfinity.atrobots.hardware.turret.Turret;
import net.virtualinfinity.atrobots.interrupts.Destructable;
import net.virtualinfinity.atrobots.measures.*;
import net.virtualinfinity.atrobots.ports.PortHandler;
import net.virtualinfinity.atrobots.snapshots.ArenaObjectSnapshot;
import net.virtualinfinity.atrobots.snapshots.RobotSnapshot;

import java.util.ArrayList;
import java.util.List;

/**
 * @author Daniel Pitts
 */
public class Robot extends TangibleArenaObject implements Resettable, HasHeading, Destructable, HasOverburner, MissileFactory, ArmorDepletionListener, ScanSource, DamageInflicter {
<span class="nc" id="L37">    private final HeatSinks heatSinks = new HeatSinks();</span>
<span class="nc" id="L38">    private final Odometer odometer = new Odometer();</span>
    private final String name;
    private final int id;
    private final RobotScore score;
    private Throttle throttle;
    private Computer computer;
    private Turret turret;
    private Transponder transponder;
    private Transceiver transceiver;
<span class="nc" id="L47">    private Duration lastDamageGiven = Duration.fromCycles(0);</span>
<span class="nc" id="L48">    private Duration lastDamageTaken = Duration.fromCycles(0);</span>
    private Armor armor;
    private Radar radar;
    private Sonar sonar;
    private Temperature shutdownLevel;
    private MineLayer mineLayer;
    private Shield shield;
    private boolean overburn;
    private HardwareBus hardwareBus;
<span class="nc" id="L57">    private static final RelativeAngle STEERING_SPEED = RelativeAngle.fromBygrees(8);</span>
<span class="nc" id="L58">    private final Position oldPosition = new Position();</span>
    private int roundKills;
<span class="nc" id="L60">    private final List&lt;RobotListener&gt; robotListeners = new ArrayList&lt;RobotListener&gt;();</span>
<span class="nc" id="L61">    private final Heading desiredHeading = new Heading(heading.getAngle());</span>

    {
<span class="nc" id="L64">        position.setOdometer(odometer);</span>
    }

<span class="nc" id="L67">    public Robot(String name, int id, RobotScore score) {</span>
<span class="nc" id="L68">        this.name = name;</span>
<span class="nc" id="L69">        this.id = id;</span>
<span class="nc" id="L70">        this.score = score;</span>
<span class="nc" id="L71">        this.roundKills = 0;</span>
<span class="nc" id="L72">    }</span>

    public void setComputer(Computer computer) {
<span class="nc" id="L75">        this.computer = computer;</span>
<span class="nc" id="L76">        computer.setId(getId());</span>
<span class="nc" id="L77">        computer.setName(getName());</span>
<span class="nc" id="L78">    }</span>

    public Computer getComputer() {
<span class="nc" id="L81">        return computer;</span>
    }

    public void destruct() {
<span class="nc" id="L85">        getArmor().destruct();</span>
<span class="nc" id="L86">    }</span>

    public Turret getTurret() {
<span class="nc" id="L89">        return turret;</span>
    }

    public void setOverburn(boolean overburn) {
<span class="nc" id="L93">        this.overburn = overburn;</span>
<span class="nc" id="L94">    }</span>

    public Transponder getTransponder() {
<span class="nc" id="L97">        return transponder;</span>
    }

    public Speed getSpeed() {
<span class="nc" id="L101">        return speed;</span>
    }

    public Duration getLastDamageGiven() {
<span class="nc" id="L105">        return lastDamageGiven;</span>
    }

    public Duration getLastDamageTaken() {
<span class="nc" id="L109">        return lastDamageTaken;</span>
    }

    public Transceiver getTransceiver() {
<span class="nc" id="L113">        return transceiver;</span>
    }


    public Odometer getOdometer() {
<span class="nc" id="L118">        return odometer;</span>
    }

    public Throttle getThrottle() {
<span class="nc" id="L122">        return throttle;</span>
    }

    public HeatSinks getHeatSinks() {
<span class="nc" id="L126">        return heatSinks;</span>
    }

    public Heading getHeading() {
<span class="nc" id="L130">        return heading;</span>
    }

    public PortHandler getTurretOffsetSensor() {
<span class="nc" id="L134">        return new PortHandler() {</span>
            public short read() {
<span class="nc" id="L136">                return (short) getTurretShift();</span>
            }
        };
    }

    public int getTurretShift() {
<span class="nc" id="L142">        return getTurret().getHeading().getAngle().getAngleCounterClockwiseTo(getHeading().getAngle()).getBygrees();</span>
    }

    public Armor getArmor() {
<span class="nc" id="L146">        return armor;</span>
    }

    public Radar getRadar() {
<span class="nc" id="L150">        return radar;</span>
    }

    public PortHandler getAimTurretPort() {
<span class="nc" id="L154">        return new PortHandler() {</span>
            public void write(short value) {
<span class="nc" id="L156">                setTurretOffset(RelativeAngle.fromBygrees(value));</span>
<span class="nc" id="L157">            }</span>
        };
    }

    private void setTurretOffset(RelativeAngle angle) {
<span class="nc" id="L162">        getTurret().getHeading().setAngle(getHeading().getAngle().counterClockwise(angle));</span>
<span class="nc" id="L163">    }</span>

    public Heading getDesiredHeading() {
<span class="nc" id="L166">        return desiredHeading;</span>
    }

    public Sonar getSonar() {
<span class="nc" id="L170">        return sonar;</span>
    }

    public PortHandler getOverburnLatchPort() {
<span class="nc" id="L174">        return new PortHandler() {</span>
            public short read() {
<span class="nc bnc" id="L176" title="All 2 branches missed.">                return (short) (isOverburn() ? 1 : 0);</span>
            }

            public void write(short value) {
<span class="nc bnc" id="L180" title="All 2 branches missed.">                setOverburn(value != 0);</span>
<span class="nc" id="L181">            }</span>
        };
    }

    public boolean isOverburn() {
<span class="nc" id="L186">        return overburn;</span>
    }

    public PortHandler getShutdownLevelLatchPort() {
<span class="nc" id="L190">        return new PortHandler() {</span>
            public short read() {
<span class="nc" id="L192">                return (short) hardwareBus.getShutdownLevel();</span>
            }

            public void write(short value) {
<span class="nc" id="L196">                hardwareBus.setShutdownLevel(value);</span>
<span class="nc" id="L197">            }</span>
        };
    }

    public MineLayer getMineLayer() {
<span class="nc" id="L202">        return mineLayer;</span>
    }


    public Shield getShield() {
<span class="nc" id="L207">        return shield;</span>
    }

    public void setTurret(Turret turret) {
<span class="nc" id="L211">        this.turret = turret;</span>
<span class="nc" id="L212">    }</span>

    public void setTransponder(Transponder transponder) {
<span class="nc" id="L215">        this.transponder = transponder;</span>
<span class="nc" id="L216">    }</span>

    public void setTransceiver(Transceiver transceiver) {
<span class="nc" id="L219">        this.transceiver = transceiver;</span>
<span class="nc" id="L220">    }</span>

    public void setArmor(Armor armor) {
<span class="nc" id="L223">        this.armor = armor;</span>
<span class="nc" id="L224">        armor.setArmorDepletionListener(this);</span>
<span class="nc" id="L225">    }</span>

    public void setRadar(Radar radar) {
<span class="nc" id="L228">        this.radar = radar;</span>
<span class="nc" id="L229">    }</span>

    public void setSonar(Sonar sonar) {
<span class="nc" id="L232">        this.sonar = sonar;</span>
<span class="nc" id="L233">    }</span>

    public void setMineLayer(MineLayer mineLayer) {
<span class="nc" id="L236">        this.mineLayer = mineLayer;</span>
<span class="nc" id="L237">    }</span>

    public void setShield(Shield shield) {
<span class="nc" id="L240">        this.shield = shield;</span>
<span class="nc" id="L241">    }</span>

    public HardwareBus getHardwareBus() {
<span class="nc" id="L244">        return hardwareBus;</span>
    }

    public void setHardwareBus(HardwareBus hardwareBus) {
<span class="nc" id="L248">        this.hardwareBus = hardwareBus;</span>
<span class="nc" id="L249">    }</span>

    public void reset() {
<span class="nc" id="L252">        setOverburn(false);</span>

<span class="nc" id="L254">    }</span>

    public ScanResult scan(AngleBracket angleBracket, double maxDistance, boolean calculateAccuracy, boolean includeTargetDetails) {
<span class="nc" id="L257">        final RobotScanResult scanResult = doScan(angleBracket, maxDistance, calculateAccuracy);</span>
<span class="nc bnc" id="L258" title="All 2 branches missed.">        if (scanResult.successful()) {</span>
<span class="nc" id="L259">            getComputer().getRegisters().getTargetId().set((short) scanResult.getMatch().transponder.getId());</span>
<span class="nc bnc" id="L260" title="All 2 branches missed.">            if (includeTargetDetails) {</span>
<span class="nc" id="L261">                final AbsoluteAngle matchAngle = scanResult.getMatch().getHeading().getAngle();</span>
<span class="nc" id="L262">                final AbsoluteAngle turretAngle = getTurret().getHeading().getAngle();</span>
<span class="nc" id="L263">                getComputer().getRegisters().getTargetHeading().set((short) matchAngle.getAngleCounterClockwiseTo(turretAngle).getBygrees());</span>
<span class="nc" id="L264">                getComputer().getRegisters().getTargetThrottle().set((short) scanResult.getMatch().getThrottle().getPower());</span>
<span class="nc" id="L265">                getComputer().getRegisters().getTargetVelocity().set((short) Math.round(scanResult.getMatch().getSpeed().times(Duration.ONE_CYCLE) * 100));</span>
            }
        }
<span class="nc" id="L268">        return scanResult;</span>
    }

    private RobotScanResult doScan(AngleBracket angleBracket, double maxDistance, boolean calculateAccuracy) {
<span class="nc" id="L272">        Position position = getPosition();</span>
<span class="nc" id="L273">        final RobotScanner robotScanner = new RobotScanner(this, position, angleBracket, maxDistance, calculateAccuracy);</span>
<span class="nc" id="L274">        getArena().visitActiveRobots(robotScanner);</span>
<span class="nc" id="L275">        final RobotScanResult scanResult = robotScanner.toScanResult();</span>
<span class="nc bnc" id="L276" title="All 4 branches missed.">        final Scan object = new Scan(angleBracket, maxDistance, scanResult.successful(), scanResult.getMatchPositionVector(), calculateAccuracy &amp;&amp; scanResult.successful(), scanResult.getAccuracy());</span>
<span class="nc" id="L277">        getArena().addIntangible(object);</span>
<span class="nc" id="L278">        object.getPosition().copyFrom(position);</span>
<span class="nc" id="L279">        return scanResult;</span>
    }


    protected ArenaObjectSnapshot createSpecificSnapshot() {
<span class="nc" id="L284">        final RobotSnapshot robotSnapshot = new RobotSnapshot();</span>
<span class="nc" id="L285">        robotSnapshot.setTemperature(getHeatSinks().getTemperature());</span>
<span class="nc" id="L286">        robotSnapshot.setArmor(getArmor().getRemaining());</span>
<span class="nc" id="L287">        robotSnapshot.setOverburn(isOverburn());</span>
<span class="nc" id="L288">        robotSnapshot.setActiveShield(getShield().isActive());</span>
<span class="nc" id="L289">        robotSnapshot.setHeading(getHeading().getAngle());</span>
<span class="nc" id="L290">        robotSnapshot.setTurretHeading(getTurret().getHeading().getAngle());</span>
<span class="nc" id="L291">        robotSnapshot.setName(getName());</span>
<span class="nc" id="L292">        robotSnapshot.setId(getId());</span>
<span class="nc" id="L293">        robotSnapshot.setRoundKills(getRoundKills());</span>
<span class="nc" id="L294">        robotSnapshot.setTotalKills(getTotalKills());</span>
<span class="nc" id="L295">        robotSnapshot.setTotalDeaths(getTotalDeaths());</span>
<span class="nc" id="L296">        robotSnapshot.setTotalWins(getTotalWins());</span>
<span class="nc" id="L297">        robotSnapshot.setTotalTies(getTotalTies());</span>
<span class="nc" id="L298">        robotSnapshot.setLastMessage(getComputer().getLastMessage());</span>
<span class="nc" id="L299">        return robotSnapshot;</span>
    }

    @Override
    public void checkCollision(TangibleArenaObject robot) {
<span class="nc bnc" id="L304" title="All 2 branches missed.">        if (robot.getPosition().getVectorTo(position).getMagnitudeSquared() &lt; 64) {</span>
<span class="nc" id="L305">            collides();</span>
<span class="nc" id="L306">            robot.collides();</span>
        }
<span class="nc" id="L308">    }</span>

    public void collides() {
<span class="nc" id="L311">        position.copyFrom(oldPosition);</span>
<span class="nc bnc" id="L312" title="All 2 branches missed.">        if (speed.times(Duration.ONE_CYCLE) &gt; 2) {</span>
<span class="nc" id="L313">            armor.inflictDamage(1);</span>
        }
<span class="nc" id="L315">        throttle.setPower(0);</span>
<span class="nc" id="L316">        throttle.setDesiredPower(0);</span>
<span class="nc" id="L317">        computer.getRegisters().getCollisionCount().increment();</span>
<span class="nc" id="L318">    }</span>

    public void inflictDamage(DamageInflicter cause, double damageAmount) {
<span class="nc bnc" id="L321" title="All 2 branches missed.">        if (!isDead()) {</span>
<span class="nc" id="L322">            final double unabsorbedAmount = shield.absorbDamage(damageAmount);</span>
<span class="nc bnc" id="L323" title="All 2 branches missed.">            if (unabsorbedAmount &gt; 0) {</span>
<span class="nc" id="L324">                lastDamageTaken = getArena().getRoundTimer().getTime();</span>
<span class="nc" id="L325">                cause.inflictedDamage(unabsorbedAmount);</span>
            }
<span class="nc" id="L327">            armor.inflictDamage(unabsorbedAmount);</span>
<span class="nc bnc" id="L328" title="All 2 branches missed.">            if (isDead()) {</span>
<span class="nc" id="L329">                cause.killedRobot();</span>
            }
        }
<span class="nc" id="L332">    }</span>

    public void armorDepleted() {
<span class="nc bnc" id="L335" title="All 2 branches missed.">        if (!isDead()) {</span>
<span class="nc bnc" id="L336" title="All 2 branches missed.">            for (RobotListener listener : robotListeners) {</span>
<span class="nc" id="L337">                listener.died(this);</span>
<span class="nc" id="L338">            }</span>
<span class="nc" id="L339">            die();</span>
<span class="nc bnc" id="L340" title="All 2 branches missed.">            getArena().explosion(this, new LinearDamageFunction(position, isOverburn() ? 1.3 : 1, 25.0));</span>
        }
<span class="nc" id="L342">    }</span>

    public void update(Duration duration) {
<span class="nc" id="L345">        oldPosition.copyFrom(position);</span>
<span class="nc" id="L346">        super.update(duration);</span>
<span class="nc" id="L347">        getThrottle().update(duration);</span>
<span class="nc" id="L348">        getHeading().moveToward(getDesiredHeading(), STEERING_SPEED);</span>
<span class="nc" id="L349">        getComputer().update(duration);</span>
<span class="nc bnc" id="L350" title="All 2 branches missed.">        if (heatSinks.getTemperature().getLogScale() &gt;= 500) {</span>
<span class="nc" id="L351">            destruct();</span>
<span class="nc bnc" id="L352" title="All 2 branches missed.">        } else if (heatSinks.getTemperature().getLogScale() &gt;= 475) {</span>
<span class="nc" id="L353">            armor.inflictDamage(duration.getCycles() / 4d);</span>
<span class="nc bnc" id="L354" title="All 2 branches missed.">        } else if (heatSinks.getTemperature().getLogScale() &gt;= 450) {</span>
<span class="nc" id="L355">            armor.inflictDamage(duration.getCycles() / 8d);</span>
<span class="nc bnc" id="L356" title="All 2 branches missed.">        } else if (heatSinks.getTemperature().getLogScale() &gt;= 400) {</span>
<span class="nc" id="L357">            armor.inflictDamage(duration.getCycles() / 16d);</span>
<span class="nc bnc" id="L358" title="All 2 branches missed.">        } else if (heatSinks.getTemperature().getLogScale() &gt;= 350) {</span>
<span class="nc" id="L359">            armor.inflictDamage(duration.getCycles() / 32d);</span>
<span class="nc bnc" id="L360" title="All 2 branches missed.">        } else if (heatSinks.getTemperature().getLogScale() &gt;= 300) {</span>
<span class="nc" id="L361">            armor.inflictDamage(duration.getCycles() / 64d);</span>
        }
<span class="nc bnc" id="L363" title="All 2 branches missed.">        heatSinks.cool(isOverburn() ? getCoolTemp(duration).times(0.66) : getCoolTemp(duration));</span>
<span class="nc" id="L364">        shield.update(duration);</span>
<span class="nc bnc" id="L365" title="All 4 branches missed.">        if (position.getX() &lt; 4 || position.getX() &gt; 1000 - 4 ||</span>
<span class="nc bnc" id="L366" title="All 4 branches missed.">                position.getY() &lt; 4 || position.getY() &gt; 1000 - 4) {</span>
<span class="nc" id="L367">            collides();</span>
        }
<span class="nc" id="L369">    }</span>

    private Temperature getCoolTemp(Duration duration) {
<span class="nc" id="L372">        return Temperature.fromLogScale(duration.getCycles() * 1.125);</span>
    }

    public void setThrottle(Throttle throttle) {
<span class="nc" id="L376">        this.throttle = throttle;</span>
<span class="nc" id="L377">        throttle.setSpeed(speed);</span>
<span class="nc" id="L378">        throttle.setHeatSinks(heatSinks);</span>
<span class="nc" id="L379">    }</span>

    public void winRound() {
<span class="nc bnc" id="L382" title="All 2 branches missed.">        for (RobotListener listener : robotListeners) {</span>
<span class="nc" id="L383">            listener.wonRound(this);</span>
<span class="nc" id="L384">        }</span>
<span class="nc" id="L385">    }</span>

    public void tieRound() {
<span class="nc bnc" id="L388" title="All 2 branches missed.">        for (RobotListener listener : robotListeners) {</span>
<span class="nc" id="L389">            listener.tiedRound(this);</span>
<span class="nc" id="L390">        }</span>
<span class="nc" id="L391">    }</span>

    public void killedRobot() {
<span class="nc bnc" id="L394" title="All 2 branches missed.">        for (RobotListener listener : robotListeners) {</span>
<span class="nc" id="L395">            listener.killedRobot(this);</span>
<span class="nc" id="L396">        }</span>
<span class="nc" id="L397">    }</span>

    public void inflictedDamage(double amount) {
<span class="nc" id="L400">        lastDamageGiven = getArena().getRoundTimer().getTime();</span>
<span class="nc bnc" id="L401" title="All 2 branches missed.">        for (RobotListener listener : robotListeners) {</span>
<span class="nc" id="L402">            listener.inflictedDamage(this, amount);</span>
<span class="nc" id="L403">        }</span>
<span class="nc" id="L404">    }</span>

    public String getName() {
<span class="nc" id="L407">        return name;</span>
    }

    public int getTotalKills() {
<span class="nc" id="L411">        return score.getTotalKills();</span>
    }

    public int getRoundKills() {
<span class="nc" id="L415">        return roundKills;</span>
    }

    public int getTotalDeaths() {
<span class="nc" id="L419">        return score.getTotalDeaths();</span>
    }

    public int getId() {
<span class="nc" id="L423">        return id;</span>
    }

    public int getTotalWins() {
<span class="nc" id="L427">        return score.getTotalWins();</span>
    }

    public int getTotalTies() {
<span class="nc" id="L431">        return score.getTotalTies();</span>
    }

    public void addRobotListener(RobotListener robotListener) {
<span class="nc" id="L435">        robotListeners.add(robotListener);</span>
<span class="nc" id="L436">    }</span>

    @Override
    protected void arenaConnected(Arena arena) {
<span class="nc" id="L440">        transceiver.setRadioDispatcher(arena.getRadioDispatcher());</span>
<span class="nc" id="L441">    }</span>

    public InterruptHandler createGetRobotInfoInterruptHandler(MemoryCell speed, MemoryCell lastDamageTaken, MemoryCell lastDamageGiven) {
<span class="nc" id="L444">        return new GetRobotInfoInterrupt(speed, lastDamageTaken, lastDamageGiven);</span>
    }

    public GetRobotStatisticsInterrupt createGetRobotStatisticsInterrupt(MemoryCell totalKills, MemoryCell roundKills, MemoryCell totalDeaths) {
<span class="nc" id="L448">        return new GetRobotStatisticsInterrupt(totalKills, roundKills, totalDeaths);</span>
    }

    public Missile createMissile(AbsoluteAngle heading, Position position, double power) {
<span class="nc" id="L452">        return new Missile(this, position, heading, power, this.isOverburn());</span>
    }

    public void accept(ArenaObjectVisitor arenaObjectVisitor) {
<span class="nc" id="L456">        arenaObjectVisitor.visit(this);</span>
<span class="nc" id="L457">    }</span>

    /**
     * @author Daniel Pitts
     */
    public class GetRobotInfoInterrupt extends InterruptHandler {
        private final MemoryCell speed;
        private final MemoryCell lastDamageTaken;
        private final MemoryCell lastDamageGiven;

<span class="nc" id="L467">        private GetRobotInfoInterrupt(MemoryCell speed, MemoryCell lastDamageTaken, MemoryCell lastDamageGiven) {</span>
<span class="nc" id="L468">            this.speed = speed;</span>
<span class="nc" id="L469">            this.lastDamageTaken = lastDamageTaken;</span>
<span class="nc" id="L470">            this.lastDamageGiven = lastDamageGiven;</span>
<span class="nc" id="L471">        }</span>

        public void handleInterrupt() {
<span class="nc" id="L474">            speed.set((short) Math.round(getSpeed().times(Duration.ONE_CYCLE) * 100));</span>
<span class="nc" id="L475">            lastDamageGiven.set((short) getLastDamageGiven().getCycles());</span>
<span class="nc" id="L476">            lastDamageTaken.set((short) getLastDamageTaken().getCycles());</span>
<span class="nc" id="L477">        }</span>
    }

    /**
     * @author Daniel Pitts
     */
    public class GetRobotStatisticsInterrupt extends InterruptHandler {
        private final MemoryCell totalKills;
        private final MemoryCell roundKills;
        private final MemoryCell totalDeaths;

<span class="nc" id="L488">        private GetRobotStatisticsInterrupt(MemoryCell totalKills, MemoryCell roundKills, MemoryCell totalDeaths) {</span>
<span class="nc" id="L489">            this.totalKills = totalKills;</span>
<span class="nc" id="L490">            this.roundKills = roundKills;</span>
<span class="nc" id="L491">            this.totalDeaths = totalDeaths;</span>
<span class="nc" id="L492">        }</span>

        public void handleInterrupt() {
<span class="nc" id="L495">            totalKills.set((short) getTotalKills());</span>
<span class="nc" id="L496">            roundKills.set((short) getRoundKills());</span>
<span class="nc" id="L497">            totalDeaths.set((short) getTotalDeaths());</span>
<span class="nc" id="L498">        }</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>