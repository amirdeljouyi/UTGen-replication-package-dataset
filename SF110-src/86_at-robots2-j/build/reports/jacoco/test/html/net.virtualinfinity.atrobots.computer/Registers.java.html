<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Registers.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">86_at-robots2-j</a> &gt; <a href="index.source.html" class="el_package">net.virtualinfinity.atrobots.computer</a> &gt; <span class="el_source">Registers.java</span></div><h1>Registers.java</h1><pre class="source lang-java linenums">package net.virtualinfinity.atrobots.computer;

import net.virtualinfinity.atrobots.atsetup.AtRobotRegister;

import static net.virtualinfinity.atrobots.atsetup.AtRobotRegister.*;
import static net.virtualinfinity.atrobots.atsetup.AtRobotRegisterAddresses.*;

/**
 * Holds pointers to all the registers of the AT-Robot virtual machine.
 *
 * @author Daniel Pitts
 */
public class Registers {
    private final Flags flags;
    private final MemoryCell ax;
    private final MemoryCell bx;
    private final MemoryCell cx;
    private final MemoryCell dx;
    private final MemoryCell ex;
    private final MemoryCell fx;
    private final MemoryCell sp;
    private final MemoryCell desiredSpeed;
    private final MemoryCell desiredHeading;
    private final MemoryCell turretOffset;
    private final MemoryCell accuracy;
    private final MemoryCell swap;
    private final MemoryCell targetId;
    private final MemoryCell targetHeading;
    private final MemoryCell targetThrottle;
    private final MemoryCell collisionCount;
    private final MemoryCell meters;
    private final MemoryCell communicationQueueHead;
    private final MemoryCell communicationQueueTail;
    private final MemoryCell targetVelocity;

<span class="nc" id="L36">    public Registers(Memory memory) {</span>
<span class="nc" id="L37">        flags = new Flags(getCell(memory, FLAGS));</span>
<span class="nc" id="L38">        ax = getCell(memory, AX);</span>
<span class="nc" id="L39">        bx = getCell(memory, BX);</span>
<span class="nc" id="L40">        cx = getCell(memory, CX);</span>
<span class="nc" id="L41">        dx = getCell(memory, DX);</span>
<span class="nc" id="L42">        ex = getCell(memory, EX);</span>
<span class="nc" id="L43">        fx = getCell(memory, FX);</span>
<span class="nc" id="L44">        sp = getCell(memory, SP);</span>
<span class="nc" id="L45">        desiredSpeed = getCell(memory, DESIRED_SPEED_ADDRESS);</span>
<span class="nc" id="L46">        desiredHeading = getCell(memory, DESIRED_HEADING_ADDRESS);</span>
<span class="nc" id="L47">        turretOffset = getCell(memory, TURRET_OFFSET_ADDRESS);</span>
<span class="nc" id="L48">        accuracy = getCell(memory, ACCURACY_ADDRESS);</span>
<span class="nc" id="L49">        swap = getCell(memory, SWAP_ADDRESS);</span>
<span class="nc" id="L50">        targetId = getCell(memory, TARGET_ID_ADDRESS);</span>
<span class="nc" id="L51">        targetHeading = getCell(memory, TARGET_HEADING_ADDRESS);</span>
<span class="nc" id="L52">        targetThrottle = getCell(memory, TARGET_THROTTLE_ADDRESS);</span>
<span class="nc" id="L53">        collisionCount = getCell(memory, COLLISION_COUNT_ADDRESS);</span>
<span class="nc" id="L54">        meters = getCell(memory, METERS_ADDRESS);</span>
<span class="nc" id="L55">        communicationQueueHead = getCell(memory, COMMUNICATION_QUEUE_HEAD_ADDRESS);</span>
<span class="nc" id="L56">        communicationQueueTail = getCell(memory, COMMUNICATION_QUEUE_TAIL_ADDRESS);</span>
<span class="nc" id="L57">        targetVelocity = getCell(memory, TARGET_VELOCITY_ADDRESS);</span>
<span class="nc" id="L58">    }</span>

    private static MemoryCell getCell(Memory memory, int address) {
<span class="nc" id="L61">        return memory.getCell(address);</span>
    }

    private static MemoryCell getCell(Memory memory, AtRobotRegister register) {
<span class="nc" id="L65">        return getCell(memory, register.address);</span>
    }

    public MemoryCell getStackPointerCell() {
<span class="nc" id="L69">        return sp;</span>
    }

    public Flags getFlags() {
<span class="nc" id="L73">        return flags;</span>
    }

    public MemoryCell getAx() {
<span class="nc" id="L77">        return ax;</span>
    }

    public MemoryCell getBx() {
<span class="nc" id="L81">        return bx;</span>
    }

    public MemoryCell getCx() {
<span class="nc" id="L85">        return cx;</span>
    }

    public MemoryCell getDx() {
<span class="nc" id="L89">        return dx;</span>
    }

    public MemoryCell getEx() {
<span class="nc" id="L93">        return ex;</span>
    }

    public MemoryCell getFx() {
<span class="nc" id="L97">        return fx;</span>
    }

    public MemoryCell getSp() {
<span class="nc" id="L101">        return sp;</span>
    }

    public MemoryCell getDesiredSpeed() {
<span class="nc" id="L105">        return desiredSpeed;</span>
    }

    public MemoryCell getDesiredHeading() {
<span class="nc" id="L109">        return desiredHeading;</span>
    }

    public MemoryCell getTurretOffset() {
<span class="nc" id="L113">        return turretOffset;</span>
    }

    public MemoryCell getAccuracy() {
<span class="nc" id="L117">        return accuracy;</span>
    }

    public MemoryCell getSwap() {
<span class="nc" id="L121">        return swap;</span>
    }

    public MemoryCell getTargetId() {
<span class="nc" id="L125">        return targetId;</span>
    }

    public MemoryCell getTargetHeading() {
<span class="nc" id="L129">        return targetHeading;</span>
    }

    public MemoryCell getTargetThrottle() {
<span class="nc" id="L133">        return targetThrottle;</span>
    }

    public MemoryCell getCollisionCount() {
<span class="nc" id="L137">        return collisionCount;</span>
    }

    public MemoryCell getMeters() {
<span class="nc" id="L141">        return meters;</span>
    }

    public MemoryCell getCommunicationQueueHead() {
<span class="nc" id="L145">        return communicationQueueHead;</span>
    }

    public MemoryCell getCommunicationQueueTail() {
<span class="nc" id="L149">        return communicationQueueTail;</span>
    }

    public MemoryCell getTargetVelocity() {
<span class="nc" id="L153">        return targetVelocity;</span>
    }

    public String toString() {
<span class="nc" id="L157">        return &quot;AX=&quot; + getAx().signed()</span>
<span class="nc" id="L158">                + &quot;, BX=&quot; + getBx().signed()</span>
<span class="nc" id="L159">                + &quot;, CX=&quot; + getCx().signed()</span>
<span class="nc" id="L160">                + &quot;, DX=&quot; + getDx().signed()</span>
<span class="nc" id="L161">                + &quot;, EX=&quot; + getEx().signed()</span>
<span class="nc" id="L162">                + &quot;, FX=&quot; + getFx().signed()</span>
<span class="nc" id="L163">                + &quot;, SP=&quot; + getSp().signed()</span>
<span class="nc" id="L164">                + &quot;, FL=&quot; + getFlags();</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>