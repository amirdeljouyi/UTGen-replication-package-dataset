<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SuiteGUI.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">10_water-simulator</a> &gt; <a href="index.source.html" class="el_package">simulator.SA.gui</a> &gt; <span class="el_source">SuiteGUI.java</span></div><h1>SuiteGUI.java</h1><pre class="source lang-java linenums">package simulator.SA.gui;

import jade.gui.GuiEvent;
import jade.wrapper.AgentController;
import jade.wrapper.ControllerException;
import jade.wrapper.StaleProxyException;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.util.Hashtable;
import javax.swing.JDesktopPane;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JInternalFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JOptionPane;

import org.apache.log4j.Logger;

import simulator.DAWN;
import simulator.SA.SimulationAgent;
import simulator.util.Discrete;
import simulator.util.Function;
import simulator.util.Linear;
import simulator.util.MetDataFunction;
import simulator.util.Raise;
import simulator.util.Random;

/**
 * @author Vartalas Panagiotis
 * @author Ioannis N. Athanasiadis
 * @version 1.9
 * @since 2003-2006
 */

public class SuiteGUI extends JFrame {
	private static final long serialVersionUID = 1051723621263416876L;
<span class="nc" id="L41">    private Logger log = Logger.getLogger(SuiteGUI.class);</span>
	
<span class="nc" id="L43">	public static final Integer BACKGROUND_LAYER = new Integer(1);</span>

<span class="nc" id="L45">	public static final Integer TOP_LAYER = new Integer(2);</span>

<span class="nc" id="L47">	public static final String[] pricingScenarios = {</span>
			&quot;Water price remains unchanged&quot;, &quot;The real water price remains unchanged&quot;,
			 };

	private SimulationAgent myAgent;

	private ScenarioDesignWizard scenarioDesignWizard;

<span class="nc" id="L55">	private Object[] scenarioInputs = new Object[9];</span>

<span class="nc" id="L57">	private JDesktopPane mainPanel = new JDesktopPane();</span>

<span class="nc" id="L59">	private JMenuBar menuBar = new JMenuBar();</span>

<span class="nc" id="L61">	private JMenu[] menus = { new JMenu(&quot;Scenarios&quot;), new JMenu(&quot;Tools&quot;),</span>
			new JMenu(&quot;Help&quot;) };

<span class="nc" id="L64">	private JMenuItem[][] menuItems = {</span>
			{ new JMenuItem(&quot;New Scenario&quot;), new JMenuItem(&quot;Load Scenario&quot;),
					new JMenuItem(&quot;Save Scenario&quot;), null,
					new JMenuItem(&quot;Start Simulation&quot;), new JMenuItem(&quot;Exit&quot;) },
			{ null/*new JMenuItem(&quot;Save Results&quot;)*/,
					new JMenuItem(&quot;Launch Jade RMA&quot;) },
			{ new JMenuItem(&quot;About DAWN...&quot;) } };

<span class="nc" id="L72">	private JMenu editMenu = new JMenu(&quot;Edit...&quot;);</span>

<span class="nc" id="L74">	private JMenuItem[] editSubmenu = { new JMenuItem(&quot;Simulation Parameters&quot;),</span>
			new JMenuItem(&quot;Demand Curve Paremeters&quot;),
			new JMenuItem(&quot;Meteorological Data File Location&quot;),
			new JMenuItem(&quot;Pricing Policy&quot;) };

<span class="nc" id="L79">	private JMenu saveResultsMenu = new JMenu(&quot;Save results...&quot;);</span>

<span class="nc" id="L81">	private JMenuItem[] saveResultsSubmenu = { new JMenuItem(&quot;Total results&quot;),</span>
			new JMenuItem(&quot;All consumers' results&quot;) };

<span class="nc" id="L84">	private Hashtable menuActions = new Hashtable();</span>

	// TEST
	// Temporary !!!!!!!!
<span class="nc" id="L88">	private Function[] availableFunctions = new Function[7];</span>

<span class="nc" id="L90">	private Linear linear = new Linear();</span>

<span class="nc" id="L92">	private Random random1 = new Random();</span>

<span class="nc" id="L94">	private Random random2 = new Random();</span>

<span class="nc" id="L96">	private Discrete discrete = new Discrete();</span>

<span class="nc" id="L98">	private Raise raise = new Raise();</span>

<span class="nc" id="L100">	private MetDataFunction metData = new MetDataFunction();</span>

<span class="nc" id="L102">	private Raise price = new Raise();</span>

	{
<span class="nc" id="L105">		random1.setFunctionName(&quot;RANDOM-INT&quot;);</span>
<span class="nc" id="L106">		random2.setFunctionName(&quot;RANDOM-FL&quot;);</span>
<span class="nc" id="L107">		random2.setFloat();</span>
<span class="nc" id="L108">		price.setFunctionName(&quot;PRICE&quot;);</span>
<span class="nc" id="L109">		price.setFunctionRepresentation(&quot; Y = a * [ln(price)]^n &quot;);</span>
<span class="nc" id="L110">		availableFunctions[0] = linear;</span>
<span class="nc" id="L111">		availableFunctions[1] = discrete;</span>
<span class="nc" id="L112">		availableFunctions[2] = random1;</span>
<span class="nc" id="L113">		availableFunctions[3] = random2;</span>
<span class="nc" id="L114">		availableFunctions[4] = raise;</span>
<span class="nc" id="L115">		availableFunctions[5] = metData;</span>
<span class="nc" id="L116">		availableFunctions[6] = price;</span>

	}

	@SuppressWarnings(&quot;deprecation&quot;)
<span class="nc" id="L121">	public SuiteGUI(SimulationAgent a) {</span>
<span class="nc" id="L122">		this.myAgent = a;</span>
<span class="nc" id="L123">		init();</span>
<span class="nc" id="L124">		this.setTitle(&quot;DAWN: Distributed Agent-based Water Demand Simulator&quot;);</span>
<span class="nc" id="L125">		this.setSize(600, 500);</span>
<span class="nc" id="L126">		this.show();</span>
<span class="nc" id="L127">	}</span>

	@SuppressWarnings(&quot;unchecked&quot;)
	private void init() {
<span class="nc" id="L131">		int hashTableIndex = 1;</span>
<span class="nc" id="L132">		menuActions.put(&quot;End Wizard&quot;, new Integer(0));</span>

		//Scenario menu
<span class="nc bnc" id="L135" title="All 2 branches missed.">		for (int i = 0; i &lt; menuItems[0].length; i++) {</span>
<span class="nc bnc" id="L136" title="All 4 branches missed.">			if (i &gt;= 3 &amp;&amp; i &lt;= 5)</span>
<span class="nc" id="L137">				menus[0].addSeparator();</span>
<span class="nc bnc" id="L138" title="All 2 branches missed.">			if (i == 3)</span>
<span class="nc" id="L139">				menus[0].add(editMenu);</span>
			else {
<span class="nc" id="L141">				menus[0].add(menuItems[0][i]);</span>
<span class="nc" id="L142">				menuItems[0][i].addActionListener(new menuActionListener());</span>
				//HashTable
<span class="nc" id="L144">				menuActions.put(menuItems[0][i].getActionCommand(),</span>
						new Integer(hashTableIndex));
<span class="nc" id="L146">				hashTableIndex++;</span>
			}
		}
		// create edit Submenu
<span class="nc bnc" id="L150" title="All 2 branches missed.">		for (int i = 0; i &lt; editSubmenu.length; i++) {</span>
<span class="nc" id="L151">			editMenu.add(editSubmenu[i]);</span>
<span class="nc" id="L152">			editSubmenu[i].addActionListener(new menuActionListener());</span>
			//HashTable
<span class="nc" id="L154">			menuActions.put(editSubmenu[i].getActionCommand(), new Integer(</span>
					hashTableIndex));
<span class="nc" id="L156">			hashTableIndex++;</span>
		}

		//Disable Start Simulation button until allInputs[] is loaded (from wizard or file loading)
<span class="nc" id="L160">		menus[0].getItem(6).setEnabled(false);</span>
		//Disable edit option until allInputs[] is loaded (from wizard or file loading)
<span class="nc" id="L162">		menus[0].getItem(4).setEnabled(false);</span>

		//Tools menu
<span class="nc bnc" id="L165" title="All 2 branches missed.">		for (int i = 0; i &lt; menuItems[1].length; i++) {</span>
<span class="nc bnc" id="L166" title="All 2 branches missed.">			if (i == 0)</span>
<span class="nc" id="L167">				menus[1].add(saveResultsMenu);</span>
			else {
<span class="nc" id="L169">				menus[1].add(menuItems[1][i]);</span>
<span class="nc" id="L170">				menuItems[1][i].addActionListener(new menuActionListener());</span>
				//HashTable
<span class="nc" id="L172">				menuActions.put(menuItems[1][i].getActionCommand(),</span>
						new Integer(hashTableIndex));
<span class="nc" id="L174">				hashTableIndex++;</span>
			}
		}

		// create save results Submenu
<span class="nc bnc" id="L179" title="All 2 branches missed.">		for (int i = 0; i &lt; saveResultsSubmenu.length; i++) {</span>
<span class="nc" id="L180">			saveResultsMenu.add(saveResultsSubmenu[i]);</span>
<span class="nc" id="L181">			saveResultsSubmenu[i].addActionListener(new menuActionListener());</span>
			//HashTable
<span class="nc" id="L183">			menuActions.put(saveResultsSubmenu[i].getActionCommand(),</span>
					new Integer(hashTableIndex));
<span class="nc" id="L185">			hashTableIndex++;</span>
		}

		//Help menu
<span class="nc bnc" id="L189" title="All 2 branches missed.">		for (int i = 0; i &lt; menuItems[2].length; i++) {</span>
<span class="nc" id="L190">			menus[2].add(menuItems[2][i]);</span>
<span class="nc" id="L191">			menuItems[2][i].addActionListener(new menuActionListener());</span>
			//HashTable
<span class="nc" id="L193">			menuActions.put(menuItems[2][i].getActionCommand(), new Integer(</span>
					hashTableIndex));
<span class="nc" id="L195">			hashTableIndex++;</span>
		}

<span class="nc bnc" id="L198" title="All 2 branches missed.">		for (int i = 0; i &lt; menus.length; i++)</span>
<span class="nc" id="L199">			menuBar.add(menus[i]);</span>

<span class="nc" id="L201">		this.setJMenuBar(menuBar);</span>
<span class="nc" id="L202">		this.getContentPane().add(mainPanel, null);</span>
<span class="nc" id="L203">		this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span>
<span class="nc" id="L204">	}</span>

<span class="nc" id="L206">	class menuActionListener implements ActionListener {</span>
		public void actionPerformed(ActionEvent e) {
			GuiEvent ge;
			File chosenFile;
<span class="nc" id="L210">			switch (((Integer) menuActions.get(e.getActionCommand()))</span>
<span class="nc bnc" id="L211" title="All 15 branches missed.">					.intValue()) {</span>
			case 0: // Wizard Ended
<span class="nc" id="L213">				scenarioInputs = scenarioDesignWizard.packedInputs();</span>
<span class="nc" id="L214">				ge = new GuiEvent((Object) this, SimulationAgent.WIZARD_ENDED);</span>
<span class="nc bnc" id="L215" title="All 2 branches missed.">				for (int i = 0; i &lt; scenarioInputs.length; i++)</span>
<span class="nc" id="L216">					ge.addParameter(scenarioInputs[i]);</span>
<span class="nc" id="L217">				myAgent.postGuiEvent(ge);</span>
				//Enable start simulation option &amp; edit option
<span class="nc" id="L219">				menus[0].getItem(6).setEnabled(true);</span>
<span class="nc" id="L220">				menus[0].getItem(4).setEnabled(true);</span>
<span class="nc" id="L221">				break;</span>
			case 1: //New scenario
				// Start scenario design wizard
<span class="nc" id="L224">				scenarioDesignWizard = new ScenarioDesignWizard(</span>
<span class="nc" id="L225">						SuiteGUI.TOP_LAYER, mainPanel, availableFunctions,</span>
						pricingScenarios, this);
<span class="nc" id="L227">				break;</span>
			case 2: // Load Scenario
<span class="nc" id="L229">				chosenFile = loadFile(&quot;Scenario&quot;);</span>
<span class="nc" id="L230">				ge = new GuiEvent((Object) this, SimulationAgent.LOAD_SCENARIO);</span>
<span class="nc" id="L231">				ge.addParameter(chosenFile);</span>
<span class="nc" id="L232">				myAgent.postGuiEvent(ge);</span>
				//Enable start simulation button &amp; edit option
<span class="nc bnc" id="L234" title="All 2 branches missed.">				if (chosenFile != null) {</span>
<span class="nc" id="L235">					menus[0].getItem(6).setEnabled(true);</span>
<span class="nc" id="L236">					menus[0].getItem(4).setEnabled(true);</span>
				}
				break;
			case 3: // Save Scenario
<span class="nc" id="L240">				chosenFile = saveFile(&quot;Scenario&quot;);</span>
<span class="nc" id="L241">				ge = new GuiEvent((Object) this, SimulationAgent.SAVE_SCENARIO);</span>
<span class="nc" id="L242">				ge.addParameter(chosenFile);</span>
<span class="nc" id="L243">				myAgent.postGuiEvent(ge);</span>
<span class="nc" id="L244">				break;</span>
			case 4: //Start Simulation
<span class="nc" id="L246">				ge = new GuiEvent((Object) this,</span>
						SimulationAgent.START_SIMULATION_MENU);
<span class="nc" id="L248">				myAgent.postGuiEvent(ge);</span>
<span class="nc" id="L249">				break;</span>
			case 5: //Exit
<span class="nc" id="L251">				System.exit(0);</span>
<span class="nc" id="L252">				break;</span>
			case 6: // edit simulation parameters
<span class="nc" id="L254">				ge = new GuiEvent((Object) this,</span>
						SimulationAgent.EDIT_SIMULATION_PARAMETERS);
<span class="nc" id="L256">				myAgent.postGuiEvent(ge);</span>
<span class="nc" id="L257">				break;</span>
			case 7: // edit demand curve parameters
<span class="nc" id="L259">				ge = new GuiEvent((Object) this,</span>
						SimulationAgent.EDIT_DEMAND_CURVE_PARAMETERS);
<span class="nc" id="L261">				ge.addParameter(SuiteGUI.this.availableFunctions);</span>
<span class="nc" id="L262">				myAgent.postGuiEvent(ge);</span>
<span class="nc" id="L263">				break;</span>
			case 8: // edit met data file
<span class="nc" id="L265">				chosenFile = loadFile(&quot;Met Data File&quot;);</span>
<span class="nc" id="L266">				ge = new GuiEvent((Object) this,</span>
						SimulationAgent.EDIT_METDATA_FILE);
<span class="nc" id="L268">				ge.addParameter(chosenFile);</span>
<span class="nc" id="L269">				myAgent.postGuiEvent(ge);</span>
<span class="nc" id="L270">				break;</span>
			case 9: // edit pricing policy
<span class="nc" id="L272">				ge = new GuiEvent((Object) this,</span>
						SimulationAgent.EDIT_PRICING_POLICY);
<span class="nc" id="L274">				ge.addParameter(SuiteGUI.pricingScenarios);</span>
<span class="nc" id="L275">				myAgent.postGuiEvent(ge);</span>
<span class="nc" id="L276">				break;</span>
			case 10: //Launch RMA
				try {
<span class="nc" id="L279">					AgentController rma = DAWN.mainContainer</span>
<span class="nc" id="L280">							.createNewAgent(&quot;rma&quot;, &quot;jade.tools.rma.rma&quot;, null);</span>
<span class="nc" id="L281">					rma.start();</span>
<span class="nc" id="L282">				} catch (StaleProxyException spe) {</span>
<span class="nc" id="L283">					log.error(spe.getStackTrace());</span>
<span class="nc" id="L284">				} catch (ControllerException ce) {</span>
<span class="nc" id="L285">					log.error(ce.getStackTrace());</span>
<span class="nc" id="L286">				}</span>
<span class="nc" id="L287">				break;</span>
			case 11: //Save Results
<span class="nc" id="L289">				chosenFile = saveFile(&quot;Results&quot;);</span>
<span class="nc" id="L290">				ge = new GuiEvent((Object) this, SimulationAgent.SAVE_RESULTS);</span>
<span class="nc" id="L291">				ge.addParameter(chosenFile);</span>
<span class="nc" id="L292">				myAgent.postGuiEvent(ge);</span>
<span class="nc" id="L293">				break;</span>
			case 12: //Save Results
<span class="nc" id="L295">				chosenFile = saveDirectory();</span>
<span class="nc" id="L296">				ge = new GuiEvent((Object) this,</span>
						SimulationAgent.SAVE_CONSUMERS_RESULTS);
<span class="nc" id="L298">				ge.addParameter(chosenFile);</span>
<span class="nc" id="L299">				myAgent.postGuiEvent(ge);</span>
<span class="nc" id="L300">				break;</span>
			case 13: //About
<span class="nc" id="L302">				ge = new GuiEvent((Object) this,</span>
						SimulationAgent.ABOUT);
<span class="nc" id="L304">				myAgent.postGuiEvent(ge);</span>
<span class="nc" id="L305">				break;</span>
			default:
<span class="nc" id="L307">				log.info(e.getActionCommand());</span>
			}
<span class="nc" id="L309">		}</span>
	}

	private File loadFile(String title) {

<span class="nc" id="L314">		String msg = &quot;&quot;;</span>
		File chosenFile;


		// instantiate file chooser
<span class="nc" id="L319">		JFileChooser chooser = new JFileChooser(System.getProperty(&quot;user.dir&quot;));</span>

		// file chooser properties
<span class="nc" id="L322">		chooser.setControlButtonsAreShown(true);</span>
<span class="nc" id="L323">		chooser.setDialogType(JFileChooser.CUSTOM_DIALOG);</span>
<span class="nc" id="L324">		chooser.setAcceptAllFileFilterUsed(true);</span>
<span class="nc" id="L325">		chooser.setFileSelectionMode(JFileChooser.FILES_ONLY);</span>
<span class="nc" id="L326">		chooser.setMultiSelectionEnabled(false);</span>
<span class="nc" id="L327">		chooser.setSelectedFile(null);</span>
<span class="nc" id="L328">		chooser.setDialogTitle(&quot;Load &quot; + title);</span>
<span class="nc" id="L329">		double w = (mainPanel.getBounds().getWidth() / 2) - 40;</span>
<span class="nc" id="L330">		double h = (mainPanel.getBounds().getHeight() / 2) - 40;</span>
<span class="nc" id="L331">		chooser.setLocation((int) w, (int) h);</span>

<span class="nc" id="L333">		int returnValue = chooser.showDialog(mainPanel, &quot;Load &quot; + title);</span>
<span class="nc bnc" id="L334" title="All 2 branches missed.">		if (returnValue == JFileChooser.APPROVE_OPTION) {</span>
<span class="nc" id="L335">			chosenFile = chooser.getSelectedFile();</span>
<span class="nc bnc" id="L336" title="All 2 branches missed.">			if (chosenFile != null) {</span>
<span class="nc" id="L337">				JOptionPane.showMessageDialog(mainPanel,</span>
<span class="nc" id="L338">						&quot;Loading from this file: &quot; + chosenFile.getPath(),</span>
						&quot;Load &quot; + title, JOptionPane.INFORMATION_MESSAGE);
<span class="nc" id="L340">				return chosenFile;</span>
			}
<span class="nc bnc" id="L342" title="All 2 branches missed.">		} else if (returnValue == JFileChooser.CANCEL_OPTION) {</span>
<span class="nc" id="L343">			msg = &quot;User cancelled operation. No file was chosen.&quot;;</span>
<span class="nc bnc" id="L344" title="All 2 branches missed.">		} else if (returnValue == JFileChooser.ERROR_OPTION) {</span>
<span class="nc" id="L345">			msg = &quot;An error occured. No file was chosen.&quot;;</span>
		} else {
<span class="nc" id="L347">			msg = &quot;Unknown operation occured.&quot;;</span>
		}

<span class="nc" id="L350">		JOptionPane.showMessageDialog(mainPanel, msg, &quot;Load &quot; + title,</span>
				JOptionPane.INFORMATION_MESSAGE);
<span class="nc" id="L352">		return null;</span>

	}

	private File saveFile(String title) {

<span class="nc" id="L358">		String msg = &quot;&quot;;</span>
		File chosenFile;

		// instantiate file chooser
<span class="nc" id="L362">		JFileChooser chooser = new JFileChooser(System.getProperty(&quot;user.dir&quot;));</span>

		// file chooser properties
<span class="nc" id="L365">		chooser.setControlButtonsAreShown(true);</span>
<span class="nc" id="L366">		chooser.setDialogType(JFileChooser.SAVE_DIALOG);</span>
<span class="nc" id="L367">		chooser.setAcceptAllFileFilterUsed(true);</span>
<span class="nc" id="L368">		chooser.setFileSelectionMode(JFileChooser.FILES_ONLY);</span>
<span class="nc" id="L369">		chooser.setMultiSelectionEnabled(false);</span>
<span class="nc" id="L370">		chooser.setSelectedFile(null);</span>
<span class="nc" id="L371">		chooser.setDialogTitle(&quot;Save &quot; + title);</span>
<span class="nc" id="L372">		double w = (mainPanel.getBounds().getWidth() / 2) - 40;</span>
<span class="nc" id="L373">		double h = (mainPanel.getBounds().getHeight() / 2) - 40;</span>
<span class="nc" id="L374">		chooser.setLocation((int) w, (int) h);</span>

<span class="nc" id="L376">		int returnValue = chooser.showSaveDialog(mainPanel);</span>
<span class="nc bnc" id="L377" title="All 2 branches missed.">		if (returnValue == JFileChooser.APPROVE_OPTION) {</span>
<span class="nc" id="L378">			chosenFile = chooser.getSelectedFile();</span>
<span class="nc bnc" id="L379" title="All 2 branches missed.">			if (chosenFile != null) {</span>
<span class="nc" id="L380">				JOptionPane.showMessageDialog(mainPanel,</span>
<span class="nc" id="L381">						&quot;Saving in this file: &quot; + chosenFile.getPath(), &quot;Save &quot;</span>
								+ title, JOptionPane.INFORMATION_MESSAGE);
<span class="nc" id="L383">				return chosenFile;</span>
			}
<span class="nc bnc" id="L385" title="All 2 branches missed.">		} else if (returnValue == JFileChooser.CANCEL_OPTION) {</span>
<span class="nc" id="L386">			msg = &quot;User cancelled operation. No file was chosen.&quot;;</span>
<span class="nc bnc" id="L387" title="All 2 branches missed.">		} else if (returnValue == JFileChooser.ERROR_OPTION) {</span>
<span class="nc" id="L388">			msg = &quot;An error occured. No file was chosen.&quot;;</span>
		} else {
<span class="nc" id="L390">			msg = &quot;Unknown operation occured.&quot;;</span>
		}

<span class="nc" id="L393">		JOptionPane.showMessageDialog(mainPanel, msg, &quot;Save scenario&quot;,</span>
				JOptionPane.INFORMATION_MESSAGE);
<span class="nc" id="L395">		return null;</span>

	}// END of saveFile()

	private File saveDirectory() {

<span class="nc" id="L401">		String msg = &quot;&quot;;</span>
		File chosenFile;

		// instantiate file chooser
<span class="nc" id="L405">		JFileChooser chooser = new JFileChooser(System.getProperty(&quot;user.dir&quot;));</span>

		// file chooser properties
<span class="nc" id="L408">		chooser.setControlButtonsAreShown(true);</span>
<span class="nc" id="L409">		chooser.setDialogType(JFileChooser.SAVE_DIALOG);</span>
<span class="nc" id="L410">		chooser.setAcceptAllFileFilterUsed(true);</span>
<span class="nc" id="L411">		chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);</span>
<span class="nc" id="L412">		chooser.setMultiSelectionEnabled(false);</span>
<span class="nc" id="L413">		chooser.setSelectedFile(null);</span>
<span class="nc" id="L414">		chooser.setDialogTitle(&quot;Choose a directory to save consumers' results&quot;);</span>
<span class="nc" id="L415">		double w = (mainPanel.getBounds().getWidth() / 2) - 40;</span>
<span class="nc" id="L416">		double h = (mainPanel.getBounds().getHeight() / 2) - 40;</span>
<span class="nc" id="L417">		chooser.setLocation((int) w, (int) h);</span>

<span class="nc" id="L419">		int returnValue = chooser.showSaveDialog(mainPanel);</span>
<span class="nc bnc" id="L420" title="All 2 branches missed.">		if (returnValue == JFileChooser.APPROVE_OPTION) {</span>
<span class="nc" id="L421">			chosenFile = chooser.getSelectedFile();</span>
<span class="nc bnc" id="L422" title="All 2 branches missed.">			if (chosenFile != null) {</span>
<span class="nc" id="L423">				JOptionPane.showMessageDialog(mainPanel,</span>
						&quot;Consumers' results will be saved in : &quot;
<span class="nc" id="L425">								+ chosenFile.getPath(), &quot;Directory&quot;,</span>
						JOptionPane.INFORMATION_MESSAGE);
<span class="nc" id="L427">				return chosenFile;</span>
			}
<span class="nc bnc" id="L429" title="All 2 branches missed.">		} else if (returnValue == JFileChooser.CANCEL_OPTION) {</span>
<span class="nc" id="L430">			msg = &quot;User cancelled operation. No directory was chosen.&quot;;</span>
<span class="nc bnc" id="L431" title="All 2 branches missed.">		} else if (returnValue == JFileChooser.ERROR_OPTION) {</span>
<span class="nc" id="L432">			msg = &quot;An error occured. No directory was chosen.&quot;;</span>
		} else {
<span class="nc" id="L434">			msg = &quot;Unknown operation occured.&quot;;</span>
		}

<span class="nc" id="L437">		JOptionPane.showMessageDialog(mainPanel, msg,</span>
				&quot;Save consumers' results&quot;, JOptionPane.INFORMATION_MESSAGE);
<span class="nc" id="L439">		return null;</span>

	}// END of saveDirectory()

	public void addToMainPanel(JInternalFrame jif, Integer layer) {
<span class="nc" id="L444">		mainPanel.add(jif, layer);</span>
<span class="nc" id="L445">	}</span>

	public void errorMessage(String msg) {
<span class="nc" id="L448">		JOptionPane.showMessageDialog(mainPanel, msg, &quot;ERROR&quot;,</span>
				JOptionPane.ERROR_MESSAGE);
<span class="nc" id="L450">	}</span>

}// END SuiteGUI
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>