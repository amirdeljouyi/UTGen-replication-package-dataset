<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SimulationParametersFrame.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">10_water-simulator</a> &gt; <a href="index.source.html" class="el_package">simulator.SA.gui</a> &gt; <span class="el_source">SimulationParametersFrame.java</span></div><h1>SimulationParametersFrame.java</h1><pre class="source lang-java linenums">package simulator.SA.gui;

import jade.gui.GuiEvent;

import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JInternalFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingConstants;

import simulator.SA.SimulationAgent;



/**
 * @author Vartalas Panagiotis
 * @author Ioannis N. Athanasiadis
 * @version 1.9
 * @since 2003-2006
 */

public class SimulationParametersFrame extends JInternalFrame {

	private static final long serialVersionUID = 2004089817101629607L;


private SimulationAgent myAgent;


<span class="nc" id="L40">  private JPanel contentPane = (JPanel) this.getContentPane();</span>
<span class="nc" id="L41">      {  contentPane.setLayout(new BorderLayout());</span>
<span class="nc" id="L42">         this.setClosable(true);</span>
<span class="nc" id="L43">         this.setDefaultCloseOperation(JInternalFrame.HIDE_ON_CLOSE);</span>
<span class="nc" id="L44">         this.setResizable(false);</span>
<span class="nc" id="L45">         this.setSize(new Dimension(400, 350));</span>
<span class="nc" id="L46">         this.setTitle(&quot;Simulation Parameters&quot;);</span>
      }

      //*******************************************************
      // DATA PANEL

<span class="nc" id="L52">      private JPanel dataPanel = new JPanel(new GridLayout(0,1,5,5));</span>
<span class="nc" id="L53">      { contentPane.add(dataPanel,  BorderLayout.CENTER);}</span>

      //*******************************************************

<span class="nc" id="L57">      private JPanel panel1 = new JPanel(new FlowLayout(FlowLayout.CENTER,10,5));</span>
      {
<span class="nc" id="L59">        dataPanel.add(panel1,null);</span>
      }
<span class="nc" id="L61">            private JLabel label1 = new JLabel(&quot;Grid Dimension  :&quot;);</span>
            {
<span class="nc" id="L63">              label1.setFont(new java.awt.Font(&quot;Dialog&quot;, 1, 12));</span>
<span class="nc" id="L64">              label1.setBorder(BorderFactory.createEtchedBorder());</span>
<span class="nc" id="L65">              label1.setPreferredSize(new Dimension(150, 17));</span>
<span class="nc" id="L66">              label1.setHorizontalAlignment(SwingConstants.CENTER);</span>
<span class="nc" id="L67">              label1.setHorizontalTextPosition(SwingConstants.CENTER);</span>
<span class="nc" id="L68">              panel1.add(label1,null);</span>
            }
<span class="nc" id="L70">            private JTextField textField1 = new JTextField(10);</span>
            {
<span class="nc" id="L72">              textField1.setBorder(BorderFactory.createLoweredBevelBorder());</span>
<span class="nc" id="L73">              panel1.add(textField1,null);</span>
            }

<span class="nc" id="L76">      private JPanel panel2 = new JPanel(new FlowLayout(FlowLayout.CENTER,10,5));</span>
      {
<span class="nc" id="L78">        dataPanel.add(panel2,null);</span>
      }
<span class="nc" id="L80">            private JLabel label2 = new JLabel(&quot;Sight Limit  :&quot;);</span>
            {
<span class="nc" id="L82">              label2.setFont(new java.awt.Font(&quot;Dialog&quot;, 1, 12));</span>
<span class="nc" id="L83">              label2.setBorder(BorderFactory.createEtchedBorder());</span>
<span class="nc" id="L84">              label2.setPreferredSize(new Dimension(150, 17));</span>
<span class="nc" id="L85">              label2.setHorizontalAlignment(SwingConstants.CENTER);</span>
<span class="nc" id="L86">              label2.setHorizontalTextPosition(SwingConstants.CENTER);</span>
<span class="nc" id="L87">              panel2.add(label2,null);</span>
            }
<span class="nc" id="L89">            private JTextField textField2 = new JTextField(10);</span>
            {
<span class="nc" id="L91">              textField2.setBorder(BorderFactory.createLoweredBevelBorder());</span>
<span class="nc" id="L92">              panel2.add(textField2,null);</span>
            }

<span class="nc" id="L95">      private JPanel panel3 = new JPanel(new FlowLayout(FlowLayout.CENTER,10,5));</span>
      {
<span class="nc" id="L97">        dataPanel.add(panel3,null);</span>
      }
<span class="nc" id="L99">            private JLabel label3 = new JLabel(&quot;Consumers Population :&quot;);</span>
            {
<span class="nc" id="L101">              label3.setFont(new java.awt.Font(&quot;Dialog&quot;, 1, 12));</span>
<span class="nc" id="L102">              label3.setBorder(BorderFactory.createEtchedBorder());</span>
<span class="nc" id="L103">              label3.setPreferredSize(new Dimension(150, 17));</span>
<span class="nc" id="L104">              label3.setHorizontalAlignment(SwingConstants.CENTER);</span>
<span class="nc" id="L105">              label3.setHorizontalTextPosition(SwingConstants.CENTER);</span>
<span class="nc" id="L106">              panel3.add(label3,null);</span>
            }
<span class="nc" id="L108">            private JTextField textField3 = new JTextField(10);</span>
            {
<span class="nc" id="L110">              textField3.setBorder(BorderFactory.createLoweredBevelBorder());</span>
<span class="nc" id="L111">              panel3.add(textField3,null);</span>
            }

<span class="nc" id="L114">      private JPanel panel4 = new JPanel(new FlowLayout(FlowLayout.CENTER,10,5));</span>
      {
<span class="nc" id="L116">        dataPanel.add(panel4,null);</span>
      }
<span class="nc" id="L118">            private JLabel label4 = new JLabel(&quot;Duration :&quot;);</span>
            {
<span class="nc" id="L120">              label4.setFont(new java.awt.Font(&quot;Dialog&quot;, 1, 12));</span>
<span class="nc" id="L121">              label4.setBorder(BorderFactory.createEtchedBorder());</span>
<span class="nc" id="L122">              label4.setPreferredSize(new Dimension(80, 17));</span>
<span class="nc" id="L123">              label4.setHorizontalAlignment(SwingConstants.CENTER);</span>
<span class="nc" id="L124">              label4.setHorizontalTextPosition(SwingConstants.CENTER);</span>
<span class="nc" id="L125">              panel4.add(label4,null);</span>
            }
<span class="nc" id="L127">            private JTextField textField4 = new JTextField(5);</span>
            {
<span class="nc" id="L129">              textField4.setBorder(BorderFactory.createLoweredBevelBorder());</span>
<span class="nc" id="L130">              panel4.add(textField4,null);</span>
            }
<span class="nc" id="L132">            private JLabel label5 = new JLabel(&quot;year(s)&quot;);</span>
            {
<span class="nc" id="L134">              label5.setFont(new java.awt.Font(&quot;Dialog&quot;, 1, 12));</span>
<span class="nc" id="L135">              label5.setHorizontalAlignment(SwingConstants.CENTER);</span>
<span class="nc" id="L136">              label5.setHorizontalTextPosition(SwingConstants.CENTER);</span>
<span class="nc" id="L137">              panel4.add(label5,null);</span>
            }
<span class="nc" id="L139">            private JTextField textField5 = new JTextField(5);</span>
            {
<span class="nc" id="L141">              textField5.setBorder(BorderFactory.createLoweredBevelBorder());</span>
<span class="nc" id="L142">              textField5.setText(&quot;0&quot;);</span>
<span class="nc" id="L143">              panel4.add(textField5,null);</span>
            }
<span class="nc" id="L145">            private JLabel label6 = new JLabel(&quot;month(s)&quot;);</span>
            {
<span class="nc" id="L147">              label6.setFont(new java.awt.Font(&quot;Dialog&quot;, 1, 12));</span>
<span class="nc" id="L148">              label6.setHorizontalAlignment(SwingConstants.CENTER);</span>
<span class="nc" id="L149">              label6.setHorizontalTextPosition(SwingConstants.CENTER);</span>
<span class="nc" id="L150">              panel4.add(label6,null);</span>
            }


<span class="nc" id="L154">      private JPanel panel5 = new JPanel(new FlowLayout(FlowLayout.CENTER,10,5));</span>
      {
<span class="nc" id="L156">        dataPanel.add(panel5,null);</span>
      }
<span class="nc" id="L158">            private JLabel label7 = new JLabel(&quot;Time Step :&quot;);</span>
            {
<span class="nc" id="L160">              label7.setFont(new java.awt.Font(&quot;Dialog&quot;, 1, 12));</span>
<span class="nc" id="L161">              label7.setBorder(BorderFactory.createEtchedBorder());</span>
<span class="nc" id="L162">              label7.setPreferredSize(new Dimension(80, 17));</span>
<span class="nc" id="L163">              label7.setHorizontalAlignment(SwingConstants.CENTER);</span>
<span class="nc" id="L164">              label7.setHorizontalTextPosition(SwingConstants.CENTER);</span>
<span class="nc" id="L165">              panel5.add(label7,null);</span>
            }
<span class="nc" id="L167">            private JTextField textField6 = new JTextField(5);</span>
            {
<span class="nc" id="L169">              textField6.setBorder(BorderFactory.createLoweredBevelBorder());</span>
<span class="nc" id="L170">              panel5.add(textField6,null);</span>
            }
<span class="nc" id="L172">            private JLabel label8 = new JLabel(&quot;month(s)&quot;);</span>
            {
<span class="nc" id="L174">              label8.setFont(new java.awt.Font(&quot;Dialog&quot;, 1, 12));</span>
<span class="nc" id="L175">              label8.setHorizontalAlignment(SwingConstants.CENTER);</span>
<span class="nc" id="L176">              label8.setHorizontalTextPosition(SwingConstants.CENTER);</span>
<span class="nc" id="L177">              panel5.add(label8,null);</span>
            }

      //***************************END of Data Panel****************************



      //*******************************************************
      // NAVIGATION PANEL

<span class="nc" id="L187">      private JPanel navigationPanel = new JPanel(new FlowLayout(FlowLayout.CENTER,30,10));</span>
      {
<span class="nc" id="L189">        navigationPanel.setBorder(BorderFactory.createEtchedBorder());</span>
<span class="nc" id="L190">        navigationPanel.setPreferredSize(new Dimension(0,40));</span>
<span class="nc" id="L191">        contentPane.add(navigationPanel,  BorderLayout.SOUTH);</span>
      }

      //*******************************************************

<span class="nc" id="L196">      private JButton cancelButton = new JButton(&quot;     Cancel    &quot;);</span>
      {
<span class="nc" id="L198">        cancelButton.setBorder(BorderFactory.createRaisedBevelBorder());</span>
<span class="nc" id="L199">        navigationPanel.add(cancelButton,null);</span>
<span class="nc" id="L200">        cancelButton.addActionListener(new ActionListener(){</span>
              public void actionPerformed(ActionEvent ev){
<span class="nc" id="L202">                  try{SimulationParametersFrame.this.setClosed(true);}</span>
<span class="nc" id="L203">                  catch(java.beans.PropertyVetoException ex){}</span>
<span class="nc" id="L204">              }</span>
        });
      } // END cancelButton

      /*private JButton previousButton = new JButton(&quot;  &lt;&lt; Previous  &quot;);
      {
        previousButton.setBorder(BorderFactory.createRaisedBevelBorder());
        navigationPanel.add(previousButton);
        previousButton.setEnabled(false);
      } // END previousButton*/

<span class="nc" id="L215">      private JButton nextButton = new JButton(&quot;    OK    &quot;);</span>
      {
<span class="nc" id="L217">        nextButton.setBorder(BorderFactory.createRaisedBevelBorder());</span>
<span class="nc" id="L218">        navigationPanel.add(nextButton);</span>
<span class="nc" id="L219">        nextButton.addActionListener(new ActionListener(){</span>
            public void actionPerformed(ActionEvent ev){
<span class="nc bnc" id="L221" title="All 2 branches missed.">                if (checkConstraints()) {</span>
<span class="nc" id="L222">                    saveInputs();</span>
<span class="nc" id="L223">                    SimulationParametersFrame.this.setVisible(false);</span>
                }
<span class="nc" id="L225">            }</span>
        });
      } // END nextButton

      //***************************END of Navigation Panel**********************

      private boolean checkConstraints(){
<span class="nc" id="L232">          boolean t=false;</span>
<span class="nc" id="L233">          String warnings = &quot;&quot;;</span>


          try{
<span class="nc" id="L237">            Integer gridSize = new Integer(textField1.getText());</span>
<span class="nc" id="L238">            Integer sightLimit = new Integer(textField2.getText());</span>
<span class="nc" id="L239">            Integer population = new Integer(textField3.getText());</span>
<span class="nc" id="L240">            Integer durYears = new Integer(textField4.getText());</span>
<span class="nc" id="L241">            Integer durMonths = new Integer(textField5.getText());</span>
<span class="nc" id="L242">            Integer step = new Integer(textField6.getText());</span>
            // Errors
<span class="nc bnc" id="L244" title="All 2 branches missed.">            if (population.intValue() &gt; (gridSize.intValue()*gridSize.intValue())){</span>
<span class="nc" id="L245">              JOptionPane.showMessageDialog(this,&quot;Grid is too small for this population !!!&quot;,&quot;Error&quot;,</span>
                                                                                JOptionPane.ERROR_MESSAGE);
<span class="nc" id="L247">              t=false;</span>
            }
<span class="nc bnc" id="L249" title="All 2 branches missed.">            else if (step.intValue() == 0) {</span>
<span class="nc" id="L250">                    JOptionPane.showMessageDialog(this,&quot;Step time can't be zero !!!&quot;,&quot;Error&quot;,</span>
                                                                                JOptionPane.ERROR_MESSAGE);
<span class="nc" id="L252">                    t=false;</span>
                 }
                 else{    // No fatal errors
<span class="nc" id="L255">                          t = true;</span>

                          // WARNINGS
<span class="nc bnc" id="L258" title="All 2 branches missed.">                          if ( sightLimit.intValue() &gt; gridSize.intValue()){</span>
<span class="nc" id="L259">                            warnings = &quot;Sight Limit is larger than Grid Size !!!&quot;;</span>
<span class="nc" id="L260">                            textField2.setText(gridSize.toString());</span>
                          }
<span class="nc bnc" id="L262" title="All 2 branches missed.">                          if ( population.intValue() == 0 )</span>
<span class="nc" id="L263">                            warnings += &quot;\nConsumers population is zero !!!&quot;;</span>
<span class="nc bnc" id="L264" title="All 4 branches missed.">                          if ( durYears.intValue()==0 &amp;&amp; durMonths.intValue()==0)</span>
<span class="nc" id="L265">                            warnings += &quot;\nDuration is zero !!!&quot;;</span>

<span class="nc bnc" id="L267" title="All 2 branches missed.">                          if (!warnings.equals(&quot;&quot;))</span>
<span class="nc bnc" id="L268" title="All 2 branches missed.">                            t=(JOptionPane.showConfirmDialog(this,warnings + &quot;\nContinue anyway?&quot;,&quot;Warning&quot;,JOptionPane.YES_NO_OPTION)==JOptionPane.YES_OPTION)</span>
                                  ?true:false;
                      }

          }
<span class="nc" id="L273">          catch (NumberFormatException nfe){</span>
<span class="nc" id="L274">            JOptionPane.showMessageDialog(this,&quot;Fill in ALL fields with INTEGERs !!!&quot;,&quot;Error&quot;,</span>
                                                                               JOptionPane.ERROR_MESSAGE);
<span class="nc" id="L276">            t=false;</span>
<span class="nc" id="L277">          }</span>

<span class="nc" id="L279">          return t;</span>
      }


      private void saveInputs(){
<span class="nc" id="L284">        GuiEvent ge = new GuiEvent((Object) this, SimulationAgent.SIMULATION_PARAMETERS_INPUT);</span>

<span class="nc" id="L286">        ge.addParameter(new Integer(textField3.getText()));</span>
<span class="nc" id="L287">        ge.addParameter(new Integer(textField1.getText()));</span>
<span class="nc" id="L288">        ge.addParameter(new Integer(textField2.getText()));</span>
<span class="nc" id="L289">        ge.addParameter(new Integer( ( (Integer.parseInt(textField4.getText())*12) +</span>
<span class="nc" id="L290">                                                                      Integer.parseInt(textField5.getText()) )</span>
<span class="nc" id="L291">                                              / Integer.parseInt(textField6.getText())</span>
                                              ));
<span class="nc" id="L293">        ge.addParameter(new Integer(Integer.parseInt(textField6.getText())));</span>
<span class="nc" id="L294">        myAgent.postGuiEvent(ge);</span>
<span class="nc" id="L295">      }</span>

      public SimulationParametersFrame(SimulationAgent a, int population,int gridDimension,int sightLimit,
<span class="nc" id="L298">                                                                          int duration,int simulationStep){</span>

<span class="nc" id="L300">         this.myAgent = a;</span>
<span class="nc" id="L301">         this.textField1.setText(Integer.toString(gridDimension));</span>
<span class="nc" id="L302">         this.textField2.setText(Integer.toString(sightLimit));</span>
<span class="nc" id="L303">         this.textField3.setText(Integer.toString(population));</span>
<span class="nc" id="L304">         int totalMonths = (duration * simulationStep);</span>
<span class="nc" id="L305">         int years = totalMonths / 12;</span>
<span class="nc" id="L306">         int months = totalMonths % 12;</span>
<span class="nc" id="L307">         this.textField4.setText(Integer.toString(years));</span>
<span class="nc" id="L308">         this.textField5.setText(Integer.toString(months));</span>
<span class="nc" id="L309">         this.textField6.setText(Integer.toString(simulationStep));</span>

<span class="nc" id="L311">      }</span>

}// END of Step1Frame

</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>