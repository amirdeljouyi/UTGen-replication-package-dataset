<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ParameterAttributes.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">10_water-simulator</a> &gt; <a href="index.source.html" class="el_package">simulator.util</a> &gt; <span class="el_source">ParameterAttributes.java</span></div><h1>ParameterAttributes.java</h1><pre class="source lang-java linenums">package simulator.util;

import java.io.Serializable;

import org.apache.log4j.Logger;

/**
 * A class representing a Parameter in a demand curve function of a Consumer Agent.
 * The properties of such a parameter are : 
 * name, 
 * elasticity, 
 * a boolean indicating if parameter's value  will be the logarithm or not of the function, 
 * a Function for calculating the parameter's value,
 * a Function for calculating the social weight for this parameter, 
 * a boolean indicating if this parameter is social
 * 
 * @author Vartalas Panagiotis
 * @author Ioannis N. Athanasiadis
 * @version 1.9
 * @since 2003-2006
  */


<span class="nc" id="L24">public class ParameterAttributes implements Serializable{</span>


	private static final long serialVersionUID = 6885432319261152672L;
<span class="nc" id="L28">	private Logger log = Logger.getLogger(ParameterAttributes.class);</span>
//Properties
  private String name;
  private Float elasticity;
  private Boolean ln;
  private Function demandCurveFunction;
  private Function socialFunction;
<span class="nc" id="L35">  private Boolean social= Boolean.FALSE;</span>
<span class="nc" id="L36">  private Float value = new Float(0);</span>

  /**
   * Set parameter name
   * @param name
   */
<span class="nc" id="L42">  public void setName(String name) { this.name = name; }</span>
  /**
   *
   * @return
   */
<span class="nc" id="L47">  public String getName() { return name; }</span>

  /**
   * Set elasticity
   * @param elasticity
   */
<span class="nc" id="L53">  public void setElasticity(float elasticity) { this.elasticity = new Float(elasticity); }</span>
  /**
   *
   * @return
   */
<span class="nc" id="L58">  public float getElasticity() { return elasticity.floatValue(); }</span>

  /**
   * Set true if the value of the parameter is the logarithm of parameter's function
   * @param ln
   */
<span class="nc" id="L64">  public void setLn(boolean ln) { this.ln = new Boolean(ln); }</span>
  /**
   *
   * @return
   */
<span class="nc" id="L69">  public boolean getLn() { return ln.booleanValue(); }</span>

  /**
   * Set the demand curve function for this parameter. The Demand Curve Function gets the stepId
   * as input if the parameter isn't social, otherwise gets the sum of all weights received from
   * its neighbours. It returns parameter's value.
   * @param dCF One of the availabe functions
   */
<span class="nc" id="L77">  public void setDemandCurveFunction(Function dCF) { demandCurveFunction = dCF; }</span>
  /**
   * Set the demand curve function for this parameter
   * @return
   */
<span class="nc" id="L82">  public Function getDemandCurveFunction() { return demandCurveFunction; }</span>

  /**
   * Set the social function for this parameter. The Social Curve Function gets the stepId
   * as input and returns a value (the weight) that the consumer agent will send in socialization
   * stage of simulation in the specified step.
   * @param sF One of the available functions
   */
<span class="nc" id="L90">  public void setSocialFunction(Function sF) { socialFunction = sF; }</span>
  /**
   *
   * @return
   */
<span class="nc" id="L95">  public Function getSocialFunction() { return socialFunction; }</span>

  /**
   * Set this parameter to be social
   */
<span class="nc" id="L100">  public void setSocial(boolean b){ this.social = Boolean.valueOf(b); }</span>
  /**
   *
   * @return
   */
<span class="nc" id="L105">  public boolean isSocial() { return social.booleanValue();}</span>


  /**
   * Calculates parameter's value for the Demand Curve as : elasticity * [ ln ] ( demandCurveFunction(step) )
   * @param step The step for which to calculate parameters value
   * @return Parameter's value that will be summed for calculating total consumer's consumption
   */
  public float valueFor(int step){
<span class="nc" id="L114">	  return valueFor((float)step);</span>
  }

  /**
   * Overrides the previous method if the input is a float number. Mostly used when the parameter is
   * social and the input value is the sum of weights.
   * Calculates parameter's value for the Demand Curve as :
   * elasticity * [ ln ] (demandCurveFunction(weights) )
   * @param x The step for which to calculate parameters value
   * @return Parameter's value that will be summed for calculating total consumer's consumption
   */
  public float valueFor(float x){

<span class="nc" id="L127">      float temp = demandCurveFunction.valueFor(x);</span>

<span class="nc bnc" id="L129" title="All 2 branches missed.">      if (temp &gt;0){</span>

<span class="nc bnc" id="L131" title="All 2 branches missed.">            if (ln.booleanValue()) {</span>
<span class="nc" id="L132">              this.value = new Float(elasticity.floatValue()* ((float)Math.log(temp)));</span>
            }
            else {
<span class="nc" id="L135">              this.value = new Float(elasticity.floatValue() * temp);</span>
            }
      }
      else{
<span class="nc" id="L139">    	  log.error(&quot;FATAL ERROR: Parameter was zero&quot;);</span>
      }
<span class="nc" id="L141">      return value.floatValue();</span>
  }
  public String toString(){
	  
<span class="nc" id="L145">	return &quot;Parameter&quot; + name + &quot; type: &quot; +  demandCurveFunction.getFunctionName() + </span>
	&quot;(elasticity: &quot; + elasticity +&quot; log: &quot; + ln + &quot; soc: &quot; + social ;
	  
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>