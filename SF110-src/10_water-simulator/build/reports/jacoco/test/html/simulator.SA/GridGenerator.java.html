<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>GridGenerator.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">10_water-simulator</a> &gt; <a href="index.source.html" class="el_package">simulator.SA</a> &gt; <span class="el_source">GridGenerator.java</span></div><h1>GridGenerator.java</h1><pre class="source lang-java linenums">package simulator.SA;


import java.util.Random;
import java.util.Vector;

import simulator.util.ConsumerAttributes;

/**
 * @author Vartalas Panagiotis
 * @author Ioannis N. Athanasiadis
 * @version 1.9
 * @since 2003-2006
 */

public class GridGenerator {

  private int population;          // agents' population
  private int NxN;          // grid size (one dimension)
<span class="nc" id="L20">  private Vector consumers = new Vector();  // all agents' attributes</span>

<span class="nc" id="L22">  GridGenerator(int gridSize, int population) {</span>

        // Initialize
<span class="nc" id="L25">        this.population = population;</span>
<span class="nc" id="L26">        NxN = gridSize+1;</span>
<span class="nc" id="L27">        consumers.ensureCapacity(population);</span>

<span class="nc" id="L29">        positionAgentsOnGrid();</span>
<span class="nc" id="L30">  }</span>


  /**
   * Get random positions on a grid and name agents after these
   * eg consumer(2,3)
   */

  @SuppressWarnings(&quot;unchecked&quot;)
private void positionAgentsOnGrid(){

        // help variables
<span class="nc" id="L42">        boolean done = false;</span>
        int x,y;
<span class="nc" id="L44">        String agentName = &quot;consumer_&quot;;</span>

<span class="nc" id="L46">        Random gen = new Random();  // number Generator</span>

<span class="nc bnc" id="L48" title="All 2 branches missed.">        while (!done){</span>
<span class="nc bnc" id="L49" title="All 2 branches missed.">            if ( ( ( x = gen.nextInt(NxN) ) != 0) &amp;&amp;</span>
<span class="nc bnc" id="L50" title="All 2 branches missed.">                 ( ( y = gen.nextInt(NxN) ) != 0) ) {</span>

<span class="nc" id="L52">                agentName += x + &quot;,&quot; + y;</span>
<span class="nc" id="L53">                ConsumerAttributes a = new ConsumerAttributes(agentName,x,y);</span>
<span class="nc bnc" id="L54" title="All 2 branches missed.">                if (!checkList(a)){</span>
<span class="nc" id="L55">                      consumers.addElement(a);</span>
<span class="nc bnc" id="L56" title="All 2 branches missed.">                      if (consumers.size() == population) { done = true;}</span>
                }
<span class="nc" id="L58">                agentName = &quot;consumer_&quot;;</span>
<span class="nc" id="L59">            }</span>
        }
<span class="nc" id="L61">  }</span>

  /**
   * CheckList : check if there is an agent in this position on grid
   * @param checkedAgent : the agent whose position is checked
   * @return TRUE if there is an agent in this position
   *         FALSE if the agent can be putted in this position
   */

  private boolean checkList(ConsumerAttributes checkedAgent){

<span class="nc" id="L72">        String n = checkedAgent.getName();</span>

<span class="nc bnc" id="L74" title="All 2 branches missed.">        for (int i=0; i&lt;consumers.size(); i++){</span>
<span class="nc bnc" id="L75" title="All 2 branches missed.">          if (((ConsumerAttributes)consumers.get(i)).getName().equals(n) ){</span>
<span class="nc" id="L76">                  return true;</span>
          }
        }
<span class="nc" id="L79">        return false;</span>
  }


  /***************************************
   * getConsumers
   * @return : a Vector with all created Consumers
   */

<span class="nc" id="L88">  Vector getConsumers() { return consumers; }</span>


  /****************************************
   *
   * @param a
   * @param sightLimit
   * @return
   */

  @SuppressWarnings(&quot;unchecked&quot;) 
  Vector getNeighbours(ConsumerAttributes a, int sightLimit){

        int x0,y0;
        int x,y;
<span class="nc" id="L103">        Vector myNeighbours = new Vector();</span>

<span class="nc" id="L105">        x0 = a.getX();</span>
<span class="nc" id="L106">        y0 = a.getY();</span>

<span class="nc bnc" id="L108" title="All 2 branches missed.">        for (int j=0; j &lt;consumers.size(); j++){</span>
<span class="nc bnc" id="L109" title="All 2 branches missed.">            if (! (a.getName().equals(((ConsumerAttributes)consumers.elementAt(j)).getName()))){</span>
<span class="nc" id="L110">                x = ((ConsumerAttributes)consumers.elementAt(j)).getX();</span>
<span class="nc" id="L111">                y = ((ConsumerAttributes)consumers.elementAt(j)).getY();</span>
<span class="nc bnc" id="L112" title="All 4 branches missed.">                if ( (Math.abs(x0-x) &lt;= sightLimit) &amp;&amp; (Math.abs(y0-y) &lt;= sightLimit) ){</span>
<span class="nc" id="L113">                    myNeighbours.addElement((ConsumerAttributes)consumers.elementAt(j));</span>
                }
            }
        }

<span class="nc" id="L118">        return myNeighbours;</span>
  }

}// END of class
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>