<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>UpdateGroupPanel.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">73_fim1</a> &gt; <a href="index.source.html" class="el_package">osa.ora.server.admin.ui</a> &gt; <span class="el_source">UpdateGroupPanel.java</span></div><h1>UpdateGroupPanel.java</h1><pre class="source lang-java linenums">/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * UpdateGroupPanel.java
 *
 * Created on Nov 19, 2009, 12:08:31 AM
 */
package osa.ora.server.admin.ui;

import java.rmi.RemoteException;
import java.util.Vector;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.DefaultComboBoxModel;
import javax.swing.JOptionPane;
import osa.ora.server.admin.AdminApp;
import osa.ora.server.beans.Group;

/**
 *
 * @author ooransa
 */
public class UpdateGroupPanel extends javax.swing.JPanel {

    AdminApp adminApp;
    ControlPanel controlPanel;

    /** Creates new form UpdateGroupPanel */
<span class="nc" id="L32">    public UpdateGroupPanel(AdminApp adminApp, ControlPanel controlPanel) {</span>
<span class="nc" id="L33">        this.adminApp = adminApp;</span>
<span class="nc" id="L34">        this.controlPanel = controlPanel;</span>
<span class="nc" id="L35">        initComponents();</span>
<span class="nc" id="L36">    }</span>

    public void updateModel() {
<span class="nc" id="L39">        jComboBox1.setModel(new javax.swing.DefaultComboBoxModel(adminApp.getGroups()));</span>
<span class="nc bnc" id="L40" title="All 4 branches missed.">        if(adminApp.getGroups()!=null &amp;&amp; adminApp.getGroups().size()&gt;0){</span>
<span class="nc" id="L41">            jTextField1.setText(adminApp.getGroups().get(0).getName());</span>
        }
<span class="nc" id="L43">    }</span>

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot;Generated Code&quot;&gt;//GEN-BEGIN:initComponents
    private void initComponents() {

<span class="nc" id="L54">        jLabel1 = new javax.swing.JLabel();</span>
<span class="nc" id="L55">        jTextField1 = new javax.swing.JTextField();</span>
<span class="nc" id="L56">        jLabel2 = new javax.swing.JLabel();</span>
<span class="nc" id="L57">        jComboBox1 = new javax.swing.JComboBox();</span>
<span class="nc" id="L58">        jButton1 = new javax.swing.JButton();</span>
<span class="nc" id="L59">        jButton2 = new javax.swing.JButton();</span>
<span class="nc" id="L60">        jButton3 = new javax.swing.JButton();</span>

<span class="nc" id="L62">        setLayout(null);</span>

<span class="nc" id="L64">        jLabel1.setText(&quot;Select Group:&quot;);</span>
<span class="nc" id="L65">        add(jLabel1);</span>
<span class="nc" id="L66">        jLabel1.setBounds(20, 20, 130, 14);</span>
<span class="nc" id="L67">        add(jTextField1);</span>
<span class="nc" id="L68">        jTextField1.setBounds(20, 90, 190, 20);</span>

<span class="nc" id="L70">        jLabel2.setText(&quot;Group Name:&quot;);</span>
<span class="nc" id="L71">        add(jLabel2);</span>
<span class="nc" id="L72">        jLabel2.setBounds(20, 70, 100, 14);</span>

<span class="nc" id="L74">        jComboBox1.addItemListener(new java.awt.event.ItemListener() {</span>
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
<span class="nc" id="L76">                jComboBox1ItemStateChanged(evt);</span>
<span class="nc" id="L77">            }</span>
        });
<span class="nc" id="L79">        add(jComboBox1);</span>
<span class="nc" id="L80">        jComboBox1.setBounds(20, 40, 190, 20);</span>

<span class="nc" id="L82">        jButton1.setIcon(new javax.swing.ImageIcon(getClass().getResource(&quot;/images/close.jpg&quot;))); // NOI18N</span>
<span class="nc" id="L83">        jButton1.setText(&quot;Cancel&quot;);</span>
<span class="nc" id="L84">        jButton1.addActionListener(new java.awt.event.ActionListener() {</span>
            public void actionPerformed(java.awt.event.ActionEvent evt) {
<span class="nc" id="L86">                jButton1ActionPerformed(evt);</span>
<span class="nc" id="L87">            }</span>
        });
<span class="nc" id="L89">        add(jButton1);</span>
<span class="nc" id="L90">        jButton1.setBounds(60, 170, 110, 30);</span>

<span class="nc" id="L92">        jButton2.setIcon(new javax.swing.ImageIcon(getClass().getResource(&quot;/images/copy.png&quot;))); // NOI18N</span>
<span class="nc" id="L93">        jButton2.setText(&quot;Update&quot;);</span>
<span class="nc" id="L94">        jButton2.addActionListener(new java.awt.event.ActionListener() {</span>
            public void actionPerformed(java.awt.event.ActionEvent evt) {
<span class="nc" id="L96">                jButton2ActionPerformed(evt);</span>
<span class="nc" id="L97">            }</span>
        });
<span class="nc" id="L99">        add(jButton2);</span>
<span class="nc" id="L100">        jButton2.setBounds(120, 130, 100, 30);</span>

<span class="nc" id="L102">        jButton3.setIcon(new javax.swing.ImageIcon(getClass().getResource(&quot;/images/trash.png&quot;))); // NOI18N</span>
<span class="nc" id="L103">        jButton3.setText(&quot;Delete&quot;);</span>
<span class="nc" id="L104">        jButton3.addActionListener(new java.awt.event.ActionListener() {</span>
            public void actionPerformed(java.awt.event.ActionEvent evt) {
<span class="nc" id="L106">                jButton3ActionPerformed(evt);</span>
<span class="nc" id="L107">            }</span>
        });
<span class="nc" id="L109">        add(jButton3);</span>
<span class="nc" id="L110">        jButton3.setBounds(10, 130, 100, 30);</span>
<span class="nc" id="L111">    }// &lt;/editor-fold&gt;//GEN-END:initComponents</span>

    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton2ActionPerformed
<span class="nc" id="L114">        Group group=(Group)jComboBox1.getSelectedItem();</span>
<span class="nc" id="L115">        int index=jComboBox1.getSelectedIndex();</span>
<span class="nc bnc" id="L116" title="All 2 branches missed.">        if (group == null) {</span>
<span class="nc" id="L117">            JOptionPane.showMessageDialog(this, &quot;Can't identify selected Group&quot;, &quot;Error&quot;, JOptionPane.ERROR_MESSAGE, adminApp.getErrorIcon());</span>
<span class="nc" id="L118">            return;</span>
        }
<span class="nc bnc" id="L120" title="All 2 branches missed.">        if (group.getName().equals(jTextField1.getText())) {</span>
<span class="nc" id="L121">            JOptionPane.showMessageDialog(this, &quot;No thing change to update this group!&quot;, &quot;Error&quot;, JOptionPane.ERROR_MESSAGE, adminApp.getErrorIcon());</span>
<span class="nc" id="L122">            return;</span>
        }
<span class="nc bnc" id="L124" title="All 4 branches missed.">        if (jTextField1.getText()==null || jTextField1.getText().equals(&quot;&quot;)) {</span>
<span class="nc" id="L125">            JOptionPane.showMessageDialog(this, &quot;Please specify valid name for the group!&quot;, &quot;Error&quot;, JOptionPane.ERROR_MESSAGE, adminApp.getErrorIcon());</span>
<span class="nc" id="L126">            return;</span>
        }
<span class="nc" id="L128">        boolean found = false;</span>
<span class="nc bnc" id="L129" title="All 2 branches missed.">        for (int i = 0; i &lt; adminApp.getGroups().size(); i++) {</span>
<span class="nc bnc" id="L130" title="All 2 branches missed.">            if (adminApp.getGroups().get(i).getName().equalsIgnoreCase(jTextField1.getText())) {</span>
<span class="nc" id="L131">                found = true;</span>
<span class="nc" id="L132">                break;</span>
            }
        }
<span class="nc bnc" id="L135" title="All 2 branches missed.">        if (found) {</span>
<span class="nc" id="L136">            JOptionPane.showMessageDialog(this, &quot;Group With Same Name Already Exist!&quot;, &quot;Error&quot;, JOptionPane.ERROR_MESSAGE, adminApp.getErrorIcon());</span>
<span class="nc" id="L137">            return;</span>
        }        
        try {
<span class="nc" id="L140">            group.setName(jTextField1.getText());</span>
<span class="nc" id="L141">            group = adminApp.updateGroup(group);</span>
<span class="nc bnc" id="L142" title="All 2 branches missed.">            if(group!=null){</span>
<span class="nc" id="L143">                adminApp.getGroups().get(index).setName(jTextField1.getText());</span>
<span class="nc" id="L144">                jComboBox1.validate();</span>
<span class="nc" id="L145">                JOptionPane.showMessageDialog(this,&quot;Group Updated Successfully!&quot;);</span>
<span class="nc" id="L146">                jTextField1.setText(&quot;&quot;);</span>
            }else{
<span class="nc" id="L148">                JOptionPane.showMessageDialog(this, &quot;Server Error!&quot;, &quot;Error&quot;, JOptionPane.ERROR_MESSAGE, adminApp.getErrorIcon());</span>
            }
<span class="nc" id="L150">        } catch (Exception ex) {</span>
<span class="nc" id="L151">            System.out.println(&quot;Error &quot; + ex);</span>
<span class="nc" id="L152">            JOptionPane.showMessageDialog(this, &quot;Error Happen &quot; + ex.getMessage(), &quot;Error&quot;, JOptionPane.ERROR_MESSAGE, adminApp.getErrorIcon());</span>
<span class="nc" id="L153">        }</span>
<span class="nc" id="L154">    }//GEN-LAST:event_jButton2ActionPerformed</span>

    private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton3ActionPerformed
<span class="nc" id="L157">        Group group=(Group)jComboBox1.getSelectedItem();</span>
<span class="nc" id="L158">        int index=jComboBox1.getSelectedIndex();</span>
<span class="nc bnc" id="L159" title="All 2 branches missed.">        if (group == null) {</span>
<span class="nc" id="L160">            JOptionPane.showMessageDialog(this, &quot;Can't identify selected Group&quot;, &quot;Error&quot;, JOptionPane.ERROR_MESSAGE, adminApp.getErrorIcon());</span>
<span class="nc" id="L161">            return;</span>
        }
<span class="nc bnc" id="L163" title="All 2 branches missed.">        if(group.getUsers().size()&gt;0){</span>
<span class="nc" id="L164">            JOptionPane.showMessageDialog(this, &quot;Group already has users, please delete them 1st!&quot;, &quot;Error&quot;, JOptionPane.ERROR_MESSAGE, adminApp.getErrorIcon());</span>
<span class="nc" id="L165">            return;</span>
        }
        try {
<span class="nc" id="L168">            group = adminApp.delGroup(group);</span>
<span class="nc bnc" id="L169" title="All 2 branches missed.">            if(group!=null){</span>
<span class="nc" id="L170">                adminApp.getGroups().remove(index);</span>
<span class="nc bnc" id="L171" title="All 2 branches missed.">                if(jComboBox1.getModel().getSize()&gt;0) {</span>
<span class="nc" id="L172">                    jComboBox1.setSelectedIndex(0);</span>
                }else{
<span class="nc" id="L174">                    jComboBox1.setModel(new DefaultComboBoxModel(new Vector(0)));</span>
                }
<span class="nc" id="L176">                jComboBox1.validate();</span>
<span class="nc" id="L177">                jTextField1.setText(&quot;&quot;);</span>
<span class="nc" id="L178">                JOptionPane.showMessageDialog(this,&quot;Group Deleted Successfully!&quot;);</span>
            }else{
<span class="nc" id="L180">                JOptionPane.showMessageDialog(this, &quot;Server Error!&quot;, &quot;Error&quot;, JOptionPane.ERROR_MESSAGE, adminApp.getErrorIcon());</span>
            }
<span class="nc" id="L182">        } catch (Exception ex) {</span>
<span class="nc" id="L183">            System.out.println(&quot;Error &quot; + ex);</span>
<span class="nc" id="L184">            JOptionPane.showMessageDialog(this, &quot;Error Happen &quot; + ex.getMessage(), &quot;Error&quot;, JOptionPane.ERROR_MESSAGE, adminApp.getErrorIcon());</span>
<span class="nc" id="L185">        }</span>
<span class="nc" id="L186">    }//GEN-LAST:event_jButton3ActionPerformed</span>

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
<span class="nc" id="L189">        controlPanel.getParentDialog().setVisible(false);</span>
<span class="nc" id="L190">        jTextField1.setText(&quot;&quot;);</span>
<span class="nc" id="L191">    }//GEN-LAST:event_jButton1ActionPerformed</span>

    private void jComboBox1ItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_jComboBox1ItemStateChanged
<span class="nc" id="L194">        Group group=(Group)jComboBox1.getSelectedItem();</span>
<span class="nc" id="L195">        jTextField1.setText(group.getName());</span>
<span class="nc" id="L196">    }//GEN-LAST:event_jComboBox1ItemStateChanged</span>

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JButton jButton3;
    private javax.swing.JComboBox jComboBox1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JTextField jTextField1;
    // End of variables declaration//GEN-END:variables
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>