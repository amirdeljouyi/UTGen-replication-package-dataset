<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>JFontChooser.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">73_fim1</a> &gt; <a href="index.source.html" class="el_package">osa.ora.server.client.ui.utils</a> &gt; <span class="el_source">JFontChooser.java</span></div><h1>JFontChooser.java</h1><pre class="source lang-java linenums">package osa.ora.server.client.ui.utils;

import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.Container;
import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.GraphicsEnvironment;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.awt.Window;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.ComponentAdapter;
import java.awt.event.ComponentEvent;
import java.awt.event.KeyEvent;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.io.Serializable;

import javax.swing.AbstractAction;
import javax.swing.Action;
import javax.swing.ActionMap;
import javax.swing.InputMap;
import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JComponent;
import javax.swing.JDialog;
import javax.swing.JLabel;
import javax.swing.JList;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.KeyStroke;
import javax.swing.ListSelectionModel;
import javax.swing.UIManager;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;
import javax.swing.event.EventListenerList;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;

/**
 * &lt;code&gt;JFontChooser&lt;/code&gt; provides a pane of controls designed to allow
 * a user to manipulate and select a font.
 *
 * This class provides three levels of API:
 * &lt;ol&gt;
 * &lt;li&gt;A static convenience method which shows a modal font-chooser
 * dialog and returns the font selected by the user.
 * &lt;li&gt;A static convenience method for creating a font-chooser dialog
 * where &lt;code&gt;ActionListeners&lt;/code&gt; can be specified to be invoked when
 * the user presses one of the dialog buttons.
 * &lt;li&gt;The ability to create instances of &lt;code&gt;JFontChooser&lt;/code&gt; panes
 * directly (within any container). &lt;code&gt;PropertyChange&lt;/code&gt; listeners
 * can be added to detect when the current &quot;font&quot; property changes.
 * &lt;/ol&gt;
 * &lt;p&gt;
 *
 * @author Adrian BER
 */
public class JFontChooser extends JComponent {

    /** The list of possible font sizes. */
<span class="fc" id="L66">    private static final Integer[] SIZES =</span>
<span class="fc" id="L67">            {8, 9, 10, 11, 12, 13, 14, 16, 18, 20, 24, 26, 28, 32, 36, 40, 48, 56, 64, 72};</span>

    /** The list of possible fonts. */
<span class="fc" id="L70">    private static final String[] FONTS = GraphicsEnvironment.getLocalGraphicsEnvironment()</span>
<span class="fc" id="L71">            .getAvailableFontFamilyNames();</span>


    private FontSelectionModel selectionModel;

    private JList fontList;

    private JList sizeList;

    private JCheckBox boldCheckBox;

    private JCheckBox italicCheckBox;

    private JLabel previewLabel;

    /** The preview text, if null the font name will be the preview text. */
    private String previewText;

    /** Listener used to update the font of the selection model. */
<span class="nc" id="L90">    private SelectionUpdater selectionUpdater = new SelectionUpdater();</span>

    /** Listener used to update the font in the components. This should be registered
     * with the selection model. */
<span class="nc" id="L94">    private LabelUpdater labelUpdater = new LabelUpdater();</span>

    /** True if the components are being updated and no event should be generated. */
<span class="nc" id="L97">    private boolean updatingComponents = false;</span>

    /** Listener class used to update the font in the components. This should be registered
      * with the selection model. */
<span class="nc" id="L101">    private class LabelUpdater implements ChangeListener {</span>

        public void stateChanged(ChangeEvent e) {
<span class="nc" id="L104">            updateComponents();</span>
<span class="nc" id="L105">        }</span>

    }

    /** Listener class used to update the font of the preview label. */
<span class="nc" id="L110">    private class SelectionUpdater implements ChangeListener, ListSelectionListener {</span>

        public void stateChanged(ChangeEvent e) {
<span class="nc bnc" id="L113" title="All 2 branches missed.">            if (!updatingComponents) {</span>
<span class="nc" id="L114">                setFont(buildFont());</span>
            }
<span class="nc" id="L116">        }</span>

        public void valueChanged(ListSelectionEvent e) {
<span class="nc bnc" id="L119" title="All 2 branches missed.">            if (!updatingComponents) {</span>
<span class="nc" id="L120">                setFont(buildFont());</span>
            }
<span class="nc" id="L122">        }</span>
    }

    /**
     * Shows a modal font-chooser dialog and blocks until the
     * dialog is hidden.  If the user presses the &quot;OK&quot; button, then
     * this method hides/disposes the dialog and returns the selected color.
     * If the user presses the &quot;Cancel&quot; button or closes the dialog without
     * pressing &quot;OK&quot;, then this method hides/disposes the dialog and returns
     * &lt;code&gt;null&lt;/code&gt;.
     *
     * @param component    the parent &lt;code&gt;Component&lt;/code&gt; for the dialog
     * @param title        the String containing the dialog's title
     * @return the selected font or &lt;code&gt;null&lt;/code&gt; if the user opted out
     * @exception HeadlessException if GraphicsEnvironment.isHeadless()
     * returns true.
     * @see java.awt.GraphicsEnvironment#isHeadless
     */
    public Font showDialog(Component component, String title) {

<span class="nc" id="L142">        FontTracker ok = new FontTracker(this);</span>
<span class="nc" id="L143">        JDialog dialog = createDialog(component, title, true, ok, null);</span>
<span class="nc" id="L144">        dialog.addWindowListener(new FontChooserDialog.Closer());</span>
<span class="nc" id="L145">        dialog.addComponentListener(new FontChooserDialog.DisposeOnClose());</span>
<span class="nc" id="L146">        dialog.setAlwaysOnTop(true);</span>
<span class="nc" id="L147">        dialog.setVisible(true); // blocks until user brings dialog down...</span>

<span class="nc" id="L149">        return ok.getFont();</span>
    }


    /**
     * Creates and returns a new dialog containing the specified
     * &lt;code&gt;ColorChooser&lt;/code&gt; pane along with &quot;OK&quot;, &quot;Cancel&quot;, and &quot;Reset&quot;
     * buttons. If the &quot;OK&quot; or &quot;Cancel&quot; buttons are pressed, the dialog is
     * automatically hidden (but not disposed).  If the &quot;Reset&quot;
     * button is pressed, the color-chooser's color will be reset to the
     * font which was set the last time &lt;code&gt;show&lt;/code&gt; was invoked on the
     * dialog and the dialog will remain showing.
     *
     * @param c              the parent component for the dialog
     * @param title          the title for the dialog
     * @param modal          a boolean. When true, the remainder of the program
     *                       is inactive until the dialog is closed.
     * @param okListener     the ActionListener invoked when &quot;OK&quot; is pressed
     * @param cancelListener the ActionListener invoked when &quot;Cancel&quot; is pressed
     * @return a new dialog containing the font-chooser pane
     * @exception HeadlessException if GraphicsEnvironment.isHeadless()
     * returns true.
     * @see java.awt.GraphicsEnvironment#isHeadless
     */
    public JDialog createDialog(Component c, String title, boolean modal,
        ActionListener okListener, ActionListener cancelListener) {

<span class="nc" id="L176">        return new FontChooserDialog(c, title, modal, this,</span>
                okListener, cancelListener);
    }

    /**
     * Creates a color chooser pane with an initial font which is the same font
     * as the default font for labels.
     */
    public JFontChooser() {
<span class="nc" id="L185">        this(new DefaultFontSelectionModel());</span>
<span class="nc" id="L186">    }</span>

    /**
     * Creates a font chooser pane with the specified initial font.
     *
     * @param initialFont the initial font set in the chooser
     */
    public JFontChooser(Font initialFont) {
<span class="nc" id="L194">        this(new DefaultFontSelectionModel(initialFont));</span>
<span class="nc" id="L195">    }</span>

    /**
     * Creates a font chooser pane with the specified
     * &lt;code&gt;FontSelectionModel&lt;/code&gt;.
     *
     * @param model the font selection model used by this component
     */
<span class="nc" id="L203">    public JFontChooser(FontSelectionModel model) {</span>
<span class="nc" id="L204">        selectionModel = model;</span>
<span class="nc" id="L205">        init(model.getSelectedFont());</span>
<span class="nc" id="L206">        selectionModel.addChangeListener(labelUpdater);</span>
<span class="nc" id="L207">    }</span>

    private void init(Font font) {
<span class="nc" id="L210">        setLayout(new GridBagLayout());</span>

<span class="nc" id="L212">        Insets ins = new Insets(2, 2, 2, 2);</span>

<span class="nc" id="L214">        fontList = new JList(FONTS);</span>
<span class="nc" id="L215">        fontList.setVisibleRowCount(10);</span>
<span class="nc" id="L216">        fontList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);</span>
<span class="nc" id="L217">        add(new JScrollPane(fontList), new GridBagConstraints(0, 0, 1, 1, 2, 2,</span>
                GridBagConstraints.CENTER, GridBagConstraints.BOTH,
                ins, 0, 0));

<span class="nc" id="L221">        sizeList = new JList(SIZES);</span>
<span class="nc" id="L222">        ((JLabel)sizeList.getCellRenderer()).setHorizontalAlignment(JLabel.RIGHT);</span>
<span class="nc" id="L223">        sizeList.setVisibleRowCount(10);</span>
<span class="nc" id="L224">        sizeList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);</span>
<span class="nc" id="L225">        add(new JScrollPane(sizeList), new GridBagConstraints(1, 0, 1, 1, 1, 2,</span>
                GridBagConstraints.CENTER, GridBagConstraints.BOTH,
                ins, 0, 0));

<span class="nc" id="L229">        boldCheckBox = new JCheckBox(&quot;Bold&quot;);</span>
<span class="nc" id="L230">        add(boldCheckBox, new GridBagConstraints(0, 1, 2, 1, 1, 0,</span>
                GridBagConstraints.WEST, GridBagConstraints.NONE,
                ins, 0, 0));

<span class="nc" id="L234">        italicCheckBox = new JCheckBox(&quot;Italic&quot;);</span>
<span class="nc" id="L235">        add(italicCheckBox, new GridBagConstraints(0, 2, 2, 1, 1, 0,</span>
                GridBagConstraints.WEST, GridBagConstraints.NONE,
                ins, 0, 0));

<span class="nc" id="L239">        previewLabel = new JLabel(&quot;&quot;);</span>
<span class="nc" id="L240">        previewLabel.setHorizontalAlignment(JLabel.CENTER);</span>
<span class="nc" id="L241">        previewLabel.setVerticalAlignment(JLabel.CENTER);</span>
<span class="nc" id="L242">        add(new JScrollPane(previewLabel), new GridBagConstraints(0, 3, 2, 1, 1, 1,</span>
                GridBagConstraints.CENTER, GridBagConstraints.BOTH,
                ins, 0, 0));

<span class="nc bnc" id="L246" title="All 2 branches missed.">        setFont(font == null ? previewLabel.getFont() : font);</span>

<span class="nc" id="L248">        fontList.addListSelectionListener(selectionUpdater);</span>
<span class="nc" id="L249">        sizeList.addListSelectionListener(selectionUpdater);</span>
<span class="nc" id="L250">        boldCheckBox.addChangeListener(selectionUpdater);</span>
<span class="nc" id="L251">        italicCheckBox.addChangeListener(selectionUpdater);</span>
<span class="nc" id="L252">    }</span>

    private Font buildFont() {
//        Font labelFont = previewLabel.getFont();

<span class="nc" id="L257">        String fontName = (String)fontList.getSelectedValue();</span>
<span class="nc bnc" id="L258" title="All 2 branches missed.">        if (fontName == null) {</span>
<span class="nc" id="L259">            return null;</span>
//            fontName = labelFont.getName();
        }
<span class="nc" id="L262">        Integer sizeInt = (Integer)sizeList.getSelectedValue();</span>
<span class="nc bnc" id="L263" title="All 2 branches missed.">        if (sizeInt == null) {</span>
//            size = labelFont.getSize();
<span class="nc" id="L265">            return null;</span>
        }

        // create the font
//        // first create the font attributes
//        HashMap map = new HashMap();
//        map.put(TextAttribute.BACKGROUND, Color.white);
//        map.put(TextAttribute.FAMILY, fontName);
//        map.put(TextAttribute.FOREGROUND, Color.black);
//        map.put(TextAttribute.SIZE , new Float(size));
//        map.put(TextAttribute.UNDERLINE, italicCheckBox.isSelected() ? TextAttribute.UNDERLINE_LOW_ONE_PIXEL : TextAttribute.UNDERLINE_LOW_TWO_PIXEL);
//        map.put(TextAttribute.STRIKETHROUGH, italicCheckBox.isSelected() ? TextAttribute.STRIKETHROUGH_ON : Boolean.FALSE);
//        map.put(TextAttribute.WEIGHT, boldCheckBox.isSelected() ? TextAttribute.WEIGHT_BOLD : TextAttribute.WEIGHT_REGULAR);
//        map.put(TextAttribute.POSTURE,
//                italicCheckBox.isSelected() ? TextAttribute.POSTURE_OBLIQUE : TextAttribute.POSTURE_REGULAR);
//
//        return new Font(map);

<span class="nc" id="L283">        return new Font(fontName,</span>
<span class="nc bnc" id="L284" title="All 2 branches missed.">                (italicCheckBox.isSelected() ? Font.ITALIC : Font.PLAIN)</span>
<span class="nc bnc" id="L285" title="All 2 branches missed.">                | (boldCheckBox.isSelected() ? Font.BOLD : Font.PLAIN),</span>
<span class="nc" id="L286">                sizeInt);</span>
    }

    /** Updates the font in the preview component according to the selected values. */
    private void updateComponents() {
<span class="nc" id="L291">        updatingComponents = true;</span>

<span class="nc" id="L293">        Font font = getFont();</span>

<span class="nc" id="L295">        fontList.setSelectedValue(font.getName(), true);</span>
<span class="nc" id="L296">        sizeList.setSelectedValue(font.getSize(), true);</span>
<span class="nc" id="L297">        boldCheckBox.setSelected(font.isBold());</span>
<span class="nc" id="L298">        italicCheckBox.setSelected(font.isItalic());</span>

<span class="nc bnc" id="L300" title="All 2 branches missed.">        if (previewText == null) {</span>
<span class="nc" id="L301">            previewLabel.setText(font.getName());</span>
        }

        // set the font and fire a property change
<span class="nc" id="L305">        Font oldValue = previewLabel.getFont();</span>
<span class="nc" id="L306">        previewLabel.setFont(font);</span>
<span class="nc" id="L307">        firePropertyChange(&quot;font&quot;, oldValue, font);</span>

<span class="nc" id="L309">        updatingComponents = false;</span>
<span class="nc" id="L310">    }</span>

    /**
     * Returns the data model that handles font selections.
     *
     * @return a FontSelectionModel object
     */
    public FontSelectionModel getSelectionModel() {
<span class="nc" id="L318">        return selectionModel;</span>
    }


    /**
     * Set the model containing the selected font.
     *
     * @param newModel   the new FontSelectionModel object
     */
    public void setSelectionModel(FontSelectionModel newModel ) {
<span class="nc" id="L328">        FontSelectionModel oldModel = selectionModel;</span>
<span class="nc" id="L329">        selectionModel = newModel;</span>
<span class="nc" id="L330">        oldModel.removeChangeListener(labelUpdater);</span>
<span class="nc" id="L331">        newModel.addChangeListener(labelUpdater);</span>
<span class="nc" id="L332">        firePropertyChange(&quot;selectionModel&quot;, oldModel, newModel);</span>
<span class="nc" id="L333">    }</span>

    /**
     * Gets the current font value from the font chooser.
     *
     * @return the current font value of the font chooser
     */
    public Font getFont() {
<span class="nc" id="L341">        return selectionModel.getSelectedFont();</span>
    }

    /**
     * Sets the current font of the font chooser to the specified font.
     * The &lt;code&gt;ColorSelectionModel&lt;/code&gt; will fire a &lt;code&gt;ChangeEvent&lt;/code&gt;
     * @param font the font to be set in the font chooser
     * @see JComponent#addPropertyChangeListener
     */
    public void setFont(Font font) {
<span class="nc" id="L351">        selectionModel.setSelectedFont(font);</span>
<span class="nc" id="L352">    }</span>

    /** Returns the preview text displayed in the preview component.
     * @return the preview text, if null the font name will be displayed
     */
    public String getPreviewText() {
<span class="nc" id="L358">        return previewText;</span>
    }

    /** Sets the preview text displayed in the preview component.
     * @param previewText the preview text, if null the font name will be displayed
     */
    public void setPreviewText(String previewText) {
<span class="nc" id="L365">        this.previewText = previewText;</span>
<span class="nc" id="L366">        previewLabel.setText(&quot;&quot;);</span>
<span class="nc" id="L367">        updateComponents();</span>
<span class="nc" id="L368">    }</span>

}


/*
 * Class which builds a font chooser dialog consisting of
 * a JFontChooser with &quot;Ok&quot;, &quot;Cancel&quot;, and &quot;Reset&quot; buttons.
 *
 * Note: This needs to be fixed to deal with localization!
 */
class FontChooserDialog extends JDialog {
    private Font initialFont;
    private JFontChooser chooserPane;

    public FontChooserDialog(Component c, String title, boolean modal,
              JFontChooser chooserPane,
              ActionListener okListener, ActionListener cancelListener) {
<span class="nc" id="L386">        super(JOptionPane.getFrameForComponent(c), title, modal);</span>
        //setResizable(false);

<span class="nc" id="L389">        String okString = UIManager.getString(&quot;ColorChooser.okText&quot;);</span>
<span class="nc" id="L390">        String cancelString = UIManager.getString(&quot;ColorChooser.cancelText&quot;);</span>
<span class="nc" id="L391">        String resetString = UIManager.getString(&quot;ColorChooser.resetText&quot;);</span>

        /*
         * Create Lower button panel
         */
<span class="nc" id="L396">        JPanel buttonPane = new JPanel();</span>
<span class="nc" id="L397">        buttonPane.setLayout(new FlowLayout(FlowLayout.CENTER));</span>
<span class="nc" id="L398">        JButton okButton = new JButton(okString);</span>
<span class="nc" id="L399">        getRootPane().setDefaultButton(okButton);</span>
<span class="nc" id="L400">        okButton.setActionCommand(&quot;OK&quot;);</span>
<span class="nc bnc" id="L401" title="All 2 branches missed.">        if (okListener != null) {</span>
<span class="nc" id="L402">            okButton.addActionListener(okListener);</span>
        }
<span class="nc" id="L404">        okButton.addActionListener(new ActionListener() {</span>
            public void actionPerformed(ActionEvent e) {
<span class="nc" id="L406">                setVisible(false);</span>
<span class="nc" id="L407">            }</span>
        });
<span class="nc" id="L409">        buttonPane.add(okButton);</span>

<span class="nc" id="L411">        JButton cancelButton = new JButton(cancelString);</span>

        // The following few lines are used to register esc to close the dialog
<span class="nc" id="L414">        Action cancelKeyAction = new AbstractAction() {</span>
            public void actionPerformed(ActionEvent e) {
                // todo make it in 1.3
//                ActionListener[] listeners
//                        = ((AbstractButton) e.getSource()).getActionListeners();
//                for (int i = 0; i &lt; listeners.length; i++) {
//                    listeners[i].actionPerformed(e);
//                }
<span class="nc" id="L422">            }</span>
        };
<span class="nc" id="L424">        KeyStroke cancelKeyStroke = KeyStroke.getKeyStroke((char) KeyEvent.VK_ESCAPE);</span>
<span class="nc" id="L425">        InputMap inputMap = cancelButton.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);</span>
<span class="nc" id="L426">        ActionMap actionMap = cancelButton.getActionMap();</span>
<span class="nc bnc" id="L427" title="All 4 branches missed.">        if (inputMap != null &amp;&amp; actionMap != null) {</span>
<span class="nc" id="L428">            inputMap.put(cancelKeyStroke, &quot;cancel&quot;);</span>
<span class="nc" id="L429">            actionMap.put(&quot;cancel&quot;, cancelKeyAction);</span>
        }
        // end esc handling

<span class="nc" id="L433">        cancelButton.setActionCommand(&quot;cancel&quot;);</span>
<span class="nc bnc" id="L434" title="All 2 branches missed.">        if (cancelListener != null) {</span>
<span class="nc" id="L435">            cancelButton.addActionListener(cancelListener);</span>
        }
<span class="nc" id="L437">        cancelButton.addActionListener(new ActionListener() {</span>
            public void actionPerformed(ActionEvent e) {
<span class="nc" id="L439">                setVisible(false);</span>
<span class="nc" id="L440">            }</span>
        });
<span class="nc" id="L442">        buttonPane.add(cancelButton);</span>

<span class="nc" id="L444">        JButton resetButton = new JButton(resetString);</span>
<span class="nc" id="L445">        resetButton.addActionListener(new ActionListener() {</span>
            public void actionPerformed(ActionEvent e) {
<span class="nc" id="L447">                reset();</span>
<span class="nc" id="L448">            }</span>
        });
<span class="nc" id="L450">        int mnemonic = UIManager.getInt(&quot;ColorChooser.resetMnemonic&quot;);</span>
<span class="nc bnc" id="L451" title="All 2 branches missed.">        if (mnemonic != -1) {</span>
<span class="nc" id="L452">            resetButton.setMnemonic(mnemonic);</span>
        }
<span class="nc" id="L454">        buttonPane.add(resetButton);</span>


        // initialiase the content pane
<span class="nc" id="L458">        this.chooserPane = chooserPane;</span>

<span class="nc" id="L460">        Container contentPane = getContentPane();</span>
<span class="nc" id="L461">        contentPane.setLayout(new BorderLayout());</span>
<span class="nc" id="L462">        contentPane.add(chooserPane, BorderLayout.CENTER);</span>

<span class="nc" id="L464">        contentPane.add(buttonPane, BorderLayout.SOUTH);</span>

<span class="nc" id="L466">        pack();</span>
<span class="nc" id="L467">        setLocationRelativeTo(c);</span>
<span class="nc" id="L468">    }</span>

    public void setVisible(boolean visible) {
<span class="nc bnc" id="L471" title="All 2 branches missed.">        if (visible)</span>
<span class="nc" id="L472">            initialFont = chooserPane.getFont();</span>
<span class="nc" id="L473">        super.setVisible(visible);</span>
<span class="nc" id="L474">    }</span>

    public void reset() {
<span class="nc" id="L477">        chooserPane.setFont(initialFont);</span>
<span class="nc" id="L478">    }</span>

<span class="fc" id="L480">    static class Closer extends WindowAdapter implements Serializable {</span>
        public void windowClosing(WindowEvent e) {
<span class="nc" id="L482">            Window w = e.getWindow();</span>
<span class="nc" id="L483">            w.setVisible(false);</span>
<span class="nc" id="L484">        }</span>
    }

<span class="nc" id="L487">    static class DisposeOnClose extends ComponentAdapter implements Serializable {</span>
        public void componentHidden(ComponentEvent e) {
<span class="nc" id="L489">            Window w = (Window) e.getComponent();</span>
<span class="nc" id="L490">            w.dispose();</span>
<span class="nc" id="L491">        }</span>
    }

}

class FontTracker implements ActionListener, Serializable {
    JFontChooser chooser;
    Font color;

<span class="nc" id="L500">    public FontTracker(JFontChooser c) {</span>
<span class="nc" id="L501">        chooser = c;</span>
<span class="nc" id="L502">    }</span>

    public void actionPerformed(ActionEvent e) {
<span class="nc" id="L505">        color = chooser.getFont();</span>
<span class="nc" id="L506">    }</span>

    public Font getFont() {
<span class="nc" id="L509">        return color;</span>
    }
}



/**
 * A generic implementation of &lt;code&gt;{@link FontSelectionModel}&lt;/code&gt;.
 *
 * @author Adrian BER
 */
class DefaultFontSelectionModel implements FontSelectionModel {

    /** The default selected font. */
<span class="nc" id="L523">    private static final Font DEFAULT_INITIAL_FONT = new Font(&quot;Dialog&quot;, Font.PLAIN, 12);</span>

    /** The selected font. */
    private Font selectedFont;

    /** The change listeners notified by a change in this model. */
<span class="nc" id="L529">    private EventListenerList listeners = new EventListenerList();</span>

    /**
     * Creates a &lt;code&gt;DefaultFontSelectionModel&lt;/code&gt; with the
     * current font set to &lt;code&gt;Dialog, 12&lt;/code&gt;.  This is
     * the default constructor.
     */
    public DefaultFontSelectionModel() {
<span class="nc" id="L537">        this(DEFAULT_INITIAL_FONT);</span>
<span class="nc" id="L538">    }</span>

    /**
     * Creates a &lt;code&gt;DefaultFontSelectionModel&lt;/code&gt; with the
     * current font set to &lt;code&gt;font&lt;/code&gt;, which should be
     * non-&lt;code&gt;null&lt;/code&gt;.  Note that setting the font to
     * &lt;code&gt;null&lt;/code&gt; is undefined and may have unpredictable
     * results.
     *
     * @param selectedFont the new &lt;code&gt;Font&lt;/code&gt;
     */
<span class="nc" id="L549">    public DefaultFontSelectionModel(Font selectedFont) {</span>
<span class="nc bnc" id="L550" title="All 2 branches missed.">        if (selectedFont == null) {</span>
<span class="nc" id="L551">            selectedFont = DEFAULT_INITIAL_FONT;</span>
        }
<span class="nc" id="L553">        this.selectedFont = selectedFont;</span>
<span class="nc" id="L554">    }</span>

    public Font getSelectedFont() {
<span class="nc" id="L557">        return selectedFont;</span>
    }

    public void setSelectedFont(Font selectedFont) {
<span class="nc bnc" id="L561" title="All 2 branches missed.">        if (selectedFont != null) {</span>
<span class="nc" id="L562">            this.selectedFont = selectedFont;</span>
<span class="nc" id="L563">            fireChangeListeners();</span>
        }
<span class="nc" id="L565">    }</span>

    public void addChangeListener(ChangeListener listener) {
<span class="nc" id="L568">        listeners.add(ChangeListener.class, listener);</span>
<span class="nc" id="L569">    }</span>

    public void removeChangeListener(ChangeListener listener) {
<span class="nc" id="L572">        listeners.remove(ChangeListener.class, listener);</span>
<span class="nc" id="L573">    }</span>

    /** Fires the listeners registered with this model. */
    protected void fireChangeListeners() {
<span class="nc" id="L577">        ChangeEvent ev = new ChangeEvent(this);</span>
<span class="nc" id="L578">        Object[] l = listeners.getListeners(ChangeListener.class);</span>
<span class="nc bnc" id="L579" title="All 2 branches missed.">        for (Object listener : l) {</span>
<span class="nc" id="L580">            ((ChangeListener) listener).stateChanged(ev);</span>
        }
<span class="nc" id="L582">    }</span>
}



/**
 * A model that supports selecting a &lt;code&gt;Font&lt;/code&gt;.
 *
 * @author Adrian BER
 *
 * @see java.awt.Font
 */
interface FontSelectionModel {
    /**
     * Returns the selected &lt;code&gt;Font&lt;/code&gt; which should be
     * non-&lt;code&gt;null&lt;/code&gt;.
     *
     * @return  the selected &lt;code&gt;Font&lt;/code&gt;
     * @see     #setSelectedFont
     */
    Font getSelectedFont();

    /**
     * Sets the selected font to &lt;code&gt;font&lt;/code&gt;.
     * Note that setting the font to &lt;code&gt;null&lt;/code&gt;
     * is undefined and may have unpredictable results.
     * This method fires a state changed event if it sets the
     * current font to a new non-&lt;code&gt;null&lt;/code&gt; font.
     *
     * @param font the new &lt;code&gt;Font&lt;/code&gt;
     * @see   #getSelectedFont
     * @see   #addChangeListener
     */
    void setSelectedFont(Font font);

    /**
     * Adds &lt;code&gt;listener&lt;/code&gt; as a listener to changes in the model.
     * @param listener the &lt;code&gt;ChangeListener&lt;/code&gt; to be added
     */
    void addChangeListener(ChangeListener listener);

    /**
     * Removes &lt;code&gt;listener&lt;/code&gt; as a listener to changes in the model.
     * @param listener the &lt;code&gt;ChangeListener&lt;/code&gt; to be removed
     */
    void removeChangeListener(ChangeListener listener);
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>