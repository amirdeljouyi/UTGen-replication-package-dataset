<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Menu.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">47_dvd-homevideo</a> &gt; <a href="index.source.html" class="el_package">default</a> &gt; <span class="el_source">Menu.java</span></div><h1>Menu.java</h1><pre class="source lang-java linenums">import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.FileNotFoundException;
import java.io.InputStreamReader;
import java.io.File;
import java.io.FileWriter;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.FilenameFilter;

import java.util.StringTokenizer;

/**
 * @author Shane Santner
 * This class creates a background menu for a DVD.  The user
 * can specify a background picture and audio to use for the
 * menu, or a default background can also be used.  The user
 * also has the option of specifying unique titles for each
 * chapter of the DVD.  If nothing is specified then the title
 * of the DVD will be used followed by an underscore and increasing
 * integer for each video clip.
 *
 * TODO - Can I use streams on dvd-menu?  Really need to standardize
 *        how I use streams across the board for all classes.
 */
public class Menu implements Runnable
{
    /**
     * Creates a default instance of Menu 
     */
    public Menu()
<span class="fc" id="L32">    {}</span>
    
    /**
     * Creates a new instance of Menu with the title, text file path and PAL/NTSC format
     * passed as parameters. 
     * @param   title           The title of the DVD
     * @param   TextFilePath    The path to the title file
     * @param   isPAL           Is this a PAL or NTSC DVD
     */
    public Menu(String title, String TextFilePath, boolean isPAL, GUI DVD_GUI)
<span class="fc" id="L42">    {</span>
<span class="fc" id="L43">        strTitle = title;</span>
<span class="fc" id="L44">        strTextFilePath = TextFilePath;</span>
<span class="fc" id="L45">        pal_menu = isPAL;</span>
<span class="fc" id="L46">        m_GUI = DVD_GUI;</span>
<span class="fc" id="L47">    }</span>
    
    /** 
     * Creates a new instance of Menu with the title, text file path, PAL/NTSC format,
     * menu picture path and audio path passed as parameters. 
     * @param   title           The title of the DVD
     * @param   picPath         The path to the background picture of the DVD Menu
     * @param   audioPath       The path to the background audio of the DVD Menu
     * @param   TextFilePath    The path to the title file
     * @param   isPAL           Is this a PAL or NTSC DVD
     */
    public Menu(String title, String picPath, String audioPath, String TextFilePath, boolean isPAL, GUI DVD_GUI)
<span class="fc" id="L59">    {</span>
<span class="fc" id="L60">        strTitle = title;</span>
<span class="fc" id="L61">        strPicPath = picPath;</span>
<span class="fc" id="L62">        strAudioPath = audioPath;</span>
<span class="fc" id="L63">        strTextFilePath = TextFilePath;</span>
<span class="fc" id="L64">        pal_menu = isPAL;        </span>
<span class="fc" id="L65">        m_GUI = DVD_GUI;</span>
<span class="fc" id="L66">    }</span>
    
    /**
     * Menu Member Variables 
     */
    private String strTitle;
    private String strPicPath;
    private String strAudioPath;
    private String strTextFilePath;
<span class="fc" id="L75">    private String dvd_menu = &quot;dvd-menu&quot;;</span>
<span class="fc" id="L76">    private String[] titles = new String[50];</span>
    private boolean pal_menu;
<span class="fc" id="L78">    private String baseErr = &quot;Menu Error - &quot;;</span>
    private String[] video_files;
    private GUI m_GUI;
    private Thread m_Thread;
    private boolean m_Error;
    
    /**
     * Used to instantiate a new thread and to perform error checking.
     * @return  A boolean to determine if an error occurred in the function
     */
    public boolean init()
    {
        /* Create and start the new thread */
<span class="fc" id="L91">        m_Thread = new Thread(this);</span>
<span class="fc" id="L92">        m_Thread.start();</span>
        try 
        {
<span class="fc" id="L95">            m_Thread.join();</span>
        }
<span class="nc" id="L97">        catch (InterruptedException ex) </span>
        {
<span class="nc" id="L99">            ex.printStackTrace();</span>
<span class="fc" id="L100">        }</span>
        
        /* 
         * If an error occurred while executing DV_Capture then m_Error will be set
         * to true.  Also check the log file for any evidence of an error.
         */
<span class="nc bnc" id="L106" title="All 4 branches missed.">        return (m_Error || m_GUI.ErrorCheck(m_GUI.strOutputDir + &quot;/log/dvd-menu.log&quot;));	</span>
    }
    
    /**
     * Implements the run() method of the Runnable interface.  Makes multi-threading
     * possible.
     */
    public void run()
    {        
<span class="nc" id="L115">        DVDMainMenu();</span>
<span class="nc" id="L116">    }   </span>
    
    /**
     * Creates DVD menu using optional picture and music by calling dvd-menu
     * @param   m_GUI This is the GUI object used to control the form
     * @return  A boolean to determine if an error occurred in the function  
     */
    public void DVDMainMenu()
    {
        /* First we need to extract all of the .vob files that were
         * created using transcode and store these file names in 
         * the video_files array. */
<span class="nc" id="L128">        File ListDir = new File(m_GUI.strOutputDir);</span>
<span class="nc" id="L129">        FilenameFilter filter = new FilenameFilter() </span>
<span class="nc" id="L130">        {</span>
<span class="nc" id="L131">            boolean ret_val = true;</span>
            public boolean accept(File dir, String name) 
            {
<span class="nc bnc" id="L134" title="All 2 branches missed.">                if(name.endsWith(&quot;vob&quot;))</span>
                {
<span class="nc bnc" id="L136" title="All 2 branches missed.">                    if(!name.equals(&quot;menu.vob&quot;))</span>
<span class="nc" id="L137">                        ret_val = true;</span>
                    else
<span class="nc" id="L139">                        ret_val = false;</span>
                }
                else
<span class="nc" id="L142">                    ret_val = false;</span>
<span class="nc" id="L143">                return ret_val;</span>
            }
        };
        
        /* This is where the .vob files actually get stored in the array */
<span class="nc" id="L148">        video_files = ListDir.list(filter);</span>
        
        /* Enable the Menu progress portion of the GUI */
<span class="nc" id="L151">	m_GUI.lblAuthor.setEnabled(true);</span>
<span class="nc" id="L152">	m_GUI.lblAuthorProg.setEnabled(true);</span>
<span class="nc" id="L153">	m_GUI.prgAuthor.setEnabled(true);</span>
<span class="nc" id="L154">	m_GUI.prgAuthor.setIndeterminate(true);</span>

        /* Add to the dvd-menu string based on user supplied parameters */
	String menu_options;
<span class="nc bnc" id="L158" title="All 4 branches missed.">	if(strPicPath == null &amp;&amp; strAudioPath == null)</span>
<span class="nc" id="L159">	    menu_options = &quot; -c -D -n '&quot; + strTitle + &quot;' -o &quot; + m_GUI.strOutputDir;</span>
<span class="nc bnc" id="L160" title="All 4 branches missed.">	else if(strPicPath.equals(&quot;&quot;) &amp;&amp; strAudioPath != null)</span>
<span class="nc" id="L161">    	    menu_options = &quot; -c -D -n '&quot; + strTitle + &quot;' -o &quot; + m_GUI.strOutputDir + &quot; -a &quot; + strAudioPath;</span>
<span class="nc bnc" id="L162" title="All 4 branches missed.">	else if(strPicPath != null &amp;&amp; strAudioPath.equals(&quot;&quot;))</span>
<span class="nc" id="L163">	    menu_options = &quot; -c -D -n '&quot; + strTitle + &quot;' -o &quot; + m_GUI.strOutputDir + &quot; -b &quot; + strPicPath;</span>
	else
<span class="nc" id="L165">	    menu_options = &quot; -c -D -n '&quot; + strTitle + &quot;' -o &quot; + m_GUI.strOutputDir + &quot; -a &quot; + strAudioPath + &quot; -b &quot; + strPicPath;</span>

        /* First scenario - the user DID NOT supply a title file */
<span class="nc" id="L168">        int i = 0;</span>
<span class="nc bnc" id="L169" title="All 4 branches missed.">        if(strTextFilePath.equals(&quot;&quot;) || strTextFilePath == null)</span>
        {
<span class="nc bnc" id="L171" title="All 2 branches missed.">            while(i &lt; video_files.length)</span>
	    {
                /* Add default naming to the dvd-menu since nothing else was specified */
<span class="nc" id="L174">		menu_options += &quot; -f &quot; + m_GUI.strOutputDir + &quot;/&quot; + video_files[i].substring(0,11) + &quot;.vob -t &quot; + strTitle + &quot;_&quot; + (i + 1);</span>
<span class="nc" id="L175">		i++;</span>
	    }    
        }
        /* Otherwise they DID supply a text file, so we need to read from it */
        else
        {
            try 
            {
<span class="nc" id="L183">                BufferedReader in = new BufferedReader(new InputStreamReader(new FileInputStream(m_GUI.txtTextFile.getText())));</span>
<span class="nc" id="L184">                String line;i = 0;</span>
                
                /* 
                 * Read in the user supplied title file and store
                 * each line in an array.
                 */
<span class="nc bnc" id="L190" title="All 2 branches missed.">                while((line = in.readLine()) != null)</span>
                {
<span class="nc" id="L192">                    titles[i] = line;</span>
<span class="nc" id="L193">                    i++;                    </span>
                }
                           
                /* Determine the number of lines in the text file */
<span class="nc" id="L197">                int num_blanks = 0;</span>
<span class="nc bnc" id="L198" title="All 2 branches missed.">                for(i = 0; i &lt; titles.length; i++)</span>
                {
<span class="nc bnc" id="L200" title="All 2 branches missed.">                    if(titles[i].equals(&quot;BLANK&quot;))</span>
<span class="nc" id="L201">                        num_blanks++;</span>
<span class="nc bnc" id="L202" title="All 2 branches missed.">                    if(titles[i].equals(&quot;DONE&quot;))</span>
<span class="nc" id="L203">                        break;</span>
                }
                
                /* Error check the user supplied text file */
<span class="nc" id="L207">                int num_lines = i;</span>
<span class="nc bnc" id="L208" title="All 2 branches missed.">                if((num_lines - num_blanks) &gt; 10)</span>
                {
<span class="nc" id="L210">                    m_GUI.MessageBox(&quot;Your text file can only have a maximum&quot; +</span>
                            &quot;of 10 titles!  Please edit your text file and rerun&quot; +
                            &quot;dvd-homevideo.&quot;,1);
                    
                    /* 
                     * Can't recover from this user error, so make them start over...
                     * or at least run dvd-menu and dvdauthor again
                     */
<span class="nc" id="L218">                    m_Error = true;;</span>
                }                    
<span class="nc bnc" id="L220" title="All 2 branches missed.">                else if(num_lines == video_files.length)</span>
                {
<span class="nc" id="L222">                    i = 0;</span>
<span class="nc bnc" id="L223" title="All 2 branches missed.">                    while(i &lt; video_files.length)</span>
                    {
                        /* Look for the keywords BLANK and DONE */
<span class="nc bnc" id="L226" title="All 4 branches missed.">                        if(!titles[i].equals(&quot;BLANK&quot;)  &amp;&amp; !titles[i].equals(&quot;DONE&quot;))</span>
                        {
<span class="nc" id="L228">                            menu_options +=  &quot; -t &quot; + titles[i] + &quot; -f &quot; + m_GUI.strOutputDir + &quot;/&quot; + video_files[i].substring(0,11) + &quot;.vob&quot;;</span>
<span class="nc" id="L229">                            i++;</span>
                        } 
                        /* If we find DONE, then quit parsing the text file */
<span class="nc bnc" id="L232" title="All 2 branches missed.">                        else if(titles[i].equals(&quot;DONE&quot;))</span>
<span class="nc" id="L233">                            break;</span>
                        else
                        {
<span class="nc" id="L236">                            menu_options += &quot; -f &quot; + m_GUI.strOutputDir + &quot;/&quot; + video_files[i].substring(0,11) + &quot;.vob&quot;;</span>
<span class="nc" id="L237">                            i++;</span>
                        }                        
                    }   
                }
                else
                {
<span class="nc" id="L243">                    m_GUI.MessageBox(&quot;It appears that your text file is not\n&quot; +</span>
                                       &quot;formatted correctly.  You currently have\n&quot; +
                                       (video_files.length + 1) + &quot; vob files, \n&quot; +
                                       &quot;however your text file is showing\n&quot;
                                       + num_lines + &quot; lines.&quot;,1);
                    
                    /* 
                     * Can't recover from this user error, so make them start over...
                     * or at least run dvd-menu and dvdauthor again
                     */
<span class="nc" id="L253">                    m_Error = true;;</span>
                }                 
            } 
<span class="nc" id="L256">            catch(FileNotFoundException ex) </span>
            {
<span class="nc" id="L258">                SaveStackTrace.printTrace(m_GUI.strOutputDir, ex);</span>
<span class="nc" id="L259">                m_GUI.MessageBox(&quot;Can not find &quot; + m_GUI.txtTextFile + &quot;\n&quot; + ex.toString(), 0);</span>
<span class="nc" id="L260">                ex.printStackTrace();</span>
<span class="nc" id="L261">                m_Error = true;</span>
            }
<span class="nc" id="L263">            catch(IOException ex) </span>
            {
<span class="nc" id="L265">                SaveStackTrace.printTrace(m_GUI.strOutputDir, ex);</span>
<span class="nc" id="L266">                m_GUI.MessageBox(baseErr + &quot;IO Error\n&quot; + ex.toString(), 0);</span>
<span class="nc" id="L267">                ex.printStackTrace();</span>
<span class="nc" id="L268">                m_Error = true;</span>
<span class="nc" id="L269">            }       </span>
        }
        
<span class="nc bnc" id="L272" title="All 2 branches missed.">        if(pal_menu == true)</span>
<span class="nc" id="L273">            menu_options += &quot; -p&quot;; </span>
        
        /* 
         * I don't like this but for some reason dvd-menu requires
         * that I redirect the error stream.  It doesn't care where,
         * it just has to be redirected.  Possibly something to do 
         * with lame?
         */
<span class="nc" id="L281">        dvd_menu += (menu_options + &quot; 2&gt;&amp;1&quot;);// log/dvd-menu.err &lt;2&quot;);</span>
                
<span class="nc" id="L283">        m_GUI.txtAreaOutput.append(dvd_menu + &quot;\n&quot;);</span>
        try 
        {
<span class="nc" id="L286">	    String[] dvd_menu_cmd = {&quot;/bin/sh&quot;,&quot;-c&quot;,dvd_menu};</span>
<span class="nc" id="L287">            Process p = Runtime.getRuntime().exec(dvd_menu_cmd, null, new File(m_GUI.strOutputDir));</span>
            
<span class="nc" id="L289">            BufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream()));</span>
<span class="nc" id="L290">            BufferedReader err_in = new BufferedReader(new InputStreamReader(p.getErrorStream()));</span>
            
            String line;
            StringTokenizer st;
            /* 
             * Write anything from the input stream for dvd-menu
             * to the txtAreaOutput that the user sees
             */
<span class="nc bnc" id="L298" title="All 2 branches missed.">            while((line = in.readLine()) != null)</span>
            {                
                /* 
                 * Check for the case where the necessary dependencies are not
                 * installed, but the user tries to run dvd-homevideo anyway
                 */
<span class="nc bnc" id="L304" title="All 2 branches missed.">                if(line.equals(&quot;/bin/sh: dvd-menu: command not found&quot;))</span>
                {
<span class="nc" id="L306">                    m_GUI.MessageBox(&quot;Could not locate dvd-menu in your path.&quot; + </span>
                                       &quot;\nPlease install all necessary dependencies&quot; +
                                       &quot;\nand rerun dvd-homevideo.&quot;, 0);
                    /* Close all open streams */
<span class="nc" id="L310">                    in.close();</span>
                    //out.close();
<span class="nc" id="L312">                    err_in.close();</span>
                    //err_out.close();

                    /* Indicate that there was an error */
<span class="nc" id="L316">                    m_Error = true;</span>
                }
<span class="nc" id="L318">                st = new StringTokenizer(line);</span>
<span class="nc bnc" id="L319" title="All 2 branches missed.">                if(st.hasMoreTokens())</span>
                {
                    /* 
                     * Since dvd-menu makes us redirect the error stream to stdin,
                     * we don't want to waste a ton of time in I/O, so ignore lines
                     * that start with 'Frame#'
                     */
<span class="nc bnc" id="L326" title="All 2 branches missed.">                    if(!st.nextToken().equals(&quot;Frame#&quot;))</span>
                    {
<span class="nc" id="L328">                        m_GUI.txtAreaOutput.append(line + &quot;\n&quot;);</span>
<span class="nc" id="L329">                        m_GUI.txtAreaOutput.setCaretPosition(m_GUI.txtAreaOutput.getDocument().getLength());            </span>
                    }
                }
                
            }
            /*
             * p.waitFor() throws an InterruptedException
             */
<span class="nc" id="L337">            p.waitFor();        </span>
        
            /* move dvd-menu.log into the log directory */
<span class="nc" id="L340">            p = Runtime.getRuntime().exec(&quot;mv dvd-menu.log log/&quot;, null, new File(m_GUI.strOutputDir));</span>
            
            /* Delete unnecessary output directory created by dvd-menu */
<span class="nc" id="L343">            File CreateOutDir = new File(m_GUI.strOutputDir + &quot;/dvd_fs&quot;);</span>
<span class="nc bnc" id="L344" title="All 4 branches missed.">            if(CreateOutDir.exists() &amp;&amp; CreateOutDir.isDirectory())</span>
<span class="nc" id="L345">                CreateOutDir.delete(); </span>
            
            /* Put in a slight delay to ensure dvd-menu.log closes */
<span class="nc" id="L348">            Thread.sleep(2000);                        </span>
        } 
<span class="nc" id="L350">        catch(IOException ex) </span>
        {
<span class="nc" id="L352">            SaveStackTrace.printTrace(m_GUI.strOutputDir, ex);</span>
<span class="nc" id="L353">            m_GUI.MessageBox(baseErr + &quot;IO Error\n&quot; + ex.toString(), 0);</span>
<span class="nc" id="L354">            ex.printStackTrace();</span>
<span class="nc" id="L355">            m_Error = true;</span>
        }
<span class="nc" id="L357">        catch(InterruptedException ex) </span>
        {
<span class="nc" id="L359">            SaveStackTrace.printTrace(m_GUI.strOutputDir, ex);</span>
<span class="nc" id="L360">            m_GUI.MessageBox(baseErr + &quot;dvd-homevideo thread was interrupted\n&quot; + ex.toString(), 0);</span>
<span class="nc" id="L361">            ex.printStackTrace();</span>
<span class="nc" id="L362">            m_Error = true;</span>
<span class="nc" id="L363">        }            	</span>
<span class="nc" id="L364">    }    </span>
    
    /**
     * Creates the xml file to pass to dvdauthor
     * @param   m_GUI This is the GUI object used to control the form
     */
    public boolean createXML()
    {
<span class="nc" id="L372">	File xmlFile = new File(m_GUI.strOutputDir + &quot;/vmgm.xml&quot;);</span>
<span class="nc" id="L373">        File ListDir = new File(m_GUI.strOutputDir);</span>
                
        /* 
         * Need to find all vob files, but don't want to include menu.vob
         * which was created by dvd-menu.
         */
<span class="nc" id="L379">        FilenameFilter filter = new FilenameFilter() </span>
<span class="nc" id="L380">        {</span>
<span class="nc" id="L381">            boolean ret_val = true;</span>
            public boolean accept(File dir, String name) 
            {
<span class="nc bnc" id="L384" title="All 2 branches missed.">                if(name.endsWith(&quot;vob&quot;))</span>
                {
<span class="nc bnc" id="L386" title="All 2 branches missed.">                    if(!name.equals(&quot;menu.vob&quot;))</span>
<span class="nc" id="L387">                        ret_val = true;</span>
                    else
<span class="nc" id="L389">                        ret_val = false;</span>
                }
                else
<span class="nc" id="L392">                    ret_val = false;               </span>
<span class="nc" id="L393">                return ret_val;</span>
            }
        };
<span class="nc" id="L396">        video_files = ListDir.list(filter);</span>
        
        /* Write the xml file.  It's not pretty, but it works. */
	int i;
        try 
        {	
<span class="nc" id="L402">            BufferedWriter writer = new BufferedWriter(new FileWriter(xmlFile));</span>
<span class="nc" id="L403">            writer.write(&quot;&lt;dvdauthor dest=\&quot;&quot; + m_GUI.strOutputDir + &quot;/DVD/\&quot; jumppad=\&quot;0\&quot;&gt;&quot;);writer.newLine();</span>
<span class="nc" id="L404">            writer.write(&quot;\t&lt;vmgm&gt;&quot;);writer.newLine(); </span>
<span class="nc" id="L405">            writer.write(&quot;\t\t&lt;menus&gt;&quot;);writer.newLine();</span>
<span class="nc" id="L406">            writer.write(&quot;\t\t\t&lt;pgc entry=\&quot;title\&quot; &gt;&quot;);writer.newLine();</span>
<span class="nc" id="L407">            writer.write(&quot;\t\t\t\t&lt;vob file=\&quot;&quot; + m_GUI.strOutputDir + &quot;/menu.vob\&quot; pause=\&quot;inf\&quot; /&gt;&quot;);writer.newLine();</span>
<span class="nc bnc" id="L408" title="All 2 branches missed.">            if(titles[0] == null)</span>
            {
<span class="nc bnc" id="L410" title="All 2 branches missed.">                for(i = 1; i &lt;= video_files.length; i++)</span>
                {
<span class="nc" id="L412">                    writer.write(&quot;\t\t\t\t&lt;button&gt;jump title &quot; + i + &quot;;&lt;/button&gt;&quot;);</span>
<span class="nc" id="L413">                    writer.newLine();</span>
                }    
            }
            else
            {
<span class="nc bnc" id="L418" title="All 2 branches missed.">                for(i = 1; i &lt; titles.length; i++)</span>
                {
<span class="nc bnc" id="L420" title="All 4 branches missed.">                    if(!titles[i-1].equals(&quot;BLANK&quot;)  &amp;&amp; !titles[i-1].equals(&quot;DONE&quot;))</span>
                    {
<span class="nc" id="L422">                        writer.write(&quot;\t\t\t\t&lt;button&gt;jump title &quot; + i + &quot;;&lt;/button&gt;&quot;);</span>
<span class="nc" id="L423">                        writer.newLine();</span>
                    }
<span class="nc bnc" id="L425" title="All 2 branches missed.">                    else if(titles[i-1].equals(&quot;DONE&quot;))</span>
<span class="nc" id="L426">                        break;</span>
                }
            }
<span class="nc" id="L429">            writer.write(&quot;\t\t\t\t&lt;post&gt; jump vmgm menu 1; &lt;/post&gt;&quot;);writer.newLine();</span>
<span class="nc" id="L430">            writer.write(&quot;\t\t\t&lt;/pgc&gt;&quot;);writer.newLine();</span>
<span class="nc" id="L431">            writer.write(&quot;\t\t&lt;/menus&gt;&quot;);writer.newLine();</span>
<span class="nc" id="L432">            writer.write(&quot;\t&lt;/vmgm&gt;&quot;);writer.newLine();</span>
<span class="nc" id="L433">            writer.write(&quot;\t&lt;titleset&gt;&quot;);writer.newLine();</span>
<span class="nc" id="L434">            writer.write(&quot;\t&lt;titles&gt;&quot;);writer.newLine();</span>
<span class="nc bnc" id="L435" title="All 2 branches missed.">            for(i = 1; i &lt; video_files.length; i++)</span>
            {
<span class="nc" id="L437">            	writer.write(&quot;\t\t&lt;pgc&gt;&quot;); writer.newLine();			</span>
<span class="nc" id="L438">            	writer.write(&quot;\t\t\t&lt;vob file=\&quot;&quot; + video_files[i-1] + &quot;\&quot; /&gt;&quot;); writer.newLine();</span>
<span class="nc" id="L439">                writer.write(&quot;\t\t\t&lt;post&gt;jump title &quot; + (i + 1) + &quot;;&lt;/post&gt;&quot;); writer.newLine();</span>
<span class="nc" id="L440">		writer.write(&quot;\t\t&lt;/pgc&gt;&quot;); writer.newLine();</span>
	    }
<span class="nc" id="L442">            writer.write(&quot;\t\t&lt;pgc&gt;&quot;);writer.newLine();</span>
<span class="nc" id="L443">            writer.write(&quot;\t\t\t&lt;vob file=\&quot;&quot; + video_files[i-1] + &quot;\&quot; /&gt;&quot;);writer.newLine();</span>
<span class="nc" id="L444">            writer.write(&quot;\t\t\t&lt;post&gt;call vmgm menu 1;&lt;/post&gt;&quot;);writer.newLine();</span>
<span class="nc" id="L445">            writer.write(&quot;\t\t&lt;/pgc&gt;&quot;);writer.newLine();</span>
<span class="nc" id="L446">            writer.write(&quot;\t&lt;/titles&gt;&quot;);writer.newLine();</span>
<span class="nc" id="L447">            writer.write(&quot;\t&lt;/titleset&gt;&quot;);writer.newLine();</span>
<span class="nc" id="L448">            writer.write(&quot;&lt;/dvdauthor&gt;&quot;);writer.newLine();</span>
<span class="nc" id="L449">            writer.close();</span>
        }
<span class="nc" id="L451">        catch(IOException ex) </span>
        {
<span class="nc" id="L453">            SaveStackTrace.printTrace(m_GUI.strOutputDir, ex);</span>
<span class="nc" id="L454">            m_GUI.MessageBox(baseErr + &quot;IO Error\n&quot; + ex.toString(), 0);</span>
<span class="nc" id="L455">            ex.printStackTrace();    </span>
<span class="nc" id="L456">            return true;</span>
<span class="nc" id="L457">        }        </span>
        /* Shouldn't expect to see any errors from this method call. */
<span class="nc" id="L459">        return false;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>