<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>gdvdhomevideo.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">47_dvd-homevideo</a> &gt; <a href="index.source.html" class="el_package">default</a> &gt; <span class="el_source">gdvdhomevideo.java</span></div><h1>gdvdhomevideo.java</h1><pre class="source lang-java linenums">import java.awt.Color;

/**
 * @author Shane Santner
 * This is the main class for dvd-homevideo.  This class
 * controls the creation and instantiation of objects,
 * and generally controls the flow of the entire program.
 */
public class gdvdhomevideo 
{    
    /** Creates a new instance of gdvdhomevideo */
    public gdvdhomevideo() 
<span class="nc" id="L13">    {}</span>
    
    /**
     * @param   args    The command line arguments
     */
    public static void main(String[] args) throws InterruptedException
    {
        /* Define and Create Objects */
<span class="nc" id="L21">        GUI DVD_GUI = new GUI();</span>
        Capture DVD_Capture;
        Convert DVD_Convert;
        Menu DVD_Menu;
        Author DVD_Author;
        Burn DVD_Burn;
        
        /* Create Color objects for txtStatus */
<span class="nc" id="L29">        Color green = new Color(0,255,0);</span>
<span class="nc" id="L30">        Color red = new Color(255,0,0);</span>
<span class="nc" id="L31">        Color grey = new Color(153,153,153);</span>
        
        /* Display the GUI */
<span class="nc" id="L34">        DVD_GUI.setVisible(true);</span>
        
        /*
         * Wait for user to press Start button, then check the user interface for 
         * errors.  If no errors then begin instantiating objects and start
         * executing.
         */
        begin:
        while(true)
        {
            /*
             * Reset values to zero percent and disable progress
             * information every single time in the code that we 
             * continue to the label begin.
             */
<span class="nc" id="L49">            DVD_GUI.prgCapture.setValue(0); DVD_GUI.prgCapture.setEnabled(false);</span>
<span class="nc" id="L50">            DVD_GUI.prgConvert.setValue(0); DVD_GUI.prgConvert.setEnabled(false);</span>
<span class="nc" id="L51">            DVD_GUI.prgAuthor.setValue(0);  DVD_GUI.prgAuthor.setEnabled(false);</span>

<span class="nc" id="L53">            DVD_GUI.lblCaptureProg.setText(&quot;0%&quot;); DVD_GUI.lblCaptureProg.setEnabled(false);</span>
<span class="nc" id="L54">            DVD_GUI.lblConvertProg.setText(&quot;0%&quot;); DVD_GUI.lblConvertProg.setEnabled(false);</span>
<span class="nc" id="L55">            DVD_GUI.lblAuthorProg.setText(&quot;0%&quot;);  DVD_GUI.lblAuthorProg.setEnabled(false);</span>
                                          
<span class="nc" id="L57">            DVD_GUI.prgAuthor.setIndeterminate(false);</span>
                                                  
<span class="nc" id="L59">            DVD_GUI.lblCapture.setEnabled(false);</span>
<span class="nc" id="L60">            DVD_GUI.lblConvert.setEnabled(false);</span>
<span class="nc" id="L61">            DVD_GUI.lblAuthor.setEnabled(false);           </span>
            
            /* Wait for the user to press the Start button */
<span class="nc bnc" id="L64" title="All 2 branches missed.">            while(DVD_GUI.blnBegin == false)</span>
            {
<span class="nc" id="L66">                Thread.sleep(20);</span>
            }
            
                            
<span class="nc" id="L70">            DVD_GUI.UpdateStatus(grey, &quot;Status&quot;);</span>

            /* Instantiate Capture Object */
<span class="nc" id="L73">            DVD_Capture = new Capture(((Integer)DVD_GUI.spnMinutes.getValue()).intValue(), ((Integer)DVD_GUI.spnSeconds.getValue()).intValue(), DVD_GUI);</span>

            /* Instantiate Convert Object */
            String aspectRatio, format;                
<span class="nc" id="L77">            boolean usePAL = false;</span>
<span class="nc bnc" id="L78" title="All 2 branches missed.">            if(DVD_GUI.rdNTSC.isSelected())</span>
<span class="nc" id="L79">                format = &quot;dvd-ntsc&quot;;</span>

            else 
                /* This is necessary for transcode to process pal data correctly */
<span class="nc" id="L83">                format = &quot;dvd-pal --dv_yuy2_mode&quot;;                                </span>

            /* Check which aspect ratio is selected */
<span class="nc bnc" id="L86" title="All 2 branches missed.">            if(DVD_GUI.rd4_3.isSelected())</span>
<span class="nc" id="L87">                aspectRatio = &quot;2&quot;;</span>
            else
<span class="nc" id="L89">                aspectRatio = &quot;3&quot;;</span>

           /* Check the quality that has been chosen */
<span class="nc bnc" id="L92" title="All 2 branches missed.">            if(DVD_GUI.rdSuper.isSelected())</span>
<span class="nc" id="L93">                DVD_Convert = new Convert(0, format, aspectRatio, DVD_GUI);</span>
<span class="nc bnc" id="L94" title="All 2 branches missed.">            else if(DVD_GUI.rdGood.isSelected())</span>
<span class="nc" id="L95">                DVD_Convert = new Convert(1, format, aspectRatio, DVD_GUI);</span>
            else 
<span class="nc" id="L97">                DVD_Convert = new Convert(2, format, aspectRatio, DVD_GUI);</span>

            /* Instantiate Menu Object */
<span class="nc bnc" id="L100" title="All 2 branches missed.">            if(DVD_GUI.rdPAL.isSelected())</span>
<span class="nc" id="L101">                usePAL = true;</span>
<span class="nc bnc" id="L102" title="All 2 branches missed.">            if(DVD_GUI.chkMenu.isSelected())</span>
<span class="nc" id="L103">                DVD_Menu = new Menu(DVD_GUI.txtTitle.getText(), DVD_GUI.txtPicture.getText(), </span>
<span class="nc" id="L104">                                    DVD_GUI.txtAudio.getText(), DVD_GUI.txtTextFile.getText(),</span>
                                    usePAL, DVD_GUI);
            else
<span class="nc" id="L107">                DVD_Menu = new Menu(DVD_GUI.txtTitle.getText(), DVD_GUI.txtTextFile.getText(),</span>
                                    usePAL, DVD_GUI);

            /* Instantiate Author Object */
<span class="nc" id="L111">            DVD_Author = new Author();</span>

            /* Instantiate Burn Object */
<span class="nc bnc" id="L114" title="All 2 branches missed.">            if(DVD_GUI.chkBurn.isSelected())</span>
<span class="nc" id="L115">                DVD_Burn = new Burn(true);</span>
            else
<span class="nc" id="L117">                DVD_Burn = new Burn(false);</span>

            /* Let's Begin! */
            /* Have we already captured from the camcorder? */
<span class="nc bnc" id="L121" title="All 2 branches missed.">            if(!DVD_GUI.menuRd_IgnoreCap.isSelected() &amp;&amp;</span>
<span class="nc bnc" id="L122" title="All 2 branches missed.">               !DVD_GUI.menuRd_IgnoreCapConv.isSelected() &amp;&amp;</span>
<span class="nc bnc" id="L123" title="All 2 branches missed.">               !DVD_GUI.menuRd_IgnoreCapConvMenu.isSelected())</span>
            {                    
<span class="nc bnc" id="L125" title="All 2 branches missed.">                if(DVD_Capture.init())</span>
                {
<span class="nc" id="L127">                    DVD_GUI.UpdateStatus(red, &quot;FAIL&quot;);</span>
<span class="nc" id="L128">                    continue begin;</span>
                }   
          
                /* 
                * If we are indeed capturing video from the camcorder, then since we
                * are also multi-threading we need to add a slight delay before
                * transcode starts converting the video.
                */
<span class="nc" id="L136">               Thread.sleep(6500);</span>
            }
            /* Have we already run transcode/mplex? */
<span class="nc bnc" id="L139" title="All 2 branches missed.">            if(!DVD_GUI.menuRd_IgnoreCapConv.isSelected() &amp;&amp;</span>
<span class="nc bnc" id="L140" title="All 2 branches missed.">               !DVD_GUI.menuRd_IgnoreCapConvMenu.isSelected())</span>
            {                    
<span class="nc bnc" id="L142" title="All 2 branches missed.">                if(DVD_Convert.init())</span>
                {                       
<span class="nc" id="L144">                    DVD_GUI.UpdateStatus(red, &quot;FAIL&quot;);</span>
<span class="nc" id="L145">                    continue begin;</span>
                }    
            }
            /* Have we already run dvd-menu? */
<span class="nc bnc" id="L149" title="All 2 branches missed.">            if(!DVD_GUI.menuRd_IgnoreCapConvMenu.isSelected())</span>
            {
<span class="nc bnc" id="L151" title="All 2 branches missed.">                if(DVD_Menu.init())</span>
                {
<span class="nc" id="L153">                    DVD_GUI.UpdateStatus(red, &quot;FAIL&quot;);</span>
<span class="nc" id="L154">                    continue begin;</span>
                }   
<span class="nc bnc" id="L156" title="All 2 branches missed.">                if(DVD_Menu.createXML())</span>
                {
<span class="nc" id="L158">                    DVD_GUI.UpdateStatus(red, &quot;FAIL&quot;);</span>
<span class="nc" id="L159">                    continue begin;</span>
                }   
            } 
            /* Run dvdauthor and check for errors */
<span class="nc bnc" id="L163" title="All 2 branches missed.">            if(DVD_Author.CreateDVDFileStructure(DVD_GUI))</span>
            {
<span class="nc" id="L165">                DVD_GUI.UpdateStatus(red, &quot;FAIL&quot;);</span>
<span class="nc" id="L166">                continue begin;</span>
            }   
            /* Run growisofs and check for errors */
<span class="nc bnc" id="L169" title="All 2 branches missed.">            if(DVD_Burn.BurnToDVD(DVD_GUI))</span>
            {
<span class="nc" id="L171">                DVD_GUI.UpdateStatus(red, &quot;FAIL&quot;);</span>
<span class="nc" id="L172">                continue begin;</span>
            }   
            /* 
             * If we have made it this far, then lets allow the 
             * user to test the DVD by clicking on the Play button.
             */
<span class="nc" id="L178">            DVD_GUI.btnPlay.setEnabled(true);</span>
<span class="nc" id="L179">            DVD_GUI.MessageBox(&quot;Your DVD has successfully completed!&quot;, 1);</span>

<span class="nc" id="L181">            DVD_GUI.UpdateStatus(green, &quot;PASS&quot;);</span>
<span class="nc" id="L182">            continue begin;                                          </span>
        }        
    }       
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>