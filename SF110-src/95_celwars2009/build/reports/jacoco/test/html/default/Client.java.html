<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Client.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">95_celwars2009</a> &gt; <a href="index.source.html" class="el_package">default</a> &gt; <span class="el_source">Client.java</span></div><h1>Client.java</h1><pre class="source lang-java linenums">import java.awt.BasicStroke;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GridLayout;
import java.awt.HeadlessException;
import java.awt.Image;
import java.awt.MediaTracker;
import java.awt.Point;
import java.awt.Polygon;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.WindowEvent;
import java.awt.event.WindowListener;
import java.awt.image.BufferedImage;
import java.io.BufferedReader;
import java.io.File;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.lang.reflect.Field;
import java.net.Socket;
import java.net.UnknownHostException;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Random;
import java.util.Scanner;
import java.util.StringTokenizer;

import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JList;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JProgressBar;
import javax.swing.JRadioButton;
import javax.swing.JScrollBar;
import javax.swing.JScrollPane;
import javax.swing.JTextPane;
import javax.swing.ListModel;
import javax.swing.Timer;
import javax.swing.border.Border;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;
import javax.swing.event.ListDataListener;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;

public class Client extends JFrame
{
<span class="nc" id="L67">	 private JField Field = new JField();</span>
<span class="nc" id="L68">	 private JMiniMap minimap = new JMiniMap();</span>
	 private JRadioButton FoodBtn;
	 private JRadioButton FlagBtn;
	 private JLabel Power;
	 private JLabel Score;
	 private JLabel Time;
	 private JList doList;
	 private JTextPane  description;
<span class="nc" id="L76">	 private ArrayList&lt;drawCircle&gt; circles = new ArrayList&lt;drawCircle&gt;();</span>
<span class="nc" id="L77">	 private boolean connected = false;</span>
<span class="nc" id="L78">	 private ArrayList&lt;Message&gt; messages = new ArrayList&lt;Message&gt;();</span>
<span class="nc" id="L79">	 private int top= 0;</span>
<span class="nc" id="L80">	 private int left= 0;</span>
<span class="nc" id="L81">	 private int worldSize = 2000;</span>
<span class="nc" id="L82">	 private ServerThread S = null;</span>
<span class="nc" id="L83">	 private Random gen = new Random();</span>
<span class="nc" id="L84">	 private Sound sfx = null;</span>
<span class="nc" id="L85">     private MP3 currentMP3 = null;</span>
<span class="nc" id="L86">     private  OptionList theList = null;</span>
<span class="nc" id="L87">	 private Timer ambience = new Timer(100000, new ambienceTimer());</span>
<span class="nc" id="L88">	 private ArrayList&lt;Chain&gt; chains = new ArrayList&lt;Chain&gt;();</span>
<span class="nc" id="L89">	 private ArrayList&lt;ArrayList&lt;ScorePoint&gt;&gt; elevation = new ArrayList&lt;ArrayList&lt;ScorePoint&gt;&gt;();</span>
<span class="nc" id="L90">	 private ArrayList&lt;ArrayList&lt;ScorePoint&gt;&gt; scores = new ArrayList&lt;ArrayList&lt;ScorePoint&gt;&gt;();</span>
<span class="nc" id="L91">	 private ArrayList&lt;CatmullRomSpline&gt; blobs = new ArrayList&lt;CatmullRomSpline&gt;();</span>
<span class="nc" id="L92">	 private int maxScore = 30;</span>
<span class="nc" id="L93">	 private int time = 0;</span>
<span class="nc" id="L94">	 private boolean infoing = true;</span>
<span class="nc" id="L95">	 private boolean chart = false;</span>
<span class="nc" id="L96">	 private Client self = this; </span>
	 //private ArrayList&lt;String&gt; 
	 
	 private class ScorePoint
	 {
		 int x;
		 int y;
		 int color;
		 
		 public ScorePoint(int x, int y, int color)
<span class="nc" id="L106">		 {</span>
<span class="nc" id="L107">			 this.x = x;</span>
<span class="nc" id="L108">			 this.y = y;</span>
<span class="nc" id="L109">			 this.color = color;</span>
			// System.err.println(&quot;New scorepoint &quot;+x+&quot; &quot;+y+&quot; &quot;+color);
<span class="nc" id="L111">		 }</span>
	 }
	 
	 private class Chain
	 {
<span class="nc" id="L116">		 double[][] points = new double[30][2];</span>
<span class="nc" id="L117">		 int length = 0;</span>
		 public Chain(int length)
<span class="nc" id="L119">		 {</span>
<span class="nc" id="L120">			 this.length = length;</span>
<span class="nc" id="L121">		 }</span>
	 }
	 
<span class="nc" id="L124">	 private class ambienceTimer implements ActionListener</span>
	 {

		public void actionPerformed(ActionEvent arg0) {
<span class="nc" id="L128">			playMP3(&quot;ambient4.mp3&quot;);</span>
<span class="nc" id="L129">		}</span>
		 
	 }
	 
	 private void UpdateChains()
	 {
<span class="nc bnc" id="L135" title="All 2 branches missed.">		 for(int i = 0; i &lt; chains.size(); i++)</span>
		 {
<span class="nc bnc" id="L137" title="All 2 branches missed.">			 for(int j = 0; j &lt; chains.get(i).points.length; j++)</span>
			 {
<span class="nc" id="L139">				 chains.get(i).points[j][0] += gen.nextGaussian();</span>
<span class="nc" id="L140">				 chains.get(i).points[j][1] += gen.nextGaussian();</span>
			 }
<span class="nc bnc" id="L142" title="All 2 branches missed.">			 for(int j = 0; j &lt; chains.get(i).points.length-1; j++)</span>
			 {
<span class="nc" id="L144">				 double dx =chains.get(i).points[j+1][0] -  chains.get(i).points[j][0];</span>
<span class="nc" id="L145">				 double dy =chains.get(i).points[j+1][1] -  chains.get(i).points[j][1];</span>
<span class="nc" id="L146">				 double mag = Math.sqrt(dx*dx+dy*dy);</span>
<span class="nc" id="L147">				 chains.get(i).points[j+1][0]  = chains.get(i).points[j][0]+(dx/mag)*5;</span>
<span class="nc" id="L148">				 chains.get(i).points[j+1][1]  = chains.get(i).points[j][1]+(dy/mag)*5;</span>
			 }
		 }
<span class="nc bnc" id="L151" title="All 2 branches missed.">		 for(int i = 0; i &lt; blobs.size(); i++)</span>
		 {
<span class="nc bnc" id="L153" title="All 2 branches missed.">			 for(int j = 3; j &lt; blobs.get(i).controlPoints_.length-6; j++)</span>
			 {
<span class="nc bnc" id="L155" title="All 2 branches missed.">				 if(blobs.get(i).controlPoints_[j] != 0)</span>
<span class="nc" id="L156">					 blobs.get(i).controlPoints_[j] += gen.nextGaussian()*0.3;</span>
				 
			 }
<span class="nc" id="L159">			blobs.get(i).controlPoints_[blobs.get(i).controlPoints_.length-6] = blobs.get(i).controlPoints_[3];</span>
<span class="nc" id="L160">			 blobs.get(i).controlPoints_[blobs.get(i).controlPoints_.length-5] = blobs.get(i).controlPoints_[4];</span>
<span class="nc" id="L161">			 blobs.get(i).controlPoints_[blobs.get(i).controlPoints_.length-4] = blobs.get(i).controlPoints_[5];</span>
		 }

<span class="nc" id="L164">	 }</span>

	 
	 public void connect(String string, int i) {
		// TODO Auto-generated method stub
			try {
				

<span class="nc bnc" id="L172" title="All 2 branches missed.">				if(S == null)</span>
				{
<span class="nc" id="L174">					S = new ServerThread(new Socket(string, i), this);</span>
//					S.setPriority(Thread.MIN_PRIORITY);
<span class="nc" id="L176">					S.start();</span>
				}
				else
				{
<span class="nc" id="L180">					sendMessage(&quot;quit&quot;);</span>
<span class="nc" id="L181">					Thread.sleep(1000);</span>
<span class="nc" id="L182">					circles.clear();</span>
<span class="nc" id="L183">					S = new ServerThread(new Socket(string, i), this);</span>
//					S.setPriority(Thread.MIN_PRIORITY);
<span class="nc" id="L185">					S.start();</span>
				}

<span class="nc" id="L188">				} catch (Exception e) {</span>
				// TODO Auto-generated catch block
<span class="nc" id="L190">				JOptionPane.showMessageDialog(self, &quot;Having trouble connecting to the server...&quot;);</span>
<span class="nc" id="L191">			}</span>

			//playMP3(&quot;ambient4.mp3&quot;);
		//	ambience.start();

<span class="nc" id="L196">	}</span>


	private class Message
	 {
		 String message;
		 Color c;
		 long time;
<span class="nc" id="L204">		 boolean permanent = false;</span>
		 public Message(int col, String m)
<span class="nc" id="L206">		 {</span>
<span class="nc" id="L207">			 this.message = m;</span>
<span class="nc" id="L208">			 this.c = new Color(col);</span>

<span class="nc" id="L210">			 this.time = System.currentTimeMillis();</span>
<span class="nc" id="L211">		 }</span>
		 public Message(int col, String m, boolean b)
<span class="nc" id="L213">		 {</span>
<span class="nc" id="L214">			 this.message = m;</span>
<span class="nc" id="L215">			 this.c = new Color(col);</span>

<span class="nc" id="L217">			 this.time = System.currentTimeMillis();</span>
<span class="nc" id="L218">			 this.permanent = true;</span>
<span class="nc" id="L219">		 }</span>
	 }
	 
<span class="nc" id="L222">	 private class JMiniMap extends JPanel</span>
	 {
			public void paintComponent(Graphics g)
			{
<span class="nc" id="L226">				super.paintComponent(g);</span>
<span class="nc" id="L227">				Graphics2D g2 = (Graphics2D)g;</span>
<span class="nc" id="L228">				g2.setColor(new Color(200,230,230));</span>
<span class="nc" id="L229">				g2.fillRect(0,0,this.getWidth(),this.getHeight());</span>
<span class="nc bnc" id="L230" title="All 2 branches missed.">				for(int i = 0; i &lt; circles.size(); i++)</span>
				{
<span class="nc" id="L232">					drawCircle dc = circles.get(i);</span>
<span class="nc" id="L233">					g2.setColor(dc.c);</span>
<span class="nc" id="L234">					int x = (int) ((dc.getX()*200)/worldSize);</span>
<span class="nc" id="L235">					int y = (int) ((dc.getY()*200)/worldSize);</span>
<span class="nc" id="L236">					int size = (int)((dc.size*200)/worldSize);</span>
<span class="nc bnc" id="L237" title="All 2 branches missed.">					if(size &lt; 1)</span>
<span class="nc" id="L238">						size = 1;</span>
<span class="nc" id="L239">					g2.fillOval(x-size/2, y-size/2, size,size);</span>
				}

<span class="nc" id="L242">				g2.setColor(Color.WHITE);</span>
<span class="nc" id="L243">				g2.drawRect((200*(left))/worldSize,(200*(top))/worldSize,(700*200)/worldSize, (700*200)/worldSize);</span>
<span class="nc" id="L244">			}</span>
		 
	 }
<span class="nc" id="L247">	 private class windowCloseListener implements WindowListener</span>
	 {

		public void windowOpened(WindowEvent arg0) {
			// TODO Auto-generated method stub
			
<span class="nc" id="L253">		}</span>

		public void windowClosing(WindowEvent arg0) {
			// TODO Auto-generated method stub
<span class="nc bnc" id="L257" title="All 2 branches missed.">			if(connected) {</span>
<span class="nc" id="L258">				System.err.println(&quot;Sent quit&quot;);</span>
<span class="nc" id="L259">				sendMessage(&quot;quit&quot;);</span>
			}
<span class="nc" id="L261">			sfx.playSound(&quot;exit.wav&quot;);</span>
			try {
<span class="nc" id="L263">				Thread.sleep(800);</span>
<span class="nc" id="L264">			} catch (InterruptedException e) {</span>
				// TODO Auto-generated catch block
<span class="nc" id="L266">				e.printStackTrace();</span>
<span class="nc" id="L267">			}</span>
<span class="nc" id="L268">		}</span>

		public void windowClosed(WindowEvent arg0) {

			//S.disconnect();
<span class="nc" id="L273">		}</span>

		public void windowIconified(WindowEvent arg0) {
			// TODO Auto-generated method stub
			
<span class="nc" id="L278">		}</span>

		public void windowDeiconified(WindowEvent arg0) {
			// TODO Auto-generated method stub
			
<span class="nc" id="L283">		}</span>

		public void windowActivated(WindowEvent arg0) {
			// TODO Auto-generated method stub
			
<span class="nc" id="L288">		}</span>

		public void windowDeactivated(WindowEvent arg0) {
			// TODO Auto-generated method stub
			
<span class="nc" id="L293">		}</span>
		 
	 }
	 
<span class="nc" id="L297">	 private class miniClickListener implements MouseListener</span>
	 {

		public void mouseClicked(MouseEvent arg0) {

<span class="nc" id="L302">		}</span>

		public void mousePressed(MouseEvent arg0) {
<span class="nc bnc" id="L305" title="All 2 branches missed.">			if(arg0.getButton() == arg0.BUTTON3)</span>
			{
<span class="nc" id="L307">				sendMessage(&quot;Center&quot;);</span>
			}
			else
			{
				// TODO Auto-generated method stub
<span class="nc" id="L312">				infoing = false;</span>
<span class="nc" id="L313">				left = (arg0.getX()*worldSize)/200 -350 ;</span>
<span class="nc" id="L314">				top = (arg0.getY()*worldSize)/200 -350 ;</span>
<span class="nc" id="L315">				minimap.updateUI();</span>
<span class="nc" id="L316">				Field.updateUI();</span>
			}
<span class="nc" id="L318">		}</span>

		public void mouseReleased(MouseEvent arg0) {
			// TODO Auto-generated method stub
			
<span class="nc" id="L323">		}</span>

		public void mouseEntered(MouseEvent arg0) {
			// TODO Auto-generated method stub
			
<span class="nc" id="L328">		}</span>

		public void mouseExited(MouseEvent arg0) {
			// TODO Auto-generated method stub
			
<span class="nc" id="L333">		}</span>


		 
	 }
	 
<span class="nc" id="L339">	 private class fieldClicker implements MouseListener</span>
	 {

		public void mouseClicked(MouseEvent arg0) {
<span class="nc" id="L343">		}</span>

		public void mousePressed(MouseEvent arg0) 
		{
			 /*
			 theList.items.add(&quot;Food Receptors 50&quot;);
			 theList.items.add(&quot;Simple Flagella 100&quot;);
			 theList.items.add(&quot;Senescence Seggregation 100&quot;);
			 theList.items.add(&quot;Toxic Apoptosis 120&quot;);
			 theList.items.add(&quot;Group Growth 150&quot;);
			 theList.items.add(&quot;Aggression 150&quot;);
			 theList.items.add(&quot;Cellular Walls 150&quot;);
			 theList.items.add(&quot;Lysozymes 150&quot;);
			 theList.items.add(&quot;Antibiotic Resistance 150&quot;);
			 theList.items.add(&quot;Place Food 200&quot;);
			 theList.items.add(&quot;Telomerase 250&quot;);
			 theList.items.add(&quot;Sibling Receptors 250&quot;);
			 theList.items.add(&quot;Place Pheremone 300&quot;);
			 theList.items.add(&quot;Complex Flagella 500&quot;);
			 theList.items.add(&quot;Photosynthesis 900&quot;);
			 theList.items.add(&quot;Triplication 700&quot;);
			 theList.items.add(&quot;Release Antibiotic 1200&quot;);
			 theList.items.add(&quot;Enzymatic Revolution 3000&quot;);
<span class="nc bnc" id="L366" title="All 2 branches missed.">	*/		if(connected)</span>
			{
<span class="nc bnc" id="L368" title="All 2 branches missed.">				if(arg0.getButton() == MouseEvent.BUTTON1)</span>
				{
<span class="nc bnc" id="L370" title="All 2 branches missed.">					if(doList.getSelectedIndex() != -1)</span>
					{
						
<span class="nc" id="L373">							sendMessage(theList.items.get(doList.getSelectedIndex())+&quot; &quot;+(arg0.getX()+left)+&quot; &quot;+(arg0.getY()+top));</span>
					}
					else
					{
<span class="nc" id="L377">						sendMessage(&quot;info &quot;+(arg0.getX()+left)+&quot; &quot;+(arg0.getY()+top));</span>
<span class="nc" id="L378">						infoing = true;</span>
					}
				}
<span class="nc bnc" id="L381" title="All 2 branches missed.">				else if(arg0.getButton() == MouseEvent.BUTTON3)</span>
				{
<span class="nc" id="L383">					sendMessage(&quot;info &quot;+(arg0.getX()+left)+&quot; &quot;+(arg0.getY()+top));</span>
<span class="nc" id="L384">					infoing = true;</span>
				}
				else
<span class="nc" id="L387">					infoing = false;</span>
				
			}
<span class="nc" id="L390">		}</span>

		public void mouseReleased(MouseEvent arg0) {
			// TODO Auto-generated method stub
			
<span class="nc" id="L395">		}</span>

		public void mouseEntered(MouseEvent arg0) {
			// TODO Auto-generated method stub
			
<span class="nc" id="L400">		}</span>

		public void mouseExited(MouseEvent arg0) {
			// TODO Auto-generated method stub
			
<span class="nc" id="L405">		}</span>


		 
	 }
	 
	 private Color getColor(String trying)
	 {
<span class="nc" id="L413">	    Color c = Color.BLACK;</span>
		
	      try {
<span class="nc" id="L416">	        Class ColClas = Class.forName(&quot;java.awt.Color&quot;);</span>
<span class="nc" id="L417">	        Field f = ColClas.getField(trying);</span>
<span class="nc" id="L418">	        c = (Color)f.get(null);</span>
	      }
<span class="nc" id="L420">	      catch (Exception e) {</span>
	        // You failed to pick a valid colour, stick your head in a pig!
<span class="nc" id="L422">	        } </span>
<span class="nc" id="L423">	      return c;</span>
	}

	 
	 private class drawCircle
	 {
		 double x, y, size;
		 Color c;
		 int id;
		 public drawCircle(double x, double y, double size, int color, int id)
<span class="nc" id="L433">		 {</span>
<span class="nc" id="L434">			 this.x = x;</span>
<span class="nc" id="L435">			 this.y = y;</span>
<span class="nc" id="L436">			 this.size = size;</span>
<span class="nc" id="L437">			 this.c = new Color(color);</span>
<span class="nc" id="L438">			 this.id = id;</span>
<span class="nc" id="L439">		 }</span>

		public Color getC() {
<span class="nc" id="L442">			return c;</span>
		}

		public void setC(Color c) {
<span class="nc" id="L446">			this.c = c;</span>
<span class="nc" id="L447">		}</span>

		public double getSize() {
<span class="nc" id="L450">			return size;</span>
		}

		public void setSize(double size) {
<span class="nc" id="L454">			this.size = size;</span>
<span class="nc" id="L455">		}</span>

		public double getX() {
<span class="nc" id="L458">			return x;</span>
		}

		public void setX(double x) {
<span class="nc" id="L462">			this.x = x;</span>
<span class="nc" id="L463">		}</span>

		public double getY() {
<span class="nc" id="L466">			return y;</span>
		}

		public void setY(double y) {
<span class="nc" id="L470">			this.y = y;</span>
<span class="nc" id="L471">		}</span>
	 }
	 
	 
	 public Client()
<span class="nc" id="L476">	 {</span>

<span class="nc" id="L478">		 initialize();</span>
<span class="nc" id="L479">		 sfx = new Sound();</span>
<span class="nc" id="L480">		 sfx.initialize();</span>
		
		/*
		Random gen = new Random();
		worldSize = 2000;
		for(int i = 0; i &lt; 1000; i++)
		{
			circles.add(new drawCircle(gen.nextInt(1000), gen.nextInt(1000), gen.nextInt(30), gen.nextInt(256+256*256+ 1000)));
		}
		while(true)
		{
			try {
				Thread.sleep(100);
			} catch (InterruptedException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
			circles.clear();
			for(int i = 0; i &lt; 2000; i++)
			{
				circles.add(new drawCircle(gen.nextInt(2000), gen.nextInt(2000), gen.nextInt(30), gen.nextInt(256+256*256+ 256*256*255)));
			}
			Field.updateUI();
			minimap.updateUI();
		}
		*/
<span class="nc" id="L506">	 }</span>
	 
	 private void  initialize()
	 {
<span class="nc" id="L510">		 JMenuBar menu = new JMenuBar();</span>
<span class="nc" id="L511">		 menu.setMaximumSize(new Dimension(80,15));</span>
<span class="nc" id="L512">		 menu.setPreferredSize(new Dimension(80,15));</span>
<span class="nc" id="L513">		 menu.setFont(new Font(&quot;Halvetica&quot;, Font.PLAIN, 10));</span>
<span class="nc" id="L514">		 JMenu menuFile = new JMenu(&quot;File&quot;);</span>
<span class="nc" id="L515">		 menu.add(menuFile);</span>
<span class="nc" id="L516">		 JMenuItem menuConnect = new JMenuItem(&quot;Connect...&quot;);</span>
<span class="nc" id="L517">		 menuConnect.setPreferredSize(new Dimension(60,15));</span>
<span class="nc" id="L518">		 menuConnect.setFont(new Font(&quot;Halvetica&quot;, Font.PLAIN, 10));</span>
<span class="nc" id="L519">		 menuConnect.addActionListener(new connectListener());</span>
<span class="nc" id="L520">		 menuFile.add(menuConnect);</span>
<span class="nc" id="L521">		 JMenuItem menuIntro = new JMenuItem(&quot;Intro...&quot;);</span>
<span class="nc" id="L522">		 menuIntro.setPreferredSize(new Dimension(60,15));</span>
<span class="nc" id="L523">		 menuIntro.setFont(new Font(&quot;Halvetica&quot;, Font.PLAIN, 10));</span>
<span class="nc" id="L524">		 menuIntro.addActionListener(new introListener());</span>
<span class="nc" id="L525">		 menuFile.add(menuIntro);</span>
<span class="nc" id="L526">		this.setJMenuBar(menu);</span>
<span class="nc" id="L527">		 this.addWindowListener(new windowCloseListener());</span>
<span class="nc" id="L528">		 Container cp = this.getContentPane();</span>
<span class="nc" id="L529">		 cp.setLayout(new BorderLayout());</span>
<span class="nc" id="L530">		 Field.setMaximumSize(new Dimension(700,700));</span>
<span class="nc" id="L531">		 Field.setPreferredSize(new Dimension(700,700));</span>
<span class="nc" id="L532">		 Field.addMouseListener(new fieldClicker());</span>
<span class="nc" id="L533">		 cp.add(Field, BorderLayout.CENTER);</span>
<span class="nc" id="L534">		 JPanel right = new JPanel();</span>
<span class="nc" id="L535">		 right.setLayout(new FlowLayout(5,5,FlowLayout.CENTER));</span>
<span class="nc" id="L536">		 right.setMaximumSize(new Dimension(200,700));</span>
<span class="nc" id="L537">		 right.setPreferredSize(new Dimension(200,700));</span>
		 
<span class="nc" id="L539">		 minimap.setPreferredSize(new Dimension(200,200));</span>
<span class="nc" id="L540">		 minimap.setMaximumSize(new Dimension(200,200));</span>
<span class="nc" id="L541">		 minimap.addMouseListener(new miniClickListener());</span>
<span class="nc" id="L542">		 right.add(minimap);</span>
<span class="nc" id="L543">		 JPanel adders = new JPanel();</span>
<span class="nc" id="L544">		 adders.setLayout(new BorderLayout());</span>
<span class="nc" id="L545">		 Power = new JLabel(&quot;Evolution 0&quot;);</span>
<span class="nc" id="L546">		 Time = new JLabel(&quot;Time 0&quot;);</span>
<span class="nc" id="L547">		 Score = new JLabel(&quot;Score 0&quot;);</span>
<span class="nc" id="L548">		 JPanel info = new JPanel();</span>
<span class="nc" id="L549">		 info.setLayout(new GridLayout(4,1));</span>
<span class="nc" id="L550">		 info.add(Power);</span>
<span class="nc" id="L551">		 info.add(Score);</span>
<span class="nc" id="L552">		 info.add(Time);</span>
<span class="nc" id="L553">		 info.add(new JLabel(&quot;Possible Actions and Cost:&quot;));</span>
<span class="nc" id="L554">		 adders.add(info, BorderLayout.NORTH);</span>
<span class="nc" id="L555">		 theList = new OptionList();</span>

<span class="nc" id="L557">		 theList.items.add(&quot;Place Food 100&quot;);</span>
<span class="nc" id="L558">		 theList.items.add(&quot;Place Pheremone 20&quot;);</span>
<span class="nc" id="L559">		 theList.items.add(&quot;Place Inorganic 50&quot;);</span>
<span class="nc" id="L560">		 theList.items.add(&quot;Food Receptors, 40&quot;);</span>
<span class="nc" id="L561">		 theList.items.add(&quot;Simple Flagella, 70&quot;);</span>
<span class="nc" id="L562">		 theList.items.add(&quot;Senescence Seggregation, 40&quot;);</span>
<span class="nc" id="L563">		 theList.items.add(&quot;Toxic Apoptosis, 200&quot;);</span>
<span class="nc" id="L564">		 theList.items.add(&quot;Antibiotic Receptors, 50&quot;);</span>
<span class="nc" id="L565">		 theList.items.add(&quot;Group Growth, 250&quot;);</span>
<span class="nc" id="L566">		 theList.items.add(&quot;Aggression, 78&quot;);</span>
<span class="nc" id="L567">		 theList.items.add(&quot;Cellular Walls, 290&quot;);</span>
<span class="nc" id="L568">		 theList.items.add(&quot;Lysozymes, 310&quot;);</span>
<span class="nc" id="L569">		 theList.items.add(&quot;Antibiotic Resistance, 200&quot;);</span>
<span class="nc" id="L570">		 theList.items.add(&quot;Telomerase, 500&quot;);</span>
<span class="nc" id="L571">		 theList.items.add(&quot;Group Attraction, 150&quot;);</span>
<span class="nc" id="L572">		 theList.items.add(&quot;Complex Flagella, 150&quot;);</span>
<span class="nc" id="L573">		 theList.items.add(&quot;Photosynthesis, 700&quot;);</span>
<span class="nc" id="L574">		 theList.items.add(&quot;Triplication, 650&quot;);</span>
<span class="nc" id="L575">		 theList.items.add(&quot;Release Antibiotic, 3000&quot;);</span>
<span class="nc" id="L576">		 theList.items.add(&quot;Enzymatic Revolution, 5000&quot;);</span>
<span class="nc" id="L577">		 doList = new JList(theList);</span>
<span class="nc" id="L578">		 doList.setFont(new Font(&quot;Helvetica&quot;,Font.PLAIN, 10));</span>
<span class="nc" id="L579">		 JScrollPane sb = new JScrollPane(doList);</span>
<span class="nc" id="L580">		 doList.addListSelectionListener(new doListListener());</span>
<span class="nc" id="L581">		 sb.setPreferredSize(new Dimension(190,300));</span>
<span class="nc" id="L582">		 sb.setMaximumSize(new Dimension(190,300));</span>
<span class="nc" id="L583">		 right.add(adders);</span>
<span class="nc" id="L584">		 right.add(sb);</span>
<span class="nc" id="L585">		 description = new JTextPane();</span>
<span class="nc" id="L586">		 description.setText(&quot;Click an action above for details...&quot;);</span>
<span class="nc" id="L587">		 description.setEditable(false);</span>
<span class="nc" id="L588">		 description.setPreferredSize(new Dimension(190,120));</span>
<span class="nc" id="L589">		 description.setMaximumSize(new Dimension(190,120));</span>
<span class="nc" id="L590">		 description.setFont(new Font(&quot;Helvetica&quot;,Font.PLAIN, 10));</span>
<span class="nc" id="L591">		 right.add(description);</span>
<span class="nc" id="L592">		 right.invalidate();</span>
<span class="nc" id="L593">		 cp.add(right, BorderLayout.EAST);</span>
<span class="nc" id="L594">		 this.validate();</span>
<span class="nc" id="L595">		 this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span>
<span class="nc" id="L596">		 this.setSize(920,735);</span>
<span class="nc" id="L597">		 this.setResizable(false);</span>
<span class="nc" id="L598">		 this.setTitle(&quot;CellWars by Max Shokhirev 2008&quot;);</span>

<span class="nc" id="L600">		 this.setVisible(true);</span>
		 
<span class="nc" id="L602">	 }</span>
<span class="nc" id="L603">	 private class introListener implements ActionListener</span>
	 {

		public void actionPerformed(ActionEvent arg0) {
			// TODO Auto-generated method stub
<span class="nc" id="L608">			sfx.playSound(&quot;welcome.wav&quot;);</span>
<span class="nc" id="L609">		}</span>
		 
	 }
	 
<span class="nc" id="L613">	 private class connectListener implements ActionListener</span>
	 {

		public void actionPerformed(ActionEvent arg0) {
			// TODO Auto-generated method stub
			
<span class="nc" id="L619">				connect(JOptionPane.showInputDialog(null, &quot;IP Address:&quot;), 4000);</span>

<span class="nc" id="L621">		}</span>
		 
	 }
	 
	 private void inializeElevation()
	 {
		 
<span class="nc" id="L628">		 elevation.add(new ArrayList&lt;ScorePoint&gt;());</span>
<span class="nc" id="L629">		 elevation.add(new ArrayList&lt;ScorePoint&gt;());</span>
<span class="nc" id="L630">		 elevation.add(new ArrayList&lt;ScorePoint&gt;());</span>
<span class="nc" id="L631">		 elevation.add(new ArrayList&lt;ScorePoint&gt;());</span>
<span class="nc" id="L632">		 elevation.add(new ArrayList&lt;ScorePoint&gt;());</span>
<span class="nc bnc" id="L633" title="All 2 branches missed.">		 for(int i = 0; i &lt;worldSize/100; i++)</span>
		 {
<span class="nc" id="L635">			 int e = gen.nextInt(5);</span>
<span class="nc" id="L636">			 int x = gen.nextInt(worldSize);</span>
<span class="nc" id="L637">			 int y = gen.nextInt(worldSize);</span>
<span class="nc bnc" id="L638" title="All 2 branches missed.">			 for(int j = 4-e; j &lt;= 4; j++)</span>
			 {
<span class="nc" id="L640">				 elevation.get(j).add(new ScorePoint(x, y,(10*j)+10));</span>
				 //System.err.println(&quot;Added new Scorepoint at &quot;+x+&quot; &quot;+y+&quot; level &quot;+j);
			 }
		 }

<span class="nc" id="L645">	 }</span>

	 
	 private void initializeBlobs()
	 {
<span class="nc" id="L650">		 int many = 1+gen.nextInt(3);</span>
<span class="nc bnc" id="L651" title="All 2 branches missed.">		 for(int i = 0; i &lt; many; i++)</span>
		 {
<span class="nc" id="L653">				 int x = gen.nextInt(worldSize);</span>
<span class="nc" id="L654">				 int y = gen.nextInt(worldSize);</span>
<span class="nc" id="L655">				 int dx = 0;</span>
<span class="nc" id="L656">				 int dy = 0;</span>
<span class="nc" id="L657">				 int ccount = 6;</span>
				 
<span class="nc" id="L659">			    double[] c = new double[3*ccount + 3];</span>
			    
<span class="nc bnc" id="L661" title="All 2 branches missed.">			    for(int j = 0; j &lt; ccount; j++)</span>
			    {
<span class="nc" id="L663">				    c[j*3]  =   x;  </span>
<span class="nc" id="L664">				    c[j*3 +1]  =   y;  </span>
<span class="nc" id="L665">				    c[j*3 + 2]  =   0.0;</span>
<span class="nc bnc" id="L666" title="All 2 branches missed.">				    if(j &lt; 3)</span>
				    {
<span class="nc" id="L668">				    	dx += Math.cos(j*2)*40 + gen.nextInt(5)-gen.nextInt(5);</span>
<span class="nc" id="L669">				    	dy += Math.sin(j*2)*40+ gen.nextInt(5)-gen.nextInt(5);</span>
				    }
				    else
				    {
<span class="nc" id="L673">				    	dx -= Math.cos(j*2)*40+ gen.nextInt(5)-gen.nextInt(5);</span>
<span class="nc" id="L674">				    	dy -= Math.sin(j*2)*40+ gen.nextInt(5)-gen.nextInt(5);</span>
				    }
<span class="nc" id="L676">				    x += dx;</span>
<span class="nc" id="L677">				    y += dy;</span>
			    }
<span class="nc" id="L679">			    c[3*ccount] = c[0];</span>
<span class="nc" id="L680">			    c[3*ccount+1] = c[1];</span>
<span class="nc" id="L681">			    c[3*ccount+2] = c[2];</span>

			    
<span class="nc" id="L684">			    blobs.add(new CatmullRomSpline(c, ccount*4));</span>
		 }
<span class="nc" id="L686">	 }</span>
	 private void initializeChains() {
<span class="nc" id="L688">		int numChains = 5+gen.nextInt(5);</span>
<span class="nc bnc" id="L689" title="All 2 branches missed.">		for(int i = 0; i &lt; numChains; i++)</span>
		{
<span class="nc" id="L691">			Chain c =  new Chain(10+gen.nextInt(15));</span>
<span class="nc" id="L692">			c.points[0][0] = gen.nextDouble()*worldSize;</span>
<span class="nc" id="L693">			c.points[0][1] = gen.nextDouble()*worldSize;</span>
<span class="nc bnc" id="L694" title="All 2 branches missed.">			for(int j = 1; j &lt; c.length; j++)</span>
			{
<span class="nc" id="L696">				c.points[j][0] = c.points[j-1][0]+gen.nextGaussian()*5;</span>
<span class="nc" id="L697">				c.points[j][1] = c.points[j-1][1]+gen.nextGaussian()*5;</span>
			}
<span class="nc" id="L699">			chains.add(c);</span>
			
		}
	
<span class="nc" id="L703">	}</span>


<span class="nc" id="L706">	private class doListListener implements ListSelectionListener</span>
	 {
		 /*
		 theList.items.add(&quot;Place Food 130&quot;);
		 theList.items.add(&quot;Place Pheremone 20&quot;);
		 theList.items.add(&quot;Place Inorganic 70&quot;);
		 theList.items.add(&quot;Food Receptors, 30&quot;);
		 theList.items.add(&quot;Simple Flagella, 80&quot;);
		 theList.items.add(&quot;Senescence Seggregation, 40&quot;);
		 theList.items.add(&quot;Toxic Apoptosis, 400&quot;);
		 theList.items.add(&quot;Antibiotic Receptors, 70&quot;);
		 theList.items.add(&quot;Group Growth, 150&quot;);
		 theList.items.add(&quot;Aggression, 150&quot;);
		 theList.items.add(&quot;Cellular Walls, 90&quot;);
		 theList.items.add(&quot;Lysozymes, 110&quot;);
		 theList.items.add(&quot;Antibiotic Resistance, 150&quot;);
		 theList.items.add(&quot;Telomerase, 600&quot;);
		 theList.items.add(&quot;Group Attraction, 350&quot;);
		 theList.items.add(&quot;Complex Flagella, 200&quot;);
		 theList.items.add(&quot;Photosynthesis, 900&quot;);
		 theList.items.add(&quot;Triplication, 1500&quot;);
		 theList.items.add(&quot;Release Antibiotic, 2000&quot;);
		 theList.items.add(&quot;Enzymatic Revolution, 10000&quot;);
*/	
		public void valueChanged(ListSelectionEvent arg0) {
<span class="nc" id="L731">			infoing = false;</span>
<span class="nc bnc" id="L732" title="All 2 branches missed.">			if(doList.getSelectedIndex() == 0)</span>
			{
<span class="nc" id="L734">				description.setText(&quot;Place a small food particle on the field.\nThe cost is in evolution points\n&quot; +</span>
						&quot;You can choose to do this by clicking anywhere on the field.&quot;);
			}			
<span class="nc bnc" id="L737" title="All 2 branches missed.">			else if(doList.getSelectedIndex() == 1)</span>
			{
<span class="nc" id="L739">				description.setText(&quot;Place a pheremone molecule that all cells are attracted to.\nThe cost is in evolution points\n&quot; +</span>
						&quot;You can choose to do this by clicking anywhere on the field.&quot;);
			}
<span class="nc bnc" id="L742" title="All 2 branches missed.">			else if(doList.getSelectedIndex() == 2)</span>
			{
<span class="nc" id="L744">				description.setText(&quot;Place a clump of innorganic matterial.\nThe cost is in evolution points\n&quot; +</span>
						&quot;You can choose to do this by clicking anywhere on the field.&quot;);
			}
<span class="nc bnc" id="L747" title="All 2 branches missed.">			else if(doList.getSelectedIndex() == 3)</span>
			{
<span class="nc" id="L749">				description.setText(&quot;A cell evolves food receptors, attracting it to food if it is mobile.\nThe cost is in evolution points\n&quot; +</span>
						&quot;You can choose to do this by clicking anywhere on the field.&quot;);
			}
<span class="nc bnc" id="L752" title="All 2 branches missed.">			else if(doList.getSelectedIndex() == 4)</span>
			{
<span class="nc" id="L754">				description.setText(&quot;A cell is able to swim at medium velocity.\nThe cost is in evolution points\n&quot; +</span>
						&quot;You can choose to do this by clicking anywhere on the field.&quot;);
			}
<span class="nc bnc" id="L757" title="All 2 branches missed.">			else if(doList.getSelectedIndex() == 5)</span>
			{
<span class="nc" id="L759">				description.setText(&quot;Dying cells tend to move away from their siblings, causing them to free up resources.\nThe cost is in evolution points\n&quot; +</span>
						&quot;You can choose to do this by clicking anywhere on the field.&quot;);
			}
<span class="nc bnc" id="L762" title="All 2 branches missed.">			else if(doList.getSelectedIndex() == 6)</span>
			{
<span class="nc" id="L764">				description.setText(&quot;Cells that die leave behind toxic antibiotics which are harmfull to all cells.\nThe cost is in evolution points\n&quot; +</span>
						&quot;You can choose to do this by clicking anywhere on the field.&quot;);
			}
<span class="nc bnc" id="L767" title="All 2 branches missed.">			else if(doList.getSelectedIndex() == 7)</span>
			{
<span class="nc" id="L769">				description.setText(&quot;Antibiotic receptors allow your cell to sense antibiotics and to try to move away.\nThe cost is in evolution points\n&quot; +</span>
						&quot;You can choose to do this by clicking anywhere on the field.&quot;);
			}
<span class="nc bnc" id="L772" title="All 2 branches missed.">			else if(doList.getSelectedIndex()== 8)</span>
			{
<span class="nc" id="L774">				description.setText(&quot;Your cells grow faster when near their siblings due to a distribution of labor within the colony.\nThe cost is in evolution points\n&quot; +</span>
						&quot;You can choose to do this by clicking anywhere on the field.&quot;);
			}
<span class="nc bnc" id="L777" title="All 2 branches missed.">			else if(doList.getSelectedIndex() == 9)</span>
			{
<span class="nc" id="L779">				description.setText(&quot;Your cells are attracted to rival cells which are smaller in size, but tend to move away from bigger opponents.\nThe cost is in evolution points\n&quot; +</span>
						&quot;You can choose to do this by clicking anywhere on the field.&quot;);
			}
<span class="nc bnc" id="L782" title="All 2 branches missed.">			else if(doList.getSelectedIndex() == 10)</span>
			{
<span class="nc" id="L784">				description.setText(&quot;The evolution of cellular walls cause one cell to be more resistant to attacks by rival cells.\nThe cost is in evolution points\n&quot; +</span>
						&quot;You can choose to do this by clicking anywhere on the field.&quot;);
			}
<span class="nc bnc" id="L787" title="All 2 branches missed.">			else if(doList.getSelectedIndex() == 11)</span>
			{
<span class="nc" id="L789">				description.setText(&quot;Lysozymes are secreted when attacking rival cells. These enzymes make the opponent more vulnerable to attack.\nThe cost is in evolution points\n&quot; +</span>
						&quot;You can choose to do this by clicking anywhere on the field.&quot;);
			}
<span class="nc bnc" id="L792" title="All 2 branches missed.">			else if(doList.getSelectedIndex()== 12)</span>
			{
<span class="nc" id="L794">				description.setText(&quot;Antibiotic resistance reduces the negative effects of being next to antibiotic particles.\nThe cost is in evolution points\n&quot; +</span>
						&quot;You can choose to do this by clicking anywhere on the field.&quot;);
			}

<span class="nc bnc" id="L798" title="All 2 branches missed.">			else if(doList.getSelectedIndex() == 13)</span>
			{
<span class="nc" id="L800">				description.setText(&quot;Telomerase more than doubles the cell's longevity.\nThe cost is in evolution points\n&quot; +</span>
						&quot;You can choose to do this by clicking anywhere on the field.&quot;);
			}
<span class="nc bnc" id="L803" title="All 2 branches missed.">			else if(doList.getSelectedIndex() == 14)</span>
			{
<span class="nc" id="L805">				description.setText(&quot;Sibling receptors make your cells attracted to its siblings. This causes your cells to move in groups.\nThe cost is in evolution points\n&quot; +</span>
						&quot;You can choose to do this by clicking anywhere on the field.&quot;);
			}
<span class="nc bnc" id="L808" title="All 2 branches missed.">			else if(doList.getSelectedIndex()== 15)</span>
			{
<span class="nc" id="L810">				description.setText(&quot;Complex flagella evolution allows your cells to move at an increased rate.\nThe cost is in evolution points\n&quot; +</span>
						&quot;You can choose to do this by clicking anywhere on the field.&quot;);
			}
<span class="nc bnc" id="L813" title="All 2 branches missed.">			else if(doList.getSelectedIndex() == 16)</span>
			{
<span class="nc" id="L815">				description.setText(&quot;Photosynthesis allows your cells to slowly grow even in the absence of food\nThe cost is in evolution points\n&quot; +</span>
						&quot;You can choose to do this by clicking anywhere on the field.&quot;);
			}
<span class="nc bnc" id="L818" title="All 2 branches missed.">			else if(doList.getSelectedIndex() == 17)</span>
			{
<span class="nc" id="L820">				description.setText(&quot;Triplication causes your cells to split into three different daughter cells at once!\nThe cost is in evolution points\n&quot; +</span>
						&quot;You can choose to do this by clicking anywhere on the field.&quot;);
			}
<span class="nc bnc" id="L823" title="All 2 branches missed.">			else if(doList.getSelectedIndex() == 18)</span>
			{
<span class="nc" id="L825">				description.setText(&quot;Your cells release antibiotic particles in the direction of nearby rival cells.\nThe cost is in evolution points\n&quot; +</span>
						&quot;You can choose to do this by clicking anywhere on the field.&quot;);
			}
<span class="nc bnc" id="L828" title="All 2 branches missed.">			else if(doList.getSelectedIndex() == 19)</span>
			{
<span class="nc" id="L830">				description.setText(&quot;Your cells are able to metabolize inorganics as well as antibiotics and rival cells making them grow in almost all environments!\nThe cost is in evolution points\n&quot; +</span>
						&quot;You can choose to do this by clicking anywhere on the field.&quot;);
			}
<span class="nc" id="L833">			description.updateUI();</span>
			
<span class="nc" id="L835">		}</span>
		 
	 }
	
<span class="nc" id="L839">	 private class OptionList implements ListModel</span>
	 {
<span class="nc" id="L841">		 ArrayList&lt;String&gt; items = new ArrayList&lt;String&gt;();</span>
		public int getSize() {
			// TODO Auto-generated method stub
<span class="nc" id="L844">			return items.size();</span>
		}

		public Object getElementAt(int arg0) {
			// TODO Auto-generated method stub
<span class="nc" id="L849">			return items.get(arg0);</span>
		}

		public void addListDataListener(ListDataListener arg0) {
			// TODO Auto-generated method stub
			
<span class="nc" id="L855">		}</span>

		public void removeListDataListener(ListDataListener arg0) {
			// TODO Auto-generated method stub
			
<span class="nc" id="L860">		}</span>
		 
	 }

	 public void sendMessage(String m)
	 {
<span class="nc bnc" id="L866" title="All 2 branches missed.">		 if(S != null)</span>
<span class="nc" id="L867">			 S.sendMessage(m); </span>
<span class="nc" id="L868">	 }</span>

	private void playMP3(String name)
	{
<span class="nc" id="L872">		 currentMP3 = new MP3(name);</span>
<span class="nc" id="L873">	}</span>
	 
	private class ServerThread extends Thread
	 {
			Socket theSocket;
			PrintWriter out;
			BufferedReader in;
			Client theClient;
			
			public ServerThread(Socket theSock, Client G)
<span class="nc" id="L883">			{</span>
<span class="nc" id="L884">				theSocket = theSock;</span>
<span class="nc" id="L885">				theClient = G;</span>
<span class="nc" id="L886">				G.S = this;</span>
<span class="nc" id="L887">				theClient.setConnected(true);</span>
				//this.setPriority(Thread.MAX_PRIORITY);
				try {
<span class="nc" id="L890">					out = new PrintWriter(theSocket.getOutputStream());</span>
<span class="nc" id="L891">				} catch (IOException e) {</span>
					// TODO Auto-generated catch block
<span class="nc" id="L893">					e.printStackTrace();</span>
<span class="nc" id="L894">				}</span>
				try {
<span class="nc" id="L896">					in = new BufferedReader(new InputStreamReader(theSocket.getInputStream()));</span>
<span class="nc" id="L897">				} catch (IOException e) {</span>
					// TODO Auto-generated catch block
<span class="nc" id="L899">					e.printStackTrace();</span>
<span class="nc" id="L900">				}</span>

				
<span class="nc" id="L903">			}</span>
			
			public void run()
			{
<span class="nc bnc" id="L907" title="All 2 branches missed.">				while(!theSocket.isClosed())</span>
				{
<span class="nc" id="L909">					String incomming = &quot;&quot;;</span>
					try {
<span class="nc bnc" id="L911" title="All 2 branches missed.">						if(!theSocket.isClosed())</span>
							try{
<span class="nc" id="L913">							incomming = in.readLine();</span>
							}
<span class="nc" id="L915">							catch(java.net.SocketException e)</span>
							{
<span class="nc" id="L917">								System.err.println(&quot;Tried to read from a closed stream! Connection terminated.&quot;);</span>
<span class="nc" id="L918">								theSocket.close();</span>
<span class="nc" id="L919">							}</span>
						//process the incomming line by the client.
<span class="nc bnc" id="L921" title="All 2 branches missed.">						if(incomming != null)</span>
<span class="nc" id="L922">							theClient.analyzeServerMessage(incomming);</span>
						else
						{
<span class="nc" id="L925">							theClient.analyzeServerMessage(&quot;The connection was terminated by the server!&quot;);</span>
<span class="nc" id="L926">							theSocket.close();</span>
<span class="nc" id="L927">							theClient.setConnected(false);</span>
						}
<span class="nc" id="L929">					} catch (IOException e) {</span>
						// TODO Auto-generated catch block
<span class="nc" id="L931">						System.out.println(&quot;Client quit abruptly!&quot;);</span>
						
<span class="nc" id="L933">						e.printStackTrace();</span>
<span class="nc" id="L934">						System.exit(1);</span>
						
<span class="nc" id="L936">					}</span>
<span class="nc" id="L937">				}</span>
				
<span class="nc" id="L939">			}</span>
			
			public void sendMessage(String message)
			{
<span class="nc" id="L943">				out.println(message);</span>
<span class="nc" id="L944">				out.flush();</span>
<span class="nc" id="L945">			}</span>
			


			public void disconnect()
			{
				try {
<span class="nc" id="L952">					this.theSocket.close();</span>
<span class="nc" id="L953">				} catch (IOException e) {</span>
					// TODO Auto-generated catch block
<span class="nc" id="L955">					System.err.println(&quot;Problem disconnecting...&quot;);</span>
<span class="nc" id="L956">				}		</span>
<span class="nc" id="L957">			}</span>
			
	 }
	    
	
		public Image loadTransImage(String path)
		{
<span class="nc" id="L964">			Toolkit tk = Toolkit.getDefaultToolkit();</span>
<span class="nc" id="L965">			Image newImage = tk.getImage(path);</span>
<span class="nc" id="L966">			MediaTracker mediaTracker = new MediaTracker(this);</span>
<span class="nc" id="L967">			mediaTracker.addImage(newImage, 0);</span>
			try
			{
<span class="nc" id="L970">				mediaTracker.waitForID(0);</span>
			}
<span class="nc" id="L972">			catch (InterruptedException ie)</span>
			{
<span class="nc" id="L974">				System.err.println(ie);</span>
<span class="nc" id="L975">				System.exit(1);</span>
<span class="nc" id="L976">			}</span>
<span class="nc" id="L977">			return newImage;</span>
		}

		public void analyzeServerMessage(String incomming) 
		{
			//System.err.println(&quot;Got incomming: &quot;+incomming);
<span class="nc bnc" id="L983" title="All 4 branches missed.">			if(incomming.startsWith(&quot;Sound &quot;) &amp;&amp; incomming.length() &gt; 6)</span>
			{
<span class="nc" id="L985">				StringTokenizer tokener = new StringTokenizer(incomming.substring(6,incomming.length()), &quot;;&quot;);</span>
<span class="nc bnc" id="L986" title="All 2 branches missed.">				while(tokener.hasMoreTokens())</span>
				{
<span class="nc" id="L988">					Scanner S = new Scanner(tokener.nextToken());</span>
<span class="nc" id="L989">					String sound = S.next();</span>
<span class="nc" id="L990">					int x = S.nextInt();</span>
<span class="nc" id="L991">					int y = S.nextInt();</span>
<span class="nc bnc" id="L992" title="All 4 branches missed.">					if(x == -1 &amp;&amp; y == -1)</span>
					{
<span class="nc" id="L994">						sfx.playSound(sound);</span>
					}
					else
<span class="nc bnc" id="L997" title="All 8 branches missed.">					if((x&gt;= left &amp;&amp; x &lt;= left+700)&amp;&amp;(y&gt;= top &amp;&amp; y &lt;= top+700))</span>
					{
<span class="nc" id="L999">						sfx.playSound(sound);</span>
<span class="nc" id="L1000">						System.err.println(&quot;Playing sound...&quot;+sound+&quot; x &quot;+x+&quot; y &quot;+y);</span>
					}
					
<span class="nc" id="L1003">				}</span>
<span class="nc" id="L1004">			}</span>
<span class="nc bnc" id="L1005" title="All 2 branches missed.">			else if(incomming.startsWith(&quot;MP3 &quot;))</span>
			{
<span class="nc" id="L1007">				playMP3(incomming.substring(4,incomming.length()));</span>
				
			}
<span class="nc bnc" id="L1010" title="All 2 branches missed.">			else if(incomming.startsWith(&quot;Message &quot;))</span>
			{
<span class="nc" id="L1012">				Scanner S = new Scanner(incomming.substring(8,incomming.length()));</span>
<span class="nc" id="L1013">				messages.add(new Message(S.nextInt(), S.nextLine()));</span>
<span class="nc" id="L1014">				Field.updateUI();</span>
<span class="nc" id="L1015">			}</span>
<span class="nc bnc" id="L1016" title="All 2 branches missed.">			else if(incomming.startsWith(&quot;Message2&quot;))</span>
			{
<span class="nc" id="L1018">				Scanner S = new Scanner(incomming.substring(9,incomming.length()));</span>
<span class="nc" id="L1019">				messages.add(new Message(S.nextInt(), S.nextLine(),true));</span>
<span class="nc" id="L1020">				chart = true;</span>
<span class="nc" id="L1021">				Field.updateUI();</span>
<span class="nc" id="L1022">			}</span>
<span class="nc bnc" id="L1023" title="All 2 branches missed.">			else if(incomming.startsWith(&quot;Size&quot;))</span>
			{
<span class="nc" id="L1025">				this.worldSize = Integer.parseInt(incomming.substring(4, incomming.length()));</span>
<span class="nc" id="L1026">				initializeChains();</span>
<span class="nc" id="L1027">				inializeElevation();</span>
				
<span class="nc" id="L1029">				initializeBlobs();</span>
			}
<span class="nc bnc" id="L1031" title="All 2 branches missed.">			else if(incomming.startsWith(&quot;Center&quot;))</span>
			{
<span class="nc" id="L1033">				Scanner S = new Scanner(incomming.substring(6, incomming.length()));</span>
<span class="nc bnc" id="L1034" title="All 2 branches missed.">				if(infoing)</span>
				{
<span class="nc" id="L1036">					this.left = S.nextInt()-350;</span>
<span class="nc" id="L1037">					this.top = S.nextInt()-350;</span>
				}
<span class="nc" id="L1039">			}</span>
<span class="nc bnc" id="L1040" title="All 2 branches missed.">			else if(incomming.startsWith(&quot;Update&quot;))</span>
			{
<span class="nc" id="L1042">				StringTokenizer tokener = new StringTokenizer(incomming.substring(7,incomming.length()), &quot;;&quot;);</span>
<span class="nc" id="L1043">				int index = 0;</span>
<span class="nc bnc" id="L1044" title="All 2 branches missed.">				while(tokener.hasMoreTokens())</span>
				{
<span class="nc" id="L1046">					Scanner S = new Scanner(tokener.nextToken());</span>
<span class="nc" id="L1047">					int color = Integer.parseInt(S.next());</span>
<span class="nc" id="L1048">					time = Integer.parseInt(S.next());</span>
<span class="nc" id="L1049">					int theScore = Integer.parseInt(S.next());</span>
<span class="nc bnc" id="L1050" title="All 2 branches missed.">					if(theScore &gt; maxScore) maxScore = theScore;</span>
<span class="nc bnc" id="L1051" title="All 2 branches missed.">					if(scores.size() &lt;= index)</span>
					{
<span class="nc" id="L1053">						ArrayList&lt;ScorePoint&gt; theList = new ArrayList&lt;ScorePoint&gt;();</span>
<span class="nc" id="L1054">						scores.add(theList);</span>
					}
<span class="nc" id="L1056">					scores.get(index).add(new ScorePoint(time,theScore,color));</span>
<span class="nc bnc" id="L1057" title="All 2 branches missed.">					if(index == 0)</span>
					{
<span class="nc" id="L1059">						Score.setText(&quot;Score &quot;+theScore);</span>
<span class="nc" id="L1060">						Time.setText(&quot;Time &quot;+time);</span>
<span class="nc bnc" id="L1061" title="All 2 branches missed.">						if(theScore &lt; 100)</span>
<span class="nc" id="L1062">							Score.setForeground(Color.RED);</span>
<span class="nc bnc" id="L1063" title="All 4 branches missed.">						else if(theScore &gt;= 100 &amp;&amp; theScore &lt; 200)</span>
<span class="nc" id="L1064">							Score.setForeground(Color.ORANGE);</span>
<span class="nc bnc" id="L1065" title="All 4 branches missed.">						else if(theScore &gt;= 200 &amp;&amp; theScore &lt; 400)</span>
<span class="nc" id="L1066">							Score.setForeground(Color.BLACK);</span>
<span class="nc bnc" id="L1067" title="All 4 branches missed.">						else if(theScore &gt;= 400 &amp;&amp; theScore &lt; 600)</span>
<span class="nc" id="L1068">							Score.setForeground(Color.GREEN);</span>
						else 
<span class="nc" id="L1070">							Score.setForeground(Color.GREEN.brighter());</span>
<span class="nc" id="L1071">						double Evo =Double.parseDouble(S.next());</span>
<span class="nc bnc" id="L1072" title="All 2 branches missed.">						if(Evo &lt; 150)</span>
<span class="nc" id="L1073">							Power.setForeground(Color.RED);</span>
<span class="nc bnc" id="L1074" title="All 4 branches missed.">						else if(Evo &gt;= 150 &amp;&amp; Evo &lt; 500)</span>
<span class="nc" id="L1075">							Power.setForeground(Color.ORANGE);</span>
<span class="nc bnc" id="L1076" title="All 4 branches missed.">						else if(Evo &gt;= 500 &amp;&amp; Evo &lt; 1000)</span>
<span class="nc" id="L1077">							Power.setForeground(Color.BLACK);</span>
<span class="nc bnc" id="L1078" title="All 4 branches missed.">						else if(Evo &gt;= 1000 &amp;&amp; Evo &lt; 2000)</span>
<span class="nc" id="L1079">							Power.setForeground(Color.GREEN);</span>
						else 
<span class="nc" id="L1081">							Power.setForeground(Color.GREEN.brighter());</span>
<span class="nc" id="L1082">						Power.setText(&quot;Evolution &quot;+(int)Evo);</span>
<span class="nc" id="L1083">						Time.updateUI();</span>
<span class="nc" id="L1084">						Score.updateUI();</span>
<span class="nc" id="L1085">						Power.updateUI();</span>
<span class="nc bnc" id="L1086" title="All 4 branches missed.">						if(S.hasNext() &amp;&amp; infoing)</span>
						{
<span class="nc" id="L1088">							String d = S.next();</span>
<span class="nc bnc" id="L1089" title="All 2 branches missed.">							while(S.hasNext())</span>
							{
<span class="nc" id="L1091">								d+=&quot; &quot;+S.next();</span>
							}
							try
							{
<span class="nc" id="L1095">								description.setText(d);</span>
<span class="nc" id="L1096">								description.updateUI();</span>
							}
<span class="nc" id="L1098">							catch(NullPointerException e)</span>
							{
								
<span class="nc" id="L1101">							}</span>
						}
					}
<span class="nc" id="L1104">					index++;</span>
<span class="nc" id="L1105">				}</span>
				
<span class="nc" id="L1107">			}</span>

<span class="nc bnc" id="L1109" title="All 2 branches missed.">			else if(incomming.startsWith(&quot;Circles&quot;))</span>
			{
<span class="nc" id="L1111">				StringTokenizer tokener = new StringTokenizer(incomming.substring(8,incomming.length()), &quot;;&quot;);</span>
<span class="nc bnc" id="L1112" title="All 2 branches missed.">				while(tokener.hasMoreTokens())</span>
				{
<span class="nc" id="L1114">					Scanner S = new Scanner(tokener.nextToken());</span>
<span class="nc" id="L1115">					int id = S.nextInt();</span>
<span class="nc" id="L1116">					double x = S.nextDouble();</span>
<span class="nc" id="L1117">					double y = S.nextDouble();</span>
<span class="nc" id="L1118">					double size = S.nextDouble();</span>
<span class="nc" id="L1119">					int color = S.nextInt();</span>
<span class="nc bnc" id="L1120" title="All 2 branches missed.">					if(size &gt;= 8)</span>
					{
<span class="nc" id="L1122">						addCircle(new drawCircle(x,y,size,color, id));</span>
					}
					else
					{
<span class="nc" id="L1126">						removeWithId(id);</span>
					}
					
<span class="nc" id="L1129">				}</span>
<span class="nc" id="L1130">				UpdateChains();</span>
<span class="nc" id="L1131">				minimap.updateUI();</span>
<span class="nc" id="L1132">				Field.updateUI();</span>

			}
			
<span class="nc" id="L1136">		}</span>

		private void removeWithId(int id)
		{
<span class="nc bnc" id="L1140" title="All 2 branches missed.">			for(int i = 0; i &lt; circles.size(); i++)</span>
			{
<span class="nc bnc" id="L1142" title="All 2 branches missed.">				if(circles.get(i).id == id)</span>
				{
<span class="nc" id="L1144">					circles.remove(i);</span>
<span class="nc" id="L1145">					return;</span>
				}
			}
<span class="nc" id="L1148">		}</span>
		
		private void addCircle(drawCircle d)
		{
<span class="nc" id="L1152">			boolean doAdd = true;</span>
<span class="nc bnc" id="L1153" title="All 2 branches missed.">			for(int i = 0; i &lt; circles.size(); i++)</span>
			{
<span class="nc bnc" id="L1155" title="All 2 branches missed.">				if(circles.get(i).id == d.id)</span>
				{
<span class="nc" id="L1157">					doAdd = false;</span>
<span class="nc" id="L1158">					circles.get(i).c = d.c;</span>
<span class="nc" id="L1159">					circles.get(i).size = d.size;</span>
<span class="nc" id="L1160">					circles.get(i).x = d.x;</span>
<span class="nc" id="L1161">					circles.get(i).y = d.y;</span>
<span class="nc" id="L1162">					break;</span>
				}
			}
<span class="nc bnc" id="L1165" title="All 2 branches missed.">			if(doAdd)</span>
<span class="nc" id="L1166">				circles.add(d);</span>
<span class="nc" id="L1167">		}</span>

<span class="nc" id="L1169">		private class JField extends JPanel</span>
		{
		  		
			public void paintComponent(Graphics g)
			{
<span class="nc" id="L1174">				super.paintComponent(g);</span>
<span class="nc" id="L1175">				Graphics2D g2 = (Graphics2D)g;</span>
<span class="nc bnc" id="L1176" title="All 4 branches missed.">				if(connected|| chart)</span>
				{
<span class="nc" id="L1178">					g2.setColor(new Color(200,230,230));</span>
<span class="nc" id="L1179">					g2.fillRect(0,0,this.getWidth(),this.getHeight());</span>
	
					//UpdateChains();
	
<span class="nc bnc" id="L1183" title="All 2 branches missed.">					for(int k = elevation.size()-1; k &gt;= 0; k--)</span>
					{
	//					for(int j = elevation.get(i).size()-1; j &gt;= 0 ;j--)
<span class="nc" id="L1186">						ArrayList&lt;ScorePoint&gt; level = elevation.get(k);</span>
<span class="nc" id="L1187">						Color c2 = Color.BLACK;</span>
<span class="nc bnc" id="L1188" title="All 2 branches missed.">						if(k == 0)</span>
<span class="nc" id="L1189">							c2= new Color(175,205,205);</span>
<span class="nc bnc" id="L1190" title="All 2 branches missed.">						else if(k == 1)</span>
<span class="nc" id="L1191">							c2= new Color(180,210,210);</span>
<span class="nc bnc" id="L1192" title="All 2 branches missed.">						else if(k == 2)</span>
<span class="nc" id="L1193">							c2= new Color(185,215,215);</span>
<span class="nc bnc" id="L1194" title="All 2 branches missed.">						else if(k == 3)</span>
<span class="nc" id="L1195">							c2= new Color(190,220,220);</span>
						else
<span class="nc" id="L1197">							c2= new Color(195,225,225);</span>
<span class="nc" id="L1198">						g2.setColor(c2);</span>
						
<span class="nc bnc" id="L1200" title="All 2 branches missed.">						for(int j = 0; j &lt; level.size(); j++)</span>
	//					for(int j = elevation.get(k).size()-1; j &gt;= 0 ;j--)
						{
	//						g2.setColor(new Color(gen.nextInt(256*256*256)));
<span class="nc" id="L1204">							int size = level.get(j).color;</span>
<span class="nc bnc" id="L1205" title="All 8 branches missed.">							if(level.get(j).x &lt; left+700+(size/2) &amp;&amp; level.get(j).x &gt; left - (size/2) &amp;&amp; level.get(j).y &lt; top + 700 +(size/2)  &amp;&amp; level.get(j).y&gt; top -(size/2) )</span>
<span class="nc" id="L1206">								g2.fillOval(level.get(j).x-(size/2)-left,level.get(j).y-(size/2)-top,size,size);</span>
	
						//	System.err.println(&quot;Drawing level &quot;+k+&quot; index &quot;+j+&quot; &quot;+level.get(j).x+&quot; &quot;+level.get(j).y+&quot; &quot;+level.get(j).color+&quot; with color &quot;+c2.getRed()+&quot; &quot;+c2.getGreen()+&quot; &quot;+c2.getBlue());
						}
					}
<span class="nc" id="L1211">					g2.setStroke(new BasicStroke(2,BasicStroke.CAP_ROUND, BasicStroke.JOIN_ROUND));</span>
<span class="nc bnc" id="L1212" title="All 2 branches missed.">					for(int k = 0; k &lt; blobs.size(); k++)</span>
					{
	
<span class="nc" id="L1215">						double[] spoints = blobs.get(k).generate();</span>
<span class="nc bnc" id="L1216" title="All 2 branches missed.">						for(int i = 1; i &lt; spoints.length/3; i++)</span>
						{
<span class="nc" id="L1218">							g2.setColor(new Color(200-gen.nextInt(45),230-gen.nextInt(45),230-gen.nextInt(45)));</span>
<span class="nc" id="L1219">							g2.drawLine(((int)spoints[(i-1)*3])-left, ((int)spoints[(i-1)*3+1])-top, (int)spoints[(i)*3]-left, (int)spoints[(i)*3+1]-top);</span>
						}
					
					}
<span class="nc" id="L1223">					g2.setStroke(new BasicStroke(2,BasicStroke.CAP_ROUND, BasicStroke.JOIN_ROUND));</span>
<span class="nc bnc" id="L1224" title="All 2 branches missed.">					for(int i = 0; i &lt; chains.size(); i++)</span>
					{
<span class="nc bnc" id="L1226" title="All 2 branches missed.">						for(int j = 0; j &lt; chains.get(i).length-1; j++)</span>
						{
<span class="nc" id="L1228">								g2.setColor(new Color(170+gen.nextInt(30),190+gen.nextInt(30),190+gen.nextInt(30)));</span>
<span class="nc" id="L1229">								g2.drawLine((int)chains.get(i).points[j][0]-left,(int)chains.get(i).points[j][1]-top,(int)chains.get(i).points[j+1][0]-left,(int)chains.get(i).points[j+1][1]-top);</span>
						}
					}
						
<span class="nc bnc" id="L1233" title="All 2 branches missed.">					for(int i = 0; i &lt; circles.size(); i++)</span>
					{
<span class="nc" id="L1235">						drawCircle c = circles.get(i);</span>
<span class="nc" id="L1236">						int re = c.getC().getRed();</span>
<span class="nc" id="L1237">						int gr = c.getC().getGreen();</span>
<span class="nc" id="L1238">						int bl = c.getC().getBlue();</span>
						
<span class="nc bnc" id="L1240" title="All 4 branches missed.">						if((c.getX()+c.getSize()/2 &gt; left &amp;&amp; c.getX()-c.getSize()/2 &lt; left+Field.getWidth())&amp;&amp;</span>
<span class="nc bnc" id="L1241" title="All 4 branches missed.">								(c.getY()+c.getSize()/2 &gt; top &amp;&amp; c.getY()-c.getSize()/2 &lt; top+Field.getHeight()))</span>
						{
							
<span class="nc" id="L1244">							g2.setColor(c.getC());</span>
<span class="nc" id="L1245">							g2.fillOval((int)(c.getX()-c.getSize()/2 -left), (int)(c.getY()-c.getSize()/2 - top),(int)(c.getSize()),(int)(c.getSize()));</span>
<span class="nc bnc" id="L1246" title="All 2 branches missed.">							if(c.id &gt;= 0)</span>
							{
<span class="nc" id="L1248">								g2.setColor(new Color(re+20,gr+20,bl+20));</span>
<span class="nc" id="L1249">								g2.fillOval((int)(c.getX()-c.getSize()/2 -left+1), (int)(c.getY()-c.getSize()/2 - top+1),(int)(c.getSize()-2),(int)(c.getSize()-2));</span>
<span class="nc" id="L1250">								g2.setColor(new Color(re+40,gr+40,bl+40));</span>
<span class="nc" id="L1251">								g2.fillOval((int)(c.getX()-c.getSize()/2 -left+2), (int)(c.getY()-c.getSize()/2 - top+2),(int)(c.getSize()-4),(int)(c.getSize()-4));</span>
<span class="nc bnc" id="L1252" title="All 2 branches missed.">								if(c.getSize() &gt;= 10)</span>
								{
<span class="nc bnc" id="L1254" title="All 2 branches missed.">									for(int j = 0; j &lt; c.getSize(); j+=4)</span>
									{
<span class="nc" id="L1256">										g2.setColor(new Color(c.getC().getRed()+gen.nextInt(10)-gen.nextInt(10),c.getC().getGreen()+gen.nextInt(10)-gen.nextInt(10),c.getC().getBlue()+gen.nextInt(10)-gen.nextInt(10)));</span>
<span class="nc" id="L1257">										g2.fillOval((int)(c.getX()-gen.nextDouble()*(c.getSize()/2)+2 -left), (int)(c.getY()-gen.nextDouble()*(c.getSize()/2)+2 - top),(int)(c.getSize()/4+gen.nextInt(2)),(int)(c.getSize()/4+gen.nextInt(2)));</span>
									}
<span class="nc bnc" id="L1259" title="All 2 branches missed.">									for(int j = 0; j &lt; c.getSize(); j+=6)</span>
									{
<span class="nc" id="L1261">										g2.setColor(new Color(c.getC().getRed()+gen.nextInt(10)-gen.nextInt(10),c.getC().getGreen()+gen.nextInt(10)-gen.nextInt(10),c.getC().getBlue()+gen.nextInt(10)-gen.nextInt(10)));</span>
<span class="nc" id="L1262">										g2.drawLine((int)(c.getX()-gen.nextDouble()*(c.size/2)+4 -left), (int)(c.getY()-gen.nextDouble()*(c.getSize()/2)+4 - top),(int)(c.getX()+gen.nextDouble()*(c.size/2)-4-left), (int)(c.getY()+gen.nextDouble()*(c.size/2)-4 - top));</span>
									}
									
								}
							    //System.err.println(&quot;Drawing circle &quot;+c.x+&quot; &quot;+c.y+&quot; &quot;+c.size);
							}
							else
							{
								
<span class="nc bnc" id="L1271" title="All 6 branches missed.">								if(re + 40 &lt; 256 &amp;&amp; gr + 40 &lt; 256&amp;&amp; bl + 40 &lt; 256 )</span>
								{
<span class="nc" id="L1273">									g2.setColor(new Color(re+10,gr+10,bl+10));</span>
<span class="nc" id="L1274">									g2.fillOval((int)(c.getX()-c.getSize()/2 -left+2), (int)(c.getY()-c.getSize()/2 - top+2),(int)(c.getSize()-4),(int)(c.getSize()-4));</span>
<span class="nc" id="L1275">									g2.setColor(new Color(re+20,gr+20,bl+20));</span>
<span class="nc" id="L1276">									g2.fillOval((int)(c.getX()-c.getSize()/2 -left+4), (int)(c.getY()-c.getSize()/2 - top+4),(int)(c.getSize()-8),(int)(c.getSize()-8));</span>
<span class="nc" id="L1277">									g2.setColor(new Color(re+30,gr+30,bl+30));</span>
<span class="nc" id="L1278">									g2.fillOval((int)(c.getX()-c.getSize()/2 -left+6), (int)(c.getY()-c.getSize()/2 - top+6),(int)(c.getSize()-12),(int)(c.getSize()-12));</span>
<span class="nc" id="L1279">									g2.setColor(new Color(re+40,gr+40,bl+40));</span>
<span class="nc" id="L1280">									g2.fillOval((int)(c.getX()-c.getSize()/2 -left+8), (int)(c.getY()-c.getSize()/2 - top+8),(int)(c.getSize()-16),(int)(c.getSize()-16));</span>
								}
								else
								{
<span class="nc" id="L1284">									g2.setColor(new Color(re-10,gr-10,bl-10));</span>
<span class="nc" id="L1285">									g2.fillOval((int)(c.getX()-c.getSize()/2 -left+2), (int)(c.getY()-c.getSize()/2 - top+2),(int)(c.getSize()-4),(int)(c.getSize()-4));</span>
<span class="nc" id="L1286">									g2.setColor(new Color(re-20,gr-20,bl-20));</span>
<span class="nc" id="L1287">									g2.fillOval((int)(c.getX()-c.getSize()/2 -left+4), (int)(c.getY()-c.getSize()/2 - top+4),(int)(c.getSize()-8),(int)(c.getSize()-8));</span>
<span class="nc" id="L1288">									g2.setColor(new Color(re-30,gr-30,bl-30));</span>
<span class="nc" id="L1289">									g2.fillOval((int)(c.getX()-c.getSize()/2 -left+6), (int)(c.getY()-c.getSize()/2 - top+6),(int)(c.getSize()-12),(int)(c.getSize()-12));</span>
<span class="nc" id="L1290">									g2.setColor(new Color(re-40,gr-40,bl-40));</span>
<span class="nc" id="L1291">									g2.fillOval((int)(c.getX()-c.getSize()/2 -left+8), (int)(c.getY()-c.getSize()/2 - top+8),(int)(c.getSize()-16),(int)(c.getSize()-16));</span>
									
								}
							}
						}
						
					}
					
<span class="nc bnc" id="L1299" title="All 2 branches missed.">					for(int i = 0; i &lt; messages.size(); i++)</span>
					{
<span class="nc" id="L1301">						Message m = messages.get(i);</span>
<span class="nc bnc" id="L1302" title="All 2 branches missed.">						if(messages.get(i).permanent)</span>
						{
<span class="nc" id="L1304">							g2.setFont(new Font(&quot;Halvetica&quot;,Font.ITALIC,22));</span>
<span class="nc" id="L1305">							g2.setColor(Color.lightGray);</span>
<span class="nc" id="L1306">							g2.drawString(messages.get(i).message, 51,51);						</span>
<span class="nc" id="L1307">							g2.setColor(messages.get(i).c);</span>
<span class="nc" id="L1308">							g2.drawString(messages.get(i).message, 50,50);						</span>
						
<span class="nc" id="L1310">							g2.setFont(new Font(&quot;Halvetica&quot;,Font.PLAIN,12));</span>
						}
						else
						{
<span class="nc bnc" id="L1314" title="All 2 branches missed.">							if(System.currentTimeMillis()-m.time &lt; 3000)</span>
							{
<span class="nc" id="L1316">								g2.setColor(Color.LIGHT_GRAY);</span>
<span class="nc" id="L1317">								g2.drawString(messages.get(i).message, 21,21+i*20);</span>
<span class="nc" id="L1318">								g2.setColor(messages.get(i).c);</span>
<span class="nc" id="L1319">								g2.drawString(messages.get(i).message, 20,20+i*20);</span>
	
							}
							else
<span class="nc" id="L1323">								messages.remove(i);</span>
						}
					}
					
<span class="nc bnc" id="L1327" title="All 2 branches missed.">					if(chart)</span>
					{
						
<span class="nc bnc" id="L1330" title="All 2 branches missed.">						for(int j = 0; j &lt; scores.size(); j++ )</span>
						{
<span class="nc" id="L1332">							g2.setColor(new Color(scores.get(j).get(0).color));</span>
<span class="nc" id="L1333">							ArrayList&lt;ScorePoint&gt; list = scores.get(j);</span>
<span class="nc bnc" id="L1334" title="All 2 branches missed.">							for(int i = 0; i &lt; list.size()-1; i++)</span>
							{
<span class="nc" id="L1336">								g2.drawLine(((list.get(i).x*500)/time)+100, 600-((list.get(i).y*500)/maxScore),((list.get(i+1).x*500)/time) +100, 600-((list.get(i+1).y*500)/maxScore));</span>
							}
<span class="nc" id="L1338">							g2.setColor(new Color(scores.get(j).get(0).color).brighter());</span>
<span class="nc bnc" id="L1339" title="All 2 branches missed.">							for(int i = 0; i &lt; list.size()-1; i++)</span>
							{
<span class="nc" id="L1341">								g2.drawLine(((list.get(i).x*500)/time)+99, 599-((list.get(i).y*500)/maxScore),((list.get(i+1).x*500)/time) +99, 599-((list.get(i+1).y*500)/maxScore));</span>
							}
						}
<span class="nc" id="L1344">						g2.setFont(new Font(&quot;Halvetica&quot;, Font.PLAIN, 10));</span>
<span class="nc" id="L1345">						g2.setColor(Color.BLACK);</span>
<span class="nc bnc" id="L1346" title="All 2 branches missed.">						for(int i = 0; i &lt; 10; i++)</span>
						{
<span class="nc" id="L1348">							g2.drawString(&quot;&quot;+(maxScore-(i*(maxScore/10))),60,100+i*50);</span>
						}
<span class="nc bnc" id="L1350" title="All 2 branches missed.">						for(int i = 0; i &lt; 11; i++)</span>
						{
<span class="nc" id="L1352">							g2.drawString(&quot;&quot;+(i*(scores.get(0).get(scores.get(0).size()-1).x/10)),100+i*50,620);</span>
						}
					}
				}
<span class="nc bnc" id="L1356" title="All 4 branches missed.">				if(!connected &amp;&amp; !chart)</span>
				{
<span class="nc" id="L1358">					g2.setColor(Color.BLACK);</span>
<span class="nc" id="L1359">					g2.fillRect(0,0,this.getWidth(),this.getHeight());</span>
<span class="nc" id="L1360">					g2.setFont(new Font(&quot;Halvetica&quot;, Font.ITALIC, 80));</span>
<span class="nc" id="L1361">					g2.setColor(Color.LIGHT_GRAY);</span>
<span class="nc" id="L1362">					g2.drawString(&quot;Cell Wars!!&quot;,31,81);</span>
<span class="nc" id="L1363">					g2.setColor(Color.RED);</span>
<span class="nc" id="L1364">					g2.drawString(&quot;Cell Wars!!&quot;,30,80);</span>
<span class="nc" id="L1365">					g2.drawImage(loadTransImage(&quot;cell.png&quot;), 30,105, null);</span>
<span class="nc" id="L1366">					g2.setFont(new Font(&quot;Halvetica&quot;, Font.ITALIC, 80));</span>
<span class="nc" id="L1367">					g2.setColor(Color.WHITE);</span>
<span class="nc" id="L1368">					g2.setFont(new Font(&quot;Halvetica&quot;, Font.BOLD, 16));</span>
<span class="nc" id="L1369">					g2.drawString(&quot;Welcome to CellWars by Max Shokhirev (c).&quot;, 30, 510);</span>
<span class="nc" id="L1370">					g2.setFont(new Font(&quot;Halvetica&quot;, Font.PLAIN, 12));</span>
<span class="nc" id="L1371">					g2.drawString(&quot;Start the game by selecting connect from the menu...&quot;, 30, 535);</span>
<span class="nc" id="L1372">					g2.drawString(&quot;Once connected, you will see your cell surrounded by a bunch of particles. If other people have joined, you must\n&quot;,30,550);</span>
<span class="nc" id="L1373">					g2.drawString(&quot;play until someone loses all of their cells. At first, your cells are immoble and cannot detect food (this is bad!).&quot;,30,565);</span>
<span class="nc" id="L1374">					g2.drawString(		&quot;To evolve a trait in one of your cells, simply pick the trait from the list and click on one of your cells. You will\n&quot;,30,580);</span>
<span class="nc" id="L1375">					g2.drawString(		&quot;need to have enough evolution points for each trait. As your cells grow, they will divide and die from old age. \n&quot;,30,595);</span>
<span class="nc" id="L1376">					g2.drawString(		&quot;New cells will retain the properties of the cell they split from. It will be up to you to choose which traits to evolve\n&quot;,30,610);</span>
<span class="nc" id="L1377">					g2.drawString(		&quot;and to choose which cells will recieve the benefit of a new trait. As time goes on, global events will occur that \n&quot;,30,625);</span>
<span class="nc" id="L1378">					g2.drawString(		&quot;facilitate the game (i.e. pheremone trails, toxic contamination, and visits from killer alien cells). GLHF.&quot;,30, 640);</span>
<span class="nc" id="L1379">					g2.setFont(new Font(&quot;Halvetica&quot;, Font.PLAIN, 22));</span>
<span class="nc" id="L1380">					g2.setColor(Color.RED);</span>
<span class="nc" id="L1381">					g2.drawString(&quot;Particles...&quot;, 550, 75);</span>
<span class="nc" id="L1382">					g2.setFont(new Font(&quot;Halvetica&quot;, Font.BOLD, 16));</span>
<span class="nc" id="L1383">					g2.setColor(Color.WHITE);</span>
<span class="nc" id="L1384">					g2.drawString(&quot;Cell = &quot;, 500, 110);</span>
<span class="nc" id="L1385">					int team = 0;</span>
<span class="nc" id="L1386">					int re = 123*(team+1)*((team+1)*19) % 256;</span>
<span class="nc" id="L1387">					int gr = 23*(team+1)*((team+1)*13) % 256;</span>
<span class="nc" id="L1388">					int bl = 51*(team+1)*((team+1)*3) % 256;</span>
<span class="nc" id="L1389">					Point c = new Point(650,100);</span>
<span class="nc" id="L1390">					Color col = new Color(re+gr*256+bl*(256*256));</span>
<span class="nc" id="L1391">					re = col.getRed();</span>
<span class="nc" id="L1392">					gr = col.getGreen();</span>
<span class="nc" id="L1393">					bl = col.getBlue();</span>
<span class="nc" id="L1394">					int size = 20;</span>
<span class="nc" id="L1395">					g2.setColor(new Color(re+20,gr+20,bl+20));</span>
<span class="nc" id="L1396">					g2.fillOval((int)(c.getX()-size/2 +1), (int)(c.getY()-size/2 +1),(int)(size-2),(int)(size-2));</span>
<span class="nc" id="L1397">					g2.setColor(new Color(re+40,gr+40,bl+40));</span>
<span class="nc" id="L1398">					g2.fillOval((int)(c.getX()-size/2 +2), (int)(c.getY()-size/2 +2),(int)(size-4),(int)(size-4));</span>
					{
<span class="nc bnc" id="L1400" title="All 2 branches missed.">						for(int j = 0; j &lt; size; j+=4)</span>
						{
<span class="nc" id="L1402">							g2.setColor(new Color(re+gen.nextInt(10)-gen.nextInt(10),gr+gen.nextInt(10)-gen.nextInt(10),bl+gen.nextInt(10)-gen.nextInt(10)));</span>
<span class="nc" id="L1403">							g2.fillOval((int)(c.getX()-gen.nextDouble()*(size/2)+2 -left), (int)(c.getY()-gen.nextDouble()*(size/2)+2 - top),(int)(size/4+gen.nextInt(2)),(int)(size/4+gen.nextInt(2)));</span>
						}
<span class="nc bnc" id="L1405" title="All 2 branches missed.">						for(int j = 0; j &lt; size; j+=6)</span>
						{
<span class="nc" id="L1407">							g2.setColor(new Color(re+gen.nextInt(10)-gen.nextInt(10),gr+gen.nextInt(10)-gen.nextInt(10),bl+gen.nextInt(10)-gen.nextInt(10)));</span>
<span class="nc" id="L1408">							g2.drawLine((int)(c.getX()-gen.nextDouble()*(size/2)+4 -left), (int)(c.getY()-gen.nextDouble()*(size/2)+4 - top),(int)(c.getX()+gen.nextDouble()*(size/2)-4-left), (int)(c.getY()+gen.nextDouble()*(size/2)-4 - top));</span>
						}
					}
<span class="nc" id="L1411">					g2.setColor(Color.WHITE);</span>
<span class="nc" id="L1412">					g2.drawString(&quot;Food = &quot;, 500, 160);</span>
<span class="nc" id="L1413">					team = -1;</span>
<span class="nc bnc" id="L1414" title="All 2 branches missed.">					if(team &lt; 0)</span>
<span class="nc" id="L1415">						team = -(team+10);</span>
<span class="nc" id="L1416">					re = 123*(team+1)*((team+1)*19) % 256;</span>
<span class="nc" id="L1417">					gr = 23*(team+1)*((team+1)*13) % 256;</span>
<span class="nc" id="L1418">					bl = 51*(team+1)*((team+1)*3) % 256;</span>
<span class="nc" id="L1419">					c = new Point(650,150);</span>
<span class="nc bnc" id="L1420" title="All 6 branches missed.">					if(re + 40 &lt; 256 &amp;&amp; gr + 40 &lt; 256&amp;&amp; bl + 40 &lt; 256 )</span>
					{
<span class="nc" id="L1422">						g2.setColor(new Color(re+10,gr+10,bl+10));</span>
<span class="nc" id="L1423">						g2.fillOval((int)(c.getX()-size/2 -left+2), (int)(c.getY()-size/2 - top+2),(int)(size-4),(int)(size-4));</span>
<span class="nc" id="L1424">						g2.setColor(new Color(re+20,gr+20,bl+20));</span>
<span class="nc" id="L1425">						g2.fillOval((int)(c.getX()-size/2 -left+4), (int)(c.getY()-size/2 - top+4),(int)(size-8),(int)(size-8));</span>
<span class="nc" id="L1426">						g2.setColor(new Color(re+30,gr+30,bl+30));</span>
<span class="nc" id="L1427">						g2.fillOval((int)(c.getX()-size/2 -left+6), (int)(c.getY()-size/2 - top+6),(int)(size-12),(int)(size-12));</span>
<span class="nc" id="L1428">						g2.setColor(new Color(re+40,gr+40,bl+40));</span>
<span class="nc" id="L1429">						g2.fillOval((int)(c.getX()-size/2 -left+8), (int)(c.getY()-size/2 - top+8),(int)(size-16),(int)(size-16));</span>
					}
					else
					{
<span class="nc" id="L1433">						g2.setColor(new Color(re-10,gr-10,bl-10));</span>
<span class="nc" id="L1434">						g2.fillOval((int)(c.getX()-size/2 -left+2), (int)(c.getY()-size/2 - top+2),(int)(size-4),(int)(size-4));</span>
<span class="nc" id="L1435">						g2.setColor(new Color(re-20,gr-20,bl-20));</span>
<span class="nc" id="L1436">						g2.fillOval((int)(c.getX()-size/2 -left+4), (int)(c.getY()-size/2 - top+4),(int)(size-8),(int)(size-8));</span>
<span class="nc" id="L1437">						g2.setColor(new Color(re-30,gr-30,bl-30));</span>
<span class="nc" id="L1438">						g2.fillOval((int)(c.getX()-size/2 -left+6), (int)(c.getY()-size/2 - top+6),(int)(size-12),(int)(size-12));</span>
<span class="nc" id="L1439">						g2.setColor(new Color(re-40,gr-40,bl-40));</span>
<span class="nc" id="L1440">						g2.fillOval((int)(c.getX()-size/2 -left+8), (int)(c.getY()-size/2 - top+8),(int)(size-16),(int)(size-16));</span>
						
					}
<span class="nc" id="L1443">					g2.setColor(Color.WHITE);</span>
<span class="nc" id="L1444">					g2.drawString(&quot;Inorganic = &quot;, 500, 210);</span>
<span class="nc" id="L1445">					team = -2;</span>
<span class="nc bnc" id="L1446" title="All 2 branches missed.">					if(team &lt; 0)</span>
<span class="nc" id="L1447">						team = -(team+10);</span>
<span class="nc" id="L1448">					re = 123*(team+1)*((team+1)*19) % 256;</span>
<span class="nc" id="L1449">					gr = 23*(team+1)*((team+1)*13) % 256;</span>
<span class="nc" id="L1450">					bl = 51*(team+1)*((team+1)*3) % 256;</span>
<span class="nc" id="L1451">					c = new Point(650,200);</span>
<span class="nc bnc" id="L1452" title="All 6 branches missed.">					if(re + 40 &lt; 256 &amp;&amp; gr + 40 &lt; 256&amp;&amp; bl + 40 &lt; 256 )</span>
					{
<span class="nc" id="L1454">						g2.setColor(new Color(re+10,gr+10,bl+10));</span>
<span class="nc" id="L1455">						g2.fillOval((int)(c.getX()-size/2 -left+2), (int)(c.getY()-size/2 - top+2),(int)(size-4),(int)(size-4));</span>
<span class="nc" id="L1456">						g2.setColor(new Color(re+20,gr+20,bl+20));</span>
<span class="nc" id="L1457">						g2.fillOval((int)(c.getX()-size/2 -left+4), (int)(c.getY()-size/2 - top+4),(int)(size-8),(int)(size-8));</span>
<span class="nc" id="L1458">						g2.setColor(new Color(re+30,gr+30,bl+30));</span>
<span class="nc" id="L1459">						g2.fillOval((int)(c.getX()-size/2 -left+6), (int)(c.getY()-size/2 - top+6),(int)(size-12),(int)(size-12));</span>
<span class="nc" id="L1460">						g2.setColor(new Color(re+40,gr+40,bl+40));</span>
<span class="nc" id="L1461">						g2.fillOval((int)(c.getX()-size/2 -left+8), (int)(c.getY()-size/2 - top+8),(int)(size-16),(int)(size-16));</span>
					}
					else
					{
<span class="nc" id="L1465">						g2.setColor(new Color(re-10,gr-10,bl-10));</span>
<span class="nc" id="L1466">						g2.fillOval((int)(c.getX()-size/2 -left+2), (int)(c.getY()-size/2 - top+2),(int)(size-4),(int)(size-4));</span>
<span class="nc" id="L1467">						g2.setColor(new Color(re-20,gr-20,bl-20));</span>
<span class="nc" id="L1468">						g2.fillOval((int)(c.getX()-size/2 -left+4), (int)(c.getY()-size/2 - top+4),(int)(size-8),(int)(size-8));</span>
<span class="nc" id="L1469">						g2.setColor(new Color(re-30,gr-30,bl-30));</span>
<span class="nc" id="L1470">						g2.fillOval((int)(c.getX()-size/2 -left+6), (int)(c.getY()-size/2 - top+6),(int)(size-12),(int)(size-12));</span>
<span class="nc" id="L1471">						g2.setColor(new Color(re-40,gr-40,bl-40));</span>
<span class="nc" id="L1472">						g2.fillOval((int)(c.getX()-size/2 -left+8), (int)(c.getY()-size/2 - top+8),(int)(size-16),(int)(size-16));</span>
						
					}
<span class="nc" id="L1475">					g2.setColor(Color.WHITE);</span>

<span class="nc" id="L1477">					g2.drawString(&quot;Antibiotic(bad) = &quot;, 500, 260);</span>
<span class="nc" id="L1478">					team = -3;</span>
<span class="nc bnc" id="L1479" title="All 2 branches missed.">					if(team &lt; 0)</span>
<span class="nc" id="L1480">						team = -(team+10);</span>
<span class="nc" id="L1481">					re = 123*(team+1)*((team+1)*19) % 256;</span>
<span class="nc" id="L1482">					gr = 23*(team+1)*((team+1)*13) % 256;</span>
<span class="nc" id="L1483">					bl = 51*(team+1)*((team+1)*3) % 256;</span>
<span class="nc" id="L1484">					c = new Point(650,250);</span>
<span class="nc bnc" id="L1485" title="All 6 branches missed.">					if(re + 40 &lt; 256 &amp;&amp; gr + 40 &lt; 256&amp;&amp; bl + 40 &lt; 256 )</span>
					{
<span class="nc" id="L1487">						g2.setColor(new Color(re+10,gr+10,bl+10));</span>
<span class="nc" id="L1488">						g2.fillOval((int)(c.getX()-size/2 -left+2), (int)(c.getY()-size/2 - top+2),(int)(size-4),(int)(size-4));</span>
<span class="nc" id="L1489">						g2.setColor(new Color(re+20,gr+20,bl+20));</span>
<span class="nc" id="L1490">						g2.fillOval((int)(c.getX()-size/2 -left+4), (int)(c.getY()-size/2 - top+4),(int)(size-8),(int)(size-8));</span>
<span class="nc" id="L1491">						g2.setColor(new Color(re+30,gr+30,bl+30));</span>
<span class="nc" id="L1492">						g2.fillOval((int)(c.getX()-size/2 -left+6), (int)(c.getY()-size/2 - top+6),(int)(size-12),(int)(size-12));</span>
<span class="nc" id="L1493">						g2.setColor(new Color(re+40,gr+40,bl+40));</span>
<span class="nc" id="L1494">						g2.fillOval((int)(c.getX()-size/2 -left+8), (int)(c.getY()-size/2 - top+8),(int)(size-16),(int)(size-16));</span>
					}
					else
					{
<span class="nc" id="L1498">						g2.setColor(new Color(re-10,gr-10,bl-10));</span>
<span class="nc" id="L1499">						g2.fillOval((int)(c.getX()-size/2 -left+2), (int)(c.getY()-size/2 - top+2),(int)(size-4),(int)(size-4));</span>
<span class="nc" id="L1500">						g2.setColor(new Color(re-20,gr-20,bl-20));</span>
<span class="nc" id="L1501">						g2.fillOval((int)(c.getX()-size/2 -left+4), (int)(c.getY()-size/2 - top+4),(int)(size-8),(int)(size-8));</span>
<span class="nc" id="L1502">						g2.setColor(new Color(re-30,gr-30,bl-30));</span>
<span class="nc" id="L1503">						g2.fillOval((int)(c.getX()-size/2 -left+6), (int)(c.getY()-size/2 - top+6),(int)(size-12),(int)(size-12));</span>
<span class="nc" id="L1504">						g2.setColor(new Color(re-40,gr-40,bl-40));</span>
<span class="nc" id="L1505">						g2.fillOval((int)(c.getX()-size/2 -left+8), (int)(c.getY()-size/2 - top+8),(int)(size-16),(int)(size-16));</span>
						
					}
<span class="nc" id="L1508">					g2.setColor(Color.WHITE);</span>

<span class="nc" id="L1510">					g2.drawString(&quot;Pheremone = &quot;, 500, 310);</span>
<span class="nc" id="L1511">					team = -4;</span>
<span class="nc bnc" id="L1512" title="All 2 branches missed.">					if(team &lt; 0)</span>
<span class="nc" id="L1513">						team = -(team+10);</span>
<span class="nc" id="L1514">					re = 123*(team+1)*((team+1)*19) % 256;</span>
<span class="nc" id="L1515">					gr = 23*(team+1)*((team+1)*13) % 256;</span>
<span class="nc" id="L1516">					bl = 51*(team+1)*((team+1)*3) % 256;</span>
<span class="nc" id="L1517">					col = new Color(re+gr*256+bl*(256*256));</span>
<span class="nc" id="L1518">					re = col.getRed();</span>
<span class="nc" id="L1519">					gr = col.getGreen();</span>
<span class="nc" id="L1520">					bl = col.getBlue();</span>
<span class="nc" id="L1521">					c = new Point(650,300);</span>
<span class="nc bnc" id="L1522" title="All 6 branches missed.">					if(re + 40 &lt; 256 &amp;&amp; gr + 40 &lt; 256&amp;&amp; bl + 40 &lt; 256 )</span>
					{
<span class="nc" id="L1524">						g2.setColor(new Color(re+10,gr+10,bl+10));</span>
<span class="nc" id="L1525">						g2.fillOval((int)(c.getX()-size/2 -left+2), (int)(c.getY()-size/2 - top+2),(int)(size-4),(int)(size-4));</span>
<span class="nc" id="L1526">						g2.setColor(new Color(re+20,gr+20,bl+20));</span>
<span class="nc" id="L1527">						g2.fillOval((int)(c.getX()-size/2 -left+4), (int)(c.getY()-size/2 - top+4),(int)(size-8),(int)(size-8));</span>
<span class="nc" id="L1528">						g2.setColor(new Color(re+30,gr+30,bl+30));</span>
<span class="nc" id="L1529">						g2.fillOval((int)(c.getX()-size/2 -left+6), (int)(c.getY()-size/2 - top+6),(int)(size-12),(int)(size-12));</span>
<span class="nc" id="L1530">						g2.setColor(new Color(re+40,gr+40,bl+40));</span>
<span class="nc" id="L1531">						g2.fillOval((int)(c.getX()-size/2 -left+8), (int)(c.getY()-size/2 - top+8),(int)(size-16),(int)(size-16));</span>
					}
					else
					{
<span class="nc" id="L1535">						g2.setColor(new Color(re-10,gr-10,bl-10));</span>
<span class="nc" id="L1536">						g2.fillOval((int)(c.getX()-size/2 -left+2), (int)(c.getY()-size/2 - top+2),(int)(size-4),(int)(size-4));</span>
<span class="nc" id="L1537">						g2.setColor(new Color(re-20,gr-20,bl-20));</span>
<span class="nc" id="L1538">						g2.fillOval((int)(c.getX()-size/2 -left+4), (int)(c.getY()-size/2 - top+4),(int)(size-8),(int)(size-8));</span>
<span class="nc" id="L1539">						g2.setColor(new Color(re-30,gr-30,bl-30));</span>
<span class="nc" id="L1540">						g2.fillOval((int)(c.getX()-size/2 -left+6), (int)(c.getY()-size/2 - top+6),(int)(size-12),(int)(size-12));</span>
<span class="nc" id="L1541">						g2.setColor(new Color(re-40,gr-40,bl-40));</span>
<span class="nc" id="L1542">						g2.fillOval((int)(c.getX()-size/2 -left+8), (int)(c.getY()-size/2 - top+8),(int)(size-16),(int)(size-16));</span>
						
					}
<span class="nc" id="L1545">					g2.setColor(Color.WHITE);</span>
<span class="nc" id="L1546">					g2.drawString(&quot;Alien = &quot;, 500, 360);</span>
<span class="nc" id="L1547">					team = -5;</span>
<span class="nc bnc" id="L1548" title="All 2 branches missed.">					if(team &lt; 0)</span>
<span class="nc" id="L1549">						team = -(team+10);</span>
<span class="nc" id="L1550">					re = 123*(team+1)*((team+1)*19) % 256;</span>
<span class="nc" id="L1551">					gr = 23*(team+1)*((team+1)*13) % 256;</span>
<span class="nc" id="L1552">					bl = 51*(team+1)*((team+1)*3) % 256;</span>
<span class="nc" id="L1553">					c = new Point(650,350);</span>
<span class="nc" id="L1554">					col = new Color(re+gr*256+bl*(256*256));</span>
<span class="nc" id="L1555">					re = col.getRed();</span>
<span class="nc" id="L1556">					gr = col.getGreen();</span>
<span class="nc" id="L1557">					bl = col.getBlue();</span>
<span class="nc bnc" id="L1558" title="All 6 branches missed.">					if(re + 40 &lt; 256 &amp;&amp; gr + 40 &lt; 256&amp;&amp; bl + 40 &lt; 256 )</span>
					{
<span class="nc" id="L1560">						g2.setColor(new Color(re+10,gr+10,bl+10));</span>
<span class="nc" id="L1561">						g2.fillOval((int)(c.getX()-size/2 -left+2), (int)(c.getY()-size/2 - top+2),(int)(size-4),(int)(size-4));</span>
<span class="nc" id="L1562">						g2.setColor(new Color(re+20,gr+20,bl+20));</span>
<span class="nc" id="L1563">						g2.fillOval((int)(c.getX()-size/2 -left+4), (int)(c.getY()-size/2 - top+4),(int)(size-8),(int)(size-8));</span>
<span class="nc" id="L1564">						g2.setColor(new Color(re+30,gr+30,bl+30));</span>
<span class="nc" id="L1565">						g2.fillOval((int)(c.getX()-size/2 -left+6), (int)(c.getY()-size/2 - top+6),(int)(size-12),(int)(size-12));</span>
<span class="nc" id="L1566">						g2.setColor(new Color(re+40,gr+40,bl+40));</span>
<span class="nc" id="L1567">						g2.fillOval((int)(c.getX()-size/2 -left+8), (int)(c.getY()-size/2 - top+8),(int)(size-16),(int)(size-16));</span>
					}
					else
					{
<span class="nc" id="L1571">						g2.setColor(new Color(re-10,gr-10,bl-10));</span>
<span class="nc" id="L1572">						g2.fillOval((int)(c.getX()-size/2 -left+2), (int)(c.getY()-size/2 - top+2),(int)(size-4),(int)(size-4));</span>
<span class="nc" id="L1573">						g2.setColor(new Color(re-20,gr-20,bl-20));</span>
<span class="nc" id="L1574">						g2.fillOval((int)(c.getX()-size/2 -left+4), (int)(c.getY()-size/2 - top+4),(int)(size-8),(int)(size-8));</span>
<span class="nc" id="L1575">						g2.setColor(new Color(re-30,gr-30,bl-30));</span>
<span class="nc" id="L1576">						g2.fillOval((int)(c.getX()-size/2 -left+6), (int)(c.getY()-size/2 - top+6),(int)(size-12),(int)(size-12));</span>
<span class="nc" id="L1577">						g2.setColor(new Color(re-40,gr-40,bl-40));</span>
<span class="nc" id="L1578">						g2.fillOval((int)(c.getX()-size/2 -left+8), (int)(c.getY()-size/2 - top+8),(int)(size-16),(int)(size-16));</span>
						
					}
					
				}
<span class="nc" id="L1583">			}</span>


		}
			



	  public static void main(String[] args)
	  {
<span class="nc" id="L1593">		  new Client();</span>
<span class="nc" id="L1594">	  }</span>

	public boolean isConnected() {
<span class="nc" id="L1597">		return connected;</span>
	}

	public void setConnected(boolean connected) {
<span class="nc" id="L1601">		this.connected = connected;</span>
<span class="nc" id="L1602">	}</span>



	public JField getField() {
<span class="nc" id="L1607">		return Field;</span>
	}
	  
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>