<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>MP3.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">95_celwars2009</a> &gt; <a href="index.source.html" class="el_package">default</a> &gt; <span class="el_source">MP3.java</span></div><h1>MP3.java</h1><pre class="source lang-java linenums">import java.io.*;
import javax.sound.sampled.*;

public class MP3 extends Thread
{
<span class="fc" id="L6">	AudioInputStream in = null;</span>
<span class="fc" id="L7">	AudioInputStream din = null;</span>
<span class="fc" id="L8">	String filename = &quot;&quot;;</span>
	public MP3(String filename)
<span class="fc" id="L10">	{</span>
<span class="fc" id="L11">		this.filename = filename;</span>
<span class="fc" id="L12">		this.start();</span>
<span class="fc" id="L13">	}</span>
	public void run()
	{
		
<span class="fc" id="L17">		AudioInputStream din = null;</span>
		try {
<span class="fc" id="L19">			File file = new File(filename);</span>
<span class="nc" id="L20">			AudioInputStream in = AudioSystem.getAudioInputStream(file);</span>
<span class="nc" id="L21">			AudioFormat baseFormat = in.getFormat();</span>
<span class="nc" id="L22">			AudioFormat decodedFormat = new AudioFormat(</span>
					AudioFormat.Encoding.PCM_SIGNED,
<span class="nc" id="L24">					baseFormat.getSampleRate(), 16, baseFormat.getChannels(),</span>
<span class="nc" id="L25">					baseFormat.getChannels() * 2, baseFormat.getSampleRate(),</span>
					false);
<span class="nc" id="L27">			din = AudioSystem.getAudioInputStream(decodedFormat, in);</span>
<span class="nc" id="L28">			DataLine.Info info = new DataLine.Info(SourceDataLine.class, decodedFormat);</span>
<span class="nc" id="L29">			SourceDataLine line = (SourceDataLine) AudioSystem.getLine(info);</span>
<span class="nc bnc" id="L30" title="All 2 branches missed.">			if(line != null) {</span>

<span class="nc" id="L32">				line.open(decodedFormat);</span>
				//FloatControl volumeControl = (FloatControl)line.getControl(FloatControl.Type.MASTER_GAIN);
				//volumeControl.setValue(-20);
<span class="nc" id="L35">				byte[] data = new byte[4096];</span>
				// Start
<span class="nc" id="L37">				line.start();</span>
				
				int nBytesRead;
<span class="nc bnc" id="L40" title="All 2 branches missed.">				while ((nBytesRead = din.read(data, 0, data.length)) != -1) {	</span>
<span class="nc" id="L41">					line.write(data, 0, nBytesRead);</span>
				}
				// Stop
<span class="nc" id="L44">				line.drain();</span>
<span class="nc" id="L45">				line.stop();</span>
<span class="nc" id="L46">				line.close();</span>
<span class="nc" id="L47">				din.close();</span>
			}
			
		}
<span class="fc" id="L51">		catch(Exception e) {</span>
<span class="fc" id="L52">			e.printStackTrace();</span>
		}
		finally {
<span class="pc bpc" id="L55" title="1 of 2 branches missed.">			if(din != null) {</span>
<span class="nc" id="L56">				try { din.close(); } catch(IOException e) { }</span>
			}
		}	
<span class="fc" id="L59">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>