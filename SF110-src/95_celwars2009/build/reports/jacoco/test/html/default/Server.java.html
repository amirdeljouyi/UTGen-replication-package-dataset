<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Server.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">95_celwars2009</a> &gt; <a href="index.source.html" class="el_package">default</a> &gt; <span class="el_source">Server.java</span></div><h1>Server.java</h1><pre class="source lang-java linenums">import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.ArrayList;
import java.util.Collections;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Random;
import java.util.Scanner;
import java.util.StringTokenizer;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowEvent;
import java.awt.event.WindowListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.Timer;

import sun.misc.GC.LatencyRequest;


public class Server extends Thread
{

<span class="nc" id="L32">	private ArrayList&lt;ClientThread&gt; players = new ArrayList&lt;ClientThread&gt;();</span>
<span class="nc" id="L33">	private ArrayList&lt;Entity&gt; entities = new ArrayList&lt;Entity&gt;();</span>
<span class="nc" id="L34">	private ArrayList&lt;Entity&gt; send = new ArrayList&lt;Entity&gt;();</span>
    private int time;
    private Server self;
    private int worldSize;
<span class="nc" id="L38">    private Random gen = new Random();</span>
<span class="nc" id="L39">    private boolean playerJoined = false;</span>
    private ClientListener CL;
<span class="nc" id="L41">    private String sounds = &quot;&quot;;</span>
<span class="nc" id="L42">	private ArrayList&lt;ClientThread&gt; alive = new ArrayList&lt;ClientThread&gt;();</span>
<span class="nc" id="L43">	private long stime = 0;</span>
	
	public void addSound(String s)
	{
<span class="nc" id="L47">		sounds += s;</span>
<span class="nc" id="L48">	}</span>
	
	public void run()
	{
		while(true)
		{
<span class="nc bnc" id="L54" title="All 2 branches missed.">			if(System.currentTimeMillis()-stime &gt; 50) </span>
			{
<span class="nc" id="L56">				stime = System.currentTimeMillis();</span>
<span class="nc" id="L57">				Itterate();</span>
			}
		}
	}
		
	public void Itterate() 
	{
		//timer.stop();
<span class="nc" id="L65">		time++;</span>
			//System.err.println(&quot;Time &quot;+time);
<span class="nc bnc" id="L67" title="All 2 branches missed.">		if(time % 1005 == 0)</span>
<span class="nc" id="L68">			System.gc();</span>
		//poll for new clients...
<span class="nc" id="L70">		sounds = &quot;Sound &quot;;</span>
<span class="nc" id="L71">		int totalFood = 0;</span>
<span class="nc" id="L72">		int totalPoison = 0;</span>
<span class="nc bnc" id="L73" title="All 2 branches missed.">		for(int i = 0; i &lt; players.size(); i++)</span>
<span class="nc" id="L74">			players.get(i).run();</span>
<span class="nc bnc" id="L75" title="All 2 branches missed.">		if(playerJoined)</span>
		{
<span class="nc bnc" id="L77" title="All 2 branches missed.">			for(int i = 0; i &lt; entities.size(); i++)</span>
			{
<span class="nc" id="L79">				send.add(entities.get(i));</span>
			}
<span class="nc" id="L81">			playerJoined = false;</span>
<span class="nc" id="L82">			System.err.print(&quot;player joined&quot;);</span>
		}
		else
		{
			//System.out.println(&quot;Normal &quot;+time);
<span class="nc" id="L87">			alive.clear();</span>
<span class="nc bnc" id="L88" title="All 2 branches missed.">			for(int i = 0; i &lt; players.size(); i++)</span>
			{
<span class="nc bnc" id="L90" title="All 2 branches missed.">				if(players.get(i).getP().getNumCells() &gt; 0 )alive.add(players.get(i));</span>
<span class="nc" id="L91">				players.get(i).getP().setScore(0);</span>
			}
<span class="nc bnc" id="L93" title="All 6 branches missed.">			if(alive.size() == 1 &amp;&amp; players.size() &gt; 1 &amp;&amp;  time &gt; 1500)</span>
			{
				//that player won
<span class="nc" id="L96">				alive.get(0).sendMessage(&quot;Message2 2000 You won!!! You are the only surviving cell line remaining!&quot;);</span>
<span class="nc" id="L97">				alive.get(0).sendMessage(&quot;MP3 victory.mp3&quot;);</span>
<span class="nc" id="L98">				alive.get(0).sendMessage(&quot;Sound victory.wav -1 -1;&quot;);</span>
<span class="nc" id="L99">				this.stop();</span>
<span class="nc" id="L100">				alive.get(0).disconnect();</span>
<span class="nc" id="L101">				System.exit(0);</span>
			}
<span class="nc bnc" id="L103" title="All 4 branches missed.">			if(alive.size() == 0 &amp;&amp; time &gt; 1500)</span>
			{
<span class="nc" id="L105">				System.out.println(&quot;Restarting the server...&quot;);</span>
<span class="nc" id="L106">				time = 0;</span>
			}
<span class="nc bnc" id="L108" title="All 2 branches missed.">			for(int i = 0; i &lt; entities.size(); i++)</span>
			{
<span class="nc bnc" id="L110" title="All 2 branches missed.">				if(entities.get(i).getTeam() == -1)</span>
<span class="nc" id="L111">					totalFood+= entities.get(i).getSize();</span>
<span class="nc bnc" id="L112" title="All 2 branches missed.">				if(entities.get(i).getTeam() == -3)</span>
<span class="nc" id="L113">					totalPoison+= entities.get(i).getSize();</span>
<span class="nc bnc" id="L114" title="All 4 branches missed.">				if(entities.get(i).getTeam() &gt; -1 &amp;&amp; players.size() &gt; entities.get(i).getTeam())</span>
				{
<span class="nc" id="L116">					players.get(entities.get(i).getTeam()).getP().setScore((players.get(entities.get(i).getTeam()).getP().getScore()+(int)(entities.get(i).getSize())));</span>
				}					
<span class="nc" id="L118">				entities.get(i).integrate(self);</span>
			}
			//System.err.println(&quot;Done integrating entities for time &quot;+time);
<span class="nc bnc" id="L121" title="All 6 branches missed.">			if(time &gt; 3000 &amp;&amp; time % 500 ==0 &amp;&amp; gen.nextBoolean())</span>
			{
<span class="nc" id="L123">				double x = gen.nextDouble()*(worldSize/2) +worldSize/2-gen.nextDouble()*(worldSize/2);</span>
<span class="nc" id="L124">				double y = gen.nextDouble()*(worldSize/2) +worldSize/2-gen.nextDouble()*(worldSize/2);</span>
<span class="nc" id="L125">				double dx =  gen.nextDouble()*75 -gen.nextDouble()*75;</span>
<span class="nc" id="L126">				double dy =  gen.nextDouble()*75 -gen.nextDouble()*75;</span>
<span class="nc" id="L127">				String spores = &quot;&quot;;</span>
<span class="nc bnc" id="L128" title="All 2 branches missed.">				for(int i = 0; i &lt; time/400; i++)</span>
				{
<span class="nc" id="L130">					Entity E = new Entity(x,y,-4);</span>
<span class="nc" id="L131">					x+=dx+gen.nextDouble()*9 -gen.nextDouble()*9;</span>
<span class="nc" id="L132">					y+= dy+gen.nextDouble()*9 -gen.nextDouble()*9;</span>
<span class="nc" id="L133">					int val = (i+1-time/800);</span>
<span class="nc bnc" id="L134" title="All 2 branches missed.">					if(val == 0)</span>
<span class="nc" id="L135">						val = 1;</span>
<span class="nc" id="L136">					E.setSize(Math.abs(30/val)+(8+time/1000));</span>
<span class="nc" id="L137">					entities.add(E);</span>
<span class="nc" id="L138">					spores+= E.getProperties().get(&quot;id&quot;).intValue()+&quot; &quot;+E.getX()+&quot; &quot;+E.getY()+&quot; &quot;+E.getSize()+&quot; &quot;+getTeamColor(-4)+&quot;;&quot;;</span>
				}
<span class="nc" id="L140">				sendToAll(&quot;Circles &quot;+spores);</span>
<span class="nc" id="L141">				sendToAll(&quot;Message 100 Fight!!!&quot;);</span>
			
			}
<span class="nc bnc" id="L144" title="All 8 branches missed.">			if(time &gt; 8000 &amp;&amp; time &lt; 15000 &amp;&amp; time % 318 ==0 &amp;&amp; gen.nextInt(10)  &lt; 5 )</span>
			{
<span class="nc" id="L146">				String spores = &quot;&quot;;</span>
<span class="nc bnc" id="L147" title="All 2 branches missed.">				for(int i = 0; i &lt; time/200; i++)</span>
				{
<span class="nc" id="L149">					Entity E = new Entity(gen.nextDouble()*(worldSize) ,gen.nextDouble()*(worldSize) ,-3);</span>
<span class="nc" id="L150">					E.setSize(gen.nextDouble()*5+(time/1000));</span>
<span class="nc" id="L151">					entities.add(E);</span>
<span class="nc" id="L152">					spores +=E.getProperties().get(&quot;id&quot;).intValue()+&quot; &quot;+E.getX()+&quot; &quot;+E.getY()+&quot; &quot;+E.getSize()+&quot; &quot;+getTeamColor(-3)+&quot;;&quot;;</span>
				}
<span class="nc" id="L154">				sendToAll(&quot;Circles &quot;+spores);</span>
<span class="nc" id="L155">				sendToAll(&quot;Message 100 Toxic Contamination!!!&quot;);</span>
			
			}
<span class="nc bnc" id="L158" title="All 6 branches missed.">			if(time &gt; 15000 &amp;&amp; time % 2000 == 0 &amp;&amp; gen.nextBoolean() )</span>
			{
				//create terminator cell line!!!!
<span class="nc" id="L161">				Entity E = new Entity(gen.nextDouble()*(worldSize) ,gen.nextDouble()*(worldSize) ,-5);</span>
<span class="nc" id="L162">				E.setSize(gen.nextDouble()*10+8);</span>
<span class="nc" id="L163">				E.getProperties().put(&quot;Complex Flagella&quot;,1.0);</span>
<span class="nc" id="L164">				E.setVx(gen.nextGaussian()*20);</span>
<span class="nc" id="L165">				E.setVy(gen.nextGaussian()*20);</span>
<span class="nc" id="L166">				entities.add(E);</span>
<span class="nc" id="L167">				sendToAll(&quot;Circles &quot;+E.getProperties().get(&quot;id&quot;).intValue()+&quot; &quot;+E.getX()+&quot; &quot;+E.getY()+&quot; &quot;+E.getSize()+&quot; &quot;+getTeamColor(-5)+&quot;;&quot;);</span>
<span class="nc" id="L168">				sendToAll(&quot;Message 100 An alien form of life has appeared!!!&quot;);</span>
			}
<span class="nc bnc" id="L170" title="All 4 branches missed.">			if(totalFood &lt; worldSize/6 &amp;&amp; gen.nextInt(30) &gt; 27)</span>
			{
<span class="nc" id="L172">				Entity E = new Entity(gen.nextDouble()*worldSize,gen.nextDouble()*worldSize,-1);</span>
<span class="nc" id="L173">				E.setSize(gen.nextDouble()*20+15);</span>
<span class="nc" id="L174">				entities.add(E);</span>
<span class="nc" id="L175">				sendToAll(&quot;Circles &quot;+E.getProperties().get(&quot;id&quot;).intValue()+&quot; &quot;+E.getX()+&quot; &quot;+E.getY()+&quot; &quot;+E.getSize()+&quot; &quot;+getTeamColor(-1)+&quot;;&quot;);</span>

			}
<span class="nc bnc" id="L178" title="All 4 branches missed.">			if(totalPoison &lt; worldSize/10 &amp;&amp; gen.nextInt(30) &gt; 27)</span>
			{
<span class="nc" id="L180">				Entity E = new Entity(gen.nextDouble()*worldSize,gen.nextDouble()*worldSize,-3);</span>
<span class="nc" id="L181">				E.setSize(gen.nextDouble()*10+10);</span>
<span class="nc" id="L182">				entities.add(E);</span>
<span class="nc" id="L183">				sendToAll(&quot;Circles &quot;+E.getProperties().get(&quot;id&quot;).intValue()+&quot; &quot;+E.getX()+&quot; &quot;+E.getY()+&quot; &quot;+E.getSize()+&quot; &quot;+getTeamColor(-3)+&quot;;&quot;);</span>
			}
<span class="nc" id="L185">			alive.clear();</span>
<span class="nc bnc" id="L186" title="All 2 branches missed.">			for(int i = 0; i &lt; players.size(); i++)</span>
			{
<span class="nc bnc" id="L188" title="All 4 branches missed.">				if(players.get(i).getP().getNumCells() &gt; 0 &amp;&amp; time &gt; 1)</span>
				{

<span class="nc" id="L191">					players.get(i).getP().setPower(players.get(i).getP().getPower()+0.1);</span>
<span class="nc" id="L192">					String sending = &quot;&quot;;</span>
<span class="nc bnc" id="L193" title="All 2 branches missed.">					if(players.get(i).getP().getObserving() != null)</span>
					{
<span class="nc" id="L195">						Entity Ent = players.get(i).getP().getObserving();</span>
<span class="nc" id="L196">						players.get(i).sendMessage(&quot;Center &quot;+(int)Ent.getX()+&quot; &quot;+(int)Ent.getY());</span>
					}

<span class="nc bnc" id="L199" title="All 2 branches missed.">					if(time % 5 == 0)</span>
					{
<span class="nc" id="L201">						sending = &quot;Update &quot;+getTeamColor(i)+&quot; &quot;+time+&quot; &quot;+players.get(i).getP().getScore()+&quot; &quot;+players.get(i).getP().getPower();</span>
<span class="nc" id="L202">						String name = &quot;&quot;;</span>
<span class="nc bnc" id="L203" title="All 2 branches missed.">						if(players.get(i).getP().getObserving() != null)</span>
						{
<span class="nc" id="L205">							Entity Ent = players.get(i).getP().getObserving();</span>
<span class="nc" id="L206">							players.get(i).sendMessage(&quot;Center &quot;+(int)Ent.getX()+&quot; &quot;+(int)Ent.getY());</span>
<span class="nc bnc" id="L207" title="All 2 branches missed.">							if(Ent.getTeam() == -3)</span>
<span class="nc" id="L208">								name = &quot;Antibiotic: A toxic particle that will harm any cell. Location &quot;+(int)Ent.getX()+&quot;, &quot;+(int)Ent.getY();</span>
<span class="nc bnc" id="L209" title="All 2 branches missed.">							else if(Ent.getTeam() == -2)</span>
<span class="nc" id="L210">								name = &quot;Innorganic solid: Dense particle that usually cannot be processed by cells. Location &quot;+(int)Ent.getX()+&quot;, &quot;+(int)Ent.getY();</span>
<span class="nc bnc" id="L211" title="All 2 branches missed.">							else if(Ent.getTeam() == -1)</span>
<span class="nc" id="L212">								name = &quot;Organic solid: Slowly growing clumps of metabolizable molecules easily processed by cells. Location &quot;+(int)Ent.getX()+&quot;, &quot;+(int)Ent.getY();</span>
<span class="nc bnc" id="L213" title="All 2 branches missed.">							else if(Ent.getTeam() == -4)</span>
<span class="nc" id="L214">								name = &quot;Pheremone: Small particle that strongly attracts all life. Location &quot;+(int)Ent.getX()+&quot;, &quot;+(int)Ent.getY();</span>
							else
							{
<span class="nc" id="L217">								name = &quot;Cell for player &quot;+(Ent.getTeam()+1)+&quot;: This is cell with a diameter of &quot;+(int)Ent.getSize()+&quot; Location &quot;+(int)Ent.getX()+&quot;, &quot;+(int)Ent.getY()+&quot; It has the following traits: cell&quot;;</span>
<span class="nc" id="L218">								Iterator&lt;String&gt; itr = Ent.getProperties().keySet().iterator();</span>
<span class="nc bnc" id="L219" title="All 2 branches missed.">								while(itr.hasNext())</span>
								{
<span class="nc" id="L221">									String next = itr.next();</span>
<span class="nc bnc" id="L222" title="All 4 branches missed.">									if(next.compareTo(&quot;age&quot;)!= 0 &amp;&amp; next.compareTo(&quot;id&quot;) != 0)</span>
<span class="nc" id="L223">									name+=&quot;, &quot;+next;</span>
<span class="nc bnc" id="L224" title="All 2 branches missed.">									else if(next.compareTo(&quot;id&quot;) != 0)</span>
<span class="nc" id="L225">										name+=&quot;, age = &quot;+Ent.getProperties().get(&quot;age&quot;).intValue();</span>
<span class="nc" id="L226">								}</span>
<span class="nc" id="L227">								sending+=&quot; &quot;+name;</span>
							}
							
						}
					}
<span class="nc bnc" id="L232" title="All 2 branches missed.">					for(int j = 0; j &lt; players.size(); j++)</span>
					{
<span class="nc bnc" id="L234" title="All 2 branches missed.">						if(i != j)</span>
<span class="nc" id="L235">						sending += &quot;; &quot;+getTeamColor(j)+&quot; &quot;+time+&quot; &quot;+players.get(j).getP().getScore()+&quot; &quot;+players.get(j).getP().getPower();</span>
					}
<span class="nc" id="L237">					players.get(i).sendMessage(sending);</span>

				}
			}

		}
<span class="nc" id="L243">		sendCircles();</span>
<span class="nc" id="L244">		sendToAll(sounds);</span>
		//timer.start();
<span class="nc" id="L246">	}</span>
		



		private void sendCircles()
		{
<span class="nc bnc" id="L253" title="All 2 branches missed.">			if(players.size() &gt; 0)</span>
			{
				//System.err.println(&quot;Sending circles...&quot;);
<span class="nc" id="L256">				String s = &quot;Circles &quot;;</span>
				
<span class="nc bnc" id="L258" title="All 2 branches missed.">				for(int i = 0; i &lt; send.size(); i++)</span>
				{
<span class="nc" id="L260">					Entity e = send.get(i);</span>
<span class="nc" id="L261">					s+=e.getProperties().get(&quot;id&quot;).intValue()+&quot; &quot;+e.getX()+&quot; &quot;+e.getY()+&quot; &quot;+e.getSize()+&quot; &quot;+getTeamColor(e.getTeam())+&quot;;&quot;;</span>
<span class="nc bnc" id="L262" title="All 2 branches missed.">					if(e.getSize() &lt;= 8)</span>
<span class="nc" id="L263">						send.remove(e);</span>
				}

<span class="nc" id="L266">				sendToAll(s);</span>
			}
<span class="nc" id="L268">		}</span>


		

	private int getTeamColor(int team) {
<span class="nc bnc" id="L274" title="All 2 branches missed.">		if(team &lt; 0)</span>
<span class="nc" id="L275">			team = -(team+10);</span>
<span class="nc" id="L276">		int r = 123*(team+1)*((team+1)*19) % 256;</span>
<span class="nc" id="L277">		int g = 23*(team+1)*((team+1)*13) % 256;</span>
<span class="nc" id="L278">		int b = 51*(team+1)*((team+1)*3) % 256;</span>
<span class="nc" id="L279">		return r+g*256+b*(256*256);</span>
	}
	public void createWorld()
	{
		//generates the basic world with food and everything then integrates the world for a while
		
<span class="nc" id="L285">		int foods = gen.nextInt((int)(worldSize/3))+worldSize/4;</span>
<span class="nc bnc" id="L286" title="All 2 branches missed.">		while(foods &gt; 0)</span>
		{
<span class="nc" id="L288">			int size = gen.nextInt(30)+10;</span>
<span class="nc" id="L289">			foods-= size;</span>
<span class="nc" id="L290">			Entity f = new Entity(gen.nextInt(worldSize), gen.nextInt(worldSize), -1);</span>
<span class="nc" id="L291">			f.setSize(size);</span>
<span class="nc" id="L292">			entities.add(f);</span>
			
<span class="nc" id="L294">		}</span>
<span class="nc" id="L295">		int rocks = gen.nextInt((int)(worldSize/3))+worldSize/4;</span>
<span class="nc bnc" id="L296" title="All 2 branches missed.">		while(rocks &gt; 0)</span>
		{
<span class="nc" id="L298">			int size = gen.nextInt(20)+20;</span>
<span class="nc" id="L299">			rocks-= size;</span>
<span class="nc" id="L300">			Entity r = new Entity(gen.nextInt(worldSize), gen.nextInt(worldSize), -2);</span>
<span class="nc" id="L301">			r.setSize(size);</span>
<span class="nc" id="L302">			entities.add(r);</span>
<span class="nc" id="L303">		}</span>
<span class="nc" id="L304">		int poison = gen.nextInt((int)(worldSize/10))+worldSize/10;</span>
<span class="nc bnc" id="L305" title="All 2 branches missed.">		while(poison &gt; 0)</span>
		{
<span class="nc" id="L307">			int size = gen.nextInt(20)+15;</span>
<span class="nc" id="L308">			poison -= size;</span>
<span class="nc" id="L309">			Entity r = new Entity(gen.nextInt(worldSize), gen.nextInt(worldSize), -3);</span>
<span class="nc" id="L310">			r.setSize(size);</span>

<span class="nc" id="L312">			entities.add(r);</span>
<span class="nc" id="L313">		}</span>
		
<span class="nc bnc" id="L315" title="All 2 branches missed.">		for(int i = 0; i &lt; 50; i++)</span>
		{
<span class="nc bnc" id="L317" title="All 2 branches missed.">			for(int j = 0; j &lt; entities.size(); j++)</span>
			{
<span class="nc" id="L319">				entities.get(j).integrate(this);</span>
			}
		}
		
		//entities.add(new Entity(100,100, 0));
		
		
<span class="nc" id="L326">	}</span>

	public Server (int port)
<span class="nc" id="L329">	{</span>
<span class="nc" id="L330">		self = this;</span>
<span class="nc" id="L331">		worldSize = Integer.parseInt(JOptionPane.showInputDialog(null, &quot;worldSize&quot;));</span>
<span class="nc" id="L332">		createWorld();</span>
<span class="nc" id="L333">		CL = new ClientListener(this, port );</span>
<span class="nc" id="L334">		CL.start();</span>
<span class="nc" id="L335">		this.start();</span>
<span class="nc" id="L336">	}</span>
	
	
	public class ClientThread
	{
		Socket clientSocket;
		PrintWriter out;
		BufferedReader in;
		Server creator;
<span class="nc" id="L345">		Random gen = new Random();</span>
		Player p;
		
		public Player getP() {
<span class="nc" id="L349">			return p;</span>
		}

		public ClientThread(Socket theSock, Server theServer)
<span class="nc" id="L353">		{</span>
<span class="nc" id="L354">			clientSocket = theSock;</span>
			//clientSocket.setPerformancePreferences();
<span class="nc" id="L356">			creator = theServer;</span>
			try {
<span class="nc" id="L358">				out = new PrintWriter(theSock.getOutputStream());</span>
<span class="nc" id="L359">			} catch (IOException e) {</span>
				// TODO Auto-generated catch block
<span class="nc" id="L361">				e.printStackTrace();</span>
<span class="nc" id="L362">			}</span>
			try {
<span class="nc" id="L364">				in = new BufferedReader(new InputStreamReader(theSock.getInputStream()));</span>
<span class="nc" id="L365">			} catch (IOException e) {</span>
				// TODO Auto-generated catch block
<span class="nc" id="L367">				e.printStackTrace();</span>
<span class="nc" id="L368">			}</span>
<span class="nc bnc" id="L369" title="All 2 branches missed.">			if(theServer.getPlayers().size() &lt; theServer.maxPlayer())</span>
			{
<span class="nc" id="L371">				p = new Player();</span>
<span class="nc" id="L372">				double x = gen.nextDouble()*worldSize;</span>
<span class="nc" id="L373">				double y = gen.nextDouble()*worldSize;</span>
<span class="nc" id="L374">				sendMessage(&quot;Message 0 Welcome to CellWars! You are player &quot;+(creator.getPlayers().size()+1)+&quot;.&quot;);</span>
<span class="nc" id="L375">				Entity e =  new Entity(x, y, creator.getPlayers().size());</span>
<span class="nc" id="L376">				creator.getEntities().add( e);</span>
<span class="nc" id="L377">				sendMessage(&quot;Size&quot;+worldSize);</span>
<span class="nc" id="L378">				sendMessage(&quot;Center &quot;+(int)x+&quot; &quot;+(int)y);</span>
<span class="nc" id="L379">				p.setObserving(e);</span>
<span class="nc" id="L380">				creator.getPlayers().add(this);	</span>
<span class="nc bnc" id="L381" title="All 2 branches missed.">				for(int i = 0; i &lt; send.size();i++)</span>
				{
<span class="nc bnc" id="L383" title="All 2 branches missed.">					if(send.get(i).getTeam() == creator.getPlayers().size()-1)</span>
<span class="nc" id="L384">						send.remove(i);</span>
				}
<span class="nc" id="L386">				creator.playerJoined = true;</span>

			
<span class="nc" id="L389">			}</span>
			else
<span class="nc" id="L391">				sendMessage(&quot;Message 255 This server only allows &quot;+creator.getPlayers().size()+&quot; players to play. Try again later.&quot;);</span>
			
			
<span class="nc" id="L394">		}</span>
		
		public void run() 
		{
<span class="nc bnc" id="L398" title="All 6 branches missed.">			if( clientSocket.isConnected() &amp;&amp; !clientSocket.isClosed() &amp;&amp; clientSocket.isBound())</span>
			{
<span class="nc" id="L400">				String incomming =&quot;&quot;; </span>
				try {
<span class="nc bnc" id="L402" title="All 2 branches missed.">					if(clientSocket.getInputStream().available() &gt; 0)</span>
<span class="nc" id="L403">					incomming = in.readLine();</span>
					//need to process command by GameServer;
<span class="nc bnc" id="L405" title="All 2 branches missed.">					if(incomming == null)</span>
					{
<span class="nc" id="L407">						this.disconnect();</span>
					}
<span class="nc" id="L409">					creator.processCommand(incomming, this);</span>
<span class="nc" id="L410">				} catch (IOException e) {</span>
					// TODO Auto-generated catch block
<span class="nc" id="L412">					e.printStackTrace();</span>
				}
<span class="nc" id="L414">				catch(NullPointerException ee)</span>
				{
					
<span class="nc bnc" id="L417" title="All 2 branches missed.">					if(creator == null)</span>
<span class="nc" id="L418">						System.err.println(&quot;null creator&quot;);</span>
<span class="nc bnc" id="L419" title="All 2 branches missed.">					else if(p == null)</span>
<span class="nc" id="L420">						System.err.println(&quot;null thisPlayer&quot;);</span>
<span class="nc bnc" id="L421" title="All 2 branches missed.">					else if(incomming == null)</span>
<span class="nc" id="L422">						System.err.println(&quot;null incomming&quot;);</span>
<span class="nc bnc" id="L423" title="All 2 branches missed.">					else if(in == null)</span>
<span class="nc" id="L424">						System.err.println(&quot;null in&quot;);</span>
					else
<span class="nc" id="L426">						System.err.println(&quot;null ?&quot;);</span>
<span class="nc" id="L427">					ee.printStackTrace();</span>
					
<span class="nc" id="L429">				}</span>
				
			}
<span class="nc" id="L432">		}</span>
		
		@SuppressWarnings(&quot;deprecation&quot;)
		public void disconnect()
		{

			try
			{
<span class="nc" id="L440">				this.clientSocket.close();</span>
			}
<span class="nc" id="L442">			catch(IOException e)</span>
			{
<span class="nc" id="L444">				System.err.println(&quot;Could not disconnect&quot;);</span>
<span class="nc" id="L445">			}</span>
<span class="nc" id="L446">		}</span>
		
		public String readLine()
		{
<span class="nc" id="L450">			String incomming = null;</span>
			try {
<span class="nc" id="L452">				incomming = in.readLine();</span>
<span class="nc" id="L453">			} catch (IOException e) {</span>
				// TODO Auto-generated catch block
<span class="nc" id="L455">				e.printStackTrace();</span>
<span class="nc" id="L456">			}</span>
<span class="nc" id="L457">			return incomming;</span>
		}
		public void sendMessage(String msg)
		{
			
<span class="nc bnc" id="L462" title="All 4 branches missed.">			if(this.out != null &amp;&amp; msg != null)</span>
			{
<span class="nc" id="L464">				this.out.println(msg);</span>
<span class="nc" id="L465">				this.out.flush();</span>
			}
			else
<span class="nc" id="L468">				System.err.println(&quot;NULL MESSAGE BEING SENT!&quot;);</span>
<span class="nc" id="L469">		}</span>

	}
	
	
	public class ClientThread2
	{
		Socket clientSocket;
		PrintWriter out;
//		BufferedReader in;
		Server creator;
//		Random gen = new Random();
//		Player p;
		

		public ClientThread2(Socket theSock, Server theServer)
<span class="nc" id="L485">		{</span>
<span class="nc" id="L486">			clientSocket = theSock;</span>
<span class="nc" id="L487">			creator = theServer;</span>
			try {
<span class="nc" id="L489">				out = new PrintWriter(theSock.getOutputStream());</span>
<span class="nc" id="L490">			} catch (IOException e) {</span>
				// TODO Auto-generated catch block
<span class="nc" id="L492">				e.printStackTrace();</span>
<span class="nc" id="L493">			}</span>

<span class="nc" id="L495">			sendMessage(&quot;Message 200 Sorry but the game has already begun! Try again later.&quot;);</span>
<span class="nc" id="L496">			this.disconnect();</span>
			
<span class="nc" id="L498">		}</span>
		
		public void run() 
		{
<span class="nc" id="L502">		}</span>
		
		@SuppressWarnings(&quot;deprecation&quot;)
		public void disconnect()
		{

			try
			{
<span class="nc" id="L510">				this.clientSocket.close();</span>
			}
<span class="nc" id="L512">			catch(IOException e)</span>
			{
<span class="nc" id="L514">				System.err.println(&quot;Could not disconnect&quot;);</span>
<span class="nc" id="L515">			}</span>
			try {
<span class="nc" id="L517">				creator.getPlayers().remove(this);</span>
<span class="nc" id="L518">			} catch (Throwable e) {</span>
				// TODO Auto-generated catch block
<span class="nc" id="L520">				e.printStackTrace();</span>
<span class="nc" id="L521">			}</span>
<span class="nc" id="L522">		}</span>
		

		public void sendMessage(String msg)
		{
			
<span class="nc bnc" id="L528" title="All 4 branches missed.">			if(this.out != null &amp;&amp; msg != null)</span>
			{
<span class="nc" id="L530">				this.out.println(msg);</span>
<span class="nc" id="L531">				this.out.flush();</span>
			}
			else
<span class="nc" id="L534">				System.err.println(&quot;NULL MESSAGE BEING SENT!&quot;);</span>
<span class="nc" id="L535">		}</span>

	}
	
	
	public void sendMessage(String message, int player)
	{
<span class="nc" id="L542">		players.get(player).sendMessage(message);</span>
<span class="nc" id="L543">	}</span>
	

	private class ServerWindow extends JFrame
	{
<span class="nc" id="L548">		JLabel start = new JLabel(&quot;Close to kill server&quot;);</span>
<span class="nc" id="L549">		Server s = null;</span>
		public ServerWindow(Server s2)
<span class="nc" id="L551">		{</span>
<span class="nc" id="L552">			s= s2;</span>
<span class="nc" id="L553">			this.setTitle(&quot;Server Control&quot;);</span>
<span class="nc" id="L554">			this.setSize(120,40);</span>
<span class="nc" id="L555">			this.getContentPane().add(start);</span>
<span class="nc" id="L556">			this.setVisible(true);</span>
<span class="nc" id="L557">			this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span>
<span class="nc" id="L558">			this.addWindowListener(new ServerCloseListener(this));</span>
<span class="nc" id="L559">		}</span>
	}
	
	private class ServerCloseListener implements WindowListener
	{
<span class="nc" id="L564">		ServerWindow sw = null;</span>
		public ServerCloseListener(ServerWindow sw)
<span class="nc" id="L566">		{</span>
<span class="nc" id="L567">			this.sw = sw;</span>
<span class="nc" id="L568">		}</span>
		public void windowOpened(WindowEvent arg0) {
			// TODO Auto-generated method stub
			
<span class="nc" id="L572">		}</span>

		public void windowClosing(WindowEvent arg0) {
<span class="nc" id="L575">			sw.s = null;</span>
<span class="nc" id="L576">			System.out.println(&quot;Killed the server&quot;);</span>
<span class="nc" id="L577">		}</span>

		public void windowClosed(WindowEvent arg0) {
			// TODO Auto-generated method stub
			
<span class="nc" id="L582">		}</span>

		public void windowIconified(WindowEvent arg0) {
			// TODO Auto-generated method stub
			
<span class="nc" id="L587">		}</span>

		public void windowDeiconified(WindowEvent arg0) {
			// TODO Auto-generated method stub
			
<span class="nc" id="L592">		}</span>

		public void windowActivated(WindowEvent arg0) {
			// TODO Auto-generated method stub
			
<span class="nc" id="L597">		}</span>

		public void windowDeactivated(WindowEvent arg0) {
			// TODO Auto-generated method stub
			
<span class="nc" id="L602">		}</span>
		
	}


	public static void main(String[] args)
	{
<span class="nc" id="L609">		Server s = new Server(4000);</span>
<span class="nc" id="L610">		s.new ServerWindow(s);</span>
<span class="nc" id="L611">	}</span>
	
	private class ClientListener extends Thread
	{
		Server creator;
		ServerSocket socket;
		public ClientListener(Server theServer, int port)
<span class="nc" id="L618">		{</span>
<span class="nc" id="L619">			this.setPriority(Thread.MIN_PRIORITY);</span>
<span class="nc" id="L620">			creator = theServer;</span>
			try {
<span class="nc" id="L622">				socket = new ServerSocket(port);</span>
<span class="nc" id="L623">				System.out.println(&quot;CellWars server listening on port: &quot;+port+&quot;. The game will begin withing a few minutes...&quot;);</span>
<span class="nc" id="L624">			} catch (IOException e) {</span>
				// TODO Auto-generated catch block
<span class="nc" id="L626">				e.printStackTrace();</span>
<span class="nc" id="L627">			}</span>
<span class="nc" id="L628">		}</span>
		
		public void run()
		{
			while(true)
			{
<span class="nc" id="L634">				Socket newSock = null;</span>
				try {
<span class="nc" id="L636">					newSock = socket.accept();</span>
<span class="nc" id="L637">				} catch (IOException e) {</span>
				
<span class="nc" id="L639">					e.printStackTrace();</span>
<span class="nc" id="L640">				}</span>
<span class="nc bnc" id="L641" title="All 2 branches missed.">				if(newSock != null)</span>
				{
<span class="nc bnc" id="L643" title="All 2 branches missed.">					if(creator.getTime() &lt; 1000)</span>
					{
<span class="nc" id="L645">						ClientThread  newClient = new ClientThread(newSock, creator);</span>
						//players.add(newClient);
<span class="nc" id="L647">						System.out.println(&quot;New client connected to host...&quot;);</span>
<span class="nc" id="L648">					}</span>
					else
					{
						
<span class="nc" id="L652">						creator.sendToAll(&quot;Message 100 This game has officially started. No other players may join at this time. Good luck.&quot;);</span>
<span class="nc" id="L653">						PrintWriter out = null;</span>
						try {
<span class="nc" id="L655">							out = new PrintWriter(newSock.getOutputStream());</span>
<span class="nc" id="L656">						} catch (IOException e) {</span>
							// TODO Auto-generated catch block
<span class="nc" id="L658">							e.printStackTrace();</span>
<span class="nc" id="L659">						}</span>
<span class="nc" id="L660">						ClientThread2  newClient = new ClientThread2(newSock, creator);</span>
<span class="nc" id="L661">						return;</span>
					}
					//newClient.sendMessage(&quot;Welcome to PuzzleMUD. You can only progress by solving the puzzles around you. The farther you progress, the more elaborate the puzzle, and the more significant the reward. You can perform several &lt;blue&gt;actions&lt;black&gt;.&quot;);
					//players.add(newClient);
				}
<span class="nc" id="L666">			}</span>
		}
	
	}


	public int maxPlayer() {
		
<span class="nc" id="L674">		return 8;</span>
	}

	public void processCommand(String incomming, ClientThread c) {
<span class="nc" id="L678">		Player p = c.getP();</span>
		//System.err.println(&quot;Got &quot;+incomming);
<span class="nc bnc" id="L680" title="All 4 branches missed.">		if(incomming == null || incomming.length() == 0)</span>
<span class="nc" id="L681">			return;</span>
<span class="nc bnc" id="L682" title="All 2 branches missed.">		if(incomming.startsWith(&quot;Place Food&quot;))</span>
		{
<span class="nc" id="L684">			Scanner S = new Scanner(incomming.substring(10, incomming.length()));</span>
<span class="nc" id="L685">			int size = S.nextInt();</span>
<span class="nc" id="L686">			int x = S.nextInt();</span>
<span class="nc" id="L687">			int y = S.nextInt();</span>

<span class="nc bnc" id="L689" title="All 2 branches missed.">			if(p.getPower() &gt; size)</span>
			{
<span class="nc" id="L691">				p.setPower(p.getPower()-size);</span>
<span class="nc" id="L692">				Entity E = new Entity(x,y,-1);</span>
<span class="nc" id="L693">				E.setSize(15);</span>
<span class="nc" id="L694">				entities.add(E);</span>
<span class="nc" id="L695">				sendToAll(&quot;Circles &quot;+E.getProperties().get(&quot;id&quot;).intValue()+&quot; &quot;+x+&quot; &quot;+y+&quot; &quot;+15+&quot; &quot;+getTeamColor(-1)+&quot;;&quot;);</span>
<span class="nc" id="L696">				addSound(&quot;plop2.wav &quot;+(int)x+&quot; &quot;+(int)y+&quot;;&quot;);</span>
<span class="nc" id="L697">			}</span>
			else
<span class="nc" id="L699">				c.sendMessage(&quot;Message 100 You don't have enough power to place that!&quot;);</span>
			
<span class="nc" id="L701">		}</span>
<span class="nc bnc" id="L702" title="All 2 branches missed.">		else if(incomming.startsWith(&quot;info&quot;) )</span>
		{
<span class="nc" id="L704">			Scanner S = new Scanner(incomming.substring(5, incomming.length()));</span>

<span class="nc" id="L706">			int x = S.nextInt();</span>
<span class="nc" id="L707">			int y = S.nextInt();</span>
<span class="nc" id="L708">			Entity Ent = null;</span>
<span class="nc bnc" id="L709" title="All 2 branches missed.">			for(int i = 0; i &lt; entities.size(); i++)</span>
			{
<span class="nc" id="L711">				Entity e = entities.get(i);</span>
<span class="nc bnc" id="L712" title="All 2 branches missed.">				if(e.dist(e.getX(),e.getY(),x,y) &lt;= e.getSize()/2)</span>
<span class="nc" id="L713">					Ent = e;</span>
			}
<span class="nc bnc" id="L715" title="All 2 branches missed.">			if(Ent != null)</span>
			{
<span class="nc" id="L717">				p.setObserving(Ent);</span>
			}
<span class="nc" id="L719">		}</span>
<span class="nc bnc" id="L720" title="All 2 branches missed.">		else if(incomming.startsWith(&quot;Center&quot;) )</span>
		{
<span class="nc" id="L722">			ArrayList&lt;Entity&gt; yours = new ArrayList&lt;Entity&gt;();</span>
<span class="nc bnc" id="L723" title="All 2 branches missed.">			for(int i = 0; i &lt; entities.size(); i++)</span>
			{
<span class="nc bnc" id="L725" title="All 2 branches missed.">				if(entities.get(i).getTeam() == players.indexOf(c))</span>
				{
<span class="nc" id="L727">					yours.add(entities.get(i));</span>
				}
			}
<span class="nc" id="L730">			Entity one = yours.get(gen.nextInt(yours.size()));</span>
<span class="nc" id="L731">			c.sendMessage(&quot;Center &quot;+(int)one.getX()+&quot; &quot;+(int)one.getY());</span>
<span class="nc" id="L732">			c.getP().setObserving(one);</span>
<span class="nc" id="L733">		}</span>
<span class="nc bnc" id="L734" title="All 2 branches missed.">		else if(incomming.startsWith(&quot;Place Pheremone&quot;) )</span>
		{
<span class="nc" id="L736">			Scanner S = new Scanner(incomming.substring(15, incomming.length()));</span>
<span class="nc" id="L737">			int Cost = S.nextInt();</span>
<span class="nc" id="L738">			int x = S.nextInt();</span>
<span class="nc" id="L739">			int y = S.nextInt();</span>
<span class="nc bnc" id="L740" title="All 2 branches missed.">			if(p.getPower() &gt;= Cost)</span>
			{
<span class="nc" id="L742">				p.setPower(p.getPower()-Cost);</span>
<span class="nc" id="L743">				Entity E = new Entity(x,y,-4);</span>
<span class="nc" id="L744">				E.setSize(10);</span>
<span class="nc" id="L745">				entities.add(E);</span>
<span class="nc" id="L746">				sendToAll(&quot;Circles &quot;+E.getProperties().get(&quot;id&quot;).intValue()+&quot; &quot;+x+&quot; &quot;+y+&quot; &quot;+10+&quot; &quot;+getTeamColor(-4)+&quot;;&quot;);</span>
<span class="nc" id="L747">				addSound(&quot;plop2.wav &quot;+(int)x+&quot; &quot;+(int)y+&quot;;&quot;);</span>
			}
<span class="nc" id="L749">		}</span>
<span class="nc bnc" id="L750" title="All 2 branches missed.">		else if(incomming.startsWith(&quot;Place Inorganic&quot;) )</span>
		{
<span class="nc" id="L752">			Scanner S = new Scanner(incomming.substring(15, incomming.length()));</span>
<span class="nc" id="L753">			int Cost = S.nextInt();</span>
<span class="nc" id="L754">			int x = S.nextInt();</span>
<span class="nc" id="L755">			int y = S.nextInt();</span>
<span class="nc bnc" id="L756" title="All 2 branches missed.">			if(p.getPower() &gt;= Cost)</span>
			{
<span class="nc" id="L758">				p.setPower(p.getPower()-Cost);</span>
<span class="nc" id="L759">				Entity E = new Entity(x,y,-2);</span>
<span class="nc" id="L760">				E.setSize(15);</span>
<span class="nc" id="L761">				entities.add(E);</span>
<span class="nc" id="L762">				sendToAll(&quot;Circles &quot;+E.getProperties().get(&quot;id&quot;).intValue()+&quot; &quot;+x+&quot; &quot;+y+&quot; &quot;+15+&quot; &quot;+getTeamColor(-2)+&quot;;&quot;);</span>
<span class="nc" id="L763">				addSound(&quot;splat.wav &quot;+(int)x+&quot; &quot;+(int)y+&quot;;&quot;);</span>
			}
<span class="nc" id="L765">		}</span>
<span class="nc bnc" id="L766" title="All 2 branches missed.">		else if(incomming.compareTo(&quot;quit&quot;) == 0)</span>
		{
<span class="nc bnc" id="L768" title="All 2 branches missed.">			for(int i = 0; i &lt; players.size(); i++)</span>
			{
<span class="nc bnc" id="L770" title="All 2 branches missed.">				if(players.get(i).getP().equals(p))</span>
				{
<span class="nc" id="L772">					System.err.println(&quot;Removing player &quot;+i);</span>


<span class="nc bnc" id="L775" title="All 2 branches missed.">					for(int j = 0; j &lt; entities.size();j++)</span>
					{
<span class="nc bnc" id="L777" title="All 2 branches missed.">						if(entities.get(j).getTeam() == i)</span>
<span class="nc" id="L778">							entities.remove(j);</span>
					}
<span class="nc bnc" id="L780" title="All 2 branches missed.">					for(int j = 0; j &lt; send.size(); j++)</span>
					{
<span class="nc bnc" id="L782" title="All 2 branches missed.">						if(send.get(j).getTeam() == i)</span>
<span class="nc" id="L783">							send.remove(j);</span>
					}
<span class="nc" id="L785">					players.get(i).getP().setNumCells(0);</span>
<span class="nc" id="L786">					players.get(i).disconnect();</span>
<span class="nc" id="L787">					players.remove(i);</span>
<span class="nc" id="L788">					sendToAll(&quot;Message 300 Player &quot;+i+&quot; has left the game!!!!&quot;);				}</span>
					break;
			}
		}
		else
		{
<span class="nc" id="L794">			StringTokenizer tokener = new StringTokenizer(incomming, &quot;,&quot;);</span>
<span class="nc" id="L795">			String trait = &quot;&quot;;</span>
<span class="nc" id="L796">			double value = 0;</span>
<span class="nc" id="L797">			int x = 0;</span>
<span class="nc" id="L798">			int y = 0;</span>
<span class="nc bnc" id="L799" title="All 2 branches missed.">			if(tokener.hasMoreTokens());</span>
<span class="nc" id="L800">			trait = tokener.nextToken();</span>
<span class="nc bnc" id="L801" title="All 2 branches missed.">			if(tokener.hasMoreTokens())</span>
			{
<span class="nc" id="L803">				Scanner S = new Scanner(tokener.nextToken());</span>
<span class="nc" id="L804">				value = S.nextInt();</span>
<span class="nc" id="L805">				x = S.nextInt();</span>
<span class="nc" id="L806">				y = S.nextInt();</span>
			}
<span class="nc" id="L808">			System.err.println(&quot;got &quot;+incomming);</span>
<span class="nc" id="L809">			Entity Ent = null;</span>
<span class="nc bnc" id="L810" title="All 2 branches missed.">			for(int i = 0; i &lt; entities.size(); i++)</span>
			{
<span class="nc" id="L812">				Entity e = entities.get(i);</span>
<span class="nc bnc" id="L813" title="All 2 branches missed.">				if(e.getTeam() == getPlayerIndex(c.getP()))</span>
				{
<span class="nc bnc" id="L815" title="All 2 branches missed.">					if(e.dist(e.getX(),e.getY(),x,y) &lt;= e.getSize()/2)</span>
<span class="nc" id="L816">						Ent = e;</span>
				}
			}
<span class="nc bnc" id="L819" title="All 2 branches missed.">			if(Ent != null)</span>
			{
<span class="nc bnc" id="L821" title="All 2 branches missed.">				if(Ent.getProperties().get(trait) == null)</span>
				{
<span class="nc bnc" id="L823" title="All 2 branches missed.">					if(c.getP().getPower() &gt;= value)</span>
					{
<span class="nc" id="L825">						Ent.getProperties().put(trait, 1.0);</span>
<span class="nc" id="L826">						c.getP().setPower(c.getP().getPower()-value);</span>
<span class="nc" id="L827">						c.sendMessage(&quot;Message 100 One of your cells has evolved &quot;+trait);</span>
<span class="nc" id="L828">						addSound(&quot;plop3.wav &quot;+(int)x+&quot; &quot;+(int)y+&quot;;&quot;);</span>
					}
					else
<span class="nc" id="L831">						c.sendMessage(&quot;Message 100 You need more evolution points to evolve that property in that cell&quot;);</span>
				}
				else
<span class="nc" id="L834">					c.sendMessage(&quot;Message 200000 That cell already has that property!&quot;);</span>
			}
			else
<span class="nc" id="L837">				c.sendMessage(&quot;Message 300000 You need to click on one of your cells for it to evolve this property&quot;);</span>
		}

		
<span class="nc" id="L841">	}</span>

	private int getPlayerIndex(Player p) {
<span class="nc bnc" id="L844" title="All 2 branches missed.">		for(int i = 0; i &lt; players.size(); i++)</span>
		{
<span class="nc bnc" id="L846" title="All 2 branches missed.">			if(players.get(i).getP().equals(p))</span>
<span class="nc" id="L847">				return i;</span>
		}
<span class="nc" id="L849">		return 0;</span>
	}
	public void sendToAll(String string) {
<span class="nc bnc" id="L852" title="All 2 branches missed.">		for(int i = 0; i &lt; players.size(); i++)</span>
		{
<span class="nc" id="L854">			players.get(i).sendMessage(string);</span>
		}
<span class="nc" id="L856">	}</span>

	public ArrayList&lt;ClientThread&gt; getPlayers() {
		// TODO Auto-generated method stub
<span class="nc" id="L860">		return players;</span>
	}

	public ArrayList&lt;Entity&gt; getEntities() {
<span class="nc" id="L864">		return entities;</span>
	}



	public int getTime() {
<span class="nc" id="L870">		return time;</span>
	}

	public void setTime(int time) {
<span class="nc" id="L874">		this.time = time;</span>
<span class="nc" id="L875">	}</span>

	public int getWorldSize() {
<span class="nc" id="L878">		return worldSize;</span>
	}

	public void setWorldSize(int worldSize) {
<span class="nc" id="L882">		this.worldSize = worldSize;</span>
<span class="nc" id="L883">	}</span>

	public ArrayList&lt;Entity&gt; getSend() {
<span class="nc" id="L886">		return send;</span>
	}
	
	
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>